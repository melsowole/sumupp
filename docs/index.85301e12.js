let e,i,n,r,o,a,l,c,u,h,d,f,p;function g(e){return e&&e.__esModule?e.default:e}function m(e,i,n,r){Object.defineProperty(e,i,{get:n,set:r,enumerable:!0,configurable:!0})}var v,b,y,w,k,E,I,_,S,T,C,x,A,O,L,R,N,P,D,M,B,F,U,j,V,H,z,q,K,W,$,G,Y,X,J,Q,Z,ee,et,ei,en,er,eo=globalThis,es={},ea={},el=eo.parcelRequireacac;null==el&&((el=function(e){if(e in es)return es[e].exports;if(e in ea){var i=ea[e];delete ea[e];var n={id:e,exports:{}};return es[e]=n,i.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,i){ea[e]=i},eo.parcelRequireacac=el);var ec=el.register;ec("ad2td",function(e,i){var n,r;n=window,r=function(e,i,n,r,o){var a=e.console,l=e.jQuery,c=function(){},u=0,h={};function d(e,i){var n=r.getQueryElement(e);if(!n){a&&a.error("Bad element for "+this.constructor.namespace+": "+(n||e));return}this.element=n,l&&(this.$element=l(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(i);var o=++u;this.element.outlayerGUID=o,h[o]=this,this._create(),this._getOption("initLayout")&&this.layout()}d.namespace="outlayer",d.Item=o,d.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var f=d.prototype;function p(e){function i(){e.apply(this,arguments)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i}r.extend(f,i.prototype),f.option=function(e){r.extend(this.options,e)},f._getOption=function(e){var i=this.constructor.compatOptions[e];return i&&void 0!==this.options[i]?this.options[i]:this.options[e]},d.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},f._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),r.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},f.reloadItems=function(){this.items=this._itemize(this.element.children)},f._itemize=function(e){for(var i=this._filterFindItemElements(e),n=this.constructor.Item,r=[],o=0;o<i.length;o++){var a=new n(i[o],this);r.push(a)}return r},f._filterFindItemElements=function(e){return r.filterFindElements(e,this.options.itemSelector)},f.getItemElements=function(){return this.items.map(function(e){return e.element})},f.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),i=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,i),this._isLayoutInited=!0},f._init=f.layout,f._resetLayout=function(){this.getSize()},f.getSize=function(){this.size=n(this.element)},f._getMeasurement=function(e,i){var r,o=this.options[e];o?("string"==typeof o?r=this.element.querySelector(o):o instanceof HTMLElement&&(r=o),this[e]=r?n(r)[i]:o):this[e]=0},f.layoutItems=function(e,i){e=this._getItemsForLayout(e),this._layoutItems(e,i),this._postLayout()},f._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},f._layoutItems=function(e,i){if(this._emitCompleteOnItems("layout",e),e&&e.length){var n=[];e.forEach(function(e){var r=this._getItemLayoutPosition(e);r.item=e,r.isInstant=i||e.isLayoutInstant,n.push(r)},this),this._processLayoutQueue(n)}},f._getItemLayoutPosition=function(){return{x:0,y:0}},f._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,i){this._positionItem(e.item,e.x,e.y,e.isInstant,i)},this)},f.updateStagger=function(){var e=this.options.stagger;if(null==e){this.stagger=0;return}return this.stagger=function(e){if("number"==typeof e)return e;var i=e.match(/(^\d*\.?\d*)(\w*)/),n=i&&i[1],r=i&&i[2];return n.length?(n=parseFloat(n))*(g[r]||1):0}(e),this.stagger},f._positionItem=function(e,i,n,r,o){r?e.goTo(i,n):(e.stagger(o*this.stagger),e.moveTo(i,n))},f._postLayout=function(){this.resizeContainer()},f.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},f._getContainerSize=c,f._setContainerMeasure=function(e,i){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=i?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[i?"width":"height"]=e+"px"}},f._emitCompleteOnItems=function(e,i){var n=this;function r(){n.dispatchEvent(e+"Complete",null,[i])}var o=i.length;if(!i||!o){r();return}var a=0;function l(){++a==o&&r()}i.forEach(function(i){i.once(e,l)})},f.dispatchEvent=function(e,i,n){var r=i?[i].concat(n):n;if(this.emitEvent(e,r),l){if(this.$element=this.$element||l(this.element),i){var o=l.Event(i);o.type=e,this.$element.trigger(o,n)}else this.$element.trigger(e,n)}},f.ignore=function(e){var i=this.getItem(e);i&&(i.isIgnored=!0)},f.unignore=function(e){var i=this.getItem(e);i&&delete i.isIgnored},f.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},f.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){r.removeFrom(this.stamps,e),this.unignore(e)},this)},f._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r.makeArray(e)},f._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},f._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),i=this.size;this._boundingRect={left:e.left+i.paddingLeft+i.borderLeftWidth,top:e.top+i.paddingTop+i.borderTopWidth,right:e.right-(i.paddingRight+i.borderRightWidth),bottom:e.bottom-(i.paddingBottom+i.borderBottomWidth)}},f._manageStamp=c,f._getElementOffset=function(e){var i=e.getBoundingClientRect(),r=this._boundingRect,o=n(e);return{left:i.left-r.left-o.marginLeft,top:i.top-r.top-o.marginTop,right:r.right-i.right-o.marginRight,bottom:r.bottom-i.bottom-o.marginBottom}},f.handleEvent=r.handleEvent,f.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},f.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},f.onresize=function(){this.resize()},r.debounceMethod(d,"onresize",100),f.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},f.needsResizeLayout=function(){var e=n(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},f.addItems=function(e){var i=this._itemize(e);return i.length&&(this.items=this.items.concat(i)),i},f.appended=function(e){var i=this.addItems(e);i.length&&(this.layoutItems(i,!0),this.reveal(i))},f.prepended=function(e){var i=this._itemize(e);if(i.length){var n=this.items.slice(0);this.items=i.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(i,!0),this.reveal(i),this.layoutItems(n)}},f.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),e&&e.length){var i=this.updateStagger();e.forEach(function(e,n){e.stagger(n*i),e.reveal()})}},f.hide=function(e){if(this._emitCompleteOnItems("hide",e),e&&e.length){var i=this.updateStagger();e.forEach(function(e,n){e.stagger(n*i),e.hide()})}},f.revealItemElements=function(e){var i=this.getItems(e);this.reveal(i)},f.hideItemElements=function(e){var i=this.getItems(e);this.hide(i)},f.getItem=function(e){for(var i=0;i<this.items.length;i++){var n=this.items[i];if(n.element==e)return n}},f.getItems=function(e){e=r.makeArray(e);var i=[];return e.forEach(function(e){var n=this.getItem(e);n&&i.push(n)},this),i},f.remove=function(e){var i=this.getItems(e);this._emitCompleteOnItems("remove",i),i&&i.length&&i.forEach(function(e){e.remove(),r.removeFrom(this.items,e)},this)},f.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var i=this.element.outlayerGUID;delete h[i],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},d.data=function(e){var i=(e=r.getQueryElement(e))&&e.outlayerGUID;return i&&h[i]},d.create=function(e,i){var n=p(d);return n.defaults=r.extend({},d.defaults),r.extend(n.defaults,i),n.compatOptions=r.extend({},d.compatOptions),n.namespace=e,n.data=d.data,n.Item=p(o),r.htmlInit(n,e),l&&l.bridget&&l.bridget(e,n),n};var g={ms:1,s:1e3};return d.Item=o,d},"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,i,o,a){return r(n,e,i,o,a)}):e.exports?e.exports=r(n,el("Vqjah"),el("g64Da"),el("9VjL6"),el("9OxT7")):n.Outlayer=r(n,n.EvEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)}),ec("Vqjah",function(e,i){var n,r;n="undefined"!=typeof window?window:e.exports,r=function(){function e(){}var i=e.prototype;return i.on=function(e,i){if(e&&i){var n=this._events=this._events||{},r=n[e]=n[e]||[];return -1==r.indexOf(i)&&r.push(i),this}},i.once=function(e,i){if(e&&i){this.on(e,i);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[i]=!0,this}},i.off=function(e,i){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(i);return -1!=r&&n.splice(r,1),this}},i.emitEvent=function(e,i){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),i=i||[];for(var r=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var a=n[o];r&&r[a]&&(this.off(e,a),delete r[a]),a.apply(this,i)}return this}},i.allOff=function(){delete this._events,delete this._onceEvents},e},"function"==typeof define&&define.amd?define(r):e.exports?e.exports=r():n.EvEmitter=r()}),ec("g64Da",function(e,i){var n,r;n=window,r=function(){function e(e){var i=parseFloat(e);return -1==e.indexOf("%")&&!isNaN(i)&&i}var i,n="undefined"==typeof console?function(){}:function(e){console.error(e)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],o=r.length;function a(e){var i=getComputedStyle(e);return i||n("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),i}var l=!1;return function n(c){if(function(){if(!l){l=!0;var r=document.createElement("div");r.style.width="200px",r.style.padding="1px 2px 3px 4px",r.style.borderStyle="solid",r.style.borderWidth="1px 2px 3px 4px",r.style.boxSizing="border-box";var o=document.body||document.documentElement;o.appendChild(r),i=200==Math.round(e(a(r).width)),n.isBoxSizeOuter=i,o.removeChild(r)}}(),"string"==typeof c&&(c=document.querySelector(c)),c&&"object"==typeof c&&c.nodeType){var u=a(c);if("none"==u.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;i<o;i++)e[r[i]]=0;return e}();var h={};h.width=c.offsetWidth,h.height=c.offsetHeight;for(var d=h.isBorderBox="border-box"==u.boxSizing,f=0;f<o;f++){var p=r[f],g=parseFloat(u[p]);h[p]=isNaN(g)?0:g}var m=h.paddingLeft+h.paddingRight,v=h.paddingTop+h.paddingBottom,b=h.marginLeft+h.marginRight,y=h.marginTop+h.marginBottom,w=h.borderLeftWidth+h.borderRightWidth,k=h.borderTopWidth+h.borderBottomWidth,E=d&&i,I=e(u.width);!1!==I&&(h.width=I+(E?0:m+w));var _=e(u.height);return!1!==_&&(h.height=_+(E?0:v+k)),h.innerWidth=h.width-(m+w),h.innerHeight=h.height-(v+k),h.outerWidth=h.width+b,h.outerHeight=h.height+y,h}}},"function"==typeof define&&define.amd?define(r):e.exports?e.exports=r():n.getSize=r()}),ec("9VjL6",function(e,i){var n,r;n=window,r=function(e,i){var n={};n.extend=function(e,i){for(var n in i)e[n]=i[n];return e},n.modulo=function(e,i){return(e%i+i)%i};var r=Array.prototype.slice;n.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?r.call(e):[e]},n.removeFrom=function(e,i){var n=e.indexOf(i);-1!=n&&e.splice(n,1)},n.getParent=function(e,n){for(;e.parentNode&&e!=document.body;)if(i(e=e.parentNode,n))return e},n.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},n.handleEvent=function(e){var i="on"+e.type;this[i]&&this[i](e)},n.filterFindElements=function(e,r){e=n.makeArray(e);var o=[];return e.forEach(function(e){if(e instanceof HTMLElement){if(!r){o.push(e);return}i(e,r)&&o.push(e);for(var n=e.querySelectorAll(r),a=0;a<n.length;a++)o.push(n[a])}}),o},n.debounceMethod=function(e,i,n){n=n||100;var r=e.prototype[i],o=i+"Timeout";e.prototype[i]=function(){clearTimeout(this[o]);var e=arguments,i=this;this[o]=setTimeout(function(){r.apply(i,e),delete i[o]},n)}},n.docReady=function(e){var i=document.readyState;"complete"==i||"interactive"==i?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},n.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,i,n){return i+"-"+n}).toLowerCase()};var o=e.console;return n.htmlInit=function(i,r){n.docReady(function(){var a=n.toDashed(r),l="data-"+a,c=document.querySelectorAll("["+l+"]"),u=document.querySelectorAll(".js-"+a),h=n.makeArray(c).concat(n.makeArray(u)),d=l+"-options",f=e.jQuery;h.forEach(function(e){var n,a=e.getAttribute(l)||e.getAttribute(d);try{n=a&&JSON.parse(a)}catch(i){o&&o.error("Error parsing "+l+" on "+e.className+": "+i);return}var c=new i(e,n);f&&f.data(e,r,c)})})},n},"function"==typeof define&&define.amd?define(["desandro-matches-selector/matches-selector"],function(e){return r(n,e)}):e.exports?e.exports=r(n,el("hfvjA")):n.fizzyUIUtils=r(n,n.matchesSelector)}),ec("hfvjA",function(e,i){var n,r;n=window,r=function(){var e=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var i=["webkit","moz","ms","o"],n=0;n<i.length;n++){var r=i[n]+"MatchesSelector";if(e[r])return r}}();return function(i,n){return i[e](n)}},"function"==typeof define&&define.amd?define(r):e.exports?e.exports=r():n.matchesSelector=r()}),ec("9OxT7",function(e,i){var n,r;n=window,r=function(e,i){var n=document.documentElement.style,r="string"==typeof n.transition?"transition":"WebkitTransition",o="string"==typeof n.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],l={transform:o,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"};function c(e,i){e&&(this.element=e,this.layout=i,this.position={x:0,y:0},this._create())}var u=c.prototype=Object.create(e.prototype);u.constructor=c,u._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.handleEvent=function(e){var i="on"+e.type;this[i]&&this[i](e)},u.getSize=function(){this.size=i(this.element)},u.css=function(e){var i=this.element.style;for(var n in e)i[l[n]||n]=e[n]},u.getPosition=function(){var e=getComputedStyle(this.element),i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=e[i?"left":"right"],o=e[n?"top":"bottom"],a=parseFloat(r),l=parseFloat(o),c=this.layout.size;-1!=r.indexOf("%")&&(a=a/100*c.width),-1!=o.indexOf("%")&&(l=l/100*c.height),a=isNaN(a)?0:a,l=isNaN(l)?0:l,a-=i?c.paddingLeft:c.paddingRight,l-=n?c.paddingTop:c.paddingBottom,this.position.x=a,this.position.y=l},u.layoutPosition=function(){var e=this.layout.size,i={},n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop"),o=this.position.x+e[n?"paddingLeft":"paddingRight"];i[n?"left":"right"]=this.getXValue(o),i[n?"right":"left"]="";var a=this.position.y+e[r?"paddingTop":"paddingBottom"];i[r?"top":"bottom"]=this.getYValue(a),i[r?"bottom":"top"]="",this.css(i),this.emitEvent("layout",[this])},u.getXValue=function(e){var i=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!i?e/this.layout.size.width*100+"%":e+"px"},u.getYValue=function(e){var i=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&i?e/this.layout.size.height*100+"%":e+"px"},u._transitionTo=function(e,i){this.getPosition();var n=this.position.x,r=this.position.y,o=e==this.position.x&&i==this.position.y;if(this.setPosition(e,i),o&&!this.isTransitioning){this.layoutPosition();return}var a={};a.transform=this.getTranslate(e-n,i-r),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},u.getTranslate=function(e,i){var n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop");return"translate3d("+(e=n?e:-e)+"px, "+(i=r?i:-i)+"px, 0)"},u.goTo=function(e,i){this.setPosition(e,i),this.layoutPosition()},u.moveTo=u._transitionTo,u.setPosition=function(e,i){this.position.x=parseFloat(e),this.position.y=parseFloat(i)},u._nonTransition=function(e){for(var i in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[i].call(this)},u.transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var i=this._transn;for(var n in e.onTransitionEnd)i.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)i.ingProperties[n]=!0,e.isCleaning&&(i.clean[n]=!0);e.from&&(this.css(e.from),this.element.offsetHeight),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var h="opacity,"+o.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});u.enableTransition=function(){if(!this.isTransitioning){var e=this.layout.options.transitionDuration;e="number"==typeof e?e+"ms":e,this.css({transitionProperty:h,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1)}},u.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},u.onotransitionend=function(e){this.ontransitionend(e)};var d={"-webkit-transform":"transform"};u.ontransitionend=function(e){if(e.target===this.element){var i=this._transn,n=d[e.propertyName]||e.propertyName;delete i.ingProperties[n],function(e){for(var i in e)return!1;return!0}(i.ingProperties)&&this.disableTransition(),n in i.clean&&(this.element.style[e.propertyName]="",delete i.clean[n]),n in i.onEnd&&(i.onEnd[n].call(this),delete i.onEnd[n]),this.emitEvent("transitionEnd",[this])}},u.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},u._removeStyles=function(e){var i={};for(var n in e)i[n]="";this.css(i)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return u.removeTransitionStyles=function(){this.css(f)},u.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},u.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},u.remove=function(){if(!r||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},u.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,i={};i[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:i})},u.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},u.getHideRevealTransitionEndProperty=function(e){var i=this.layout.options[e];if(i.opacity)return"opacity";for(var n in i)return n},u.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,i={};i[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:i})},u.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},u.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},c},"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size"],r):e.exports?e.exports=r(el("Vqjah"),el("g64Da")):(n.Outlayer={},n.Outlayer.Item=r(n.EvEmitter,n.getSize))});var eu={};m(eu,"_DEFAULT_ENTRY_NAME",()=>tS),m(eu,"_apps",()=>tC),m(eu,"_serverApps",()=>tx),m(eu,"_components",()=>tA),m(eu,"_addComponent",()=>tO),m(eu,"_addOrOverwriteComponent",()=>tL),m(eu,"_registerComponent",()=>tR),m(eu,"_getProvider",()=>tN),m(eu,"_removeServiceInstance",()=>tP),m(eu,"_isFirebaseApp",()=>tD),m(eu,"_isFirebaseServerApp",()=>tM),m(eu,"_clearComponents",()=>tB),m(eu,"registerVersion",()=>t$),m(eu,"deleteApp",()=>tW),m(eu,"SDK_VERSION",()=>tV),m(eu,"initializeApp",()=>tH),m(eu,"initializeServerApp",()=>tz),m(eu,"getApp",()=>tq),m(eu,"getApps",()=>tK),m(eu,"onLog",()=>tG),m(eu,"setLogLevel",()=>tY),m(eu,"FirebaseError",()=>e$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eh={},ed=eh={};function ef(){throw Error("setTimeout has not been defined")}function ep(){throw Error("clearTimeout has not been defined")}function eg(e){if(D===setTimeout)return setTimeout(e,0);if((D===ef||!D)&&setTimeout)return D=setTimeout,setTimeout(e,0);try{return D(e,0)}catch(i){try{return D.call(null,e,0)}catch(i){return D.call(this,e,0)}}}!function(){try{D="function"==typeof setTimeout?setTimeout:ef}catch(e){D=ef}try{M="function"==typeof clearTimeout?clearTimeout:ep}catch(e){M=ep}}();var em=[],ev=!1,eb=-1;function ey(){ev&&B&&(ev=!1,B.length?em=B.concat(em):eb=-1,em.length&&ew())}function ew(){if(!ev){var e=eg(ey);ev=!0;for(var i=em.length;i;){for(B=em,em=[];++eb<i;)B&&B[eb].run();eb=-1,i=em.length}B=null,ev=!1,function(e){if(M===clearTimeout)return clearTimeout(e);if((M===ep||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(e);try{M(e)}catch(i){try{return M.call(null,e)}catch(i){return M.call(this,e)}}}(e)}}function ek(e,i){this.fun=e,this.array=i}function eE(){}ed.nextTick=function(e){var i=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];em.push(new ek(e,i)),1!==em.length||ev||eg(ew)},ek.prototype.run=function(){this.fun.apply(null,this.array)},ed.title="browser",ed.browser=!0,ed.env={},ed.argv=[],ed.version="",ed.versions={},ed.on=eE,ed.addListener=eE,ed.once=eE,ed.off=eE,ed.removeListener=eE,ed.removeAllListeners=eE,ed.emit=eE,ed.prependListener=eE,ed.prependOnceListener=eE,ed.listeners=function(e){return[]},ed.binding=function(e){throw Error("process.binding is not supported")},ed.cwd=function(){return"/"},ed.chdir=function(e){throw Error("process.chdir is not supported")},ed.umask=function(){return 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=function(e){let i=[],n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?i[n++]=o:(o<2048?i[n++]=o>>6|192:((64512&o)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),i[n++]=o>>18|240,i[n++]=o>>12&63|128):i[n++]=o>>12|224,i[n++]=o>>6&63|128),i[n++]=63&o|128)}return i},e_=function(e){let i=[],n=0,r=0;for(;n<e.length;){let o=e[n++];if(o<128)i[r++]=String.fromCharCode(o);else if(o>191&&o<224){let a=e[n++];i[r++]=String.fromCharCode((31&o)<<6|63&a)}else if(o>239&&o<365){let a=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;i[r++]=String.fromCharCode(55296+(a>>10)),i[r++]=String.fromCharCode(56320+(1023&a))}else{let a=e[n++],l=e[n++];i[r++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&l)}}return i.join("")},eS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,i){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=i?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],a=i+1<e.length,l=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,h=o>>2,d=(3&o)<<4|l>>4,f=(15&l)<<2|u>>6,p=63&u;c||(p=64,a||(f=64)),r.push(n[h],n[d],n[f],n[p])}return r.join("")},encodeString(e,i){return this.HAS_NATIVE_SUPPORT&&!i?btoa(e):this.encodeByteArray(eI(e),i)},decodeString(e,i){return this.HAS_NATIVE_SUPPORT&&!i?atob(e):e_(this.decodeStringToByteArray(e,i))},decodeStringToByteArray(e,i){this.init_();let n=i?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,l=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==l||null==c)throw new eT;let u=o<<2|a>>4;if(r.push(u),64!==l){let e=a<<4&240|l>>2;if(r.push(e),64!==c){let e=l<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class eT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eC=function(e){let i=eI(e);return eS.encodeByteArray(i,!0)},ex=function(e){return eC(e).replace(/\./g,"")},eA=function(e){try{return eS.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eO(e,i){if(!(i instanceof Object))return i;switch(i.constructor){case Date:return new Date(i.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return i}for(let n in i)i.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=eO(e[n],i[n]));return e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==eo)return eo;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,eR=()=>{if(void 0===eh||void 0===eh.env)return;let e=void 0;if(e)return JSON.parse(e)},eN=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let i=e&&eA(e[1]);return i&&JSON.parse(i)},eP=()=>{try{return eL()||eR()||eN()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},eD=e=>{var i,n;return null===(n=null===(i=eP())||void 0===i?void 0:i.emulatorHosts)||void 0===n?void 0:n[e]},eM=e=>{let i=eD(e);if(!i)return;let n=i.lastIndexOf(":");if(n<=0||n+1===i.length)throw Error(`Invalid host ${i} with no separate hostname and port!`);let r=parseInt(i.substring(n+1),10);return"["===i[0]?[i.substring(1,n-1),r]:[i.substring(0,n),r]},eB=()=>{var e;return null===(e=eP())||void 0===e?void 0:e.config},eF=e=>{var i;return null===(i=eP())||void 0===i?void 0:i[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,n)=>{i?this.reject(i):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(i):e(i,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function eV(){var e;let i=null===(e=eP())||void 0===e?void 0:e.forceEnvironment;if("node"===i)return!0;if("browser"===i)return!1;try{return"[object process]"===Object.prototype.toString.call(eo.process)}catch(e){return!1}}function eH(){return"object"==typeof self&&self.self===self}function ez(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function eq(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function eK(){let e=ej();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function eW(){try{return"object"==typeof indexedDB}catch(e){return!1}}class e$ extends Error{constructor(e,i,n){super(i),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,e$.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eG.prototype.create)}}class eG{constructor(e,i,n){this.service=e,this.serviceName=i,this.errors=n}create(e,...i){let n=i[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?o.replace(eY,(e,i)=>{let r=n[i];return null!=r?String(r):`<${i}?>`}):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new e$(r,l,n)}}const eY=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eX(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function eJ(e,i){if(e===i)return!0;let n=Object.keys(e),r=Object.keys(i);for(let o of n){if(!r.includes(o))return!1;let n=e[o],a=i[o];if(eQ(n)&&eQ(a)){if(!eJ(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function eQ(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(e){let i=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{i.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):i.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return i.length?"&"+i.join("&"):""}function e0(e){let i={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[n,r]=e.split("=");i[decodeURIComponent(n)]=decodeURIComponent(r)}}),i}function e1(e){let i=e.indexOf("?");if(!i)return"";let n=e.indexOf("#",i);return e.substring(i,n>0?n:void 0)}function e2(e,i){let n=new e4(e,i);return n.subscribe.bind(n)}class e4{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,n){let r;if(void 0===e&&void 0===i&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,i){if("object"!=typeof e||null===e)return!1;for(let n of i)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:i,complete:n}:e).next&&(r.next=e5),void 0===r.error&&(r.error=e5),void 0===r.complete&&(r.complete=e5);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{i(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(e){return e&&e._delegate?e._delegate:e}class e3{constructor(e,i,n){this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){let e=new eU;if(this.instancesDeferred.set(i,e),this.isInitialized(i)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:i});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(i=null==e?void 0:e.optional)&&void 0!==i&&i;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:e9})}catch(e){}for(let[e,i]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});i.resolve(e)}catch(e){}}}}clearInstance(e=e9){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=e9){return this.instances.has(e)}getOptions(e=e9){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:i={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:i});for(let[e,i]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&i.resolve(r);return r}onInit(e,i){var n;let r=this.normalizeInstanceIdentifier(i),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){let n=this.onInitCallbacks.get(i);if(n)for(let r of n)try{r(e,i)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===e9?void 0:e,options:i}),this.instances.set(e,n),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=e9){return this.component?this.component.multipleInstances?e:e9:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let i=this.getProvider(e.name);if(i.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let i=new e8(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=[];(v=F={})[v.DEBUG=0]="DEBUG",v[v.VERBOSE=1]="VERBOSE",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.SILENT=5]="SILENT";const tt={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},ti=F.INFO,tn={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},tr=(e,i,...n)=>{if(i<e.logLevel)return;let r=new Date().toISOString(),o=tn[i];if(o)console[o](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${i})`)};class to{constructor(e){this.name=e,this._logLevel=ti,this._logHandler=tr,this._userLogHandler=null,te.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?tt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}}const ts=(e,i)=>i.some(i=>e instanceof i),ta=new WeakMap,tl=new WeakMap,tc=new WeakMap,tu=new WeakMap,th=new WeakMap;let td={get(e,i,n){if(e instanceof IDBTransaction){if("done"===i)return tl.get(e);if("objectStoreNames"===i)return e.objectStoreNames||tc.get(e);if("store"===i)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tf(e[i])},set:(e,i,n)=>(e[i]=n,!0),has:(e,i)=>e instanceof IDBTransaction&&("done"===i||"store"===i)||i in e};function tf(n){var r;if(n instanceof IDBRequest)return function(e){let i=new Promise((i,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{i(tf(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)});return i.then(i=>{i instanceof IDBCursor&&ta.set(i,e)}).catch(()=>{}),th.set(i,e),i}(n);if(tu.has(n))return tu.get(n);let o="function"==typeof(r=n)?r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...e){return r.apply(tp(this),e),tf(ta.get(this))}:function(...e){return tf(r.apply(tp(this),e))}:function(e,...i){let n=r.call(tp(this),e,...i);return tc.set(n,e.sort?e.sort():[e]),tf(n)}:(r instanceof IDBTransaction&&function(e){if(tl.has(e))return;let i=new Promise((i,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{i(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});tl.set(e,i)}(r),ts(r,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,td):r;return o!==n&&(tu.set(n,o),th.set(o,n)),o}const tp=e=>th.get(e);function tg(e,i,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){let l=indexedDB.open(e,i),c=tf(l);return r&&l.addEventListener("upgradeneeded",e=>{r(tf(l.result),e.oldVersion,e.newVersion,tf(l.transaction),e)}),n&&l.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),c.then(e=>{a&&e.addEventListener("close",()=>a()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),c}function tm(e,{blocked:i}={}){let n=indexedDB.deleteDatabase(e);return i&&n.addEventListener("blocked",e=>i(e.oldVersion,e)),tf(n).then(()=>void 0)}const tv=["get","getKey","getAll","getAllKeys","count"],tb=["put","add","delete","clear"],ty=new Map;function tw(e,i){if(!(e instanceof IDBDatabase&&!(i in e)&&"string"==typeof i))return;if(ty.get(i))return ty.get(i);let n=i.replace(/FromIndex$/,""),r=i!==n,o=tb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||tv.includes(n)))return;let a=async function(e,...i){let a=this.transaction(e,o?"readwrite":"readonly"),l=a.store;return r&&(l=l.index(i.shift())),(await Promise.all([l[n](...i),o&&a.done]))[0]};return ty.set(i,a),a}td={...p=td,get:(e,i,n)=>tw(e,i)||p.get(e,i,n),has:(e,i)=>!!tw(e,i)||p.has(e,i)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let i=e.getComponent();return(null==i?void 0:i.type)==="VERSION"}(e))return null;{let i=e.getImmediate();return`${i.library}/${i.version}`}}).filter(e=>e).join(" ")}}const tE="@firebase/app",tI="0.10.5",t_=new to("@firebase/app"),tS="[DEFAULT]",tT={[tE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},tC=new Map,tx=new Map,tA=new Map;function tO(e,i){try{e.container.addComponent(i)}catch(n){t_.debug(`Component ${i.name} failed to register with FirebaseApp ${e.name}`,n)}}function tL(e,i){e.container.addOrOverwriteComponent(i)}function tR(e){let i=e.name;if(tA.has(i))return t_.debug(`There were multiple attempts to register component ${i}.`),!1;for(let n of(tA.set(i,e),tC.values()))tO(n,e);for(let i of tx.values())tO(i,e);return!0}function tN(e,i){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(i)}function tP(e,i,n=tS){tN(e,i).clearInstance(n)}function tD(e){return void 0!==e.options}function tM(e){return void 0!==e.settings}function tB(){tA.clear()}const tF=new eG("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,i,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new e3("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tF.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends tU{constructor(e,i,n,r){let o=void 0!==i.automaticDataCollectionEnabled&&i.automaticDataCollectionEnabled,a={name:n,automaticDataCollectionEnabled:o};void 0!==e.apiKey?super(e,a,r):super(e.options,a,r),this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},i),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,i.releaseOnDeref=void 0,t$(tE,tI,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tW(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw tF.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="10.12.2";function tH(e,i={}){let n=e;"object"!=typeof i&&(i={name:i});let r=Object.assign({name:tS,automaticDataCollectionEnabled:!1},i),o=r.name;if("string"!=typeof o||!o)throw tF.create("bad-app-name",{appName:String(o)});if(n||(n=eB()),!n)throw tF.create("no-options");let a=tC.get(o);if(a){if(eJ(n,a.options)&&eJ(r,a.config))return a;throw tF.create("duplicate-app",{appName:o})}let l=new e7(o);for(let e of tA.values())l.addComponent(e);let c=new tU(n,r,l);return tC.set(o,c),c}function tz(e,i){let n;if(eH())throw tF.create("invalid-server-app-environment");void 0===i.automaticDataCollectionEnabled&&(i.automaticDataCollectionEnabled=!1),n=tD(e)?e.options:e;let r=Object.assign(Object.assign({},i),n);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==i.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw tF.create("finalization-registry-not-supported",{});let o=""+[...JSON.stringify(r)].reduce((e,i)=>Math.imul(31,e)+i.charCodeAt(0)|0,0),a=tx.get(o);if(a)return a.incRefCount(i.releaseOnDeref),a;let l=new e7(o);for(let e of tA.values())l.addComponent(e);let c=new tj(n,i,o,l);return tx.set(o,c),c}function tq(e=tS){let i=tC.get(e);if(!i&&e===tS&&eB())return tH();if(!i)throw tF.create("no-app",{appName:e});return i}function tK(){return Array.from(tC.values())}async function tW(e){let i=!1,n=e.name;tC.has(n)?(i=!0,tC.delete(n)):tx.has(n)&&0>=e.decRefCount()&&(tx.delete(n),i=!0),i&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function t$(e,i,n){var r;let o=null!==(r=tT[e])&&void 0!==r?r:e;n&&(o+=`-${n}`);let a=o.match(/\s|\//),l=i.match(/\s|\//);if(a||l){let e=[`Unable to register library "${o}" with version "${i}":`];a&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&l&&e.push("and"),l&&e.push(`version name "${i}" contains illegal characters (whitespace or "/")`),t_.warn(e.join(" "));return}tR(new e3(`${o}-version`,()=>({library:o,version:i}),"VERSION"))}function tG(e,i){if(null!==e&&"function"!=typeof e)throw tF.create("invalid-log-argument");!function(e,i){for(let n of te){let r=null;i&&i.level&&(r=tt[i.level]),null===e?n.userLogHandler=null:n.userLogHandler=(i,n,...o)=>{let a=o.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:i.logLevel)&&e({level:F[n].toLowerCase(),message:a,args:o,type:i.name})}}}(e,i)}function tY(e){te.forEach(i=>{i.setLogLevel(e)})}const tX="firebase-heartbeat-store";let tJ=null;function tQ(){return tJ||(tJ=tg("firebase-heartbeat-database",1,{upgrade:(e,i)=>{if(0===i)try{e.createObjectStore(tX)}catch(e){console.warn(e)}}}).catch(e=>{throw tF.create("idb-open",{originalErrorMessage:e.message})})),tJ}async function tZ(e){try{let i=(await tQ()).transaction(tX),n=await i.objectStore(tX).get(t1(e));return await i.done,n}catch(e){if(e instanceof e$)t_.warn(e.message);else{let i=tF.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});t_.warn(i.message)}}}async function t0(e,i){try{let n=(await tQ()).transaction(tX,"readwrite"),r=n.objectStore(tX);await r.put(i,t1(e)),await n.done}catch(e){if(e instanceof e$)t_.warn(e.message);else{let i=tF.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});t_.warn(i.message)}}}function t1(e){return`${e.name}!${e.options.appId}`}class t2{constructor(e){this.container=e,this._heartbeatsCache=null;let i=this.container.getProvider("app").getImmediate();this._storage=new t5(i),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,i;let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=t4();return(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(i=this._heartbeatsCache)||void 0===i?void 0:i.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let i=new Date(e.date).valueOf();return Date.now()-i<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let i=t4(),{heartbeatsToSend:n,unsentEntries:r}=function(e,i=1024){let n=[],r=e.slice();for(let o of e){let e=n.find(e=>e.agent===o.agent);if(e){if(e.dates.push(o.date),t6(n)>i){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),t6(n)>i){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=ex(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=i,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function t4(){return new Date().toISOString().substring(0,10)}class t5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!eW()&&new Promise((e,i)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;i((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){i(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await tZ(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){let n=await this.read();return t0(this.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var i;if(await this._canUseIndexedDBPromise){let n=await this.read();return t0(this.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function t6(e){return ex(JSON.stringify({version:2,heartbeats:e})).length}tR(new e3("platform-logger",e=>new tk(e),"PRIVATE")),tR(new e3("heartbeat",e=>new t2(e),"PRIVATE")),t$(tE,tI,""),t$(tE,tI,"esm2017"),t$("fire-js",""),t$("firebase","10.12.2","app");var t3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==eo?eo:"undefined"!=typeof self?self:{},t9={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(e,i,n){n||(n=0);var r=Array(16);if("string"==typeof i)for(var o=0;16>o;++o)r[o]=i.charCodeAt(n++)|i.charCodeAt(n++)<<8|i.charCodeAt(n++)<<16|i.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=i[n++]|i[n++]<<8|i[n++]<<16|i[n++]<<24;i=e.g[0],n=e.g[1],o=e.g[2];var a=e.g[3],l=i+(a^n&(o^a))+r[0]+3614090360&4294967295;l=a+(o^(i=n+(l<<7&4294967295|l>>>25))&(n^o))+r[1]+3905402710&4294967295,l=o+(n^(a=i+(l<<12&4294967295|l>>>20))&(i^n))+r[2]+606105819&4294967295,l=n+(i^(o=a+(l<<17&4294967295|l>>>15))&(a^i))+r[3]+3250441966&4294967295,l=i+(a^(n=o+(l<<22&4294967295|l>>>10))&(o^a))+r[4]+4118548399&4294967295,l=a+(o^(i=n+(l<<7&4294967295|l>>>25))&(n^o))+r[5]+1200080426&4294967295,l=o+(n^(a=i+(l<<12&4294967295|l>>>20))&(i^n))+r[6]+2821735955&4294967295,l=n+(i^(o=a+(l<<17&4294967295|l>>>15))&(a^i))+r[7]+4249261313&4294967295,l=i+(a^(n=o+(l<<22&4294967295|l>>>10))&(o^a))+r[8]+1770035416&4294967295,l=a+(o^(i=n+(l<<7&4294967295|l>>>25))&(n^o))+r[9]+2336552879&4294967295,l=o+(n^(a=i+(l<<12&4294967295|l>>>20))&(i^n))+r[10]+4294925233&4294967295,l=n+(i^(o=a+(l<<17&4294967295|l>>>15))&(a^i))+r[11]+2304563134&4294967295,l=i+(a^(n=o+(l<<22&4294967295|l>>>10))&(o^a))+r[12]+1804603682&4294967295,l=a+(o^(i=n+(l<<7&4294967295|l>>>25))&(n^o))+r[13]+4254626195&4294967295,l=o+(n^(a=i+(l<<12&4294967295|l>>>20))&(i^n))+r[14]+2792965006&4294967295,l=n+(i^(o=a+(l<<17&4294967295|l>>>15))&(a^i))+r[15]+1236535329&4294967295,n=o+(l<<22&4294967295|l>>>10),l=i+(o^a&(n^o))+r[1]+4129170786&4294967295,i=n+(l<<5&4294967295|l>>>27),l=a+(n^o&(i^n))+r[6]+3225465664&4294967295,a=i+(l<<9&4294967295|l>>>23),l=o+(i^n&(a^i))+r[11]+643717713&4294967295,o=a+(l<<14&4294967295|l>>>18),l=n+(a^i&(o^a))+r[0]+3921069994&4294967295,n=o+(l<<20&4294967295|l>>>12),l=i+(o^a&(n^o))+r[5]+3593408605&4294967295,i=n+(l<<5&4294967295|l>>>27),l=a+(n^o&(i^n))+r[10]+38016083&4294967295,a=i+(l<<9&4294967295|l>>>23),l=o+(i^n&(a^i))+r[15]+3634488961&4294967295,o=a+(l<<14&4294967295|l>>>18),l=n+(a^i&(o^a))+r[4]+3889429448&4294967295,n=o+(l<<20&4294967295|l>>>12),l=i+(o^a&(n^o))+r[9]+568446438&4294967295,i=n+(l<<5&4294967295|l>>>27),l=a+(n^o&(i^n))+r[14]+3275163606&4294967295,a=i+(l<<9&4294967295|l>>>23),l=o+(i^n&(a^i))+r[3]+4107603335&4294967295,o=a+(l<<14&4294967295|l>>>18),l=n+(a^i&(o^a))+r[8]+1163531501&4294967295,n=o+(l<<20&4294967295|l>>>12),l=i+(o^a&(n^o))+r[13]+2850285829&4294967295,i=n+(l<<5&4294967295|l>>>27),l=a+(n^o&(i^n))+r[2]+4243563512&4294967295,a=i+(l<<9&4294967295|l>>>23),l=o+(i^n&(a^i))+r[7]+1735328473&4294967295,o=a+(l<<14&4294967295|l>>>18),l=n+(a^i&(o^a))+r[12]+2368359562&4294967295,l=i+((n=o+(l<<20&4294967295|l>>>12))^o^a)+r[5]+4294588738&4294967295,l=a+((i=n+(l<<4&4294967295|l>>>28))^n^o)+r[8]+2272392833&4294967295,l=o+((a=i+(l<<11&4294967295|l>>>21))^i^n)+r[11]+1839030562&4294967295,l=n+((o=a+(l<<16&4294967295|l>>>16))^a^i)+r[14]+4259657740&4294967295,l=i+((n=o+(l<<23&4294967295|l>>>9))^o^a)+r[1]+2763975236&4294967295,l=a+((i=n+(l<<4&4294967295|l>>>28))^n^o)+r[4]+1272893353&4294967295,l=o+((a=i+(l<<11&4294967295|l>>>21))^i^n)+r[7]+4139469664&4294967295,l=n+((o=a+(l<<16&4294967295|l>>>16))^a^i)+r[10]+3200236656&4294967295,l=i+((n=o+(l<<23&4294967295|l>>>9))^o^a)+r[13]+681279174&4294967295,l=a+((i=n+(l<<4&4294967295|l>>>28))^n^o)+r[0]+3936430074&4294967295,l=o+((a=i+(l<<11&4294967295|l>>>21))^i^n)+r[3]+3572445317&4294967295,l=n+((o=a+(l<<16&4294967295|l>>>16))^a^i)+r[6]+76029189&4294967295,l=i+((n=o+(l<<23&4294967295|l>>>9))^o^a)+r[9]+3654602809&4294967295,l=a+((i=n+(l<<4&4294967295|l>>>28))^n^o)+r[12]+3873151461&4294967295,l=o+((a=i+(l<<11&4294967295|l>>>21))^i^n)+r[15]+530742520&4294967295,l=n+((o=a+(l<<16&4294967295|l>>>16))^a^i)+r[2]+3299628645&4294967295,n=o+(l<<23&4294967295|l>>>9),l=i+(o^(n|~a))+r[0]+4096336452&4294967295,i=n+(l<<6&4294967295|l>>>26),l=a+(n^(i|~o))+r[7]+1126891415&4294967295,a=i+(l<<10&4294967295|l>>>22),l=o+(i^(a|~n))+r[14]+2878612391&4294967295,o=a+(l<<15&4294967295|l>>>17),l=n+(a^(o|~i))+r[5]+4237533241&4294967295,n=o+(l<<21&4294967295|l>>>11),l=i+(o^(n|~a))+r[12]+1700485571&4294967295,i=n+(l<<6&4294967295|l>>>26),l=a+(n^(i|~o))+r[3]+2399980690&4294967295,a=i+(l<<10&4294967295|l>>>22),l=o+(i^(a|~n))+r[10]+4293915773&4294967295,o=a+(l<<15&4294967295|l>>>17),l=n+(a^(o|~i))+r[1]+2240044497&4294967295,n=o+(l<<21&4294967295|l>>>11),l=i+(o^(n|~a))+r[8]+1873313359&4294967295,i=n+(l<<6&4294967295|l>>>26),l=a+(n^(i|~o))+r[15]+4264355552&4294967295,a=i+(l<<10&4294967295|l>>>22),l=o+(i^(a|~n))+r[6]+2734768916&4294967295,o=a+(l<<15&4294967295|l>>>17),l=n+(a^(o|~i))+r[13]+1309151649&4294967295,n=o+(l<<21&4294967295|l>>>11),l=i+(o^(n|~a))+r[4]+4149444226&4294967295,i=n+(l<<6&4294967295|l>>>26),l=a+(n^(i|~o))+r[11]+3174756917&4294967295,a=i+(l<<10&4294967295|l>>>22),l=o+(i^(a|~n))+r[2]+718787259&4294967295,o=a+(l<<15&4294967295|l>>>17),l=n+(a^(o|~i))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+i&4294967295,e.g[1]=e.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+a&4294967295}function n(e,i){this.h=i;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var a=0|e[o];r&&a==i||(n[o]=a,r=!1)}this.g=n}!function(e,i){function n(){}n.prototype=i.prototype,e.D=i.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return i.prototype[n].apply(e,o)}}(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(e,n){void 0===n&&(n=e.length);for(var r=n-this.blockSize,o=this.B,a=this.h,l=0;l<n;){if(0==a)for(;l<=r;)i(this,e,l),l+=this.blockSize;if("string"==typeof e){for(;l<n;)if(o[a++]=e.charCodeAt(l++),a==this.blockSize){i(this,o),a=0;break}}else for(;l<n;)if(o[a++]=e[l++],a==this.blockSize){i(this,o),a=0;break}}this.h=a,this.o+=n},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var i=1;i<e.length-8;++i)e[i]=0;var n=8*this.o;for(i=e.length-8;i<e.length;++i)e[i]=255&n,n/=256;for(this.u(e),e=Array(16),i=n=0;4>i;++i)for(var r=0;32>r;r+=8)e[n++]=this.g[i]>>>r&255;return e};var r,o={};function a(e){var i;return -128<=e&&128>e?(i=function(e){return new n([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(o,e)?o[e]:o[e]=i(e)):new n([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return p(l(-e));for(var i=[],r=1,o=0;e>=r;o++)i[o]=e/r|0,r*=4294967296;return new n(i,0)}var c=a(0),u=a(1),h=a(16777216);function d(e){if(0!=e.h)return!1;for(var i=0;i<e.g.length;i++)if(0!=e.g[i])return!1;return!0}function f(e){return -1==e.h}function p(e){for(var i=e.g.length,r=[],o=0;o<i;o++)r[o]=~e.g[o];return new n(r,~e.h).add(u)}function g(e,i){return e.add(p(i))}function m(e,i){for(;(65535&e[i])!=e[i];)e[i+1]+=e[i]>>>16,e[i]&=65535,i++}function v(e,i){this.g=e,this.h=i}function b(e,i){if(d(i))throw Error("division by zero");if(d(e))return new v(c,c);if(f(e))return i=b(p(e),i),new v(p(i.g),p(i.h));if(f(i))return i=b(e,p(i)),new v(p(i.g),i.h);if(30<e.g.length){if(f(e)||f(i))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=i;0>=r.l(e);)n=y(n),r=y(r);var o=w(n,1),a=w(r,1);for(r=w(r,2),n=w(n,2);!d(r);){var h=a.add(r);0>=h.l(e)&&(o=o.add(n),a=h),r=w(r,1),n=w(n,1)}return i=g(e,o.j(i)),new v(o,i)}for(o=c;0<=e.l(i);){for(r=48>=(r=Math.ceil(Math.log(n=Math.max(1,Math.floor(e.m()/i.m())))/Math.LN2))?1:Math.pow(2,r-48),h=(a=l(n)).j(i);f(h)||0<h.l(e);)n-=r,h=(a=l(n)).j(i);d(a)&&(a=u),o=o.add(a),e=g(e,h)}return new v(o,e)}function y(e){for(var i=e.g.length+1,r=[],o=0;o<i;o++)r[o]=e.i(o)<<1|e.i(o-1)>>>31;return new n(r,e.h)}function w(e,i){var r=i>>5;i%=32;for(var o=e.g.length-r,a=[],l=0;l<o;l++)a[l]=0<i?e.i(l+r)>>>i|e.i(l+r+1)<<32-i:e.i(l+r);return new n(a,e.h)}(r=n.prototype).m=function(){if(f(this))return-p(this).m();for(var e=0,i=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*i,i*=4294967296}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(f(this))return"-"+p(this).toString(e);for(var i=l(Math.pow(e,6)),n=this,r="";;){var o=b(n,i).g,a=((0<(n=g(n,o.j(i))).g.length?n.g[0]:n.h)>>>0).toString(e);if(d(n=o))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},r.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.l=function(e){return f(e=g(this,e))?-1:d(e)?0:1},r.abs=function(){return f(this)?p(this):this},r.add=function(e){for(var i=Math.max(this.g.length,e.g.length),r=[],o=0,a=0;a<=i;a++){var l=o+(65535&this.i(a))+(65535&e.i(a)),c=(l>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);o=c>>>16,l&=65535,c&=65535,r[a]=c<<16|l}return new n(r,-2147483648&r[r.length-1]?-1:0)},r.j=function(e){if(d(this)||d(e))return c;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var i=this.g.length+e.g.length,r=[],o=0;o<2*i;o++)r[o]=0;for(o=0;o<this.g.length;o++)for(var a=0;a<e.g.length;a++){var u=this.i(o)>>>16,g=65535&this.i(o),v=e.i(a)>>>16,b=65535&e.i(a);r[2*o+2*a]+=g*b,m(r,2*o+2*a),r[2*o+2*a+1]+=u*b,m(r,2*o+2*a+1),r[2*o+2*a+1]+=g*v,m(r,2*o+2*a+1),r[2*o+2*a+2]+=u*v,m(r,2*o+2*a+2)}for(o=0;o<i;o++)r[o]=r[2*o+1]<<16|r[2*o];for(o=i;o<2*i;o++)r[o]=0;return new n(r,0)},r.A=function(e){return b(this,e).h},r.and=function(e){for(var i=Math.max(this.g.length,e.g.length),r=[],o=0;o<i;o++)r[o]=this.i(o)&e.i(o);return new n(r,this.h&e.h)},r.or=function(e){for(var i=Math.max(this.g.length,e.g.length),r=[],o=0;o<i;o++)r[o]=this.i(o)|e.i(o);return new n(r,this.h|e.h)},r.xor=function(e){for(var i=Math.max(this.g.length,e.g.length),r=[],o=0;o<i;o++)r[o]=this.i(o)^e.i(o);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,j=t9.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=l,n.fromString=function e(i,n){if(0==i.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==i.charAt(0))return p(e(i.substring(1),n));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),o=c,a=0;a<i.length;a+=8){var u=Math.min(8,i.length-a),h=parseInt(i.substring(a,a+u),n);8>u?(u=l(Math.pow(n,u)),o=o.j(u).add(l(h))):o=(o=o.j(r)).add(l(h))}return o},U=t9.Integer=n}).apply(void 0!==t3?t3:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var t8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==eo?eo:"undefined"!=typeof self?self:{},t7={};(function(){var e,i,n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,i,n){return e==Array.prototype||e==Object.prototype||(e[i]=n.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t8&&t8];for(var i=0;i<e.length;++i){var n=e[i];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var n=o;e=e.split(".");for(var a=0;a<e.length-1;a++){var l=e[a];if(!(l in n))break e;n=n[l]}(i=i(a=n[e=e[e.length-1]]))!=a&&null!=i&&r(n,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(e){return e||function(){var e,i,n,r,o;return e=this,i=function(e,i){return i},e instanceof String&&(e+=""),n=0,r=!1,(o={next:function(){if(!r&&n<e.length){var o=n++;return{value:i(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return o},o}});var a=a||{},l=this||self;function c(e){var i=typeof e;return"array"==(i="object"!=i?i:e?Array.isArray(e)?"array":i:"null")||"object"==i&&"number"==typeof e.length}function u(e){var i=typeof e;return"object"==i&&null!=e||"function"==i}function h(e,i,n){return e.call.apply(e.bind,arguments)}function d(e,i,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(i,n)}}return function(){return e.apply(i,arguments)}}function f(e,i,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:d).apply(null,arguments)}function p(e,i){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function g(e,i){function n(){}n.prototype=i.prototype,e.aa=i.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return i.prototype[n].apply(e,o)}}function m(e){let i=e.length;if(0<i){let n=Array(i);for(let r=0;r<i;r++)n[r]=e[r];return n}return[]}function v(e,i){for(let i=1;i<arguments.length;i++){let n=arguments[i];if(c(n)){let i=e.length||0,r=n.length||0;e.length=i+r;for(let o=0;o<r;o++)e[i+o]=n[o]}else e.push(n)}}function b(e){return/^[\s\xa0]*$/.test(e)}function y(){var e=l.navigator;return e&&(e=e.userAgent)?e:""}function w(e){return w[" "](e),e}w[" "]=function(){};var k=-1!=y().indexOf("Gecko")&&!(-1!=y().toLowerCase().indexOf("webkit")&&-1==y().indexOf("Edge"))&&!(-1!=y().indexOf("Trident")||-1!=y().indexOf("MSIE"))&&-1==y().indexOf("Edge");function E(e,i,n){for(let r in e)i.call(n,e[r],r,e)}function I(e){let i={};for(let n in e)i[n]=e[n];return i}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(e,i){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(let i=0;i<_.length;i++)n=_[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var T=new class{constructor(e,i){this.i=e,this.j=i,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}let x,A=!1,O=new class{constructor(){this.h=this.g=null}add(e,i){let n=T.get();n.set(e,i),this.h?this.h.next=n:this.g=n,this.h=n}},L=()=>{let e=l.Promise.resolve(void 0);x=()=>{e.then(R)}};var R=()=>{let e;for(var i;e=null,O.g&&(e=O.g,O.g=O.g.next,O.g||(O.h=null),e.next=null),i=e;){try{i.h.call(i.g)}catch(e){!function(e){l.setTimeout(()=>{throw e},0)}(e)}T.j(i),100>T.h&&(T.h++,i.next=T.g,T.g=i)}A=!1};function N(){this.s=this.s,this.C=this.C}function P(e,i){this.type=e,this.g=this.target=i,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,i=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};l.addEventListener("test",e,i),l.removeEventListener("test",e,i)}catch(e){}return e}();function M(e,i){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=i,i=e.relatedTarget){if(k){e:{try{w(i.nodeName);var o=!0;break e}catch(e){}o=!1}o||(i=null)}}else"mouseover"==n?i=e.fromElement:"mouseout"==n&&(i=e.toElement);this.relatedTarget=i,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:B[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}g(M,P);var B={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,i,n,r,o){this.listener=e,this.proxy=null,this.src=i,this.type=n,this.capture=!!r,this.ha=o,this.key=++U,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function J(e){this.src=e,this.g={},this.h=0}function Q(e,i){var n=i.type;if(n in e.g){var r,o=e.g[n],a=Array.prototype.indexOf.call(o,i,void 0);(r=0<=a)&&Array.prototype.splice.call(o,a,1),r&&(X(i),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,i,n,r){for(var o=0;o<e.length;++o){var a=e[o];if(!a.da&&a.listener==i&&!!n==a.capture&&a.ha==r)return o}return -1}J.prototype.add=function(e,i,n,r,o){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var l=Z(e,i,r,o);return -1<l?(i=e[l],n||(i.fa=!1)):((i=new j(i,this.src,a,!!r,o)).fa=n,e.push(i)),i};var ee="closure_lm_"+(1e6*Math.random()|0),et={};function ei(e,i,n,r,o,a){if(!i)throw Error("Invalid event type");var l=u(o)?!!o.capture:!!o,c=es(e);if(c||(e[ee]=c=new J(e)),(n=c.add(i,n,r,l,a)).proxy)return n;if(r=function e(i){return eo.call(e.src,e.listener,i)},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(o=l),void 0===o&&(o=!1),e.addEventListener(i.toString(),r,o);else if(e.attachEvent)e.attachEvent(er(i.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function en(e){if("number"!=typeof e&&e&&!e.da){var i=e.src;if(i&&i[F])Q(i.i,e);else{var n=e.type,r=e.proxy;i.removeEventListener?i.removeEventListener(n,r,e.capture):i.detachEvent?i.detachEvent(er(n),r):i.addListener&&i.removeListener&&i.removeListener(r),(n=es(i))?(Q(n,e),0==n.h&&(n.src=null,i[ee]=null)):X(e)}}}function er(e){return e in et?et[e]:et[e]="on"+e}function eo(e,i){if(e.da)e=!0;else{i=new M(i,this);var n=e.listener,r=e.ha||e.src;e.fa&&en(e),e=n.call(r,i)}return e}function es(e){return(e=e[ee])instanceof J?e:null}var ea="__closure_events_fn_"+(1e9*Math.random()>>>0);function el(e){return"function"==typeof e?e:(e[ea]||(e[ea]=function(i){return e.handleEvent(i)}),e[ea])}function ec(){N.call(this),this.i=new J(this),this.M=this,this.F=null}function eu(e,i){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=i.type||i,"string"==typeof i)i=new P(i,e);else if(i instanceof P)i.target=i.target||e;else{var o=i;S(i=new P(r,e),o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var l=i.g=n[a];o=eh(l,r,!0,i)&&o}if(o=eh(l=i.g=e,r,!0,i)&&o,o=eh(l,r,!1,i)&&o,n)for(a=0;a<n.length;a++)o=eh(l=i.g=n[a],r,!1,i)&&o}function eh(e,i,n,r){if(!(i=e.i.g[String(i)]))return!0;i=i.concat();for(var o=!0,a=0;a<i.length;++a){var l=i[a];if(l&&!l.da&&l.capture==n){var c=l.listener,u=l.ha||l.src;l.fa&&Q(e.i,l),o=!1!==c.call(u,r)&&o}}return o&&!r.defaultPrevented}function ed(e,i,n){if("function"==typeof e)n&&(e=f(e,n));else if(e&&"function"==typeof e.handleEvent)e=f(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:l.setTimeout(e,i||0)}g(ec,N),ec.prototype[F]=!0,ec.prototype.removeEventListener=function(e,i,n,r){!function e(i,n,r,o,a){if(Array.isArray(n))for(var l=0;l<n.length;l++)e(i,n[l],r,o,a);else(o=u(o)?!!o.capture:!!o,r=el(r),i&&i[F])?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=Z(l=i.g[n],r,o,a))&&(X(l[r]),Array.prototype.splice.call(l,r,1),0==l.length&&(delete i.g[n],i.h--))):i&&(i=es(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Z(n,r,o,a)),(r=-1<i?n[i]:null)&&en(r))}(this,e,i,n,r)},ec.prototype.N=function(){if(ec.aa.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],r=0;r<n.length;r++)X(n[r]);delete i.g[e],i.h--}}this.F=null},ec.prototype.K=function(e,i,n,r){return this.i.add(String(e),i,!1,n,r)},ec.prototype.L=function(e,i,n,r){return this.i.add(String(e),i,!0,n,r)};class ef extends N{constructor(e,i){super(),this.m=e,this.l=i,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(i){i.g=ed(()=>{i.g=null,i.i&&(i.i=!1,e(i))},i.l);let n=i.h;i.h=null,i.m.apply(null,n)}(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ep(e){N.call(this),this.h=e,this.g={}}g(ep,N);var eg=[];function em(e){E(e.g,function(e,i){this.g.hasOwnProperty(i)&&en(e)},e),e.g={}}ep.prototype.N=function(){ep.aa.N.call(this),em(this)},ep.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ev=l.JSON.stringify,eb=l.JSON.parse,ey=class{stringify(e){return l.JSON.stringify(e,void 0)}parse(e){return l.JSON.parse(e,void 0)}};function ew(){}function ek(e){return e.h||(e.h=e.i())}function eE(){}ew.prototype.h=null;var eI={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function e_(){P.call(this,"d")}function eS(){P.call(this,"c")}g(e_,P),g(eS,P);var eT={},eC=null;function ex(){return eC=eC||new ec}function eA(e){P.call(this,eT.La,e)}function eO(e){let i=ex();eu(i,new eA(i))}function eL(e,i){P.call(this,eT.STAT_EVENT,e),this.stat=i}function eR(e){let i=ex();eu(i,new eL(i,e))}function eN(e,i){P.call(this,eT.Ma,e),this.size=i}function eP(e,i){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){e()},i)}function eD(){this.g=!0}function eM(e,i,n,r){e.info(function(){return"XMLHTTP TEXT ("+i+"): "+function(e,i){if(!e.g)return i;if(!i)return null;try{var n=JSON.parse(i);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var a=o[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<o.length;l++)o[l]=""}}}}return ev(n)}catch(e){return i}}(e,n)+(r?" "+r:"")})}eT.La="serverreachability",g(eA,P),eT.STAT_EVENT="statevent",g(eL,P),eT.Ma="timingevent",g(eN,P),eD.prototype.xa=function(){this.g=!1},eD.prototype.info=function(){};var eB={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eF={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eU(){}function ej(e,i,n,r){this.j=e,this.i=i,this.l=n,this.R=r||1,this.U=new ep(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eV}function eV(){this.i=null,this.g="",this.h=!1}g(eU,ew),eU.prototype.g=function(){return new XMLHttpRequest},eU.prototype.i=function(){return{}},i=new eU;var eH={},ez={};function eq(e,i,n){e.L=1,e.v=to(te(i)),e.m=n,e.P=!0,eK(e,null)}function eK(e,i){e.F=Date.now(),e$(e),e.A=te(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),tb(n.i,"t",r),e.C=0,n=e.j.J,e.h=new eV,e.g=t5(e.j,n?i:null,!e.m),0<e.O&&(e.M=new ef(f(e.Y,e,e.g),e.O)),i=e.U,n=e.g,r=e.ca;var o="readystatechange";Array.isArray(o)||(o&&(eg[0]=o.toString()),o=eg);for(var a=0;a<o.length;a++){var l=function e(i,n,r,o,a){if(o&&o.once)return function e(i,n,r,o,a){if(Array.isArray(n)){for(var l=0;l<n.length;l++)e(i,n[l],r,o,a);return null}return r=el(r),i&&i[F]?i.L(n,r,u(o)?!!o.capture:!!o,a):ei(i,n,r,!0,o,a)}(i,n,r,o,a);if(Array.isArray(n)){for(var l=0;l<n.length;l++)e(i,n[l],r,o,a);return null}return r=el(r),i&&i[F]?i.K(n,r,u(o)?!!o.capture:!!o,a):ei(i,n,r,!1,o,a)}(n,o[a],r||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}i=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,i)):(e.u="GET",e.g.ea(e.A,e.u,null,i)),eO(),function(e,i,n,r,o,a){e.info(function(){if(e.g){if(a)for(var l="",c=a.split("&"),u=0;u<c.length;u++){var h=c[u].split("=");if(1<h.length){var d=h[0];h=h[1];var f=d.split("_");l=2<=f.length&&"type"==f[1]?l+(d+"=")+h+"&":l+(d+"=redacted&")}}else l=null}else l=a;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+i+"\n"+n+"\n"+l})}(e.i,e.u,e.A,e.l,e.R,e.m)}function eW(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function e$(e){e.S=Date.now()+e.I,eG(e,e.I)}function eG(e,i){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eP(f(e.ba,e),i)}function eY(e){e.B&&(l.clearTimeout(e.B),e.B=null)}function eX(e){0==e.j.G||e.J||tZ(e.j,e)}function eJ(e){eY(e);var i=e.M;i&&"function"==typeof i.ma&&i.ma(),e.M=null,em(e.U),e.g&&(i=e.g,e.g=null,i.abort(),i.ma())}function eQ(e,i){try{var n=e.j;if(0!=n.G&&(n.g==e||e4(n.h,e))){if(!e.K&&e4(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(i)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(n.g.F+3e3<e.F)tQ(n),tH(n);else break e}tY(n),eR(18)}}else n.za=o[1],0<n.za-n.T&&37500>o[2]&&n.F&&0==n.v&&!n.C&&(n.C=eP(f(n.Za,n),6e3));if(1>=e2(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else t1(n,11)}else if((e.K||n.g==e)&&tQ(n),!b(i))for(o=n.Da.g.parse(i),i=0;i<o.length;i++){let c=o[i];if(n.T=c[0],c=c[1],2==n.G){if("c"==c[0]){n.K=c[1],n.ia=c[2];let i=c[3];null!=i&&(n.la=i,n.j.info("VER="+n.la));let o=c[4];null!=o&&(n.Aa=o,n.j.info("SVER="+n.Aa));let u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;let h=e.g;if(h){let e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(e5(a,a.h),a.h=null))}if(r.D){let e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,tr(r.I,r.D,e))}}if(n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms")),(r=n).qa=t4(r,r.J?r.ia:null,r.W),e.K){e6(r.h,e);var l=r.L;l&&(e.I=l),e.B&&(eY(e),e$(e)),r.g=e}else tG(r);0<n.i.length&&tq(n)}else"stop"!=c[0]&&"close"!=c[0]||t1(n,7)}else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?t1(n,7):tV(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}}eO(4)}catch(e){}}ej.prototype.ca=function(e){e=e.target;let i=this.M;i&&3==tB(e)?i.j():this.Y(e)},ej.prototype.Y=function(e){try{if(e==this.g)e:{let p=tB(this.g);var i=this.g.Ba();let g=this.g.Z();if(!(3>p)&&(3!=p||this.g&&(this.h.h||this.g.oa()||tF(this.g)))){this.J||4!=p||7==i||(8==i||0>=g?eO(3):eO(2)),eY(this);var n=this.g.Z();this.X=n;t:if(eW(this)){var r=tF(this.g);e="";var o=r.length,a=4==tB(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eJ(this),eX(this);var c="";break t}this.h.i=new l.TextDecoder}for(i=0;i<o;i++)this.h.h=!0,e+=this.h.i.decode(r[i],{stream:!(a&&i==o-1)});r.length=0,this.h.g+=e,this.C=0,c=this.h.g}else c=this.g.oa();if(this.o=200==n,function(e,i,n,r,o,a,l){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+i+"\n"+n+"\n"+a+" "+l})}(this.i,this.u,this.A,this.l,this.R,p,n),this.o){if(this.T&&!this.K){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(u)){var d=u;break t}}d=null}if(n=d)eM(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eQ(this,n);else{this.o=!1,this.s=3,eR(12),eJ(this),eX(this);break e}}if(this.P){let e;for(n=!0;!this.J&&this.C<c.length;)if((e=function(e,i){var n=e.C,r=i.indexOf("\n",n);return -1==r?ez:isNaN(n=Number(i.substring(n,r)))?eH:(r+=1)+n>i.length?ez:(i=i.slice(r,r+n),e.C=r+n,i)}(this,c))==ez){4==p&&(this.s=4,eR(14),n=!1),eM(this.i,this.l,null,"[Incomplete Response]");break}else if(e==eH){this.s=4,eR(15),eM(this.i,this.l,c,"[Invalid Chunk]"),n=!1;break}else eM(this.i,this.l,e,null),eQ(this,e);if(eW(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=p||0!=c.length||this.h.h||(this.s=1,eR(16),n=!1),this.o=this.o&&n,n){if(0<c.length&&!this.W){this.W=!0;var f=this.j;f.g==this&&f.ba&&!f.M&&(f.j.info("Great, no buffering proxy detected. Bytes received: "+c.length),tX(f),f.M=!0,eR(11))}}else eM(this.i,this.l,c,"[Invalid Chunked Response]"),eJ(this),eX(this)}else eM(this.i,this.l,c,null),eQ(this,c);4==p&&eJ(this),this.o&&!this.J&&(4==p?tZ(this.j,this):(this.o=!1,e$(this)))}else(function(e){let i={};e=(e.g&&2<=tB(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(b(e[r]))continue;var n=function(e){var i=1;e=e.split(":");let n=[];for(;0<i&&e.length;)n.push(e.shift()),i--;return e.length&&n.push(e.join(":")),n}(e[r]);let o=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();let a=i[o]||[];i[o]=a,a.push(n)}!function(e,i){for(let n in e)i.call(void 0,e[n],n,e)}(i,function(e){return e.join(", ")})})(this.g),400==n&&0<c.indexOf("Unknown SID")?(this.s=3,eR(12)):(this.s=0,eR(13)),eJ(this),eX(this)}}}catch(e){}finally{}},ej.prototype.cancel=function(){this.J=!0,eJ(this)},ej.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(function(e,i){e.info(function(){return"TIMEOUT: "+i})}(this.i,this.A),2!=this.L&&(eO(),eR(17)),eJ(this),this.s=2,eX(this)):eG(this,this.S-e)};var eZ=class{constructor(e,i){this.g=e,this.map=i}};function e0(e){this.l=e||10,e=l.PerformanceNavigationTiming?0<(e=l.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e1(e){return!!e.h||!!e.g&&e.g.size>=e.j}function e2(e){return e.h?1:e.g?e.g.size:0}function e4(e,i){return e.h?e.h==i:!!e.g&&e.g.has(i)}function e5(e,i){e.g?e.g.add(i):e.h=i}function e6(e,i){e.h&&e.h==i?e.h=null:e.g&&e.g.has(i)&&e.g.delete(i)}function e3(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let i=e.i;for(let n of e.g.values())i=i.concat(n.D);return i}return m(e.i)}function e9(e,i){if(e.forEach&&"function"==typeof e.forEach)e.forEach(i,void 0);else if(c(e)||"string"==typeof e)Array.prototype.forEach.call(e,i,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(c(e)||"string"==typeof e){var i=[];e=e.length;for(var n=0;n<e;n++)i.push(n);return i}for(let r in i=[],n=0,e)i[n++]=r;return i}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(c(e)){for(var i=[],n=e.length,r=0;r<n;r++)i.push(e[r]);return i}for(r in i=[],n=0,e)i[n++]=e[r];return i}(e),o=r.length,a=0;a<o;a++)i.call(void 0,r[a],n&&n[a],e)}e0.prototype.cancel=function(){if(this.i=e3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e8=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e7(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof e7){this.h=e.h,tt(this,e.j),this.o=e.o,this.g=e.g,ti(this,e.s),this.l=e.l;var i=e.i,n=new tp;n.i=i.i,i.g&&(n.g=new Map(i.g),n.h=i.h),tn(this,n),this.m=e.m}else e&&(i=String(e).match(e8))?(this.h=!1,tt(this,i[1]||"",!0),this.o=ts(i[2]||""),this.g=ts(i[3]||"",!0),ti(this,i[4]),this.l=ts(i[5]||"",!0),tn(this,i[6]||"",!0),this.m=ts(i[7]||"")):(this.h=!1,this.i=new tp(null,this.h))}function te(e){return new e7(e)}function tt(e,i,n){e.j=n?ts(i,!0):i,e.j&&(e.j=e.j.replace(/:$/,""))}function ti(e,i){if(i){if(isNaN(i=Number(i))||0>i)throw Error("Bad port number "+i);e.s=i}else e.s=null}function tn(e,i,n){var r,o;i instanceof tp?(e.i=i,r=e.i,(o=e.h)&&!r.j&&(tg(r),r.i=null,r.g.forEach(function(e,i){var n=i.toLowerCase();i!=n&&(tm(this,i),tb(this,n,e))},r)),r.j=o):(n||(i=ta(i,td)),e.i=new tp(i,e.h))}function tr(e,i,n){e.i.set(i,n)}function to(e){return tr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ts(e,i){return e?i?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ta(e,i,n){return"string"==typeof e?(e=encodeURI(e).replace(i,tl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}e7.prototype.toString=function(){var e=[],i=this.j;i&&e.push(ta(i,tc,!0),":");var n=this.g;return(n||"file"==i)&&(e.push("//"),(i=this.o)&&e.push(ta(i,tc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ta(n,"/"==n.charAt(0)?th:tu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ta(n,tf)),e.join("")};var tc=/[#\/\?@]/g,tu=/[#\?:]/g,th=/[#\?]/g,td=/[#\?@]/g,tf=/#/g;function tp(e,i){this.h=this.g=null,this.i=e||null,this.j=!!i}function tg(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,i){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var a=e[n].substring(0,r);o=e[n].substring(r+1)}else a=e[n];i(a,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(i,n){e.add(decodeURIComponent(i.replace(/\+/g," ")),n)}))}function tm(e,i){tg(e),i=ty(e,i),e.g.has(i)&&(e.i=null,e.h-=e.g.get(i).length,e.g.delete(i))}function tv(e,i){return tg(e),i=ty(e,i),e.g.has(i)}function tb(e,i,n){tm(e,i),0<n.length&&(e.i=null,e.g.set(ty(e,i),m(n)),e.h+=n.length)}function ty(e,i){return i=String(i),e.j&&(i=i.toLowerCase()),i}function tw(e,i,n,r,o){try{o&&(o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null),r(n)}catch(e){}}function tk(){this.g=new ey}function tE(e){this.l=e.Ub||null,this.j=e.eb||!1}function tI(e,i){ec.call(this),this.D=e,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function t_(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tS(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tT(e)}function tT(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tC(e){let i="";return E(e,function(e,n){i+=n+":"+e+"\r\n"}),i}function tx(e,i,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tC(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):tr(e,i,n))}function tA(e){ec.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=tp.prototype).add=function(e,i){tg(this),this.i=null,e=ty(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(i),this.h+=1,this},n.forEach=function(e,i){tg(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(i,n,r,this)},this)},this)},n.na=function(){tg(this);let e=Array.from(this.g.values()),i=Array.from(this.g.keys()),n=[];for(let r=0;r<i.length;r++){let o=e[r];for(let e=0;e<o.length;e++)n.push(i[r])}return n},n.V=function(e){tg(this);let i=[];if("string"==typeof e)tv(this,e)&&(i=i.concat(this.g.get(ty(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)i=i.concat(e[n])}return i},n.set=function(e,i){return tg(this),this.i=null,tv(this,e=ty(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[i]),this.h+=1,this},n.get=function(e,i){return e&&0<(e=this.V(e)).length?String(e[0]):i},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],i=Array.from(this.g.keys());for(var n=0;n<i.length;n++){var r=i[n];let a=encodeURIComponent(String(r)),l=this.V(r);for(r=0;r<l.length;r++){var o=a;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),e.push(o)}}return this.i=e.join("&")},g(tE,ew),tE.prototype.g=function(){return new tI(this.l,this.j)},tE.prototype.i=(e={},function(){return e}),g(tI,ec),(n=tI.prototype).open=function(e,i){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=i,this.readyState=1,tT(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(i.body=e),(this.D||l).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tS(this)),this.readyState=0},n.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tT(this)),this.g&&(this.readyState=3,tT(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==l.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t_(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))}},n.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var i=e.value?e.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!e.done}))&&(this.response=this.responseText+=i)}e.done?tS(this):tT(this),3==this.readyState&&t_(this)}},n.Ra=function(e){this.g&&(this.response=this.responseText=e,tS(this))},n.Qa=function(e){this.g&&(this.response=e,tS(this))},n.ga=function(){this.g&&tS(this)},n.setRequestHeader=function(e,i){this.u.append(e,i)},n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],i=this.h.entries();for(var n=i.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=i.next();return e.join("\r\n")},Object.defineProperty(tI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),g(tA,ec);var tO=/^https?$/i,tL=["POST","PUT"];function tR(e,i){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=i,e.m=5,tN(e),tD(e)}function tN(e){e.A||(e.A=!0,eu(e,"complete"),eu(e,"error"))}function tP(e){if(e.h&&void 0!==a&&(!e.v[1]||4!=tB(e)||2!=e.Z())){if(e.u&&4==tB(e))ed(e.Ea,0,e);else if(eu(e,"readystatechange"),4==tB(e)){e.h=!1;try{let a=e.Z();switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i,n,r=!0;break;default:r=!1}if(!(i=r)){if(n=0===a){var o=String(e.D).match(e8)[1]||null;!o&&l.self&&l.self.location&&(o=l.self.location.protocol.slice(0,-1)),n=!tO.test(o?o.toLowerCase():"")}i=n}if(i)eu(e,"complete"),eu(e,"success");else{e.m=6;try{var c=2<tB(e)?e.g.statusText:""}catch(e){c=""}e.l=c+" ["+e.Z()+"]",tN(e)}}finally{tD(e)}}}}function tD(e,i){if(e.g){tM(e);let n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,i||eu(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function tM(e){e.I&&(l.clearTimeout(e.I),e.I=null)}function tB(e){return e.g?e.g.readyState:0}function tF(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tU(e,i,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||i}function tj(e){this.Aa=0,this.i=[],this.j=new eD,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tU("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tU("baseRetryDelayMs",5e3,e),this.cb=tU("retryDelaySeedMs",1e4,e),this.Wa=tU("forwardChannelMaxRetries",2,e),this.wa=tU("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new e0(e&&e.concurrentRequestLimit),this.Da=new tk,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tV(e){if(tz(e),3==e.G){var i=e.U++,n=te(e.I);if(tr(n,"SID",e.K),tr(n,"RID",i),tr(n,"TYPE","terminate"),tW(e,n),(i=new ej(e,e.j,i)).L=2,i.v=to(te(n)),n=!1,l.navigator&&l.navigator.sendBeacon)try{n=l.navigator.sendBeacon(i.v.toString(),"")}catch(e){}!n&&l.Image&&((new Image).src=i.v,n=!0),n||(i.g=t5(i.j,null),i.g.ea(i.v)),i.F=Date.now(),e$(i)}t2(e)}function tH(e){e.g&&(tX(e),e.g.cancel(),e.g=null)}function tz(e){tH(e),e.u&&(l.clearTimeout(e.u),e.u=null),tQ(e),e.h.cancel(),e.s&&("number"==typeof e.s&&l.clearTimeout(e.s),e.s=null)}function tq(e){if(!e1(e.h)&&!e.s){e.s=!0;var i=e.Ga;x||L(),A||(x(),A=!0),O.add(i,e),e.B=0}}function tK(e,i){var n;n=i?i.l:e.U++;let r=te(e.I);tr(r,"SID",e.K),tr(r,"RID",n),tr(r,"AID",e.T),tW(e,r),e.m&&e.o&&tx(r,e.m,e.o),n=new ej(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),i&&(e.i=i.D.concat(e.i)),i=t$(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e5(e.h,n),eq(n,r,i)}function tW(e,i){e.H&&E(e.H,function(e,n){tr(i,n,e)}),e.l&&e9({},function(e,n){tr(i,n,e)})}function t$(e,i,n){n=Math.min(e.i.length,n);var r=e.l?f(e.l.Na,e.l,e):null;e:{var o=e.i;let i=-1;for(;;){let e=["count="+n];-1==i?0<n?(i=o[0].g,e.push("ofs="+i)):i=0:e.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let n=o[l].g,c=o[l].map;if(0>(n-=i))i=Math.max(0,o[l].g-100),a=!1;else try{!function(e,i,n){let r=n||"";try{e9(e,function(e,n){let o=e;u(e)&&(o=ev(e)),i.push(r+n+"="+encodeURIComponent(o))})}catch(e){throw i.push(r+"type="+encodeURIComponent("_badmap")),e}}(c,e,"req"+n+"_")}catch(e){r&&r(c)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),i.D=e,r}function tG(e){if(!e.g&&!e.u){e.Y=1;var i=e.Fa;x||L(),A||(x(),A=!0),O.add(i,e),e.v=0}}function tY(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eP(f(e.Fa,e),t0(e,e.v)),e.v++,!0)}function tX(e){null!=e.A&&(l.clearTimeout(e.A),e.A=null)}function tJ(e){e.g=new ej(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var i=te(e.qa);tr(i,"RID","rpc"),tr(i,"SID",e.K),tr(i,"AID",e.T),tr(i,"CI",e.F?"0":"1"),!e.F&&e.ja&&tr(i,"TO",e.ja),tr(i,"TYPE","xmlhttp"),tW(e,i),e.m&&e.o&&tx(i,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=to(te(i)),n.m=null,n.P=!0,eK(n,e)}function tQ(e){null!=e.C&&(l.clearTimeout(e.C),e.C=null)}function tZ(e,i){var n=null;if(e.g==i){tQ(e),tX(e),e.g=null;var r=2}else{if(!e4(e.h,i))return;n=i.D,e6(e.h,i),r=1}if(0!=e.G){if(i.o){if(1==r){n=i.m?i.m.length:0,i=Date.now()-i.F;var o,a=e.B;eu(r=ex(),new eN(r,n)),tq(e)}else tG(e)}else if(3==(a=i.s)||0==a&&0<i.X||!(1==r&&(o=i,!(e2(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=o.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eP(f(e.Ga,e,o),t0(e,e.B)),e.B++,!0)))||2==r&&tY(e)))switch(n&&0<n.length&&((i=e.h).i=i.i.concat(n)),a){case 1:t1(e,5);break;case 4:t1(e,10);break;case 3:t1(e,6);break;default:t1(e,2)}}}function t0(e,i){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*i}function t1(e,i){if(e.j.info("Error code "+i),2==i){var n=f(e.fb,e),r=e.Xa;let i=!r;r=new e7(r||"//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||tt(r,"https"),to(r),i?function(e,i){let n=new eD;if(l.Image){let r=new Image;r.onload=p(tw,n,"TestLoadImage: loaded",!0,i,r),r.onerror=p(tw,n,"TestLoadImage: error",!1,i,r),r.onabort=p(tw,n,"TestLoadImage: abort",!1,i,r),r.ontimeout=p(tw,n,"TestLoadImage: timeout",!1,i,r),l.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else i(!1)}(r.toString(),n):function(e,i){let n=new eD,r=new AbortController,o=setTimeout(()=>{r.abort(),tw(n,"TestPingServer: timeout",!1,i)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(o),e.ok?tw(n,"TestPingServer: ok",!0,i):tw(n,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(o),tw(n,"TestPingServer: error",!1,i)})}(r.toString(),n)}else eR(2);e.G=0,e.l&&e.l.sa(i),t2(e),tz(e)}function t2(e){if(e.G=0,e.ka=[],e.l){let i=e3(e.h);(0!=i.length||0!=e.i.length)&&(v(e.ka,i),v(e.ka,e.i),e.h.i.length=0,m(e.i),e.i.length=0),e.l.ra()}}function t4(e,i,n){var r=n instanceof e7?te(n):new e7(n);if(""!=r.g)i&&(r.g=i+"."+r.g),ti(r,r.s);else{var o=l.location;r=o.protocol,i=i?i+"."+o.hostname:o.hostname,o=+o.port;var a=new e7(null);r&&tt(a,r),i&&(a.g=i),o&&ti(a,o),n&&(a.l=n),r=a}return n=e.D,i=e.ya,n&&i&&tr(r,n,i),tr(r,"VER",e.la),tW(e,r),r}function t5(e,i,n){if(i&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(i=new tA(e.Ca&&!e.pa?new tE({eb:n}):e.pa)).Ha(e.J),i}function t6(){}function t3(){}function t9(e,i){ec.call(this),this.g=new tj(i),this.l=e,this.h=i&&i.messageUrlParams||null,e=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(e?e["X-WebChannel-Content-Type"]=i.messageContentType:e={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(e?e["X-WebChannel-Client-Profile"]=i.va:e={"X-WebChannel-Client-Profile":i.va}),this.g.S=e,(e=i&&i.Sb)&&!b(e)&&(this.g.m=e),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!b(i)&&(this.g.D=i,null!==(e=this.h)&&i in e&&i in(e=this.h)&&delete e[i]),this.j=new ii(this)}function ie(e){e_.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var i=e.__sm__;if(i){e:{for(let n in i){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,i=null!==i&&e in i?i[e]:void 0),this.data=i}else this.data=e}function it(){eS.call(this),this.status=1}function ii(e){this.g=e}(n=tA.prototype).Ha=function(e){this.J=e},n.ea=function(e,n,r,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);n=n?n.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():i.g(),this.v=this.o?ek(this.o):ek(i),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(n,String(e),!0),this.B=!1}catch(e){tR(this,e);return}if(e=r||"",r=new Map(this.headers),o){if(Object.getPrototypeOf(o)===Object.prototype)for(var a in o)r.set(a,o[a]);else if("function"==typeof o.keys&&"function"==typeof o.get)for(let e of o.keys())r.set(e,o.get(e));else throw Error("Unknown input type for opt_headers: "+String(o))}for(let[i,c]of(o=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),a=l.FormData&&e instanceof l.FormData,!(0<=Array.prototype.indexOf.call(tL,n,void 0))||o||a||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(i,c);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tM(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tR(this,e)}},n.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,eu(this,"complete"),eu(this,"abort"),tD(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tD(this,!0)),tA.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tP(this):this.bb())},n.bb=function(){tP(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<tB(this)?this.g.status:-1}catch(e){return -1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},n.Oa=function(e){if(this.g){var i=this.g.responseText;return e&&0==i.indexOf(e)&&(i=i.substring(e.length)),eb(i)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=tj.prototype).la=8,n.G=1,n.connect=function(e,i,n,r){eR(0),this.W=e,this.H=i||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=t4(this,null,this.W),tq(this)},n.Ga=function(e){if(this.s){if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let o=new ej(this,this.j,e),a=this.o;if(this.S&&(a?S(a=I(a),this.S):a=this.S),null!==this.m||this.O||(o.H=a,a=null),this.P)e:{for(var i=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if(4096<(i+=r)){i=n;break e}if(4096===i||n===this.i.length-1){i=n+1;break e}}i=1e3}else i=1e3;i=t$(this,o,i),tr(n=te(this.I),"RID",e),tr(n,"CVER",22),this.D&&tr(n,"X-HTTP-Session-Id",this.D),tW(this,n),a&&(this.O?i="headers="+encodeURIComponent(String(tC(a)))+"&"+i:this.m&&tx(n,this.m,a)),e5(this.h,o),this.Ua&&tr(n,"TYPE","init"),this.P?(tr(n,"$req",i),tr(n,"SID","null"),o.T=!0,eq(o,n,null)):eq(o,n,i),this.G=2}}else 3==this.G&&(e?tK(this,e):0==this.i.length||e1(this.h)||tK(this))}},n.Fa=function(){if(this.u=null,tJ(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eP(f(this.ab,this),e)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eR(10),tH(this),tJ(this))},n.Za=function(){null!=this.C&&(this.C=null,tH(this),tY(this),eR(19))},n.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eR(2)):(this.j.info("Failed to ping google.com"),eR(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=t6.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},t3.prototype.g=function(e,i){return new t9(e,i)},g(t9,ec),t9.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t9.prototype.close=function(){tV(this.g)},t9.prototype.o=function(e){var i=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ev(e),e=n);i.i.push(new eZ(i.Ya++,e)),3==i.G&&tq(i)},t9.prototype.N=function(){this.g.l=null,delete this.j,tV(this.g),delete this.g,t9.aa.N.call(this)},g(ie,e_),g(it,eS),g(ii,t6),ii.prototype.ua=function(){eu(this.g,"a")},ii.prototype.ta=function(e){eu(this.g,new ie(e))},ii.prototype.sa=function(e){eu(this.g,new it)},ii.prototype.ra=function(){eu(this.g,"b")},t3.prototype.createWebChannel=t3.prototype.g,t9.prototype.send=t9.prototype.o,t9.prototype.open=t9.prototype.m,t9.prototype.close=t9.prototype.close,Y=t7.createWebChannelTransport=function(){return new t3},G=t7.getStatEventTarget=function(){return ex()},$=t7.Event=eT,W=t7.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eB.NO_ERROR=0,eB.TIMEOUT=8,eB.HTTP_ERROR=6,K=t7.ErrorCode=eB,eF.COMPLETE="complete",q=t7.EventType=eF,eE.EventType=eI,eI.OPEN="a",eI.CLOSE="b",eI.ERROR="c",eI.MESSAGE="d",ec.prototype.listen=ec.prototype.K,z=t7.WebChannel=eE,H=t7.FetchXmlHttpFactory=tE,tA.prototype.listenOnce=tA.prototype.L,tA.prototype.getLastError=tA.prototype.Ka,tA.prototype.getLastErrorCode=tA.prototype.Ba,tA.prototype.getStatus=tA.prototype.Z,tA.prototype.getResponseJson=tA.prototype.Oa,tA.prototype.getResponseText=tA.prototype.oa,tA.prototype.send=tA.prototype.ea,tA.prototype.setWithCredentials=tA.prototype.Ha,V=t7.XhrIo=tA}).apply(void 0!==t8?t8:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),X=function(e){var i,n,r=function(e){var i=e.length;if(i%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=i);var r=n===i?0:4-n%4;return[n,r]}(e),o=r[0],a=r[1],l=new ii((o+a)*3/4-a),c=0,u=a>0?o-4:o;for(n=0;n<u;n+=4)i=it[e.charCodeAt(n)]<<18|it[e.charCodeAt(n+1)]<<12|it[e.charCodeAt(n+2)]<<6|it[e.charCodeAt(n+3)],l[c++]=i>>16&255,l[c++]=i>>8&255,l[c++]=255&i;return 2===a&&(i=it[e.charCodeAt(n)]<<2|it[e.charCodeAt(n+1)]>>4,l[c++]=255&i),1===a&&(i=it[e.charCodeAt(n)]<<10|it[e.charCodeAt(n+1)]<<4|it[e.charCodeAt(n+2)]>>2,l[c++]=i>>8&255,l[c++]=255&i),l},J=function(e){for(var i,n=e.length,r=n%3,o=[],a=0,l=n-r;a<l;a+=16383)o.push(function(e,i,n){for(var r,o=[],a=i;a<n;a+=3)o.push(ie[(r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+ie[r>>12&63]+ie[r>>6&63]+ie[63&r]);return o.join("")}(e,a,a+16383>l?l:a+16383));return 1===r?o.push(ie[(i=e[n-1])>>2]+ie[i<<4&63]+"=="):2===r&&o.push(ie[(i=(e[n-2]<<8)+e[n-1])>>10]+ie[i>>4&63]+ie[i<<2&63]+"="),o.join("")};for(var ie=[],it=[],ii="undefined"!=typeof Uint8Array?Uint8Array:Array,ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",io=0,is=ir.length;io<is;++io)ie[io]=ir[io],it[ir.charCodeAt(io)]=io;it["-".charCodeAt(0)]=62,it["_".charCodeAt(0)]=63,Q=function(e,i,n,r,o){var a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=-7,f=n?o-1:0,p=n?-1:1,g=e[i+f];for(f+=p,a=g&(1<<-d)-1,g>>=-d,d+=c;d>0;a=256*a+e[i+f],f+=p,d-=8);for(l=a&(1<<-d)-1,a>>=-d,d+=r;d>0;l=256*l+e[i+f],f+=p,d-=8);if(0===a)a=1-h;else{if(a===u)return l?NaN:1/0*(g?-1:1);l+=Math.pow(2,r),a-=h}return(g?-1:1)*l*Math.pow(2,a-r)},Z=function(e,i,n,r,o,a){var l,c,u,h=8*a-o-1,d=(1<<h)-1,f=d>>1,p=23===o?5960464477539062e-23:0,g=r?0:a-1,m=r?1:-1,v=i<0||0===i&&1/i<0?1:0;for(isNaN(i=Math.abs(i))||i===1/0?(c=isNaN(i)?1:0,l=d):(l=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-l))<1&&(l--,u*=2),l+f>=1?i+=p/u:i+=p*Math.pow(2,1-f),i*u>=2&&(l++,u/=2),l+f>=d?(c=0,l=d):l+f>=1?(c=(i*u-1)*Math.pow(2,o),l+=f):(c=i*Math.pow(2,f-1)*Math.pow(2,o),l=0));o>=8;e[n+g]=255&c,g+=m,c/=256,o-=8);for(l=l<<o|c,h+=o;h>0;e[n+g]=255&l,g+=m,l/=256,h-=8);e[n+g-m]|=128*v};const ia="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function il(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let i=new Uint8Array(e);return Object.setPrototypeOf(i,ic.prototype),i}function ic(e,i,n){if("number"==typeof e){if("string"==typeof i)throw TypeError('The "string" argument must be of type string. Received type number');return id(e)}return iu(e,i,n)}function iu(e,i,n){if("string"==typeof e)return function(e,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!ic.isEncoding(i))throw TypeError("Unknown encoding: "+i);let n=0|iv(e,i),r=il(n),o=r.write(e,i);return o!==n&&(r=r.slice(0,o)),r}(e,i);if(ArrayBuffer.isView(e))return function(e){if(ij(e,Uint8Array)){let i=new Uint8Array(e);return ig(i.buffer,i.byteOffset,i.byteLength)}return ip(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ij(e,ArrayBuffer)||e&&ij(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ij(e,SharedArrayBuffer)||e&&ij(e.buffer,SharedArrayBuffer)))return ig(e,i,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return ic.from(r,i,n);let o=function(e){var i;if(ic.isBuffer(e)){let i=0|im(e.length),n=il(i);return 0===n.length||e.copy(n,0,0,i),n}return void 0!==e.length?"number"!=typeof e.length||(i=e.length)!=i?il(0):ip(e):"Buffer"===e.type&&Array.isArray(e.data)?ip(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return ic.from(e[Symbol.toPrimitive]("string"),i,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function ih(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function id(e){return ih(e),il(e<0?0:0|im(e))}function ip(e){let i=e.length<0?0:0|im(e.length),n=il(i);for(let r=0;r<i;r+=1)n[r]=255&e[r];return n}function ig(e,i,n){let r;if(i<0||e.byteLength<i)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<i+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),ic.prototype),r}function im(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function iv(e,i){if(ic.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ij(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return iB(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return iF(e).length;default:if(o)return r?-1:iB(e).length;i=(""+i).toLowerCase(),o=!0}}function ib(e,i,n){let r=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(i>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,i,n){let r=e.length;(!i||i<0)&&(i=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=i;r<n;++r)o+=iV[e[r]];return o}(this,i,n);case"utf8":case"utf-8":return iE(this,i,n);case"ascii":return function(e,i,n){let r="";n=Math.min(e.length,n);for(let o=i;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,i,n);case"latin1":case"binary":return function(e,i,n){let r="";n=Math.min(e.length,n);for(let o=i;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,i,n);case"base64":var o,a;return o=i,a=n,0===o&&a===this.length?J(this):J(this.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,i,n){let r=e.slice(i,n),o="";for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}(this,i,n);default:if(r)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function iy(e,i,n){let r=e[i];e[i]=e[n],e[n]=r}function iw(e,i,n,r,o){var a;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(a=n=+n)!=a&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1}else if(n<0){if(!o)return -1;n=0}if("string"==typeof i&&(i=ic.from(i,r)),ic.isBuffer(i))return 0===i.length?-1:ik(e,i,n,r,o);if("number"==typeof i)return(i&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,i,n):Uint8Array.prototype.lastIndexOf.call(e,i,n):ik(e,[i],n,r,o);throw TypeError("val must be string, number or Buffer")}function ik(e,i,n,r,o){let a,l=1,c=e.length,u=i.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||i.length<2)return -1;l=2,c/=2,u/=2,n/=2}function h(e,i){return 1===l?e[i]:e.readUInt16BE(i*l)}if(o){let r=-1;for(a=n;a<c;a++)if(h(e,a)===h(i,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===u)return r*l}else -1!==r&&(a-=a-r),r=-1}else for(n+u>c&&(n=c-u),a=n;a>=0;a--){let n=!0;for(let r=0;r<u;r++)if(h(e,a+r)!==h(i,r)){n=!1;break}if(n)return a}return -1}function iE(e,i,n){n=Math.min(e.length,n);let r=[],o=i;for(;o<n;){let i=e[o],a=null,l=i>239?4:i>223?3:i>191?2:1;if(o+l<=n){let n,r,c,u;switch(l){case 1:i<128&&(a=i);break;case 2:(192&(n=e[o+1]))==128&&(u=(31&i)<<6|63&n)>127&&(a=u);break;case 3:n=e[o+1],r=e[o+2],(192&n)==128&&(192&r)==128&&(u=(15&i)<<12|(63&n)<<6|63&r)>2047&&(u<55296||u>57343)&&(a=u);break;case 4:n=e[o+1],r=e[o+2],c=e[o+3],(192&n)==128&&(192&r)==128&&(192&c)==128&&(u=(15&i)<<18|(63&n)<<12|(63&r)<<6|63&c)>65535&&u<1114112&&(a=u)}}null===a?(a=65533,l=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=l}return function(e){let i=e.length;if(i<=4096)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<i;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function iI(e,i,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+i>n)throw RangeError("Trying to access beyond buffer length")}function i_(e,i,n,r,o,a){if(!ic.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(i>o||i<a)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function iS(e,i,n,r,o){iN(i,r,o,e,n,7);let a=Number(i&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let l=Number(i>>BigInt(32)&BigInt(4294967295));return e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,n}function iT(e,i,n,r,o){iN(i,r,o,e,n,7);let a=Number(i&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let l=Number(i>>BigInt(32)&BigInt(4294967295));return e[n+3]=l,l>>=8,e[n+2]=l,l>>=8,e[n+1]=l,l>>=8,e[n]=l,n+8}function iC(e,i,n,r,o,a){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function ix(e,i,n,r,o){return i=+i,n>>>=0,o||iC(e,i,n,4,34028234663852886e22,-34028234663852886e22),Z(e,i,n,r,23,4),n+4}function iA(e,i,n,r,o){return i=+i,n>>>=0,o||iC(e,i,n,8,17976931348623157e292,-17976931348623157e292),Z(e,i,n,r,52,8),n+8}ic.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(e,i),42===e.foo()}catch(e){return!1}}(),ic.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ic.prototype,"parent",{enumerable:!0,get:function(){if(ic.isBuffer(this))return this.buffer}}),Object.defineProperty(ic.prototype,"offset",{enumerable:!0,get:function(){if(ic.isBuffer(this))return this.byteOffset}}),ic.poolSize=8192,ic.from=function(e,i,n){return iu(e,i,n)},Object.setPrototypeOf(ic.prototype,Uint8Array.prototype),Object.setPrototypeOf(ic,Uint8Array),ic.alloc=function(e,i,n){return(ih(e),e<=0)?il(e):void 0!==i?"string"==typeof n?il(e).fill(i,n):il(e).fill(i):il(e)},ic.allocUnsafe=function(e){return id(e)},ic.allocUnsafeSlow=function(e){return id(e)},ic.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==ic.prototype},ic.compare=function(e,i){if(ij(e,Uint8Array)&&(e=ic.from(e,e.offset,e.byteLength)),ij(i,Uint8Array)&&(i=ic.from(i,i.offset,i.byteLength)),!ic.isBuffer(e)||!ic.isBuffer(i))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===i)return 0;let n=e.length,r=i.length;for(let o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==i[o]){n=e[o],r=i[o];break}return n<r?-1:r<n?1:0},ic.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ic.concat=function(e,i){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ic.alloc(0);if(void 0===i)for(n=0,i=0;n<e.length;++n)i+=e[n].length;let r=ic.allocUnsafe(i),o=0;for(n=0;n<e.length;++n){let i=e[n];if(ij(i,Uint8Array))o+i.length>r.length?(ic.isBuffer(i)||(i=ic.from(i)),i.copy(r,o)):Uint8Array.prototype.set.call(r,i,o);else if(ic.isBuffer(i))i.copy(r,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=i.length}return r},ic.byteLength=iv,ic.prototype._isBuffer=!0,ic.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<e;i+=2)iy(this,i,i+1);return this},ic.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<e;i+=4)iy(this,i,i+3),iy(this,i+1,i+2);return this},ic.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<e;i+=8)iy(this,i,i+7),iy(this,i+1,i+6),iy(this,i+2,i+5),iy(this,i+3,i+4);return this},ic.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?iE(this,0,e):ib.apply(this,arguments)},ic.prototype.toLocaleString=ic.prototype.toString,ic.prototype.equals=function(e){if(!ic.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===ic.compare(this,e)},ic.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},ia&&(ic.prototype[ia]=ic.prototype.inspect),ic.prototype.compare=function(e,i,n,r,o){if(ij(e,Uint8Array)&&(e=ic.from(e,e.offset,e.byteLength)),!ic.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===i&&(i=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),i<0||n>e.length||r<0||o>this.length)throw RangeError("out of range index");if(r>=o&&i>=n)return 0;if(r>=o)return -1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;let a=o-r,l=n-i,c=Math.min(a,l),u=this.slice(r,o),h=e.slice(i,n);for(let e=0;e<c;++e)if(u[e]!==h[e]){a=u[e],l=h[e];break}return a<l?-1:l<a?1:0},ic.prototype.includes=function(e,i,n){return -1!==this.indexOf(e,i,n)},ic.prototype.indexOf=function(e,i,n){return iw(this,e,i,n,!0)},ic.prototype.lastIndexOf=function(e,i,n){return iw(this,e,i,n,!1)},ic.prototype.write=function(e,i,n,r){var o,a,l,c,u,h,d,f;if(void 0===i)r="utf8",n=this.length,i=0;else if(void 0===n&&"string"==typeof i)r=i,n=this.length,i=0;else if(isFinite(i))i>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-i;if((void 0===n||n>p)&&(n=p),e.length>0&&(n<0||i<0)||i>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let g=!1;for(;;)switch(r){case"hex":return function(e,i,n,r){let o;n=Number(n)||0;let a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;let l=i.length;for(r>l/2&&(r=l/2),o=0;o<r;++o){let r=parseInt(i.substr(2*o,2),16);if(r!=r)break;e[n+o]=r}return o}(this,e,i,n);case"utf8":case"utf-8":return o=i,a=n,iU(iB(e,this.length-o),this,o,a);case"ascii":case"latin1":case"binary":return l=i,c=n,iU(function(e){let i=[];for(let n=0;n<e.length;++n)i.push(255&e.charCodeAt(n));return i}(e),this,l,c);case"base64":return u=i,h=n,iU(iF(e),this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=i,f=n,iU(function(e,i){let n,r;let o=[];for(let a=0;a<e.length&&!((i-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o.push(n%256),o.push(r);return o}(e,this.length-d),this,d,f);default:if(g)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),g=!0}},ic.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ic.prototype.slice=function(e,i){let n=this.length;e=~~e,i=void 0===i?n:~~i,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),i<0?(i+=n)<0&&(i=0):i>n&&(i=n),i<e&&(i=e);let r=this.subarray(e,i);return Object.setPrototypeOf(r,ic.prototype),r},ic.prototype.readUintLE=ic.prototype.readUIntLE=function(e,i,n){e>>>=0,i>>>=0,n||iI(e,i,this.length);let r=this[e],o=1,a=0;for(;++a<i&&(o*=256);)r+=this[e+a]*o;return r},ic.prototype.readUintBE=ic.prototype.readUIntBE=function(e,i,n){e>>>=0,i>>>=0,n||iI(e,i,this.length);let r=this[e+--i],o=1;for(;i>0&&(o*=256);)r+=this[e+--i]*o;return r},ic.prototype.readUint8=ic.prototype.readUInt8=function(e,i){return e>>>=0,i||iI(e,1,this.length),this[e]},ic.prototype.readUint16LE=ic.prototype.readUInt16LE=function(e,i){return e>>>=0,i||iI(e,2,this.length),this[e]|this[e+1]<<8},ic.prototype.readUint16BE=ic.prototype.readUInt16BE=function(e,i){return e>>>=0,i||iI(e,2,this.length),this[e]<<8|this[e+1]},ic.prototype.readUint32LE=ic.prototype.readUInt32LE=function(e,i){return e>>>=0,i||iI(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ic.prototype.readUint32BE=ic.prototype.readUInt32BE=function(e,i){return e>>>=0,i||iI(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ic.prototype.readBigUInt64LE=iH(function(e){iP(e>>>=0,"offset");let i=this[e],n=this[e+7];(void 0===i||void 0===n)&&iD(e,this.length-8);let r=i+256*this[++e]+65536*this[++e]+16777216*this[++e],o=this[++e]+256*this[++e]+65536*this[++e]+16777216*n;return BigInt(r)+(BigInt(o)<<BigInt(32))}),ic.prototype.readBigUInt64BE=iH(function(e){iP(e>>>=0,"offset");let i=this[e],n=this[e+7];(void 0===i||void 0===n)&&iD(e,this.length-8);let r=16777216*i+65536*this[++e]+256*this[++e]+this[++e],o=16777216*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)}),ic.prototype.readIntLE=function(e,i,n){e>>>=0,i>>>=0,n||iI(e,i,this.length);let r=this[e],o=1,a=0;for(;++a<i&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*i)),r},ic.prototype.readIntBE=function(e,i,n){e>>>=0,i>>>=0,n||iI(e,i,this.length);let r=i,o=1,a=this[e+--r];for(;r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*i)),a},ic.prototype.readInt8=function(e,i){return(e>>>=0,i||iI(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},ic.prototype.readInt16LE=function(e,i){e>>>=0,i||iI(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},ic.prototype.readInt16BE=function(e,i){e>>>=0,i||iI(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},ic.prototype.readInt32LE=function(e,i){return e>>>=0,i||iI(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ic.prototype.readInt32BE=function(e,i){return e>>>=0,i||iI(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ic.prototype.readBigInt64LE=iH(function(e){iP(e>>>=0,"offset");let i=this[e],n=this[e+7];return(void 0===i||void 0===n)&&iD(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(i+256*this[++e]+65536*this[++e]+16777216*this[++e])}),ic.prototype.readBigInt64BE=iH(function(e){iP(e>>>=0,"offset");let i=this[e],n=this[e+7];return(void 0===i||void 0===n)&&iD(e,this.length-8),(BigInt((i<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+n)}),ic.prototype.readFloatLE=function(e,i){return e>>>=0,i||iI(e,4,this.length),Q(this,e,!0,23,4)},ic.prototype.readFloatBE=function(e,i){return e>>>=0,i||iI(e,4,this.length),Q(this,e,!1,23,4)},ic.prototype.readDoubleLE=function(e,i){return e>>>=0,i||iI(e,8,this.length),Q(this,e,!0,52,8)},ic.prototype.readDoubleBE=function(e,i){return e>>>=0,i||iI(e,8,this.length),Q(this,e,!1,52,8)},ic.prototype.writeUintLE=ic.prototype.writeUIntLE=function(e,i,n,r){if(e=+e,i>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;i_(this,e,i,n,r,0)}let o=1,a=0;for(this[i]=255&e;++a<n&&(o*=256);)this[i+a]=e/o&255;return i+n},ic.prototype.writeUintBE=ic.prototype.writeUIntBE=function(e,i,n,r){if(e=+e,i>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;i_(this,e,i,n,r,0)}let o=n-1,a=1;for(this[i+o]=255&e;--o>=0&&(a*=256);)this[i+o]=e/a&255;return i+n},ic.prototype.writeUint8=ic.prototype.writeUInt8=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,1,255,0),this[i]=255&e,i+1},ic.prototype.writeUint16LE=ic.prototype.writeUInt16LE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,2,65535,0),this[i]=255&e,this[i+1]=e>>>8,i+2},ic.prototype.writeUint16BE=ic.prototype.writeUInt16BE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,2,65535,0),this[i]=e>>>8,this[i+1]=255&e,i+2},ic.prototype.writeUint32LE=ic.prototype.writeUInt32LE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,4,4294967295,0),this[i+3]=e>>>24,this[i+2]=e>>>16,this[i+1]=e>>>8,this[i]=255&e,i+4},ic.prototype.writeUint32BE=ic.prototype.writeUInt32BE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,4,4294967295,0),this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e,i+4},ic.prototype.writeBigUInt64LE=iH(function(e,i=0){return iS(this,e,i,BigInt(0),BigInt("0xffffffffffffffff"))}),ic.prototype.writeBigUInt64BE=iH(function(e,i=0){return iT(this,e,i,BigInt(0),BigInt("0xffffffffffffffff"))}),ic.prototype.writeIntLE=function(e,i,n,r){if(e=+e,i>>>=0,!r){let r=Math.pow(2,8*n-1);i_(this,e,i,n,r-1,-r)}let o=0,a=1,l=0;for(this[i]=255&e;++o<n&&(a*=256);)e<0&&0===l&&0!==this[i+o-1]&&(l=1),this[i+o]=(e/a>>0)-l&255;return i+n},ic.prototype.writeIntBE=function(e,i,n,r){if(e=+e,i>>>=0,!r){let r=Math.pow(2,8*n-1);i_(this,e,i,n,r-1,-r)}let o=n-1,a=1,l=0;for(this[i+o]=255&e;--o>=0&&(a*=256);)e<0&&0===l&&0!==this[i+o+1]&&(l=1),this[i+o]=(e/a>>0)-l&255;return i+n},ic.prototype.writeInt8=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,1,127,-128),e<0&&(e=255+e+1),this[i]=255&e,i+1},ic.prototype.writeInt16LE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,2,32767,-32768),this[i]=255&e,this[i+1]=e>>>8,i+2},ic.prototype.writeInt16BE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,2,32767,-32768),this[i]=e>>>8,this[i+1]=255&e,i+2},ic.prototype.writeInt32LE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,4,2147483647,-2147483648),this[i]=255&e,this[i+1]=e>>>8,this[i+2]=e>>>16,this[i+3]=e>>>24,i+4},ic.prototype.writeInt32BE=function(e,i,n){return e=+e,i>>>=0,n||i_(this,e,i,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e,i+4},ic.prototype.writeBigInt64LE=iH(function(e,i=0){return iS(this,e,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ic.prototype.writeBigInt64BE=iH(function(e,i=0){return iT(this,e,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ic.prototype.writeFloatLE=function(e,i,n){return ix(this,e,i,!0,n)},ic.prototype.writeFloatBE=function(e,i,n){return ix(this,e,i,!1,n)},ic.prototype.writeDoubleLE=function(e,i,n){return iA(this,e,i,!0,n)},ic.prototype.writeDoubleBE=function(e,i,n){return iA(this,e,i,!1,n)},ic.prototype.copy=function(e,i,n,r){if(!ic.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),i>=e.length&&(i=e.length),i||(i=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(i<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-i<r-n&&(r=e.length-i+n);let o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(i,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),i),o},ic.prototype.fill=function(e,i,n,r){let o;if("string"==typeof e){if("string"==typeof i?(r=i,i=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!ic.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(i<0||this.length<i||this.length<n)throw RangeError("Out of range index");if(n<=i)return this;if(i>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=i;o<n;++o)this[o]=e;else{let a=ic.isBuffer(e)?e:ic.from(e,r),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-i;++o)this[o+i]=a[o%l]}return this};const iO={};function iL(e,i,n){iO[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function iR(e){let i="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)i=`_${e.slice(n-3,n)}${i}`;return`${e.slice(0,n)}${i}`}function iN(e,i,n,r,o,a){if(e>n||e<i){let r;let o="bigint"==typeof i?"n":"";throw r=a>3?0===i||i===BigInt(0)?`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:`>= ${i}${o} and <= ${n}${o}`,new iO.ERR_OUT_OF_RANGE("value",r,e)}iP(o,"offset"),(void 0===r[o]||void 0===r[o+a])&&iD(o,r.length-(a+1))}function iP(e,i){if("number"!=typeof e)throw new iO.ERR_INVALID_ARG_TYPE(i,"number",e)}function iD(e,i,n){if(Math.floor(e)!==e)throw iP(e,n),new iO.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(i<0)throw new iO.ERR_BUFFER_OUT_OF_BOUNDS;throw new iO.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${i}`,e)}iL("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),iL("ERR_INVALID_ARG_TYPE",function(e,i){return`The "${e}" argument must be of type number. Received type ${typeof i}`},TypeError),iL("ERR_OUT_OF_RANGE",function(e,i,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?o=iR(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=iR(o)),o+="n"),r+=` It must be ${i}. Received ${o}`},RangeError);const iM=/[^+/0-9A-Za-z-_]/g;function iB(e,i){let n;i=i||1/0;let r=e.length,o=null,a=[];for(let l=0;l<r;++l){if((n=e.charCodeAt(l))>55295&&n<57344){if(!o){if(n>56319||l+1===r){(i-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(i-=3)>-1&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(i-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((i-=1)<0)break;a.push(n)}else if(n<2048){if((i-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((i-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((i-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function iF(e){return X(function(e){if((e=(e=e.split("=")[0]).trim().replace(iM,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function iU(e,i,n,r){let o;for(o=0;o<r&&!(o+n>=i.length)&&!(o>=e.length);++o)i[o+n]=e[o];return o}function ij(e,i){return e instanceof i||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===i.name}const iV=function(){let e="0123456789abcdef",i=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let o=0;o<16;++o)i[r+o]=e[n]+e[o]}return i}();function iH(e){return"undefined"==typeof BigInt?iz:e}function iz(){throw Error("BigInt not supported")}const iq="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}iK.UNAUTHENTICATED=new iK(null),iK.GOOGLE_CREDENTIALS=new iK("google-credentials-uid"),iK.FIRST_PARTY=new iK("first-party-uid"),iK.MOCK_USER=new iK("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iW="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new to("@firebase/firestore");function iG(){return i$.logLevel}function iY(e,...i){if(i$.logLevel<=F.DEBUG){let n=i.map(iQ);i$.debug(`Firestore (${iW}): ${e}`,...n)}}function iX(e,...i){if(i$.logLevel<=F.ERROR){let n=i.map(iQ);i$.error(`Firestore (${iW}): ${e}`,...n)}}function iJ(e,...i){if(i$.logLevel<=F.WARN){let n=i.map(iQ);i$.warn(`Firestore (${iW}): ${e}`,...n)}}function iQ(e){if("string"==typeof e)return e;try{/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return JSON.stringify(e)}catch(i){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(e="Unexpected state"){let i=`FIRESTORE (${iW}) INTERNAL ASSERTION FAILED: `+e;throw iX(i),Error(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class i1 extends e${constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(iK.UNAUTHENTICATED))}shutdown(){}}class i6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class i3{constructor(e){this.t=e,this.currentUser=iK.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){let n=this.i,r=e=>this.i!==n?(n=this.i,i(e)):Promise.resolve(),o=new i2;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new i2,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let i=o;e.enqueueRetryable(async()=>{await i.promise,await r(this.currentUser)})},l=e=>{iY("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(e=>l(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?l(e):(iY("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new i2)}},0),a()}getToken(){let e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(i=>this.i!==e?(iY("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?("string"==typeof i.accessToken||iZ(),new i4(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||iZ(),new iK(e)}}class i9{constructor(e,i,n){this.l=e,this.h=i,this.P=n,this.type="FirstParty",this.user=iK.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class i8{constructor(e,i,n){this.l=e,this.h=i,this.P=n}getToken(){return Promise.resolve(new i9(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(iK.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ne{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,i){let n=e=>{null!=e.error&&iY("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.R;return this.R=e.token,iY("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?i(e.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};let r=e=>{iY("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){let e=this.A.getImmediate({optional:!0});e?r(e):iY("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||iZ(),this.R=e.token,new i7(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,n="";for(;n.length<20;){let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let i="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(n);else for(let e=0;e<40;e++)n[e]=Math.floor(256*Math.random());return n}(0);for(let o=0;o<r.length;++o)n.length<20&&r[o]<i&&(n+=e.charAt(r[o]%e.length))}return n}}function ni(e,i){return e<i?-1:e>i?1:0}function nn(e,i,n){return e.length===i.length&&e.every((e,r)=>n(e,i[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0||i>=1e9)throw new i1(i0.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800||e>=253402300800)throw new i1(i0.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){let i=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*i));return new nr(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ni(this.nanoseconds,e.nanoseconds):ni(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.timestamp=e}static fromTimestamp(e){return new no(e)}static min(){return new no(new nr(0,0))}static max(){return new no(new nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,i,n){void 0===i?i=0:i>e.length&&iZ(),void 0===n?n=e.length-i:n>e.length-i&&iZ(),this.segments=e,this.offset=i,this.len=n}get length(){return this.len}isEqual(e){return 0===ns.comparator(this,e)}child(e){let i=this.segments.slice(this.offset,this.limit());return e instanceof ns?e.forEach(e=>{i.push(e)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,n=this.limit();i<n;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){let n=Math.min(e.length,i.length);for(let r=0;r<n;r++){let n=e.get(r),o=i.get(r);if(n<o)return -1;if(n>o)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class na extends ns{construct(e,i,n){return new na(e,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let i=[];for(let n of e){if(n.indexOf("//")>=0)throw new i1(i0.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(e=>e.length>0))}return new na(i)}static emptyPath(){return new na([])}}const nl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nc extends ns{construct(e,i,n){return new nc(e,i,n)}static isValidIdentifier(e){return nl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nc(["__name__"])}static fromServerFormat(e){let i=[],n="",r=0,o=()=>{if(0===n.length)throw new i1(i0.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""},a=!1;for(;r<e.length;){let i=e[r];if("\\"===i){if(r+1===e.length)throw new i1(i0.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let i=e[r+1];if("\\"!==i&&"."!==i&&"`"!==i)throw new i1(i0.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=i,r+=2}else"`"===i?a=!a:"."!==i||a?n+=i:o(),r++}if(o(),a)throw new i1(i0.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nc(i)}static emptyPath(){return new nc([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.path=e}static fromPath(e){return new nu(na.fromString(e))}static fromName(e){return new nu(na.fromString(e).popFirst(5))}static empty(){return new nu(na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===na.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return na.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nu(new na(e.slice()))}}class nh{constructor(e,i,n){this.readTime=e,this.documentKey=i,this.largestBatchId=n}static min(){return new nh(no.min(),nu.empty(),-1)}static max(){return new nh(no.max(),nu.empty(),-1)}}class nd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(e){if(e.code!==i0.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;iY("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&iZ(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new np((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=e=>{this.wrapFailure(i,e).next(n,r)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{let i=e();return i instanceof np?i:np.resolve(i)}catch(e){return np.reject(e)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):np.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):np.reject(i)}static resolve(e){return new np((i,n)=>{i(e)})}static reject(e){return new np((i,n)=>{n(e)})}static waitFor(e){return new np((i,n)=>{let r=0,o=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++o,a&&o===r&&i()},e=>n(e))}),a=!0,o===r&&i()})}static or(e){let i=np.resolve(!1);for(let n of e)i=i.next(e=>e?np.resolve(e):n());return i}static forEach(e,i){let n=[];return e.forEach((e,r)=>{n.push(i.call(this,e,r))}),this.waitFor(n)}static mapArray(e,i){return new np((n,r)=>{let o=e.length,a=Array(o),l=0;for(let c=0;c<o;c++){let u=c;i(e[u]).next(e=>{a[u]=e,++l===o&&n(a)},e=>r(e))}})}static doWhile(e,i){return new np((n,r)=>{let o=()=>{!0===e()?i().next(()=>{o()},r):n()};o()})}}function ng(e){return"IndexedDbTransactionError"===e.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=e=>this.ie(e),this.se=e=>i.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}function nv(e){return 0===e&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e){let i=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&i++;return i}function ny(e,i){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&i(n,e[n])}function nw(e){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0}nm.oe=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,i){this.comparator=e,this.root=i||nI.EMPTY}insert(e,i){return new nk(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,nI.BLACK,null,null))}remove(e){return new nk(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nI.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){let n=this.comparator(e,i.key);if(0===n)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(e){let i=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(0===r)return i+n.left.size;r<0?n=n.left:(i+=n.left.size+1,n=n.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,n)=>(e(i,n),!1))}toString(){let e=[];return this.inorderTraversal((i,n)=>(e.push(`${i}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nE(this.root,e,this.comparator,!1)}getReverseIterator(){return new nE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nE(this.root,e,this.comparator,!0)}}class nE{constructor(e,i,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=i?n(e.key,i):1,i&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nI{constructor(e,i,n,r,o){this.key=e,this.value=i,this.color=null!=n?n:nI.RED,this.left=null!=r?r:nI.EMPTY,this.right=null!=o?o:nI.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,n,r,o){return new nI(null!=e?e:this.key,null!=i?i:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let r=this,o=n(e,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(e,i,n),null):0===o?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(e,i,n))).fixUp()}removeMin(){if(this.left.isEmpty())return nI.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,i){let n,r=this;if(0>i(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===i(e,r.key)){if(r.right.isEmpty())return nI.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nI.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nI.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw iZ();let e=this.left.check();if(e!==this.right.check())throw iZ();return e+(this.isRed()?0:1)}}nI.EMPTY=null,nI.RED=!0,nI.BLACK=!1,nI.EMPTY=new class{constructor(){this.size=0}get key(){throw iZ()}get value(){throw iZ()}get color(){throw iZ()}get left(){throw iZ()}get right(){throw iZ()}copy(e,i,n,r,o){return this}insert(e,i,n){return new nI(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.comparator=e,this.data=new nk(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,n)=>(e(i),!1))}forEachInRange(e,i){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;i(r.key)}}forEachWhile(e,i){let n;for(n=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new nS(this.data.getIterator())}getIteratorFrom(e){return new nS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(e=>{i=i.add(e)}),i}isEqual(e){if(!(e instanceof n_)||this.size!==e.size)return!1;let i=this.data.getIterator(),n=e.data.getIterator();for(;i.hasNext();){let e=i.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(i=>{e.push(i)}),e}toString(){let e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){let i=new n_(this.comparator);return i.data=e,i}}class nS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.fields=e,e.sort(nc.comparator)}static empty(){return new nT([])}unionWith(e){let i=new n_(nc.comparator);for(let e of this.fields)i=i.add(e);for(let n of e)i=i.add(n);return new nT(i.toArray())}covers(e){for(let i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return nn(this.fields,e.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.binaryString=e}static fromBase64String(e){return new nx(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nC("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new nx(function(e){let i="";for(let n=0;n<e.length;++n)i+=String.fromCharCode(e[n]);return i}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ni(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nx.EMPTY_BYTE_STRING=new nx("");const nA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nO(e){if(e||iZ(),"string"==typeof e){let i=0,n=nA.exec(e);if(n||iZ(),n[1]){let e=n[1];i=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:i}}return{seconds:nL(e.seconds),nanos:nL(e.nanos)}}function nL(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nR(e){return"string"==typeof e?nx.fromBase64String(e):nx.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(e){var i,n;return"server_timestamp"===(null===(n=((null===(i=null==e?void 0:e.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nP(e){let i=e.mapValue.fields.__previous_value__;return nN(i)?nP(i):i}function nD(e){let i=nO(e.mapValue.fields.__local_write_time__.timestampValue);return new nr(i.seconds,i.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,i,n,r,o,a,l,c,u){this.databaseId=e,this.appId=i,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class nB{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new nB("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nB&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nU(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nN(e)?4:nQ(e)?9007199254740991:10:iZ()}function nj(e,i){if(e===i)return!0;let n=nU(e);if(n!==nU(i))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===i.booleanValue;case 4:return nD(e).isEqual(nD(i));case 3:return function(e,i){if("string"==typeof e.timestampValue&&"string"==typeof i.timestampValue&&e.timestampValue.length===i.timestampValue.length)return e.timestampValue===i.timestampValue;let n=nO(e.timestampValue),r=nO(i.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,i);case 5:return e.stringValue===i.stringValue;case 6:return nR(e.bytesValue).isEqual(nR(i.bytesValue));case 7:return e.referenceValue===i.referenceValue;case 8:return nL(e.geoPointValue.latitude)===nL(i.geoPointValue.latitude)&&nL(e.geoPointValue.longitude)===nL(i.geoPointValue.longitude);case 2:return function(e,i){if("integerValue"in e&&"integerValue"in i)return nL(e.integerValue)===nL(i.integerValue);if("doubleValue"in e&&"doubleValue"in i){let n=nL(e.doubleValue),r=nL(i.doubleValue);return n===r?nv(n)===nv(r):isNaN(n)&&isNaN(r)}return!1}(e,i);case 9:return nn(e.arrayValue.values||[],i.arrayValue.values||[],nj);case 10:return function(e,i){let n=e.mapValue.fields||{},r=i.mapValue.fields||{};if(nb(n)!==nb(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!nj(n[e],r[e])))return!1;return!0}(e,i);default:return iZ()}}function nV(e,i){return void 0!==(e.values||[]).find(e=>nj(e,i))}function nH(e,i){if(e===i)return 0;let n=nU(e),r=nU(i);if(n!==r)return ni(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ni(e.booleanValue,i.booleanValue);case 2:return function(e,i){let n=nL(e.integerValue||e.doubleValue),r=nL(i.integerValue||i.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,i);case 3:return nz(e.timestampValue,i.timestampValue);case 4:return nz(nD(e),nD(i));case 5:return ni(e.stringValue,i.stringValue);case 6:return function(e,i){let n=nR(e),r=nR(i);return n.compareTo(r)}(e.bytesValue,i.bytesValue);case 7:return function(e,i){let n=e.split("/"),r=i.split("/");for(let e=0;e<n.length&&e<r.length;e++){let i=ni(n[e],r[e]);if(0!==i)return i}return ni(n.length,r.length)}(e.referenceValue,i.referenceValue);case 8:return function(e,i){let n=ni(nL(e.latitude),nL(i.latitude));return 0!==n?n:ni(nL(e.longitude),nL(i.longitude))}(e.geoPointValue,i.geoPointValue);case 9:return function(e,i){let n=e.values||[],r=i.values||[];for(let e=0;e<n.length&&e<r.length;++e){let i=nH(n[e],r[e]);if(i)return i}return ni(n.length,r.length)}(e.arrayValue,i.arrayValue);case 10:return function(e,i){if(e===nF.mapValue&&i===nF.mapValue)return 0;if(e===nF.mapValue)return 1;if(i===nF.mapValue)return -1;let n=e.fields||{},r=Object.keys(n),o=i.fields||{},a=Object.keys(o);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let i=ni(r[e],a[e]);if(0!==i)return i;let l=nH(n[r[e]],o[a[e]]);if(0!==l)return l}return ni(r.length,a.length)}(e.mapValue,i.mapValue);default:throw iZ()}}function nz(e,i){if("string"==typeof e&&"string"==typeof i&&e.length===i.length)return ni(e,i);let n=nO(e),r=nO(i),o=ni(n.seconds,r.seconds);return 0!==o?o:ni(n.nanos,r.nanos)}function nq(e){var i,n;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let i=nO(e);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nR(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,nu.fromName(i).toString()):"geoPointValue"in e?(n=e.geoPointValue,`geo(${n.latitude},${n.longitude})`):"arrayValue"in e?function(e){let i="[",n=!0;for(let r of e.values||[])n?n=!1:i+=",",i+=nq(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(e){let i=Object.keys(e.fields||{}).sort(),n="{",r=!0;for(let o of i)r?r=!1:n+=",",n+=`${o}:${nq(e.fields[o])}`;return n+"}"}(e.mapValue):iZ()}function nK(e,i){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${i.path.canonicalString()}`}}function nW(e){return!!e&&"integerValue"in e}function n$(e){return!!e&&"arrayValue"in e}function nG(e){return!!e&&"nullValue"in e}function nY(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nX(e){return!!e&&"mapValue"in e}function nJ(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let i={mapValue:{fields:{}}};return ny(e.mapValue.fields,(e,n)=>i.mapValue.fields[e]=nJ(n)),i}if(e.arrayValue){let i={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)i.arrayValue.values[n]=nJ(e.arrayValue.values[n]);return i}return Object.assign({},e)}function nQ(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e){this.value=e}static empty(){return new nZ({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let n=0;n<e.length-1;++n)if(!nX(i=(i.mapValue.fields||{})[e.get(n)]))return null;return(i=(i.mapValue.fields||{})[e.lastSegment()])||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=nJ(i)}setAll(e){let i=nc.emptyPath(),n={},r=[];e.forEach((e,o)=>{if(!i.isImmediateParentOf(o)){let e=this.getFieldsMap(i);this.applyChanges(e,n,r),n={},r=[],i=o.popLast()}e?n[o.lastSegment()]=nJ(e):r.push(o.lastSegment())});let o=this.getFieldsMap(i);this.applyChanges(o,n,r)}delete(e){let i=this.field(e.popLast());nX(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return nj(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=i.mapValue.fields[e.get(n)];nX(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},i.mapValue.fields[e.get(n)]=r),i=r}return i.mapValue.fields}applyChanges(e,i,n){for(let r of(ny(i,(i,n)=>e[i]=n),n))delete e[r]}clone(){return new nZ(nJ(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,i,n,r,o,a,l){this.key=e,this.documentType=i,this.version=n,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n0(e,0,no.min(),no.min(),no.min(),nZ.empty(),0)}static newFoundDocument(e,i,n,r){return new n0(e,1,i,no.min(),n,r,0)}static newNoDocument(e,i){return new n0(e,2,i,no.min(),no.min(),nZ.empty(),0)}static newUnknownDocument(e,i){return new n0(e,3,i,no.min(),no.min(),nZ.empty(),2)}convertToFoundDocument(e,i){return this.createTime.isEqual(no.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nZ.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nZ.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=no.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof n0&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n0(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,i){this.position=e,this.inclusive=i}}function n2(e,i,n){let r=0;for(let o=0;o<e.position.length;o++){let a=i[o],l=e.position[o];if(r=a.field.isKeyField()?nu.comparator(nu.fromName(l.referenceValue),n.key):nH(l,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function n4(e,i){if(null===e)return null===i;if(null===i||e.inclusive!==i.inclusive||e.position.length!==i.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!nj(e.position[n],i.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,i="asc"){this.field=e,this.dir=i}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{}class n3 extends n6{constructor(e,i,n){super(),this.field=e,this.op=i,this.value=n}static create(e,i,n){return e.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(e,i,n):new re(e,i,n):"array-contains"===i?new rr(e,n):"in"===i?new ro(e,n):"not-in"===i?new rs(e,n):"array-contains-any"===i?new ra(e,n):new n3(e,i,n)}static createKeyFieldInFilter(e,i,n){return"in"===i?new rt(e,n):new ri(e,n)}matches(e){let i=e.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(nH(i,this.value)):null!==i&&nU(this.value)===nU(i)&&this.matchesComparison(nH(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return iZ()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class n9 extends n6{constructor(e,i){super(),this.filters=e,this.op=i,this.ae=null}static create(e,i){return new n9(e,i)}matches(e){return n8(this)?void 0===this.filters.find(i=>!i.matches(e)):void 0!==this.filters.find(i=>i.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function n8(e){return"and"===e.op}function n7(e){for(let i of e.filters)if(i instanceof n9)return!1;return!0}class re extends n3{constructor(e,i,n){super(e,i,n),this.key=nu.fromName(n.referenceValue)}matches(e){let i=nu.comparator(e.key,this.key);return this.matchesComparison(i)}}class rt extends n3{constructor(e,i){super(e,"in",i),this.keys=rn("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class ri extends n3{constructor(e,i){super(e,"not-in",i),this.keys=rn("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function rn(e,i){var n;return((null===(n=i.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>nu.fromName(e.referenceValue))}class rr extends n3{constructor(e,i){super(e,"array-contains",i)}matches(e){let i=e.data.field(this.field);return n$(i)&&nV(i.arrayValue,this.value)}}class ro extends n3{constructor(e,i){super(e,"in",i)}matches(e){let i=e.data.field(this.field);return null!==i&&nV(this.value.arrayValue,i)}}class rs extends n3{constructor(e,i){super(e,"not-in",i)}matches(e){if(nV(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let i=e.data.field(this.field);return null!==i&&!nV(this.value.arrayValue,i)}}class ra extends n3{constructor(e,i){super(e,"array-contains-any",i)}matches(e){let i=e.data.field(this.field);return!(!n$(i)||!i.arrayValue.values)&&i.arrayValue.values.some(e=>nV(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,i=null,n=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=i,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.ue=null}}function rc(e,i=null,n=[],r=[],o=null,a=null,l=null){return new rl(e,i,n,r,o,a,l)}function ru(e){if(null===e.ue){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:"+e.filters.map(e=>(function e(i){if(i instanceof n3)return i.field.canonicalString()+i.op.toString()+nq(i.value);if(n7(i)&&n8(i))return i.filters.map(i=>e(i)).join(",");{let n=i.filters.map(i=>e(i)).join(",");return`${i.op}(${n})`}})(e)).join(",")+"|ob:"+e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(i+="|l:"+e.limit),e.startAt&&(i+="|lb:"+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(e=>nq(e)).join(",")),e.endAt&&(i+="|ub:"+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(e=>nq(e)).join(",")),e.ue=i}return e.ue}function rh(e,i){if(e.limit!==i.limit||e.orderBy.length!==i.orderBy.length)return!1;for(let o=0;o<e.orderBy.length;o++){var n,r;if(n=e.orderBy[o],r=i.orderBy[o],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1}if(e.filters.length!==i.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!function e(i,n){return i instanceof n3?n instanceof n3&&i.op===n.op&&i.field.isEqual(n.field)&&nj(i.value,n.value):i instanceof n9?n instanceof n9&&i.op===n.op&&i.filters.length===n.filters.length&&i.filters.reduce((i,r,o)=>i&&e(r,n.filters[o]),!0):void iZ()}(e.filters[n],i.filters[n]))return!1;return e.collectionGroup===i.collectionGroup&&!!e.path.isEqual(i.path)&&!!n4(e.startAt,i.startAt)&&n4(e.endAt,i.endAt)}function rd(e){return nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,i=null,n=[],r=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function rg(e){return null!==e.collectionGroup}function rm(e){if(null===e.ce){let i;e.ce=[];let n=new Set;for(let i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(i=new n_(nc.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(i=i.add(e.field))})}),i).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new n5(i,r))}),n.has(nc.keyField().canonicalString())||e.ce.push(new n5(nc.keyField(),r))}return e.ce}function rv(e){return e.le||(e.le=function(e,i){if("F"===e.limitType)return rc(e.path,e.collectionGroup,i,e.filters,e.limit,e.startAt,e.endAt);{i=i.map(e=>{let i="desc"===e.dir?"asc":"desc";return new n5(e.field,i)});let n=e.endAt?new n1(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new n1(e.startAt.position,e.startAt.inclusive):null;return rc(e.path,e.collectionGroup,i,e.filters,e.limit,n,r)}}(e,rm(e))),e.le}function rb(e,i){let n=e.filters.concat([i]);return new rf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ry(e,i,n){return new rf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),i,n,e.startAt,e.endAt)}function rw(e,i){return rh(rv(e),rv(i))&&e.limitType===i.limitType}function rk(e){return`${ru(rv(e))}|lt:${e.limitType}`}function rE(e){var i;let n;return`Query(target=${n=(i=rv(e)).path.canonicalString(),null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(e=>(function e(i){return i instanceof n3?`${i.field.canonicalString()} ${i.op} ${nq(i.value)}`:i instanceof n9?i.op.toString()+" {"+i.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==i.limit||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),i.startAt&&(n+=", startAt: "+(i.startAt.inclusive?"b:":"a:")+i.startAt.position.map(e=>nq(e)).join(",")),i.endAt&&(n+=", endAt: "+(i.endAt.inclusive?"a:":"b:")+i.endAt.position.map(e=>nq(e)).join(",")),`Target(${n})`}; limitType=${e.limitType})`}function rI(e,i){return i.isFoundDocument()&&function(e,i){let n=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):nu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,i)&&function(e,i){for(let n of rm(e))if(!n.field.isKeyField()&&null===i.data.field(n.field))return!1;return!0}(e,i)&&function(e,i){for(let n of e.filters)if(!n.matches(i))return!1;return!0}(e,i)&&(!e.startAt||!!function(e,i,n){let r=n2(e,i,n);return e.inclusive?r<=0:r<0}(e.startAt,rm(e),i))&&(!e.endAt||!!function(e,i,n){let r=n2(e,i,n);return e.inclusive?r>=0:r>0}(e.endAt,rm(e),i))}function r_(e){return(i,n)=>{let r=!1;for(let o of rm(e)){let e=function(e,i,n){let r=e.field.isKeyField()?nu.comparator(i.key,n.key):function(e,i,n){let r=i.data.field(e),o=n.data.field(e);return null!==r&&null!==o?nH(r,o):iZ()}(e.field,i,n);switch(e.dir){case"asc":return r;case"desc":return -1*r;default:return iZ()}}(o,i,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){let i=this.mapKeyFn(e),n=this.inner[i];if(void 0!==n){for(let[i,r]of n)if(this.equalsFn(i,e))return r}}has(e){return void 0!==this.get(e)}set(e,i){let n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,i]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,i]);r.push([e,i]),this.innerSize++}delete(e){let i=this.mapKeyFn(e),n=this.inner[i];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[i]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ny(this.inner,(i,n)=>{for(let[i,r]of n)e(i,r)})}isEmpty(){return nw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new nk(nu.comparator),rC=new nk(nu.comparator);function rx(...e){let i=rC;for(let n of e)i=i.insert(n.key,n);return i}function rA(e){let i=rC;return e.forEach((e,n)=>i=i.insert(e,n.overlayedDocument)),i}function rO(){return new rS(e=>e.toString(),(e,i)=>e.isEqual(i))}const rL=new nk(nu.comparator),rR=new n_(nu.comparator);function rN(...e){let i=rR;for(let n of e)i=i.add(n);return i}const rP=new n_(ni);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e,i){if(e.useProto3Json){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nv(i)?"-0":i}}function rM(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(){this._=void 0}}function rF(e,i){return e instanceof rq?nW(i)||i&&"doubleValue"in i?i:{integerValue:0}:null}class rU extends rB{}class rj extends rB{constructor(e){super(),this.elements=e}}function rV(e,i){let n=rW(i);for(let i of e.elements)n.some(e=>nj(e,i))||n.push(i);return{arrayValue:{values:n}}}class rH extends rB{constructor(e){super(),this.elements=e}}function rz(e,i){let n=rW(i);for(let i of e.elements)n=n.filter(e=>!nj(e,i));return{arrayValue:{values:n}}}class rq extends rB{constructor(e,i){super(),this.serializer=e,this.Pe=i}}function rK(e){return nL(e.integerValue||e.doubleValue)}function rW(e){return n$(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,i){this.field=e,this.transform=i}}class rG{constructor(e,i){this.version=e,this.transformResults=i}}class rY{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new rY}static exists(e){return new rY(void 0,e)}static updateTime(e){return new rY(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rX(e,i){return void 0!==e.updateTime?i.isFoundDocument()&&i.version.isEqual(e.updateTime):void 0===e.exists||e.exists===i.isFoundDocument()}class rJ{}function rQ(e,i){if(!e.hasLocalMutations||i&&0===i.fields.length)return null;if(null===i)return e.isNoDocument()?new r3(e.key,rY.none()):new r1(e.key,e.data,rY.none());{let n=e.data,r=nZ.empty(),o=new n_(nc.comparator);for(let e of i.fields)if(!o.has(e)){let i=n.field(e);null===i&&e.length>1&&(e=e.popLast(),i=n.field(e)),null===i?r.delete(e):r.set(e,i),o=o.add(e)}return new r2(e.key,r,new nT(o.toArray()),rY.none())}}function rZ(e,i,n,r){return e instanceof r1?function(e,i,n,r){if(!rX(e.precondition,i))return n;let o=e.value.clone(),a=r6(e.fieldTransforms,r,i);return o.setAll(a),i.convertToFoundDocument(i.version,o).setHasLocalMutations(),null}(e,i,n,r):e instanceof r2?function(e,i,n,r){if(!rX(e.precondition,i))return n;let o=r6(e.fieldTransforms,r,i),a=i.data;return(a.setAll(r4(e)),a.setAll(o),i.convertToFoundDocument(i.version,a).setHasLocalMutations(),null===n)?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,i,n,r):rX(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):n}function r0(e,i){var n,r;return e.type===i.type&&!!e.key.isEqual(i.key)&&!!e.precondition.isEqual(i.precondition)&&(n=e.fieldTransforms,r=i.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&nn(n,r,(e,i)=>{var n,r;return e.field.isEqual(i.field)&&(n=e.transform,r=i.transform,n instanceof rj&&r instanceof rj||n instanceof rH&&r instanceof rH?nn(n.elements,r.elements,nj):n instanceof rq&&r instanceof rq?nj(n.Pe,r.Pe):n instanceof rU&&r instanceof rU)})))&&(0===e.type?e.value.isEqual(i.value):1!==e.type||e.data.isEqual(i.data)&&e.fieldMask.isEqual(i.fieldMask))}class r1 extends rJ{constructor(e,i,n,r=[]){super(),this.key=e,this.value=i,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class r2 extends rJ{constructor(e,i,n,r,o=[]){super(),this.key=e,this.data=i,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function r4(e){let i=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);i.set(n,r)}}),i}function r5(e,i,n){var r;let o=new Map;e.length===n.length||iZ();for(let a=0;a<n.length;a++){let l=e[a],c=l.transform,u=i.data.field(l.field);o.set(l.field,(r=n[a],c instanceof rj?rV(c,u):c instanceof rH?rz(c,u):r))}return o}function r6(e,i,n){let r=new Map;for(let o of e){let e=o.transform,a=n.data.field(o.field);r.set(o.field,e instanceof rU?function(e,i){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return i&&nN(i)&&(i=nP(i)),i&&(n.fields.__previous_value__=i),{mapValue:n}}(i,a):e instanceof rj?rV(e,a):e instanceof rH?rz(e,a):function(e,i){let n=rF(e,i),r=rK(n)+rK(e.Pe);return nW(n)&&nW(e.Pe)?rM(r):rD(e.serializer,r)}(e,a))}return r}class r3 extends rJ{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r9 extends rJ{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,i,n,r){this.batchId=e,this.localWriteTime=i,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,i){let n=i.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];if(o.key.isEqual(e.key)){var r;r=n[i],o instanceof r1?function(e,i,n){let r=e.value.clone(),o=r5(e.fieldTransforms,i,n.transformResults);r.setAll(o),i.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(o,e,r):o instanceof r2?function(e,i,n){if(!rX(e.precondition,i))return void i.convertToUnknownDocument(n.version);let r=r5(e.fieldTransforms,i,n.transformResults),o=i.data;o.setAll(r4(e)),o.setAll(r),i.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(o,e,r):function(e,i,n){i.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,r)}}}applyToLocalView(e,i){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(i=rZ(n,e,i,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(i=rZ(n,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){let n=rO();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields),c=rQ(a,l=i.has(r.key)?null:l);null!==c&&n.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(no.min())}),n}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),rN())}isEqual(e){return this.batchId===e.batchId&&nn(this.mutations,e.mutations,(e,i)=>r0(e,i))&&nn(this.baseMutations,e.baseMutations,(e,i)=>r0(e,i))}}class r7{constructor(e,i,n,r){this.batch=e,this.commitVersion=i,this.mutationResults=n,this.docVersions=r}static from(e,i,n){e.mutations.length===n.length||iZ();let r=rL,o=e.mutations;for(let e=0;e<o.length;e++)r=r.insert(o[e].key,n[e].version);return new r7(e,i,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,i){this.count=e,this.unchangedNames=i}}function oi(e){if(void 0===e)return iX("GRPC error has no .code"),i0.UNKNOWN;switch(e){case ee.OK:return i0.OK;case ee.CANCELLED:return i0.CANCELLED;case ee.UNKNOWN:return i0.UNKNOWN;case ee.DEADLINE_EXCEEDED:return i0.DEADLINE_EXCEEDED;case ee.RESOURCE_EXHAUSTED:return i0.RESOURCE_EXHAUSTED;case ee.INTERNAL:return i0.INTERNAL;case ee.UNAVAILABLE:return i0.UNAVAILABLE;case ee.UNAUTHENTICATED:return i0.UNAUTHENTICATED;case ee.INVALID_ARGUMENT:return i0.INVALID_ARGUMENT;case ee.NOT_FOUND:return i0.NOT_FOUND;case ee.ALREADY_EXISTS:return i0.ALREADY_EXISTS;case ee.PERMISSION_DENIED:return i0.PERMISSION_DENIED;case ee.FAILED_PRECONDITION:return i0.FAILED_PRECONDITION;case ee.ABORTED:return i0.ABORTED;case ee.OUT_OF_RANGE:return i0.OUT_OF_RANGE;case ee.UNIMPLEMENTED:return i0.UNIMPLEMENTED;case ee.DATA_LOSS:return i0.DATA_LOSS;default:return iZ()}}(et=ee={})[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new U([4294967295,4294967295],0);function or(e){let i=(new TextEncoder).encode(e),n=new j;return n.update(i),new Uint8Array(n.digest())}function oo(e){let i=new DataView(e.buffer),n=i.getUint32(0,!0),r=i.getUint32(4,!0),o=i.getUint32(8,!0),a=i.getUint32(12,!0);return[new U([n,r],0),new U([o,a],0)]}class os{constructor(e,i,n){if(this.bitmap=e,this.padding=i,this.hashCount=n,i<0||i>=8)throw new oa(`Invalid padding: ${i}`);if(n<0||e.length>0&&0===this.hashCount)throw new oa(`Invalid hash count: ${n}`);if(0===e.length&&0!==i)throw new oa(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*e.length-i,this.Te=U.fromNumber(this.Ie)}Ee(e,i,n){let r=e.add(i.multiply(U.fromNumber(n)));return 1===r.compare(on)&&(r=new U([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;let[i,n]=oo(or(e));for(let e=0;e<this.hashCount;e++){let r=this.Ee(i,n,e);if(!this.de(r))return!1}return!0}static create(e,i,n){let r=new os(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,i);return n.forEach(e=>r.insert(e)),r}insert(e){if(0===this.Ie)return;let[i,n]=oo(or(e));for(let e=0;e<this.hashCount;e++){let r=this.Ee(i,n,e);this.Ae(r)}}Ae(e){let i=Math.floor(e/8);this.bitmap[i]|=1<<e%8}}class oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,i,n,r,o){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,i,n){let r=new Map;return r.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,i,n)),new ol(no.min(),r,new nk(ni),rT,rN())}}class oc{constructor(e,i,n,r,o){this.resumeToken=e,this.current=i,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,i,n){return new oc(n,i,rN(),rN(),rN())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,i,n,r){this.Re=e,this.removedTargetIds=i,this.key=n,this.Ve=r}}class oh{constructor(e,i){this.targetId=e,this.me=i}}class od{constructor(e,i,n=nx.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=i,this.resumeToken=n,this.cause=r}}class of{constructor(){this.fe=0,this.ge=om(),this.pe=nx.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=rN(),i=rN(),n=rN();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:i=i.add(r);break;case 1:n=n.add(r);break;default:iZ()}}),new oc(this.pe,this.ye,e,i,n)}ve(){this.we=!1,this.ge=om()}Fe(e,i){this.we=!0,this.ge=this.ge.insert(e,i)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||iZ()}Ne(){this.we=!0,this.ye=!0}}class op{constructor(e){this.Le=e,this.Be=new Map,this.ke=rT,this.qe=og(),this.Qe=new nk(ni)}Ke(e){for(let i of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(i,e.Ve):this.Ue(i,e.key,e.Ve);for(let i of e.removedTargetIds)this.Ue(i,e.key,e.Ve)}We(e){this.forEachTarget(e,i=>{let n=this.Ge(i);switch(e.state){case 0:this.ze(i)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(i)&&(this.je(i),n.De(e.resumeToken));break;default:iZ()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.Be.forEach((e,n)=>{this.ze(n)&&i(n)})}He(e){let i=e.targetId,n=e.me.count,r=this.Je(i);if(r){let o=r.target;if(rd(o)){if(0===n){let e=new nu(o.path);this.Ue(i,e,n0.newNoDocument(e,no.min()))}else 1===n||iZ()}else{let r=this.Ye(i);if(r!==n){let n=this.Ze(e),o=n?this.Xe(n,e,r):1;0!==o&&(this.je(i),this.Qe=this.Qe.insert(i,2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){let i,n;let r=e.me.unchangedNames;if(!r||!r.bits)return null;let{bits:{bitmap:o="",padding:a=0},hashCount:l=0}=r;try{i=nR(o).toUint8Array()}catch(e){if(e instanceof nC)return iJ("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{n=new os(i,a,l)}catch(e){return iJ(e instanceof oa?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===n.Ie?null:n}Xe(e,i,n){return i.me.count===n-this.nt(e,i.targetId)?0:2}nt(e,i){let n=this.Le.getRemoteKeysForTarget(i),r=0;return n.forEach(n=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.Ue(i,n,null),r++)}),r}rt(e){let i=new Map;this.Be.forEach((n,r)=>{let o=this.Je(r);if(o){if(n.current&&rd(o.target)){let i=new nu(o.target.path);null!==this.ke.get(i)||this.it(r,i)||this.Ue(r,i,n0.newNoDocument(i,e))}n.be&&(i.set(r,n.Ce()),n.ve())}});let n=rN();this.qe.forEach((e,i)=>{let r=!0;i.forEachWhile(e=>{let i=this.Je(e);return!i||"TargetPurposeLimboResolution"===i.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((i,n)=>n.setReadTime(e));let r=new ol(e,i,this.Qe,this.ke,n);return this.ke=rT,this.qe=og(),this.Qe=new nk(ni),r}$e(e,i){if(!this.ze(e))return;let n=this.it(e,i.key)?2:0;this.Ge(e).Fe(i.key,n),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(e))}Ue(e,i,n){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,i)?r.Fe(i,1):r.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(e)),n&&(this.ke=this.ke.insert(i,n))}removeTarget(e){this.Be.delete(e)}Ye(e){let i=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let i=this.Be.get(e);return i||(i=new of,this.Be.set(e,i)),i}st(e){let i=this.qe.get(e);return i||(i=new n_(ni),this.qe=this.qe.insert(e,i)),i}ze(e){let i=null!==this.Je(e);return i||iY("WatchChangeAggregator","Detected inactive target",e),i}Je(e){let i=this.Be.get(e);return i&&i.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new of),this.Le.getRemoteKeysForTarget(e).forEach(i=>{this.Ue(e,i,null)})}it(e,i){return this.Le.getRemoteKeysForTarget(e).has(i)}}function og(){return new nk(nu.comparator)}function om(){return new nk(nu.comparator)}const ov={asc:"ASCENDING",desc:"DESCENDING"},ob={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oy={and:"AND",or:"OR"};class ow{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function ok(e,i){return e.useProto3Json||null==i?i:{value:i}}function oE(e,i){return e.useProto3Json?`${new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+i.nanoseconds).slice(-9)}Z`:{seconds:""+i.seconds,nanos:i.nanoseconds}}function oI(e,i){return e.useProto3Json?i.toBase64():i.toUint8Array()}function o_(e){return e||iZ(),no.fromTimestamp(function(e){let i=nO(e);return new nr(i.seconds,i.nanos)}(e))}function oS(e,i){return oT(e,i).canonicalString()}function oT(e,i){let n=new na(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===i?n:n.child(i)}function oC(e){let i=na.fromString(e);return oM(i)||iZ(),i}function ox(e,i){return oS(e.databaseId,i.path)}function oA(e,i){let n=oC(i);if(n.get(1)!==e.databaseId.projectId)throw new i1(i0.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new i1(i0.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nu(oR(n))}function oO(e,i){return oS(e.databaseId,i)}function oL(e){return new na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function oR(e){return e.length>4&&"documents"===e.get(4)||iZ(),e.popFirst(5)}function oN(e,i,n){return{name:ox(e,i),fields:n.value.mapValue.fields}}function oP(e){return{fieldPath:e.canonicalString()}}function oD(e){return nc.fromServerFormat(e.fieldPath)}function oM(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,i,n,r,o=no.min(),a=no.min(),l=nx.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=i,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new oB(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new oB(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oB(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oB(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.ct=e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){}Pt(e,i){this.It(e,i),i.Tt()}It(e,i){if("nullValue"in e)this.Et(i,5);else if("booleanValue"in e)this.Et(i,10),i.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(i,15),i.dt(nL(e.integerValue));else if("doubleValue"in e){let n=nL(e.doubleValue);isNaN(n)?this.Et(i,13):(this.Et(i,15),nv(n)?i.dt(0):i.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(i,20),"string"==typeof n&&(n=nO(n)),i.At(`${n.seconds||""}`),i.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,i),this.Vt(i);else if("bytesValue"in e)this.Et(i,30),i.ft(nR(e.bytesValue)),this.Vt(i);else if("referenceValue"in e)this.gt(e.referenceValue,i);else if("geoPointValue"in e){let n=e.geoPointValue;this.Et(i,45),i.dt(n.latitude||0),i.dt(n.longitude||0)}else"mapValue"in e?nQ(e)?this.Et(i,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,i),this.Vt(i)):"arrayValue"in e?(this.wt(e.arrayValue,i),this.Vt(i)):iZ()}Rt(e,i){this.Et(i,25),this.St(e,i)}St(e,i){i.At(e)}yt(e,i){let n=e.fields||{};for(let e of(this.Et(i,55),Object.keys(n)))this.Rt(e,i),this.It(n[e],i)}wt(e,i){let n=e.values||[];for(let e of(this.Et(i,50),n))this.It(e,i)}gt(e,i){this.Et(i,37),nu.fromName(e).path.forEach(e=>{this.Et(i,60),this.St(e,i)})}Et(e,i){e.dt(i)}Vt(e){e.dt(2)}}oU.bt=new oU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this._n=new oV}addToCollectionParentIndex(e,i){return this._n.add(i),np.resolve()}getCollectionParents(e,i){return np.resolve(this._n.getEntries(i))}addFieldIndex(e,i){return np.resolve()}deleteFieldIndex(e,i){return np.resolve()}deleteAllFieldIndexes(e){return np.resolve()}createTargetIndexes(e,i){return np.resolve()}getDocumentsMatchingTarget(e,i){return np.resolve(null)}getIndexType(e,i){return np.resolve(0)}getFieldIndexes(e,i){return np.resolve([])}getNextCollectionGroupToUpdate(e){return np.resolve(null)}getMinOffset(e,i){return np.resolve(nh.min())}getMinOffsetFromCollectionGroup(e,i){return np.resolve(nh.min())}updateCollectionGroup(e,i,n){return np.resolve()}updateIndexEntries(e,i){return np.resolve()}}class oV{constructor(){this.index={}}add(e){let i=e.lastSegment(),n=e.popLast(),r=this.index[i]||new n_(na.comparator),o=!r.has(n);return this.index[i]=r.add(n),o}has(e){let i=e.lastSegment(),n=e.popLast(),r=this.index[i];return r&&r.has(n)}getEntries(e){return(this.index[e]||new n_(na.comparator)).toArray()}}new Uint8Array(0);class oH{constructor(e,i,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new oH(e,oH.DEFAULT_COLLECTION_PERCENTILE,oH.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oH.DEFAULT_COLLECTION_PERCENTILE=10,oH.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oH.DEFAULT=new oH(41943040,oH.DEFAULT_COLLECTION_PERCENTILE,oH.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oH.DISABLED=new oH(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new oz(0)}static Ln(){return new oz(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(){this.changes=new rS(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,n0.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();let n=this.changes.get(i);return void 0!==n?np.resolve(n):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,i,n,r){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,i){let n=null;return this.documentOverlayCache.getOverlay(e,i).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,i))).next(e=>(null!==n&&rZ(n.mutation,e,nT.empty(),nr.now()),e))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(i=>this.getLocalViewOfDocuments(e,i,rN()).next(()=>i))}getLocalViewOfDocuments(e,i,n=rN()){let r=rO();return this.populateOverlays(e,r,i).next(()=>this.computeViews(e,i,r,n).next(e=>{let i=rx();return e.forEach((e,n)=>{i=i.insert(e,n.overlayedDocument)}),i}))}getOverlayedDocuments(e,i){let n=rO();return this.populateOverlays(e,n,i).next(()=>this.computeViews(e,i,n,rN()))}populateOverlays(e,i,n){let r=[];return n.forEach(e=>{i.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{i.set(e,n)})})}computeViews(e,i,n,r){let o=rT,a=rO(),l=rO();return i.forEach((e,i)=>{let l=n.get(i.key);r.has(i.key)&&(void 0===l||l.mutation instanceof r2)?o=o.insert(i.key,i):void 0!==l?(a.set(i.key,l.mutation.getFieldMask()),rZ(l.mutation,i,l.mutation.getFieldMask(),nr.now())):a.set(i.key,nT.empty())}),this.recalculateAndSaveOverlays(e,o).next(e=>(e.forEach((e,i)=>a.set(e,i)),i.forEach((e,i)=>{var n;return l.set(e,new oK(i,null!==(n=a.get(e))&&void 0!==n?n:null))}),l))}recalculateAndSaveOverlays(e,i){let n=rO(),r=new nk((e,i)=>e-i),o=rN();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(e=>{for(let o of e)o.keys().forEach(e=>{let a=i.get(e);if(null===a)return;let l=n.get(e)||nT.empty();l=o.applyToLocalView(a,l),n.set(e,l);let c=(r.get(o.batchId)||rN()).add(e);r=r.insert(o.batchId,c)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let r=l.getNext(),c=r.key,u=r.value,h=rO();u.forEach(e=>{if(!o.has(e)){let r=rQ(i.get(e),n.get(e));null!==r&&h.set(e,r),o=o.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return np.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,i,n,r){return nu.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,i.path):rg(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,n,r):this.getDocumentsMatchingCollectionQuery(e,i,n,r)}getNextDocuments(e,i,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,n,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,n.largestBatchId,r-o.size):np.resolve(rO()),l=-1,c=o;return a.next(i=>np.forEach(i,(i,n)=>(l<n.largestBatchId&&(l=n.largestBatchId),o.get(i)?np.resolve():this.remoteDocumentCache.getEntry(e,i).next(e=>{c=c.insert(i,e)}))).next(()=>this.populateOverlays(e,i,o)).next(()=>this.computeViews(e,c,i,rN())).next(e=>({batchId:l,changes:rA(e)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new nu(i)).next(e=>{let i=rx();return e.isFoundDocument()&&(i=i.insert(e.key,e)),i})}getDocumentsMatchingCollectionGroupQuery(e,i,n,r){let o=i.collectionGroup,a=rx();return this.indexManager.getCollectionParents(e,o).next(l=>np.forEach(l,l=>{let c=new rf(l.child(o),null,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt);return this.getDocumentsMatchingCollectionQuery(e,c,n,r).next(e=>{e.forEach((e,i)=>{a=a.insert(e,i)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,i,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,n,o,r))).next(e=>{o.forEach((i,n)=>{let r=n.getKey();null===e.get(r)&&(e=e.insert(r,n0.newInvalidDocument(r)))});let n=rx();return e.forEach((e,r)=>{let a=o.get(e);void 0!==a&&rZ(a.mutation,r,nT.empty(),nr.now()),rI(i,r)&&(n=n.insert(e,r))}),n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,i){return np.resolve(this.cr.get(i))}saveBundleMetadata(e,i){return this.cr.set(i.id,{id:i.id,version:i.version,createTime:o_(i.createTime)}),np.resolve()}getNamedQuery(e,i){return np.resolve(this.lr.get(i))}saveNamedQuery(e,i){return this.lr.set(i.name,{name:i.name,query:function(e){let i=function(e){var i;let n,r=function(e){let i=oC(e);return 4===i.length?na.emptyPath():oR(i)}(e.parent),o=e.structuredQuery,a=o.from?o.from.length:0,l=null;if(a>0){1===a||iZ();let e=o.from[0];e.allDescendants?l=e.collectionId:r=r.child(e.collectionId)}let c=[];o.where&&(c=function(e){var i;let n=function e(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=oD(e.unaryFilter.field);return n3.create(i,"==",{doubleValue:NaN});case"IS_NULL":let n=oD(e.unaryFilter.field);return n3.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=oD(e.unaryFilter.field);return n3.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=oD(e.unaryFilter.field);return n3.create(o,"!=",{nullValue:"NULL_VALUE"});default:return iZ()}}(i):void 0!==i.fieldFilter?n3.create(oD(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return iZ()}}(i.fieldFilter.op),i.fieldFilter.value):void 0!==i.compositeFilter?n9.create(i.compositeFilter.filters.map(i=>e(i)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return iZ()}}(i.compositeFilter.op)):iZ()}(e);return n instanceof n9&&n7(i=n)&&n8(i)?n.getFilters():[n]}(o.where));let u=[];o.orderBy&&(u=o.orderBy.map(e=>new n5(oD(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let h=null;o.limit&&(h=null==(n="object"==typeof(i=o.limit)?i.value:i)?null:n);let d=null;o.startAt&&(d=function(e){let i=!!e.before;return new n1(e.values||[],i)}(o.startAt));let f=null;return o.endAt&&(f=function(e){let i=!e.before;return new n1(e.values||[],i)}(o.endAt)),new rf(r,l,u,c,h,"F",d,f)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ry(i,i.limit,"L"):i}(i.bundledQuery),readTime:o_(i.readTime)}),np.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.overlays=new nk(nu.comparator),this.hr=new Map}getOverlay(e,i){return np.resolve(this.overlays.get(i))}getOverlays(e,i){let n=rO();return np.forEach(i,i=>this.getOverlay(e,i).next(e=>{null!==e&&n.set(i,e)})).next(()=>n)}saveOverlays(e,i,n){return n.forEach((n,r)=>{this.ht(e,i,r)}),np.resolve()}removeOverlaysForBatchId(e,i,n){let r=this.hr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.hr.delete(n)),np.resolve()}getOverlaysForCollection(e,i,n){let r=rO(),o=i.length+1,a=new nu(i.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let e=l.getNext().value,a=e.getKey();if(!i.isPrefixOf(a.path))break;a.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return np.resolve(r)}getOverlaysForCollectionGroup(e,i,n,r){let o=new nk((e,i)=>e-i),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===i&&e.largestBatchId>n){let i=o.get(e.largestBatchId);null===i&&(i=rO(),o=o.insert(e.largestBatchId,i)),i.set(e.getKey(),e)}}let l=rO(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((e,i)=>l.set(e,i)),!(l.size()>=r)););return np.resolve(l)}ht(e,i,n){let r=this.overlays.get(n.key);if(null!==r){let e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new oe(i,n));let o=this.hr.get(i);void 0===o&&(o=rN(),this.hr.set(i,o)),this.hr.set(i,o.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(){this.Pr=new n_(oX.Ir),this.Tr=new n_(oX.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,i){let n=new oX(e,i);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,i){e.forEach(e=>this.addReference(e,i))}removeReference(e,i){this.Ar(new oX(e,i))}Rr(e,i){e.forEach(e=>this.removeReference(e,i))}Vr(e){let i=new nu(new na([])),n=new oX(i,e),r=new oX(i,e+1),o=[];return this.Tr.forEachInRange([n,r],e=>{this.Ar(e),o.push(e.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let i=new nu(new na([])),n=new oX(i,e),r=new oX(i,e+1),o=rN();return this.Tr.forEachInRange([n,r],e=>{o=o.add(e.key)}),o}containsKey(e){let i=new oX(e,0),n=this.Pr.firstAfterOrEqual(i);return null!==n&&e.isEqual(n.key)}}class oX{constructor(e,i){this.key=e,this.pr=i}static Ir(e,i){return nu.comparator(e.key,i.key)||ni(e.pr,i.pr)}static Er(e,i){return ni(e.pr,i.pr)||nu.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.yr=1,this.wr=new n_(oX.Ir)}checkEmpty(e){return np.resolve(0===this.mutationQueue.length)}addMutationBatch(e,i,n,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new r8(o,i,n,r);for(let i of(this.mutationQueue.push(a),r))this.wr=this.wr.add(new oX(i.key,o)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return np.resolve(a)}lookupMutationBatch(e,i){return np.resolve(this.Sr(i))}getNextMutationBatchAfterBatchId(e,i){let n=this.br(i+1),r=n<0?0:n;return np.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return np.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return np.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){let n=new oX(i,0),r=new oX(i,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,r],e=>{let i=this.Sr(e.pr);o.push(i)}),np.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,i){let n=new n_(ni);return i.forEach(e=>{let i=new oX(e,0),r=new oX(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,r],e=>{n=n.add(e.pr)})}),np.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,i){let n=i.path,r=n.length+1,o=n;nu.isDocumentKey(o)||(o=o.child(""));let a=new oX(new nu(o),0),l=new n_(ni);return this.wr.forEachWhile(e=>{let i=e.key.path;return!!n.isPrefixOf(i)&&(i.length===r&&(l=l.add(e.pr)),!0)},a),np.resolve(this.Dr(l))}Dr(e){let i=[];return e.forEach(e=>{let n=this.Sr(e);null!==n&&i.push(n)}),i}removeMutationBatch(e,i){0===this.Cr(i.batchId,"removed")||iZ(),this.mutationQueue.shift();let n=this.wr;return np.forEach(i.mutations,r=>{let o=new oX(r.key,i.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,i){let n=new oX(i,0),r=this.wr.firstAfterOrEqual(n);return np.resolve(i.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,np.resolve()}Cr(e,i){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){let i=this.br(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e){this.vr=e,this.docs=new nk(nu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){let n=i.key,r=this.docs.get(n),o=r?r.size:0,a=this.vr(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){let n=this.docs.get(i);return np.resolve(n?n.document.mutableCopy():n0.newInvalidDocument(i))}getEntries(e,i){let n=rT;return i.forEach(e=>{let i=this.docs.get(e);n=n.insert(e,i?i.document.mutableCopy():n0.newInvalidDocument(e))}),np.resolve(n)}getDocumentsMatchingQuery(e,i,n,r){let o=rT,a=i.path,l=new nu(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){let{key:e,value:{document:l}}=c.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||0>=function(e,i){let n=e.readTime.compareTo(i.readTime);return 0!==n?n:0!==(n=nu.comparator(e.documentKey,i.documentKey))?n:ni(e.largestBatchId,i.largestBatchId)}(new nh(l.readTime,l.key,-1),n)||(r.has(l.key)||rI(i,l))&&(o=o.insert(l.key,l.mutableCopy()))}return np.resolve(o)}getAllFromCollectionGroup(e,i,n,r){iZ()}Fr(e,i){return np.forEach(this.docs,e=>i(e))}newChangeBuffer(e){return new oZ(this)}getSize(e){return np.resolve(this.size)}}class oZ extends oq{constructor(e){super(),this.ar=e}applyChanges(e){let i=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?i.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)}),np.waitFor(i)}getFromCache(e,i){return this.ar.getEntry(e,i)}getAllFromCache(e,i){return this.ar.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.persistence=e,this.Mr=new rS(e=>ru(e),rh),this.lastRemoteSnapshotVersion=no.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oY,this.targetCount=0,this.Lr=oz.Nn()}forEachTarget(e,i){return this.Mr.forEach((e,n)=>i(n)),np.resolve()}getLastRemoteSnapshotVersion(e){return np.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return np.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),np.resolve(this.highestTargetId)}setTargetsMetadata(e,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Or&&(this.Or=i),np.resolve()}qn(e){this.Mr.set(e.target,e);let i=e.targetId;i>this.highestTargetId&&(this.Lr=new oz(i),this.highestTargetId=i),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,i){return this.qn(i),this.targetCount+=1,np.resolve()}updateTargetData(e,i){return this.qn(i),np.resolve()}removeTargetData(e,i){return this.Mr.delete(i.target),this.Nr.Vr(i.targetId),this.targetCount-=1,np.resolve()}removeTargets(e,i,n){let r=0,o=[];return this.Mr.forEach((a,l)=>{l.sequenceNumber<=i&&null===n.get(l.targetId)&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),np.waitFor(o).next(()=>r)}getTargetCount(e){return np.resolve(this.targetCount)}getTargetData(e,i){let n=this.Mr.get(i)||null;return np.resolve(n)}addMatchingKeys(e,i,n){return this.Nr.dr(i,n),np.resolve()}removeMatchingKeys(e,i,n){this.Nr.Rr(i,n);let r=this.persistence.referenceDelegate,o=[];return r&&i.forEach(i=>{o.push(r.markPotentiallyOrphaned(e,i))}),np.waitFor(o)}removeMatchingKeysForTargetId(e,i){return this.Nr.Vr(i),np.resolve()}getMatchingKeysForTargetId(e,i){let n=this.Nr.gr(i);return np.resolve(n)}containsKey(e,i){return np.resolve(this.Nr.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,i){this.Br={},this.overlays={},this.kr=new nm(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new o0(this),this.indexManager=new oj,this.remoteDocumentCache=new oQ(e=>this.referenceDelegate.Kr(e)),this.serializer=new oF(i),this.$r=new o$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new oG,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let n=this.Br[e.toKey()];return n||(n=new oJ(i,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,i,n){iY("MemoryPersistence","Starting transaction:",e);let r=new o2(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(e=>this.referenceDelegate.Wr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gr(e,i){return np.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,i)))}}class o2 extends nd{constructor(e){super(),this.currentSequenceNumber=e}}class o4{constructor(e){this.persistence=e,this.zr=new oY,this.jr=null}static Hr(e){return new o4(e)}get Jr(){if(this.jr)return this.jr;throw iZ()}addReference(e,i,n){return this.zr.addReference(n,i),this.Jr.delete(n.toString()),np.resolve()}removeReference(e,i,n){return this.zr.removeReference(n,i),this.Jr.add(n.toString()),np.resolve()}markPotentiallyOrphaned(e,i){return this.Jr.add(i.toString()),np.resolve()}removeTarget(e,i){this.zr.Vr(i.targetId).forEach(e=>this.Jr.add(e.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,i.targetId).next(e=>{e.forEach(e=>this.Jr.add(e.toString()))}).next(()=>n.removeTargetData(e,i))}Ur(){this.jr=new Set}Wr(e){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return np.forEach(this.Jr,n=>{let r=nu.fromPath(n);return this.Yr(e,r).next(e=>{e||i.removeEntry(r,no.min())})}).next(()=>(this.jr=null,i.apply(e)))}updateLimboDocument(e,i){return this.Yr(e,i).next(e=>{e?this.Jr.delete(i.toString()):this.Jr.add(i.toString())})}Kr(e){return 0}Yr(e,i){return np.or([()=>np.resolve(this.zr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Gr(e,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,i,n,r){this.targetId=e,this.fromCache=i,this.qi=n,this.Qi=r}static Ki(e,i){let n=rN(),r=rN();for(let e of i.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new o5(e,i.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!eV()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){let i=e.match(/Android ([\d.]+)/i);return Number(i?i[1].split(".").slice(0,2).join("."):"-1")}(ej())>0?6:4}initialize(e,i){this.zi=e,this.indexManager=i,this.$i=!0}getDocumentsMatchingQuery(e,i,n,r){let o={result:null};return this.ji(e,i).next(e=>{o.result=e}).next(()=>{if(!o.result)return this.Hi(e,i,r,n).next(e=>{o.result=e})}).next(()=>{if(o.result)return;let n=new o6;return this.Ji(e,i,n).next(r=>{if(o.result=r,this.Ui)return this.Yi(e,i,n,r.size)})}).next(()=>o.result)}Yi(e,i,n,r){return n.documentReadCount<this.Wi?(iG()<=F.DEBUG&&iY("QueryEngine","SDK will not create cache indexes for query:",rE(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),np.resolve()):(iG()<=F.DEBUG&&iY("QueryEngine","Query:",rE(i),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(iG()<=F.DEBUG&&iY("QueryEngine","The SDK decides to create cache indexes for query:",rE(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rv(i))):np.resolve())}ji(e,i){if(rp(i))return np.resolve(null);let n=rv(i);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==i.limit&&1===r&&(n=rv(i=ry(i,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{let o=rN(...r);return this.zi.getDocuments(e,o).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{let a=this.Zi(i,r);return this.Xi(i,a,o,n.readTime)?this.ji(e,ry(i,null,"F")):this.es(e,a,i,n)}))})))}Hi(e,i,n,r){return rp(i)||r.isEqual(no.min())?np.resolve(null):this.zi.getDocuments(e,n).next(o=>{let a=this.Zi(i,o);return this.Xi(i,a,n,r)?np.resolve(null):(iG()<=F.DEBUG&&iY("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rE(i)),this.es(e,a,i,function(e,i){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new nh(no.fromTimestamp(1e9===r?new nr(n+1,0):new nr(n,r)),nu.empty(),-1)}(r,0)).next(e=>e))})}Zi(e,i){let n=new n_(r_(e));return i.forEach((i,r)=>{rI(e,r)&&(n=n.add(r))}),n}Xi(e,i,n,r){if(null===e.limit)return!1;if(n.size!==i.size)return!0;let o="F"===e.limitType?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,i,n){return iG()<=F.DEBUG&&iY("QueryEngine","Using full collection scan to execute query:",rE(i)),this.zi.getDocumentsMatchingQuery(e,i,nh.min(),n)}es(e,i,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next(e=>(i.forEach(i=>{e=e.insert(i.key,i)}),e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,i,n,r){this.persistence=e,this.ts=i,this.serializer=r,this.ns=new nk(ni),this.rs=new rS(e=>ru(e),rh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oW(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.ns))}}async function o8(e,i){return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,e._s(i),e.mutationQueue.getAllMutationBatches(n))).next(i=>{let o=[],a=[],l=rN();for(let e of r)for(let i of(o.push(e.batchId),e.mutations))l=l.add(i.key);for(let e of i)for(let i of(a.push(e.batchId),e.mutations))l=l.add(i.key);return e.localDocuments.getDocuments(n,l).next(e=>({us:e,removedBatchIds:o,addedBatchIds:a}))})})}function o7(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Qr.getLastRemoteSnapshotVersion(i))}async function se(e,i,n){let r=e.ns.get(i);try{n||await e.persistence.runTransaction("Release target",n?"readwrite":"readwrite-primary",i=>e.persistence.referenceDelegate.removeTarget(i,r))}catch(e){if(!ng(e))throw e;iY("LocalStore",`Failed to update sequence numbers for target ${i}: ${e}`)}e.ns=e.ns.remove(i),e.rs.delete(r.target)}function st(e,i,n){let r=no.min(),o=rN();return e.persistence.runTransaction("Execute query","readwrite",a=>(function(e,i,n){let r=e.rs.get(n);return void 0!==r?np.resolve(e.ns.get(r)):e.Qr.getTargetData(i,n)})(e,a,rv(i)).next(i=>{if(i)return r=i.lastLimboFreeSnapshotVersion,e.Qr.getMatchingKeysForTargetId(a,i.targetId).next(e=>{o=e})}).next(()=>e.ts.getDocumentsMatchingQuery(a,i,n?r:no.min(),n?o:rN())).next(n=>{var r;let a;return r=i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2)),a=e.ss.get(r)||no.min(),n.forEach((e,i)=>{i.readTime.compareTo(a)>0&&(a=i.readTime)}),e.ss.set(r,a),{documents:n,hs:o}}))}class si{constructor(){this.activeTargetIds=rP}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class sn{constructor(){this.no=new si,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,i,n){this.ro[e]=i}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new si,Promise.resolve()}handleUserChange(e,i,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){for(let e of(iY("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.uo))e(0)}ao(){for(let e of(iY("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.uo))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss=null;function sa(){return null===ss?ss=268435456+Math.round(2147483648*Math.random()):ss++,"0x"+ss.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="WebChannelConnection";class sh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,i,n,r,o){let a=sa(),l=this.vo(e,i.toUriEncodedString());iY("RestConnection",`Sending RPC '${e}' ${a}:`,l,n);let c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,r,o),this.Mo(e,l,c,n).then(i=>(iY("RestConnection",`Received RPC '${e}' ${a}: `,i),i),i=>{throw iJ("RestConnection",`RPC '${e}' ${a} failed with error: `,i,"url: ",l,"request:",n),i})}xo(e,i,n,r,o,a){return this.Co(e,i,n,r,o)}Fo(e,i,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+iW}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((i,n)=>e[n]=i),n&&n.headers.forEach((i,n)=>e[n]=i)}vo(e,i){let n=sl[e];return`${this.wo}/v1/${i}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,i,n,r){let o=sa();return new Promise((a,l)=>{let c=new V;c.setWithCredentials(!0),c.listenOnce(q.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case K.NO_ERROR:let i=c.getResponseJson();iY(su,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(i)),a(i);break;case K.TIMEOUT:iY(su,`RPC '${e}' ${o} timed out`),l(new i1(i0.DEADLINE_EXCEEDED,"Request time out"));break;case K.HTTP_ERROR:let n=c.getStatus();if(iY(su,`RPC '${e}' ${o} failed with status:`,n,"response text:",c.getResponseText()),n>0){let e=c.getResponseJson();Array.isArray(e)&&(e=e[0]);let i=null==e?void 0:e.error;if(i&&i.status&&i.message){let e=function(e){let i=e.toLowerCase().replace(/_/g,"-");return Object.values(i0).indexOf(i)>=0?i:i0.UNKNOWN}(i.status);l(new i1(e,i.message))}else l(new i1(i0.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new i1(i0.UNAVAILABLE,"Connection failed."));break;default:iZ()}}finally{iY(su,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);iY(su,`RPC '${e}' ${o} sending request:`,r),c.send(i,"POST",u,n,15)})}Oo(e,i,n){let r=sa(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Y(),l=G(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new H({})),this.Fo(c.initMessageHeaders,i,n),c.encodeInitMessageHeaders=!0;let h=o.join("");iY(su,`Creating RPC '${e}' stream ${r}: ${h}`,c);let d=a.createWebChannel(h,c),f=!1,p=!1,g=new sc({lo:i=>{p?iY(su,`Not sending because RPC '${e}' stream ${r} is closed:`,i):(f||(iY(su,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),iY(su,`RPC '${e}' stream ${r} sending:`,i),d.send(i))},ho:()=>d.close()}),m=(e,i,n)=>{e.listen(i,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(d,z.EventType.OPEN,()=>{p||(iY(su,`RPC '${e}' stream ${r} transport opened.`),g.mo())}),m(d,z.EventType.CLOSE,()=>{p||(p=!0,iY(su,`RPC '${e}' stream ${r} transport closed`),g.po())}),m(d,z.EventType.ERROR,i=>{p||(p=!0,iJ(su,`RPC '${e}' stream ${r} transport errored:`,i),g.po(new i1(i0.UNAVAILABLE,"The operation could not be completed")))}),m(d,z.EventType.MESSAGE,i=>{var n;if(!p){let o=i.data[0];o||iZ();let a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){iY(su,`RPC '${e}' stream ${r} received error:`,a);let i=a.status,n=function(e){let i=ee[e];if(void 0!==i)return oi(i)}(i),o=a.message;void 0===n&&(n=i0.INTERNAL,o="Unknown error status: "+i+" with message "+a.message),p=!0,g.po(new i1(n,o)),d.close()}else iY(su,`RPC '${e}' stream ${r} received:`,o),g.yo(o)}}),m(l,$.STAT_EVENT,i=>{i.stat===W.PROXY?iY(su,`RPC '${e}' stream ${r} detected buffering proxy`):i.stat===W.NOPROXY&&iY(su,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}function sd(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(e){return new ow(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,i,n=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=i,this.No=n,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let i=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,i-n);r>0&&iY("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,i,n,r,o,a,l,c){this.oi=e,this.Go=n,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new sp(e,i)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,i){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():i&&i.code===i0.RESOURCE_EXHAUSTED?(iX(i.toString()),iX("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):i&&i.code===i0.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(i)}__(){}auth(){this.state=1;let e=this.a_(this.jo),i=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.jo===i&&this.u_(e,n)},i=>{e(()=>{let e=new i1(i0.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(e)})})}u_(e,i){let n=this.a_(this.jo);this.stream=this.l_(e,i),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(e=>{n(()=>this.c_(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return iY("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return i=>{this.oi.enqueueAndForget(()=>this.jo===e?i():(iY("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sm extends sg{constructor(e,i,n,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,r,a),this.serializer=o}l_(e,i){return this.connection.Oo("Listen",e,i)}onMessage(e){this.Yo.reset();let i=function(e,i){let n;if("targetChange"in i){var r,o;i.targetChange;let a="NO_CHANGE"===(r=i.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:iZ(),l=i.targetChange.targetIds||[],c=(o=i.targetChange.resumeToken,e.useProto3Json?(void 0===o||"string"==typeof o||iZ(),nx.fromBase64String(o||"")):(void 0===o||o instanceof ic||o instanceof Uint8Array||iZ(),nx.fromUint8Array(o||new Uint8Array))),u=i.targetChange.cause;n=new od(a,l,c,u&&new i1(void 0===u.code?i0.UNKNOWN:oi(u.code),u.message||"")||null)}else if("documentChange"in i){i.documentChange;let r=i.documentChange;r.document,r.document.name,r.document.updateTime;let o=oA(e,r.document.name),a=o_(r.document.updateTime),l=r.document.createTime?o_(r.document.createTime):no.min(),c=new nZ({mapValue:{fields:r.document.fields}}),u=n0.newFoundDocument(o,a,l,c);n=new ou(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in i){i.documentDelete;let r=i.documentDelete;r.document;let o=oA(e,r.document),a=r.readTime?o_(r.readTime):no.min(),l=n0.newNoDocument(o,a);n=new ou([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in i){i.documentRemove;let r=i.documentRemove;r.document;let o=oA(e,r.document);n=new ou([],r.removedTargetIds||[],o,null)}else{if(!("filter"in i))return iZ();{i.filter;let e=i.filter;e.targetId;let{count:r=0,unchangedNames:o}=e,a=new ot(r,o);n=new oh(e.targetId,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return no.min();let i=e.targetChange;return i.targetIds&&i.targetIds.length?no.min():i.readTime?o_(i.readTime):no.min()}(e);return this.listener.h_(i,n)}P_(e){let i={};i.database=oL(this.serializer),i.addTarget=function(e,i){let n;let r=i.target;if((n=rd(r)?{documents:{documents:[oO(e,r.path)]}}:{query:function(e,i){var n,r;let o;let a={structuredQuery:{}},l=i.path;null!==i.collectionGroup?(o=l,a.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(o=l.popLast(),a.structuredQuery.from=[{collectionId:l.lastSegment()}]),a.parent=oO(e,o);let c=function(e){if(0!==e.length)return function e(i){return i instanceof n3?function(e){if("=="===e.op){if(nY(e.value))return{unaryFilter:{field:oP(e.field),op:"IS_NAN"}};if(nG(e.value))return{unaryFilter:{field:oP(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nY(e.value))return{unaryFilter:{field:oP(e.field),op:"IS_NOT_NAN"}};if(nG(e.value))return{unaryFilter:{field:oP(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oP(e.field),op:ob[e.op],value:e.value}}}(i):i instanceof n9?function(i){let n=i.getFilters().map(i=>e(i));return 1===n.length?n[0]:{compositeFilter:{op:oy[i.op],filters:n}}}(i):iZ()}(n9.create(e,"and"))}(i.filters);c&&(a.structuredQuery.where=c);let u=function(e){if(0!==e.length)return e.map(e=>({field:oP(e.field),direction:ov[e.dir]}))}(i.orderBy);u&&(a.structuredQuery.orderBy=u);let h=ok(e,i.limit);return null!==h&&(a.structuredQuery.limit=h),i.startAt&&(a.structuredQuery.startAt={before:(n=i.startAt).inclusive,values:n.position}),i.endAt&&(a.structuredQuery.endAt={before:!(r=i.endAt).inclusive,values:r.position}),{_t:a,parent:o}}(e,r)._t}).targetId=i.targetId,i.resumeToken.approximateByteSize()>0){n.resumeToken=oI(e,i.resumeToken);let r=ok(e,i.expectedCount);null!==r&&(n.expectedCount=r)}else if(i.snapshotVersion.compareTo(no.min())>0){n.readTime=oE(e,i.snapshotVersion.toTimestamp());let r=ok(e,i.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);let n=function(e,i){let n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return iZ()}}(i.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(i.labels=n),this.i_(i)}I_(e){let i={};i.database=oL(this.serializer),i.removeTarget=e,this.i_(i)}}class sv extends sg{constructor(e,i,n,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,i){return this.connection.Oo("Write",e,i)}onMessage(e){var i,n;if(e.streamToken||iZ(),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let r=(i=e.writeResults,n=e.commitTime,i&&i.length>0?(void 0!==n||iZ(),i.map(e=>{let i;return(i=e.updateTime?o_(e.updateTime):o_(n)).isEqual(no.min())&&(i=o_(n)),new rG(i,e.transformResults||[])})):[]),o=o_(e.commitTime);return this.listener.A_(o,r)}return e.writeResults&&0!==e.writeResults.length&&iZ(),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=oL(this.serializer),this.i_(e)}d_(e){let i={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,i){var n;let r;if(i instanceof r1)r={update:oN(e,i.key,i.value)};else if(i instanceof r3)r={delete:ox(e,i.key)};else if(i instanceof r2)r={update:oN(e,i.key,i.data),updateMask:function(e){let i=[];return e.fields.forEach(e=>i.push(e.canonicalString())),{fieldPaths:i}}(i.fieldMask)};else{if(!(i instanceof r9))return iZ();r={verify:ox(e,i.key)}}return i.fieldTransforms.length>0&&(r.updateTransforms=i.fieldTransforms.map(e=>(function(e,i){let n=i.transform;if(n instanceof rU)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rj)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rH)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rq)return{fieldPath:i.field.canonicalString(),increment:n.Pe};throw iZ()})(0,e))),i.precondition.isNone||(r.currentDocument=void 0!==(n=i.precondition).updateTime?{updateTime:oE(e,n.updateTime.toTimestamp())}:void 0!==n.exists?{exists:n.exists}:iZ()),r})(this.serializer,e))};this.i_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends class{}{constructor(e,i,n,r){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new i1(i0.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,i,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,oT(i,n),r,o,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===i0.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new i1(i0.UNKNOWN,e.toString())})}xo(e,i,n,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.xo(e,oT(i,n),r,a,l,o)).catch(e=>{throw"FirebaseError"===e.name?(e.code===i0.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new i1(i0.UNKNOWN,e.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class sy{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(iX(i),this.y_=!1):iY("OnlineStateTracker",i)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,i,n,r,o){this.localStore=e,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(e=>{n.enqueueAndForget(async()=>{sA(this)&&(iY("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.M_.add(4),await sE(e),e.N_.set("Unknown"),e.M_.delete(4),await sk(e)}(this))})}),this.N_=new sy(n,r)}}async function sk(e){if(sA(e))for(let i of e.x_)await i(!0)}async function sE(e){for(let i of e.x_)await i(!1)}function sI(e,i){e.F_.has(i.targetId)||(e.F_.set(i.targetId,i),sx(e)?sC(e):sK(e).Xo()&&sS(e,i))}function s_(e,i){let n=sK(e);e.F_.delete(i),n.Xo()&&sT(e,i),0===e.F_.size&&(n.Xo()?n.n_():sA(e)&&e.N_.set("Unknown"))}function sS(e,i){if(e.L_.xe(i.targetId),i.resumeToken.approximateByteSize()>0||i.snapshotVersion.compareTo(no.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(i.targetId).size;i=i.withExpectedCount(n)}sK(e).P_(i)}function sT(e,i){e.L_.xe(i),sK(e).I_(i)}function sC(e){e.L_=new op({getRemoteKeysForTarget:i=>e.remoteSyncer.getRemoteKeysForTarget(i),ot:i=>e.F_.get(i)||null,tt:()=>e.datastore.serializer.databaseId}),sK(e).start(),e.N_.w_()}function sx(e){return sA(e)&&!sK(e).Zo()&&e.F_.size>0}function sA(e){return 0===e.M_.size}async function sO(e){e.N_.set("Online")}async function sL(e){e.F_.forEach((i,n)=>{sS(e,i)})}async function sR(e,i){e.L_=void 0,sx(e)?(e.N_.D_(i),sC(e)):e.N_.set("Unknown")}async function sN(e,i,n){if(e.N_.set("Online"),i instanceof od&&2===i.state&&i.cause)try{await async function(e,i){let n=i.cause;for(let r of i.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,i)}catch(n){iY("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),n),await sP(e,n)}else if(i instanceof ou?e.L_.Ke(i):i instanceof oh?e.L_.He(i):e.L_.We(i),!n.isEqual(no.min()))try{let i=await o7(e.localStore);n.compareTo(i)>=0&&await function(e,i){let n=e.L_.rt(i);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let o=e.F_.get(r);o&&e.F_.set(r,o.withResumeToken(n.resumeToken,i))}}),n.targetMismatches.forEach((i,n)=>{let r=e.F_.get(i);if(!r)return;e.F_.set(i,r.withResumeToken(nx.EMPTY_BYTE_STRING,r.snapshotVersion)),sT(e,i);let o=new oB(r.target,i,n,r.sequenceNumber);sS(e,o)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){iY("RemoteStore","Failed to raise snapshot:",i),await sP(e,i)}}async function sP(e,i,n){if(!ng(i))throw i;e.M_.add(1),await sE(e),e.N_.set("Offline"),n||(n=()=>o7(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{iY("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await sk(e)})}function sD(e,i){return i().catch(n=>sP(e,n,i))}async function sM(e){let i=sW(e),n=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;sA(e)&&e.v_.length<10;)try{let r=await function(e,i){return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===i&&(i=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,i)))}(e.localStore,n);if(null===r){0===e.v_.length&&i.n_();break}n=r.batchId,function(e,i){e.v_.push(i);let n=sW(e);n.Xo()&&n.E_&&n.d_(i.mutations)}(e,r)}catch(i){await sP(e,i)}sB(e)&&sF(e)}function sB(e){return sA(e)&&!sW(e).Zo()&&e.v_.length>0}function sF(e){sW(e).start()}async function sU(e){sW(e).V_()}async function sj(e){let i=sW(e);for(let n of e.v_)i.d_(n.mutations)}async function sV(e,i,n){let r=e.v_.shift(),o=r7.from(r,i,n);await sD(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await sM(e)}async function sH(e,i){i&&sW(e).E_&&await async function(e,i){var n;if(function(e){switch(e){default:return iZ();case i0.CANCELLED:case i0.UNKNOWN:case i0.DEADLINE_EXCEEDED:case i0.RESOURCE_EXHAUSTED:case i0.INTERNAL:case i0.UNAVAILABLE:case i0.UNAUTHENTICATED:return!1;case i0.INVALID_ARGUMENT:case i0.NOT_FOUND:case i0.ALREADY_EXISTS:case i0.PERMISSION_DENIED:case i0.FAILED_PRECONDITION:case i0.ABORTED:case i0.OUT_OF_RANGE:case i0.UNIMPLEMENTED:case i0.DATA_LOSS:return!0}}(n=i.code)&&n!==i0.ABORTED){let n=e.v_.shift();sW(e).t_(),await sD(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,i)),await sM(e)}}(e,i),sB(e)&&sF(e)}async function sz(e,i){e.asyncQueue.verifyOperationInProgress(),iY("RemoteStore","RemoteStore received new credentials");let n=sA(e);e.M_.add(3),await sE(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(i),e.M_.delete(3),await sk(e)}async function sq(e,i){i?(e.M_.delete(2),await sk(e)):i||(e.M_.add(2),await sE(e),e.N_.set("Unknown"))}function sK(e){var i,n,r;return e.B_||(e.B_=(i=e.datastore,n=e.asyncQueue,r={Po:sO.bind(null,e),To:sL.bind(null,e),Ao:sR.bind(null,e),h_:sN.bind(null,e)},i.f_(),new sm(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)),e.x_.push(async i=>{i?(e.B_.t_(),sx(e)?sC(e):e.N_.set("Unknown")):(await e.B_.stop(),e.L_=void 0)})),e.B_}function sW(e){var i,n,r;return e.k_||(e.k_=(i=e.datastore,n=e.asyncQueue,r={Po:()=>Promise.resolve(),To:sU.bind(null,e),Ao:sH.bind(null,e),R_:sj.bind(null,e),A_:sV.bind(null,e)},i.f_(),new sv(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)),e.x_.push(async i=>{i?(e.k_.t_(),await sM(e)):(await e.k_.stop(),e.v_.length>0&&(iY("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,i,n,r,o){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new i2,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,n,r,o){let a=new s$(e,i,Date.now()+n,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new i1(i0.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sG(e,i){if(iX("AsyncQueue",`${i}: ${e}`),ng(e))return new i1(i0.UNAVAILABLE,`${i}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e){this.comparator=e?(i,n)=>e(i,n)||nu.comparator(i.key,n.key):(e,i)=>nu.comparator(e.key,i.key),this.keyedMap=rx(),this.sortedSet=new nk(this.comparator)}static emptySet(e){return new sY(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,n)=>(e(i),!1))}add(e){let i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){let i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof sY)||this.size!==e.size)return!1;let i=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;i.hasNext();){let e=i.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){let e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){let n=new sY;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=i,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(){this.q_=new nk(nu.comparator)}track(e){let i=e.doc.key,n=this.q_.get(i);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(i,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(i,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(i,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(i,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(i):1===e.type&&2===n.type?this.q_=this.q_.insert(i,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(i,{type:2,doc:e.doc}):iZ():this.q_=this.q_.insert(i,e)}Q_(){let e=[];return this.q_.inorderTraversal((i,n)=>{e.push(n)}),e}}class sJ{constructor(e,i,n,r,o,a,l,c,u){this.query=e,this.docs=i,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,i,n,r,o){let a=[];return i.forEach(e=>{a.push({type:0,doc:e})}),new sJ(e,i,sY.emptySet(i),a,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let i=this.docChanges,n=e.docChanges;if(i.length!==n.length)return!1;for(let e=0;e<i.length;e++)if(i[e].type!==n[e].type||!i[e].doc.isEqual(n[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class sZ{constructor(){this.queries=new rS(e=>rk(e),rw),this.onlineState="Unknown",this.z_=new Set}}async function s0(e,i){let n=3,r=i.query,o=e.queries.get(r);o?!o.W_()&&i.G_()&&(n=2):(o=new sQ,n=i.G_()?0:1);try{switch(n){case 0:o.K_=await e.onListen(r,!0);break;case 1:o.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(n){let e=sG(n,`Initialization of query '${rE(i.query)}' failed`);return void i.onError(e)}e.queries.set(r,o),o.U_.push(i),i.j_(e.onlineState),o.K_&&i.H_(o.K_)&&s5(e)}async function s1(e,i){let n=i.query,r=3,o=e.queries.get(n);if(o){let e=o.U_.indexOf(i);e>=0&&(o.U_.splice(e,1),0===o.U_.length?r=i.G_()?0:1:!o.W_()&&i.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function s2(e,i){let n=!1;for(let r of i){let i=r.query,o=e.queries.get(i);if(o){for(let e of o.U_)e.H_(r)&&(n=!0);o.K_=r}}n&&s5(e)}function s4(e,i,n){let r=e.queries.get(i);if(r)for(let e of r.U_)e.onError(n);e.queries.delete(i)}function s5(e){e.z_.forEach(e=>{e.next()})}(en=ei={}).J_="default",en.Cache="cache";class s6{constructor(e,i,n){this.query=e,this.Y_=i,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let n of e.docChanges)3!==n.type&&i.push(n);e=new sJ(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),i=!0):this.ta(e,this.onlineState)&&(this.na(e),i=!0),this.X_=e,i}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let i=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),i=!0),i}ta(e,i){return!(e.fromCache&&this.G_())||(!this.options.ra||!("Offline"!==i))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===i)}ea(e){if(e.docChanges.length>0)return!0;let i=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&!0===this.options.includeMetadataChanges}na(e){e=sJ.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==ei.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.key=e}}class s9{constructor(e){this.key=e}}class s8{constructor(e,i){this.query=e,this.la=i,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=rN(),this.mutatedKeys=rN(),this.Ia=r_(e),this.Ta=new sY(this.Ia)}get Ea(){return this.la}da(e,i){let n=i?i.Aa:new sX,r=i?i.Ta:this.Ta,o=i?i.mutatedKeys:this.mutatedKeys,a=r,l=!1,c="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,i)=>{let h=r.get(e),d=rI(this.query,i)?i:null,f=!!h&&this.mutatedKeys.has(h.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations),g=!1;h&&d?h.data.isEqual(d.data)?f!==p&&(n.track({type:3,doc:d}),g=!0):this.Ra(h,d)||(n.track({type:2,doc:d}),g=!0,(c&&this.Ia(d,c)>0||u&&0>this.Ia(d,u))&&(l=!0)):!h&&d?(n.track({type:0,doc:d}),g=!0):h&&!d&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(d?(a=a.add(d),o=p?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){let e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{Ta:a,Aa:n,Xi:l,mutatedKeys:o}}Ra(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,n,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((e,i)=>(function(e,i){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iZ()}};return n(e)-n(i)})(e.type,i.type)||this.Ia(e.doc,i.doc)),this.Va(n),r=null!=r&&r;let l=i&&!r?this.ma():[],c=0===this.Pa.size&&this.current&&!r?1:0,u=c!==this.ha;return(this.ha=c,0!==a.length||u)?{snapshot:new sJ(this.query,e.Ta,o,a,e.mutatedKeys,0===c,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new sX,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(e=>this.la=this.la.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=rN(),this.Ta.forEach(e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))});let i=[];return e.forEach(e=>{this.Pa.has(e)||i.push(new s9(e))}),this.Pa.forEach(n=>{e.has(n)||i.push(new s3(n))}),i}pa(e){this.la=e.hs,this.Pa=rN();let i=this.da(e.documents);return this.applyChanges(i,!0)}ya(){return sJ.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class s7{constructor(e,i,n){this.query=e,this.targetId=i,this.view=n}}class ae{constructor(e){this.key=e,this.wa=!1}}class at{constructor(e,i,n,r,o,a){this.localStore=e,this.remoteStore=i,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new rS(e=>rk(e),rw),this.Da=new Map,this.Ca=new Set,this.va=new nk(nu.comparator),this.Fa=new Map,this.Ma=new oY,this.xa={},this.Oa=new Map,this.Na=oz.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function ai(e,i,n=!0){let r;let o=aI(e),a=o.ba.get(i);return a?(o.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.ya()):r=await ar(o,i,n,!0),r}async function an(e,i){let n=aI(e);await ar(n,i,!0,!1)}async function ar(e,i,n,r){var o,a;let l;let c=await (o=e.localStore,a=rv(i),o.persistence.runTransaction("Allocate target","readwrite",e=>{let i;return o.Qr.getTargetData(e,a).next(n=>n?(i=n,np.resolve(i)):o.Qr.allocateTargetId(e).next(n=>(i=new oB(a,n,"TargetPurposeListen",e.currentSequenceNumber),o.Qr.addTargetData(e,i).next(()=>i))))}).then(e=>{let i=o.ns.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(o.ns=o.ns.insert(e.targetId,e),o.rs.set(a,e.targetId)),e})),u=c.targetId,h=n?e.sharedClientState.addLocalQueryTarget(u):"not-current";return r&&(l=await ao(e,i,u,"current"===h,c.resumeToken)),e.isPrimaryClient&&n&&sI(e.remoteStore,c),l}async function ao(e,i,n,r,o){e.Ba=(i,n,r)=>(async function(e,i,n,r){let o=i.view.da(n);o.Xi&&(o=await st(e.localStore,i.query,!1).then(({documents:e})=>i.view.da(e,o)));let a=r&&r.targetChanges.get(i.targetId),l=r&&null!=r.targetMismatches.get(i.targetId),c=i.view.applyChanges(o,e.isPrimaryClient,a,l);return ab(e,i.targetId,c.fa),c.snapshot})(e,i,n,r);let a=await st(e.localStore,i,!0),l=new s8(i,a.hs),c=l.da(a.documents),u=oc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),h=l.applyChanges(c,e.isPrimaryClient,u);ab(e,n,h.fa);let d=new s7(i,n,l);return e.ba.set(i,d),e.Da.has(n)?e.Da.get(n).push(i):e.Da.set(n,[i]),h.snapshot}async function as(e,i,n){let r=e.ba.get(i),o=e.Da.get(r.targetId);if(o.length>1)return e.Da.set(r.targetId,o.filter(e=>!rw(e,i))),void e.ba.delete(i);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await se(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),n&&s_(e.remoteStore,r.targetId),am(e,r.targetId)}).catch(nf)):(am(e,r.targetId),await se(e.localStore,r.targetId,!0))}async function aa(e,i){let n=e.ba.get(i),r=e.Da.get(n.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),s_(e.remoteStore,n.targetId))}async function al(e,i,n){var r;let o=(e.remoteStore.remoteSyncer.applySuccessfulWrite=ad.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=af.bind(null,e),e);try{let e;let a=await function(e,i){let n,r;let o=nr.now(),a=i.reduce((e,i)=>e.add(i.key),rN());return e.persistence.runTransaction("Locally write mutations","readwrite",l=>{let c=rT,u=rN();return e.os.getEntries(l,a).next(e=>{(c=e).forEach((e,i)=>{i.isValidDocument()||(u=u.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(l,c)).next(r=>{n=r;let a=[];for(let e of i){let i=function(e,i){let n=null;for(let r of e.fieldTransforms){let e=i.data.field(r.field),o=rF(r.transform,e||null);null!=o&&(null===n&&(n=nZ.empty()),n.set(r.field,o))}return n||null}(e,n.get(e.key).overlayedDocument);null!=i&&a.push(new r2(e.key,i,function e(i){let n=[];return ny(i.fields,(i,r)=>{let o=new nc([i]);if(nX(r)){let i=e(r.mapValue).fields;if(0===i.length)n.push(o);else for(let e of i)n.push(o.child(e))}else n.push(o)}),new nT(n)}(i.value.mapValue),rY.exists(!0)))}return e.mutationQueue.addMutationBatch(l,o,a,i)}).next(i=>{r=i;let o=i.applyToLocalDocumentSet(n,u);return e.documentOverlayCache.saveOverlays(l,i.batchId,o)})}).then(()=>({batchId:r.batchId,changes:rA(n)}))}(o.localStore,i);o.sharedClientState.addPendingMutation(a.batchId),r=a.batchId,(e=o.xa[o.currentUser.toKey()])||(e=new nk(ni)),e=e.insert(r,n),o.xa[o.currentUser.toKey()]=e,await aw(o,a.changes),await sM(o.remoteStore)}catch(i){let e=sG(i,"Failed to persist write");n.reject(e)}}async function ac(e,i){try{let n=await function(e,i){let n=i.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{var a;let l,c;let u=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let h=[];i.targetChanges.forEach((a,l)=>{var c;let u=r.get(l);if(!u)return;h.push(e.Qr.removeMatchingKeys(o,a.removedDocuments,l).next(()=>e.Qr.addMatchingKeys(o,a.addedDocuments,l)));let d=u.withSequenceNumber(o.currentSequenceNumber);null!==i.targetMismatches.get(l)?d=d.withResumeToken(nx.EMPTY_BYTE_STRING,no.min()).withLastLimboFreeSnapshotVersion(no.min()):a.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(a.resumeToken,n)),r=r.insert(l,d),c=d,(0===u.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size>0)&&h.push(e.Qr.updateTargetData(o,d))});let d=rT,f=rN();if(i.documentUpdates.forEach(n=>{i.resolvedLimboDocuments.has(n)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,n))}),h.push((a=i.documentUpdates,l=rN(),c=rN(),a.forEach(e=>l=l.add(e)),u.getEntries(o,l).next(e=>{let i=rT;return a.forEach((n,r)=>{let o=e.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(c=c.add(n)),r.isNoDocument()&&r.version.isEqual(no.min())?(u.removeEntry(n,r.readTime),i=i.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(u.addEntry(r),i=i.insert(n,r)):iY("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)}),{cs:i,ls:c}})).next(e=>{d=e.cs,f=e.ls})),!n.isEqual(no.min())){let i=e.Qr.getLastRemoteSnapshotVersion(o).next(i=>e.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));h.push(i)}return np.waitFor(h).next(()=>u.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(i=>(e.ns=r,i))}(e.localStore,i);i.targetChanges.forEach((i,n)=>{let r=e.Fa.get(n);r&&(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1||iZ(),i.addedDocuments.size>0?r.wa=!0:i.modifiedDocuments.size>0?r.wa||iZ():i.removedDocuments.size>0&&(r.wa||iZ(),r.wa=!1))}),await aw(e,n,i)}catch(e){await nf(e)}}function au(e,i,n){var r;if(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n){let n;let o=[];e.ba.forEach((e,n)=>{let r=n.view.j_(i);r.snapshot&&o.push(r.snapshot)}),(r=e.eventManager).onlineState=i,n=!1,r.queries.forEach((e,r)=>{for(let e of r.U_)e.j_(i)&&(n=!0)}),n&&s5(r),o.length&&e.Sa.h_(o),e.onlineState=i,e.isPrimaryClient&&e.sharedClientState.setOnlineState(i)}}async function ah(e,i,n){e.sharedClientState.updateQueryState(i,"rejected",n);let r=e.Fa.get(i),o=r&&r.key;if(o){let n=new nk(nu.comparator);n=n.insert(o,n0.newNoDocument(o,no.min()));let r=rN().add(o),a=new ol(no.min(),new Map,new nk(ni),n,r);await ac(e,a),e.va=e.va.remove(o),e.Fa.delete(i),ay(e)}else await se(e.localStore,i,!1).then(()=>am(e,i,n)).catch(nf)}async function ad(e,i){var n;let r=i.batch.batchId;try{let o=await (n=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let r=i.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return(function(e,i,n,r){let o=n.batch,a=o.keys(),l=np.resolve();return a.forEach(e=>{l=l.next(()=>r.getEntry(i,e)).next(i=>{let a=n.docVersions.get(e);null!==a||iZ(),0>i.version.compareTo(a)&&(o.applyToRemoteDocument(i,n),i.isValidDocument()&&(i.setReadTime(n.commitVersion),r.addEntry(i)))})}),l.next(()=>e.mutationQueue.removeMutationBatch(i,o))})(n,e,i,o).next(()=>o.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,i.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let i=rN();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(i=i.add(e.batch.mutations[n].key));return i}(i))).next(()=>n.localDocuments.getDocuments(e,r))});ag(e,r,null),ap(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await aw(e,o)}catch(e){await nf(e)}}async function af(e,i,n){var r;try{let o=await (r=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,i).next(i=>(null!==i||iZ(),n=i.keys(),r.mutationQueue.removeMutationBatch(e,i))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,i)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))});ag(e,i,n),ap(e,i),e.sharedClientState.updateMutationState(i,"rejected",n),await aw(e,o)}catch(e){await nf(e)}}function ap(e,i){(e.Oa.get(i)||[]).forEach(e=>{e.resolve()}),e.Oa.delete(i)}function ag(e,i,n){let r=e.xa[e.currentUser.toKey()];if(r){let o=r.get(i);o&&(n?o.reject(n):o.resolve(),r=r.remove(i)),e.xa[e.currentUser.toKey()]=r}}function am(e,i,n=null){for(let r of(e.sharedClientState.removeLocalQueryTarget(i),e.Da.get(i)))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(i),e.isPrimaryClient&&e.Ma.Vr(i).forEach(i=>{e.Ma.containsKey(i)||av(e,i)})}function av(e,i){e.Ca.delete(i.path.canonicalString());let n=e.va.get(i);null!==n&&(s_(e.remoteStore,n),e.va=e.va.remove(i),e.Fa.delete(n),ay(e))}function ab(e,i,n){for(let r of n)r instanceof s3?(e.Ma.addReference(r.key,i),function(e,i){let n=i.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(iY("SyncEngine","New document in limbo: "+n),e.Ca.add(r),ay(e))}(e,r)):r instanceof s9?(iY("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,i),e.Ma.containsKey(r.key)||av(e,r.key)):iZ()}function ay(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){let i=e.Ca.values().next().value;e.Ca.delete(i);let n=new nu(na.fromString(i)),r=e.Na.next();e.Fa.set(r,new ae(n)),e.va=e.va.insert(n,r),sI(e.remoteStore,new oB(rv(new rf(n.path)),r,"TargetPurposeLimboResolution",nm.oe))}}async function aw(e,i,n){let r=[],o=[],a=[];e.ba.isEmpty()||(e.ba.forEach((l,c)=>{a.push(e.Ba(c,i,n).then(i=>{if((i||n)&&e.isPrimaryClient){let n=i&&!i.fromCache;e.sharedClientState.updateQueryState(c.targetId,n?"current":"not-current")}if(i){r.push(i);let e=o5.Ki(c.targetId,i);o.push(e)}}))}),await Promise.all(a),e.Sa.h_(r),await async function(e,i){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>np.forEach(i,i=>np.forEach(i.qi,r=>e.persistence.referenceDelegate.addReference(n,i.targetId,r)).next(()=>np.forEach(i.Qi,r=>e.persistence.referenceDelegate.removeReference(n,i.targetId,r)))))}catch(e){if(!ng(e))throw e;iY("LocalStore","Failed to update sequence numbers: "+e)}for(let n of i){let i=n.targetId;if(!n.fromCache){let n=e.ns.get(i),r=n.snapshotVersion,o=n.withLastLimboFreeSnapshotVersion(r);e.ns=e.ns.insert(i,o)}}}(e.localStore,o))}async function ak(e,i){var n;if(!e.currentUser.isEqual(i)){iY("SyncEngine","User change. New user:",i.toKey());let r=await o8(e.localStore,i);e.currentUser=i,n="'waitForPendingWrites' promise is rejected due to a user change.",e.Oa.forEach(e=>{e.forEach(e=>{e.reject(new i1(i0.CANCELLED,n))})}),e.Oa.clear(),e.sharedClientState.handleUserChange(i,r.removedBatchIds,r.addedBatchIds),await aw(e,r.us)}}function aE(e,i){let n=e.Fa.get(i);if(n&&n.wa)return rN().add(n.key);{let n=rN(),r=e.Da.get(i);if(!r)return n;for(let i of r){let r=e.ba.get(i);n=n.unionWith(r.view.Ea)}return n}}function aI(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=ac.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ah.bind(null,e),e.Sa.h_=s2.bind(null,e.eventManager),e.Sa.ka=s4.bind(null,e.eventManager),e}class a_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,i){return null}createIndexBackfillerScheduler(e,i){return null}createLocalStore(e){var i;return i=this.persistence,new o9(i,new o3,e.initialUser,this.serializer)}createPersistence(e){return new o1(o4.Hr,this.serializer)}createSharedClientState(e){return new sn}async terminate(){var e,i;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(i=this.indexBackfillerScheduler)||void 0===i||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aS{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>au(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ak.bind(null,this.syncEngine),await sq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new sZ}createDatastore(e){let i=sf(e.databaseInfo.databaseId),n=new sh(e.databaseInfo);return new sb(e.authCredentials,e.appCheckCredentials,n,i)}createRemoteStore(e){var i;return i=this.localStore,new sw(i,this.datastore,e.asyncQueue,e=>au(this.syncEngine,e,0),so.D()?new so:new sr)}createSyncEngine(e,i){return function(e,i,n,r,o,a,l){let c=new at(e,i,n,r,o,a);return l&&(c.La=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e;await async function(e){iY("RemoteStore","RemoteStore shutting down."),e.M_.add(5),await sE(e),e.O_.shutdown(),e.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):iX("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,i,n,r){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=r,this.user=iK.UNAUTHENTICATED,this.clientId=nt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{iY("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(iY("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new i1(i0.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new i2;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=sG(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ax(e,i){e.asyncQueue.verifyOperationInProgress(),iY("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;await i.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await o8(i.localStore,e),r=e)}),i.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=i}async function aA(e,i){e.asyncQueue.verifyOperationInProgress();let n=await aO(e);iY("FirestoreClient","Initializing OnlineComponentProvider"),await i.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sz(i.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sz(i.remoteStore,n)),e._onlineComponents=i}async function aO(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){iY("FirestoreClient","Using user provided OfflineComponentProvider");try{await ax(e,e._uninitializedComponentsProvider._offline)}catch(i){if(!("FirebaseError"===i.name?i.code===i0.FAILED_PRECONDITION||i.code===i0.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw i;iJ("Error using user provided cache. Falling back to memory cache: "+i),await ax(e,new a_)}}else iY("FirestoreClient","Using default OfflineComponentProvider"),await ax(e,new a_)}return e._offlineComponents}async function aL(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(iY("FirestoreClient","Using user provided OnlineComponentProvider"),await aA(e,e._uninitializedComponentsProvider._online)):(iY("FirestoreClient","Using default OnlineComponentProvider"),await aA(e,new aS))),e._onlineComponents}async function aR(e){let i=await aL(e),n=i.eventManager;return n.onListen=ai.bind(null,i.syncEngine),n.onUnlisten=as.bind(null,i.syncEngine),n.onFirstRemoteStoreListen=an.bind(null,i.syncEngine),n.onLastRemoteStoreUnlisten=aa.bind(null,i.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(e){let i={};return void 0!==e.timeoutSeconds&&(i.timeoutSeconds=e.timeoutSeconds),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(e,i,n){if(!n)throw new i1(i0.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${i}.`)}function aM(e){if(!nu.isDocumentKey(e))throw new i1(i0.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function aB(e){if(nu.isDocumentKey(e))throw new i1(i0.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function aF(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var i;let n=(i=e).constructor?i.constructor.name:null;return n?`a custom ${n} object`:"an object"}}return"function"==typeof e?"a function":iZ()}function aU(e,i){if("_delegate"in e&&(e=e._delegate),!(e instanceof i)){if(i.name===e.constructor.name)throw new i1(i0.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=aF(e);throw new i1(i0.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){var i,n;if(void 0===e.host){if(void 0!==e.ssl)throw new i1(i0.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new i1(i0.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,i,n,r){if(!0===i&&!0===r)throw new i1(i0.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aN(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new i1(i0.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new i1(i0.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new i1(i0.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var i,n;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(i=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,i.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aV{constructor(e,i,n,r){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new i1(i0.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new i1(i0.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aj(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new i5;switch(e.type){case"firstParty":return new i8(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new i1(i0.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=aP.get(e);i&&(iY("ComponentProvider","Removing Datastore"),aP.delete(e),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new aH(this.firestore,e,this._query)}}class az{constructor(e,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aq(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new az(this.firestore,e,this._key)}}class aq extends aH{constructor(e,i,n){super(e,i,new rf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new az(this.firestore,null,new nu(e))}withConverter(e){return new aq(this.firestore,e,this._path)}}function aK(e,i,...n){if(e=e6(e),aD("collection","path",i),e instanceof aV){let r=na.fromString(i,...n);return aB(r),new aq(e,null,r)}{if(!(e instanceof az||e instanceof aq))throw new i1(i0.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(na.fromString(i,...n));return aB(r),new aq(e.firestore,null,r)}}function aW(e,i,...n){if(e=e6(e),1==arguments.length&&(i=nt.newId()),aD("doc","path",i),e instanceof aV){let r=na.fromString(i,...n);return aM(r),new az(e,null,new nu(r))}{if(!(e instanceof az||e instanceof aq))throw new i1(i0.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(na.fromString(i,...n));return aM(r),new az(e.firestore,e instanceof aq?e.converter:null,new nu(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new sp(this,"async_queue_retry"),this.hu=()=>{let e=sd();e&&iY("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let e=sd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let i=sd();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let i=new i2;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ng(e))throw e;iY("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){let i=this.iu.then(()=>(this.uu=!0,e().catch(e=>{let i;throw this.au=e,this.uu=!1,iX("INTERNAL UNHANDLED ERROR: ",(i=e.message||"",e.stack&&(i=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),i)),e}).then(e=>(this.uu=!1,e))));return this.iu=i,i}enqueueAfterDelay(e,i,n){this.Pu(),this.lu.indexOf(e)>-1&&(i=0);let r=s$.createAndSchedule(this,e,i,n,e=>this.Eu(e));return this._u.push(r),r}Pu(){this.au&&iZ()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(let i of this._u)if(i.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{for(let i of(this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs),this._u))if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let i=this._u.indexOf(e);this._u.splice(i,1)}}class aG extends aV{constructor(e,i,n,r){super(e,i,n,r),this.type="firestore",this._queue=new a$,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aX(this),this._firestoreClient.terminate()}}function aY(e){return e._firestoreClient||aX(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function aX(e){var i,n,r,o;let a=e._freezeSettings(),l=(o=e._databaseId,new nM(o,(null===(i=e._app)||void 0===i?void 0:i.options.appId)||"",e._persistenceKey,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,aN(a.experimentalLongPollingOptions),a.useFetchStreams));e._firestoreClient=new aC(e._authCredentials,e._appCheckCredentials,e._queue,l),(null===(n=a.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aJ(nx.fromBase64String(e))}catch(e){throw new i1(i0.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aJ(nx.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new i1(i0.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new i1(i0.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new i1(i0.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ni(this._lat,e._lat)||ni(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=/^__.*__$/;class a2{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return null!==this.fieldMask?new r2(e,this.data,this.fieldMask,i,this.fieldTransforms):new r1(e,this.data,i,this.fieldTransforms)}}class a4{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return new r2(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function a5(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iZ()}}class a6{constructor(e,i,n,r,o,a){this.settings=e,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new a6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var i;let n=null===(i=this.path)||void 0===i?void 0:i.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var i;let n=null===(i=this.path)||void 0===i?void 0:i.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return lu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(a5(this.fu)&&a1.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class a3{constructor(e,i,n){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=n||sf(e)}Fu(e,i,n,r=!1){return new a6({fu:e,methodName:i,vu:n,path:nc.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a9(e){let i=e._freezeSettings(),n=sf(e._databaseId);return new a3(e._databaseId,!!i.ignoreUndefinedProperties,n)}class a8 extends aZ{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a8}}function a7(e,i,n){return new a6({fu:3,vu:i.settings.vu,methodName:e._methodName,yu:n},i.databaseId,i.serializer,i.ignoreUndefinedProperties)}class le extends aZ{_toFieldTransform(e){return new r$(e.path,new rU)}isEqual(e){return e instanceof le}}class lt extends aZ{constructor(e,i){super(e),this.Mu=i}_toFieldTransform(e){let i=a7(this,e,!0),n=new rj(this.Mu.map(e=>ln(e,i)));return new r$(e.path,n)}isEqual(e){return e instanceof lt&&eJ(this.Mu,e.Mu)}}class li extends aZ{constructor(e,i){super(e),this.Mu=i}_toFieldTransform(e){let i=a7(this,e,!0),n=new rH(this.Mu.map(e=>ln(e,i)));return new r$(e.path,n)}isEqual(e){return e instanceof li&&eJ(this.Mu,e.Mu)}}function ln(e,i){if(lo(e=e6(e)))return ls("Unsupported field value:",i,e),lr(e,i);if(e instanceof aZ)return function(e,i){if(!a5(i.fu))throw i.Du(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(i);n&&i.fieldTransforms.push(n)}(e,i),null;if(void 0===e&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),e instanceof Array){if(i.settings.yu&&4!==i.fu)throw i.Du("Nested arrays are not supported");return function(e,i){let n=[],r=0;for(let o of e){let e=ln(o,i.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,i)}return function(e,i){if(null===(e=e6(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e){var n,r,o;return n=i.serializer,"number"==typeof(o=r=e)&&Number.isInteger(o)&&!nv(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER?rM(r):rD(n,r)}if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let n=nr.fromDate(e);return{timestampValue:oE(i.serializer,n)}}if(e instanceof nr){let n=new nr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:oE(i.serializer,n)}}if(e instanceof a0)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aJ)return{bytesValue:oI(i.serializer,e._byteString)};if(e instanceof az){let n=i.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw i.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:oS(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.Du(`Unsupported field value: ${aF(e)}`)}(e,i)}function lr(e,i){let n={};return nw(e)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):ny(e,(e,r)=>{let o=ln(r,i.pu(e));null!=o&&(n[e]=o)}),{mapValue:{fields:n}}}function lo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nr||e instanceof a0||e instanceof aJ||e instanceof az||e instanceof aZ)}function ls(e,i,n){if(!lo(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){let r=aF(n);throw"an object"===r?i.Du(e+" a custom object"):i.Du(e+" "+r)}}function la(e,i,n){if((i=e6(i))instanceof aQ)return i._internalPath;if("string"==typeof i)return lc(e,i);throw lu("Field path arguments must be of type string or ",e,!1,void 0,n)}const ll=RegExp("[~\\*/\\[\\]]");function lc(e,i,n){if(i.search(ll)>=0)throw lu(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new aQ(...i.split("."))._internalPath}catch(r){throw lu(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lu(e,i,n,r,o){let a=r&&!r.isEmpty(),l=void 0!==o,c=`Function ${i}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${o}`),u+=")"),new i1(i0.INVALID_ARGUMENT,c+e+u)}function lh(e,i){return e.some(e=>e.isEqual(i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,i,n,r,o){this._firestore=e,this._userDataWriter=i,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new az(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new lf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let i=this._document.data.field(lp("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class lf extends ld{data(){return super.data()}}function lp(e,i){return"string"==typeof i?lc(e,i):i instanceof aQ?i._internalPath:i._delegate._internalPath}class lg{}class lm extends lg{}class lv extends lm{constructor(e,i,n){super(),this._field=e,this._op=i,this._value=n,this.type="where"}static _create(e,i,n){return new lv(e,i,n)}_apply(e){let i=this._parse(e);return lE(e._query,i),new aH(e.firestore,e.converter,rb(e._query,i))}_parse(e){let i=a9(e.firestore);return function(e,i,n,r,o,a,l){let c;if(o.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new i1(i0.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){lk(l,a);let i=[];for(let n of l)i.push(lw(r,e,n));c={arrayValue:{values:i}}}else c=lw(r,e,l)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||lk(l,a),c=function(e,i,n,r=!1){return ln(n,e.Fu(r?4:3,i))}(n,i,l,"in"===a||"not-in"===a);return n3.create(o,a,c)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function lb(e,i,n){let r=lp("where",e);return lv._create(r,i,n)}class ly extends lg{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new ly(e,i)}_parse(e){let i=this._queryConstraints.map(i=>i._parse(e)).filter(e=>e.getFilters().length>0);return 1===i.length?i[0]:n9.create(i,this._getOperator())}_apply(e){let i=this._parse(e);return 0===i.getFilters().length?e:(function(e,i){let n=e;for(let e of i.getFlattenedFilters())lE(n,e),n=rb(n,e)}(e._query,i),new aH(e.firestore,e.converter,rb(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function lw(e,i,n){if("string"==typeof(n=e6(n))){if(""===n)throw new i1(i0.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rg(i)&&-1!==n.indexOf("/"))throw new i1(i0.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=i.path.child(na.fromString(n));if(!nu.isDocumentKey(r))throw new i1(i0.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nK(e,new nu(r))}if(n instanceof az)return nK(e,n._key);throw new i1(i0.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aF(n)}.`)}function lk(e,i){if(!Array.isArray(e)||0===e.length)throw new i1(i0.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${i.toString()}' filters.`)}function lE(e,i){let n=function(e,i){for(let n of e)for(let e of n.getFlattenedFilters())if(i.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(i.op));if(null!==n)throw n===i.op?new i1(i0.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${i.op.toString()}' filter.`):new i1(i0.INVALID_ARGUMENT,`Invalid query. You cannot use '${i.op.toString()}' filters with '${n.toString()}' filters.`)}class lI{convertValue(e,i="none"){switch(nU(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nL(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(nR(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw iZ()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){let n={};return ny(e,(e,r)=>{n[e]=this.convertValue(r,i)}),n}convertGeoPoint(e){return new a0(nL(e.latitude),nL(e.longitude))}convertArray(e,i){return(e.values||[]).map(e=>this.convertValue(e,i))}convertServerTimestamp(e,i){switch(i){case"previous":let n=nP(e);return null==n?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(nD(e));default:return null}}convertTimestamp(e){let i=nO(e);return new nr(i.seconds,i.nanos)}convertDocumentKey(e,i){let n=na.fromString(e);oM(n)||iZ();let r=new nB(n.get(1),n.get(3)),o=new nu(n.popFirst(5));return r.isEqual(i)||iX(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lS extends ld{constructor(e,i,n,r,o,a){super(e,i,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let i=new lT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){let n=this._document.data.field(lp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}}class lT extends lS{data(e={}){return super.data(e)}}class lC{constructor(e,i,n,r){this._firestore=e,this._userDataWriter=i,this._snapshot=r,this.metadata=new l_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(n=>{e.call(i,new lT(this._firestore,this._userDataWriter,n.key,n,new l_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new i1(i0.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(e,i){if(e._snapshot.oldDocs.isEmpty()){let i=0;return e._snapshot.docChanges.map(n=>{let r=new lT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new l_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:i++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>i||3!==e.type).map(i=>{let r=new lT(e._firestore,e._userDataWriter,i.doc.key,i.doc,new l_(e._snapshot.mutatedKeys.has(i.doc.key),e._snapshot.fromCache),e.query.converter),o=-1,a=-1;return 0!==i.type&&(o=n.indexOf(i.doc.key),n=n.delete(i.doc.key)),1!==i.type&&(a=(n=n.add(i.doc)).indexOf(i.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iZ()}}(i.type),doc:r,oldIndex:o,newIndex:a}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}class lx extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new aJ(e)}convertReference(e){let i=this.convertDocumentKey(e,this.firestore._databaseId);return new az(this.firestore,null,i)}}function lA(e,i){return function(e,i){let n=new i2;return e.asyncQueue.enqueueAndForget(async()=>al(await aL(e).then(e=>e.syncEngine),i,n)),n.promise}(aY(e),i)}function lO(e,i){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>i.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>i.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}new WeakMap,function(e=!0){iW=tV,tR(new e3("firestore",(i,{instanceIdentifier:n,options:r})=>{let o=i.getProvider("app").getImmediate(),a=new aG(new i3(i.getProvider("auth-internal")),new ne(i.getProvider("app-check-internal")),function(e,i){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new i1(i0.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nB(e.options.projectId,i)}(o,n),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),t$(iq,"4.6.3",void 0),t$(iq,"4.6.3","esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const lL={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"};function lR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lN=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},lP=new eG("auth","Firebase",lR()),lD=new to("@firebase/auth");function lM(e,...i){lD.logLevel<=F.ERROR&&lD.error(`Auth (${tV}): ${e}`,...i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(e,...i){throw lH(e,...i)}function lF(e,...i){return lH(e,...i)}function lU(e,i,n){return new eG("auth","Firebase",Object.assign(Object.assign({},lR()),{[i]:n})).create(i,{appName:e.name})}function lj(e){return lU(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lV(e,i,n){if(!(i instanceof n))throw n.name!==i.constructor.name&&lB(e,"argument-error"),lU(e,"argument-error",`Type of ${i.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lH(e,...i){if("string"!=typeof e){let n=i[0],r=[...i.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return lP.create(e,...i)}function lz(e,i,...n){if(!e)throw lH(i,...n)}function lq(e){let i="INTERNAL ASSERTION FAILED: "+e;throw lM(i),Error(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function lW(){return"http:"===l$()||"https:"===l$()}function l$(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e,i){var n;this.shortDelay=e,this.longDelay=i,n="Short delay should be less than long delay!",i>e||lq(n),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ej())||eq()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lW()||ez()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(e,i){var n,r;n=e.emulator,r="Emulator should always be set here",n||lq(r);let{url:o}=e.emulator;return i?`${o}${i.startsWith("/")?i.slice(1):i}`:o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{static initialize(e,i,n){this.fetchImpl=e,i&&(this.headersImpl=i),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void lq("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void lq("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void lq("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lQ=new lG(3e4,6e4);function lZ(e,i){return e.tenantId&&!i.tenantId?Object.assign(Object.assign({},i),{tenantId:e.tenantId}):i}async function l0(e,i,n,r,o={}){return l1(e,o,async()=>{let o={},a={};r&&("GET"===i?a=r:o={body:JSON.stringify(r)});let l=eZ(Object.assign({key:e.config.apiKey},a)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),lX.fetch()(l4(e,e.config.apiHost,n,l),Object.assign({method:i,headers:c,referrerPolicy:"no-referrer"},o))})}async function l1(e,i,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},lJ),i);try{let i=new l5(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let a=await o.json();if("needConfirmation"in a)throw l6(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let[i,n]=(o.ok?a.errorMessage:a.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===i)throw l6(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===i)throw l6(e,"email-already-in-use",a);if("USER_DISABLED"===i)throw l6(e,"user-disabled",a);let l=r[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(n)throw lU(e,l,n);lB(e,l)}}catch(i){if(i instanceof e$)throw i;lB(e,"network-request-failed",{message:String(i)})}}async function l2(e,i,n,r,o={}){let a=await l0(e,i,n,r,o);return"mfaPendingCredential"in a&&lB(e,"multi-factor-auth-required",{_serverResponse:a}),a}function l4(e,i,n,r){let o=`${i}${n}?${r}`;return e.config.emulator?lY(e.config,o):`${e.config.apiScheme}://${o}`}class l5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(lF(this.auth,"network-request-failed")),lQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function l6(e,i,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let o=lF(e,i,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(e){return void 0!==e&&void 0!==e.getResponse}function l9(e){return void 0!==e&&void 0!==e.enterprise}class l8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return function(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(i.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(e){return(await l0(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ce(e,i){return l0(e,"GET","/v2/recaptchaConfig",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ct(e,i){return l0(e,"POST","/v1/accounts:delete",i)}async function ci(e,i){return l0(e,"POST","/v1/accounts:update",i)}async function cn(e,i){return l0(e,"POST","/v1/accounts:lookup",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(e){if(e)try{let i=new Date(Number(e));if(!isNaN(i.getTime()))return i.toUTCString()}catch(e){}}async function co(e,i=!1){let n=e6(e),r=await n.getIdToken(i),o=ca(r);lz(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");let a="object"==typeof o.firebase?o.firebase:void 0,l=null==a?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:cr(cs(o.auth_time)),issuedAtTime:cr(cs(o.iat)),expirationTime:cr(cs(o.exp)),signInProvider:l||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}}function cs(e){return 1e3*Number(e)}function ca(e){let[i,n,r]=e.split(".");if(void 0===i||void 0===n||void 0===r)return lM("JWT malformed, contained fewer than 3 sections"),null;try{let e=eA(n);if(!e)return lM("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return lM("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function cl(e){let i=ca(e);return lz(i,"internal-error"),lz(void 0!==i.exp,"internal-error"),lz(void 0!==i.iat,"internal-error"),Number(i.exp)-Number(i.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(e,i,n=!1){if(n)return i;try{return await i}catch(i){throw i instanceof e$&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var i;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!==(i=this.user.stsTokenManager.expirationTime)&&void 0!==i?i:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(e){var i;let n=e.auth,r=await e.getIdToken(),o=await cc(e,cn(n,{idToken:r}));lz(null==o?void 0:o.users.length,n,"internal-error");let a=o.users[0];e._notifyReloadListener(a);let l=(null===(i=a.providerUserInfo)||void 0===i?void 0:i.length)?cp(a.providerUserInfo):[],c=[...e.providerData.filter(e=>!l.some(i=>i.providerId===e.providerId)),...l],u=e.isAnonymous,h=!(e.email&&a.passwordHash)&&!(null==c?void 0:c.length);Object.assign(e,{uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ch(a.createdAt,a.lastLoginAt),isAnonymous:!!u&&h})}async function cf(e){let i=e6(e);await cd(i),await i.auth._persistUserIfCurrent(i),i.auth._notifyListenersIfCurrent(i)}function cp(e){return e.map(e=>{var{providerId:i}=e,n=lO(e,["providerId"]);return{providerId:i,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(e,i){let n=await l1(e,{},async()=>{let n=eZ({grant_type:"refresh_token",refresh_token:i}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,a=l4(e,r,"/v1/token",`key=${o}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",lX.fetch()(a,{method:"POST",headers:l,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cm(e,i){return l0(e,"POST","/v2/accounts:revokeToken",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lz(e.idToken,"internal-error"),lz(void 0!==e.idToken,"internal-error"),lz(void 0!==e.refreshToken,"internal-error");let i="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):cl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){lz(0!==e.length,"internal-error");let i=cl(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return i||!this.accessToken||this.isExpired?(lz(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){let{accessToken:n,refreshToken:r,expiresIn:o}=await cg(e,i);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,i,n){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,i){let{refreshToken:n,accessToken:r,expirationTime:o}=i,a=new cv;return n&&(lz("string"==typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(lz("string"==typeof r,"internal-error",{appName:e}),a.accessToken=r),o&&(lz("number"==typeof o,"internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cv,this.toJSON())}_performRefresh(){return lq("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(e,i){lz("string"==typeof e||void 0===e,"internal-error",{appName:i})}class cy{constructor(e){var{uid:i,auth:n,stsTokenManager:r}=e,o=lO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ch(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let i=await cc(this,this.stsTokenManager.getToken(this.auth,e));return lz(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return co(this,e)}reload(){return cf(this)}_assign(e){this!==e&&(lz(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let i=new cy(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(e){lz(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),i&&await cd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tM(this.auth.app))return Promise.reject(lj(this.auth));let e=await this.getIdToken();return await cc(this,ct(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){var n,r,o,a,l,c,u,h;let d=null!==(n=i.displayName)&&void 0!==n?n:void 0,f=null!==(r=i.email)&&void 0!==r?r:void 0,p=null!==(o=i.phoneNumber)&&void 0!==o?o:void 0,g=null!==(a=i.photoURL)&&void 0!==a?a:void 0,m=null!==(l=i.tenantId)&&void 0!==l?l:void 0,v=null!==(c=i._redirectEventId)&&void 0!==c?c:void 0,b=null!==(u=i.createdAt)&&void 0!==u?u:void 0,y=null!==(h=i.lastLoginAt)&&void 0!==h?h:void 0,{uid:w,emailVerified:k,isAnonymous:E,providerData:I,stsTokenManager:_}=i;lz(w&&_,e,"internal-error");let S=cv.fromJSON(this.name,_);lz("string"==typeof w,e,"internal-error"),cb(d,e.name),cb(f,e.name),lz("boolean"==typeof k,e,"internal-error"),lz("boolean"==typeof E,e,"internal-error"),cb(p,e.name),cb(g,e.name),cb(m,e.name),cb(v,e.name),cb(b,e.name),cb(y,e.name);let T=new cy({uid:w,auth:e,email:f,emailVerified:k,displayName:d,isAnonymous:E,photoURL:g,phoneNumber:p,tenantId:m,stsTokenManager:S,createdAt:b,lastLoginAt:y});return I&&Array.isArray(I)&&(T.providerData=I.map(e=>Object.assign({},e))),v&&(T._redirectEventId=v),T}static async _fromIdTokenResponse(e,i,n=!1){let r=new cv;r.updateFromServerResponse(i);let o=new cy({uid:i.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await cd(o),o}static async _fromGetAccountInfoResponse(e,i,n){let r=i.users[0];lz(void 0!==r.localId,"internal-error");let o=void 0!==r.providerUserInfo?cp(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null==o?void 0:o.length),l=new cv;l.updateFromIdToken(n);let c=new cy({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a});return Object.assign(c,{uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ch(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null==o?void 0:o.length)}),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Map;function ck(e){var i,n;i="Expected a class definition",e instanceof Function||lq(i);let r=cw.get(e);return r?(n="Instance stored in cache mismatched with class",r instanceof e||lq(n)):(r=new e,cw.set(e,r)),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){let i=this.storage[e];return void 0===i?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(e,i,n){return`firebase:${e}:${i}:${n}`}cE.type="NONE";class c_{constructor(e,i,n){this.persistence=e,this.auth=i,this.userKey=n;let{config:r,name:o}=this.auth;this.fullUserKey=cI(this.userKey,r.apiKey,o),this.fullPersistenceKey=cI("persistence",r.apiKey,o),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?cy._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,n="authUser"){if(!i.length)return new c_(ck(cE),e,n);let r=(await Promise.all(i.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),o=r[0]||ck(cE),a=cI(n,e.config.apiKey,e.name),l=null;for(let n of i)try{let i=await n._get(a);if(i){let r=cy._fromJSON(e,i);n!==o&&(l=r),o=n;break}}catch(e){}let c=r.filter(e=>e._shouldAllowMigration);return o._shouldAllowMigration&&c.length&&(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(i.map(async e=>{if(e!==o)try{await e._remove(a)}catch(e){}}))),new c_(o,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(e){let i=e.toLowerCase();if(i.includes("opera/")||i.includes("opr/")||i.includes("opios/"))return"Opera";{if(cA(i))return"IEMobile";if(i.includes("msie")||i.includes("trident/"))return"IE";if(i.includes("edge/"))return"Edge";if(cT(i))return"Firefox";if(i.includes("silk/"))return"Silk";if(cL(i))return"Blackberry";if(cR(i))return"Webos";if(cC(i))return"Safari";if((i.includes("chrome/")||cx(i))&&!i.includes("edge/"))return"Chrome";if(cO(i))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function cT(e=ej()){return/firefox\//i.test(e)}function cC(e=ej()){let i=e.toLowerCase();return i.includes("safari/")&&!i.includes("chrome/")&&!i.includes("crios/")&&!i.includes("android")}function cx(e=ej()){return/crios\//i.test(e)}function cA(e=ej()){return/iemobile/i.test(e)}function cO(e=ej()){return/android/i.test(e)}function cL(e=ej()){return/blackberry/i.test(e)}function cR(e=ej()){return/webos/i.test(e)}function cN(e=ej()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function cP(e=ej()){return cN(e)||cO(e)||cR(e)||cL(e)||/windows phone/i.test(e)||cA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(e,i=[]){let n;switch(e){case"Browser":n=cS(ej());break;case"Worker":n=`${cS(ej())}-${e}`;break;default:n=e}let r=i.length?i.join(","):"FirebaseCore-web";return`${n}/JsCore/${tV}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){let n=i=>new Promise((n,r)=>{try{let r=e(i);n(r)}catch(e){r(e)}});n.onAbort=i,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let i=[];try{for(let n of this.queue)await n(e),n.onAbort&&i.push(n.onAbort)}catch(e){for(let e of(i.reverse(),i))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(e,i={}){return l0(e,"GET","/v2/passwordPolicy",lZ(e,i))}class cF{constructor(e){var i,n,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(i=a.minPasswordLength)&&void 0!==i?i:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var i,n,r,o,a,l;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(i=c.meetsMinPasswordLength)||void 0===i||i),c.isValid&&(c.isValid=null===(n=c.meetsMaxPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.containsLowercaseLetter)||void 0===r||r),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(a=c.containsNumericCharacter)||void 0===a||a),c.isValid&&(c.isValid=null===(l=c.containsNonAlphanumericCharacter)||void 0===l||l),c}validatePasswordLengthOptions(e,i){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(i.meetsMinPasswordLength=e.length>=n),r&&(i.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,i){let n;this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(i,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,i,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,i,n,r){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cj(this),this.idTokenSubscription=new cj(this),this.beforeStateQueue=new cM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=ck(i)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await c_.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(i),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let i=await cn(this,{idToken:e}),n=await cy._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(tM(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(i,i))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null==r?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!n||n===a)&&(null==l?void 0:l.user)&&(r=l.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return(lz(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId)?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tM(this.app))return Promise.reject(lj(this));let i=e?e6(e):null;return i&&lz(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&lz(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tM(this.app)?Promise.reject(lj(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tM(this.app)?Promise.reject(lj(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ck(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new cF(await cB(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eG("auth","Firebase",e())}onAuthStateChanged(e,i,n){return this.registerStateListener(this.authStateSubscription,e,i,n)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,n){return this.registerStateListener(this.idTokenSubscription,e,i,n)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){let i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(i.tenantId=this.tenantId),await cm(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,i){let n=await this.getOrInitRedirectPersistenceManager(i);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let i=e&&ck(e)||this._popupRedirectResolver;lz(i,this,"argument-error"),this.redirectPersistenceManager=await c_.create(this,[ck(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,n;return(this._isInitialized&&await this.queue(async()=>{}),(null===(i=this._currentUser)||void 0===i?void 0:i._redirectEventId)===e)?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!==(i=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==i?i:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,n,r){if(this._deleted)return()=>{};let o="function"==typeof i?i:i.next.bind(i),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(lz(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),"function"==typeof i){let o=e.addObserver(i,n,r);return()=>{a=!0,o()}}{let n=e.addObserver(i);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lz(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(i["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(i["X-Firebase-AppCheck"]=r),i}async _getAppCheckToken(){var e;let i=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==i?void 0:i.error)&&function(e,...i){lD.logLevel<=F.WARN&&lD.warn(`Auth (${tV}): ${e}`,...i)}(`Error while retrieving App Check token: ${i.error}`),null==i?void 0:i.token}}class cj{constructor(e){this.auth=e,this.observer=null,this.addObserver=e2(e=>this.observer=e)}get next(){return lz(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cV={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cH(e){return cV.loadJS(e)}function cz(e){return`__${e}${Math.floor(1e6*Math.random())}`}class cq{constructor(e){this.type="recaptcha-enterprise",this.auth=e6(e)}async verify(e="verify",i=!1){async function n(e){if(!i){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(i,n)=>{ce(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new l8(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,i(n.siteKey)}}).catch(e=>{n(e)})})}function r(i,n,r){let o=window.grecaptcha;l9(o)?o.enterprise.ready(()=>{o.enterprise.execute(i,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,o)=>{n(this.auth).then(n=>{if(!i&&l9(window.grecaptcha))r(n,e,o);else{if("undefined"==typeof window){o(Error("RecaptchaVerifier is only supported in browser"));return}let i=cV.recaptchaEnterpriseScript;0!==i.length&&(i+=n),cH(i).then(()=>{r(n,e,o)}).catch(e=>{o(e)})}}).catch(e=>{o(e)})})}}async function cK(e,i,n,r=!1){let o;let a=new cq(e);try{o=await a.verify(n)}catch(e){o=await a.verify(n,!0)}let l=Object.assign({},i);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function cW(e,i,n,r){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o||!o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return r(e,i).catch(async o=>{if("auth/missing-recaptcha-token"!==o.code)return Promise.reject(o);{console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await cK(e,i,n,"getOobCode"===n);return r(e,o)}});{let o=await cK(e,i,n,"getOobCode"===n);return r(e,o)}}function c$(e,i,n){let r=e6(e);lz(r._canInitEmulator,r,"emulator-config-failed"),lz(/^https?:\/\//.test(i),r,"invalid-emulator-scheme");let o=!!(null==n?void 0:n.disableWarnings),a=cG(i),{host:l,port:c}=function(e){let i=cG(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(i.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){let e=o[1];return{host:e,port:cY(r.substr(e.length+1))}}{let[e,i]=r.split(":");return{host:e,port:cY(i)}}}(i),u=null===c?"":`:${c}`;r.config.emulator={url:`${a}//${l}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){let e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cG(e){let i=e.indexOf(":");return i<0?"":e.substr(0,i+1)}function cY(e){if(!e)return null;let i=Number(e);return isNaN(i)?null:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return lq("not implemented")}_getIdTokenResponse(e){return lq("not implemented")}_linkToIdToken(e,i){return lq("not implemented")}_getReauthenticationResolver(e){return lq("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cJ(e,i){return l0(e,"POST","/v1/accounts:resetPassword",lZ(e,i))}async function cQ(e,i){return l0(e,"POST","/v1/accounts:update",i)}async function cZ(e,i){return l0(e,"POST","/v1/accounts:signUp",i)}async function c0(e,i){return l0(e,"POST","/v1/accounts:update",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(e,i){return l2(e,"POST","/v1/accounts:signInWithPassword",lZ(e,i))}async function c2(e,i){return l0(e,"POST","/v1/accounts:sendOobCode",lZ(e,i))}async function c4(e,i){return c2(e,i)}async function c5(e,i){return c2(e,i)}async function c6(e,i){return c2(e,i)}async function c3(e,i){return c2(e,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(e,i){return l2(e,"POST","/v1/accounts:signInWithEmailLink",lZ(e,i))}async function c8(e,i){return l2(e,"POST","/v1/accounts:signInWithEmailLink",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7 extends cX{constructor(e,i,n,r=null){super("password",n),this._email=e,this._password=i,this._tenantId=r}static _fromEmailAndPassword(e,i){return new c7(e,i,"password")}static _fromEmailAndCode(e,i,n=null){return new c7(e,i,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let i="string"==typeof e?JSON.parse(e):e;if((null==i?void 0:i.email)&&(null==i?void 0:i.password)){if("password"===i.signInMethod)return this._fromEmailAndPassword(i.email,i.password);if("emailLink"===i.signInMethod)return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return cW(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",c1);case"emailLink":return c9(e,{email:this._email,oobCode:this._password});default:lB(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":return cW(e,{idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cZ);case"emailLink":return c8(e,{idToken:i,email:this._email,oobCode:this._password});default:lB(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ue(e,i){return l2(e,"POST","/v1/accounts:signInWithIdp",lZ(e,i))}class ut extends cX{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let i=new ut(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):lB("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let i="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=i,o=lO(i,["providerId","signInMethod"]);if(!n||!r)return null;let a=new ut(n,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){return ue(e,this.buildRequest())}_linkToIdToken(e,i){let n=this.buildRequest();return n.idToken=i,ue(e,n)}_getReauthenticationResolver(e){let i=this.buildRequest();return i.autoCreate=!1,ue(e,i)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=eZ(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(e,i){return l0(e,"POST","/v1/accounts:sendVerificationCode",lZ(e,i))}async function un(e,i){return l2(e,"POST","/v1/accounts:signInWithPhoneNumber",lZ(e,i))}async function ur(e,i){let n=await l2(e,"POST","/v1/accounts:signInWithPhoneNumber",lZ(e,i));if(n.temporaryProof)throw l6(e,"account-exists-with-different-credential",n);return n}const uo={USER_NOT_FOUND:"user-not-found"};async function us(e,i){return l2(e,"POST","/v1/accounts:signInWithPhoneNumber",lZ(e,Object.assign(Object.assign({},i),{operation:"REAUTH"})),uo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends cX{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,i){return new ua({verificationId:e,verificationCode:i})}static _fromTokenResponse(e,i){return new ua({phoneNumber:e,temporaryProof:i})}_getIdTokenResponse(e){return un(e,this._makeVerificationRequest())}_linkToIdToken(e,i){return ur(e,Object.assign({idToken:i},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return us(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:i,verificationId:n,verificationCode:r}=this.params;return e&&i?{temporaryProof:e,phoneNumber:i}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:i,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||i||r||o?new ua({verificationId:i,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class ul{constructor(e){var i,n,r,o,a,l;let c=e0(e1(e)),u=null!==(i=c.apiKey)&&void 0!==i?i:null,h=null!==(n=c.oobCode)&&void 0!==n?n:null,d=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);lz(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=c.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(l=c.tenantId)&&void 0!==l?l:null}static parseLink(e){let i=function(e){let i=e0(e1(e)).link,n=i?e0(e1(i)).deep_link_id:null,r=e0(e1(e)).deep_link_id;return(r?e0(e1(r)).link:null)||r||n||i||e}(e);try{return new ul(i)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,i){return c7._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){let n=ul.parseLink(i);return lz(n,"argument-error"),c7._fromEmailAndCode(e,n.code,n.tenantId)}}uc.PROVIDER_ID="password",uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends uu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ud extends uh{static credentialFromJSON(e){let i="string"==typeof e?JSON.parse(e):e;return lz("providerId"in i&&"signInMethod"in i,"argument-error"),ut._fromParams(i)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return lz(e.idToken||e.accessToken,"argument-error"),ut._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ud.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ud.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:i,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:o,nonce:a,providerId:l}=e;if(!n&&!r&&!i&&!o||!l)return null;try{return new ud(l)._credential({idToken:i,accessToken:n,nonce:a,pendingToken:o})}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends uh{constructor(){super("facebook.com")}static credential(e){return ut._fromParams({providerId:uf.PROVIDER_ID,signInMethod:uf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uf.credentialFromTaggedObject(e)}static credentialFromError(e){return uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uf.credential(e.oauthAccessToken)}catch(e){return null}}}uf.FACEBOOK_SIGN_IN_METHOD="facebook.com",uf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return ut._fromParams({providerId:up.PROVIDER_ID,signInMethod:up.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return up.credentialFromTaggedObject(e)}static credentialFromError(e){return up.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:i,oauthAccessToken:n}=e;if(!i&&!n)return null;try{return up.credential(i,n)}catch(e){return null}}}up.GOOGLE_SIGN_IN_METHOD="google.com",up.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends uh{constructor(){super("github.com")}static credential(e){return ut._fromParams({providerId:ug.PROVIDER_ID,signInMethod:ug.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ug.credentialFromTaggedObject(e)}static credentialFromError(e){return ug.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ug.credential(e.oauthAccessToken)}catch(e){return null}}}ug.GITHUB_SIGN_IN_METHOD="github.com",ug.PROVIDER_ID="github.com";class um extends cX{constructor(e,i){super(e,e),this.pendingToken=i}_getIdTokenResponse(e){return ue(e,this.buildRequest())}_linkToIdToken(e,i){let n=this.buildRequest();return n.idToken=i,ue(e,n)}_getReauthenticationResolver(e){let i=this.buildRequest();return i.autoCreate=!1,ue(e,i)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let{providerId:i,signInMethod:n,pendingToken:r}="string"==typeof e?JSON.parse(e):e;return i&&n&&r&&i===n?new um(i,r):null}static _create(e,i){return new um(e,i)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class uv extends uu{constructor(e){lz(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return uv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return uv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let i=um.fromJSON(e);return lz(i,"argument-error"),i}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:i,providerId:n}=e;if(!i||!n)return null;try{return um._create(n,i)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends uh{constructor(){super("twitter.com")}static credential(e,i){return ut._fromParams({providerId:ub.PROVIDER_ID,signInMethod:ub.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return ub.credentialFromTaggedObject(e)}static credentialFromError(e){return ub.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:i,oauthTokenSecret:n}=e;if(!i||!n)return null;try{return ub.credential(i,n)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(e,i){return l2(e,"POST","/v1/accounts:signUp",lZ(e,i))}ub.TWITTER_SIGN_IN_METHOD="twitter.com",ub.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,n,r=!1){return new uw({user:await cy._fromIdTokenResponse(e,n,r),providerId:uk(n),_tokenResponse:n,operationType:i})}static async _forOperation(e,i,n){return await e._updateTokensIfNecessary(n,!0),new uw({user:e,providerId:uk(n),_tokenResponse:n,operationType:i})}}function uk(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(e){var i;if(tM(e.app))return Promise.reject(lj(e));let n=e6(e);if(await n._initializationPromise,null===(i=n.currentUser)||void 0===i?void 0:i.isAnonymous)return new uw({user:n.currentUser,providerId:null,operationType:"signIn"});let r=await uy(n,{returnSecureToken:!0}),o=await uw._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends e${constructor(e,i,n,r){var o;super(i.code,i.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,uI.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:i.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,i,n,r){return new uI(e,i,n,r)}}function u_(e,i,n,r){return("reauthenticate"===i?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw uI._fromErrorAndOperation(e,n,i,r);throw n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(e,i){let n=e6(e);await ux(!0,n,i);let{providerUserInfo:r}=await ci(n.auth,{idToken:await n.getIdToken(),deleteProvider:[i]}),o=uS(r||[]);return n.providerData=n.providerData.filter(e=>o.has(e.providerId)),o.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function uC(e,i,n=!1){let r=await cc(e,i._linkToIdToken(e.auth,await e.getIdToken()),n);return uw._forOperation(e,"link",r)}async function ux(e,i,n){await cd(i),lz(uS(i.providerData).has(n)===e,i.auth,!1===e?"provider-already-linked":"no-such-provider")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(e,i,n=!1){let{auth:r}=e;if(tM(r.app))return Promise.reject(lj(r));let o="reauthenticate";try{let a=await cc(e,u_(r,o,i,e),n);lz(a.idToken,r,"internal-error");let l=ca(a.idToken);lz(l,r,"internal-error");let{sub:c}=l;return lz(e.uid===c,r,"user-mismatch"),uw._forOperation(e,o,a)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&lB(r,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(e,i,n=!1){if(tM(e.app))return Promise.reject(lj(e));let r="signIn",o=await u_(e,r,i),a=await uw._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(a.user),a}async function uL(e,i){return uO(e6(e),i)}async function uR(e,i){let n=e6(e);return await ux(!1,n,i.providerId),uC(n,i)}async function uN(e,i){return uA(e6(e),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(e,i){return l2(e,"POST","/v1/accounts:signInWithCustomToken",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(e,i){if(tM(e.app))return Promise.reject(lj(e));let n=e6(e),r=await uP(n,{token:i,returnSecureToken:!0}),o=await uw._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,i){this.factorId=e,this.uid=i.mfaEnrollmentId,this.enrollmentTime=new Date(i.enrolledAt).toUTCString(),this.displayName=i.displayName}static _fromServerResponse(e,i){return"phoneInfo"in i?uB._fromServerResponse(e,i):"totpInfo"in i?uF._fromServerResponse(e,i):lB(e,"internal-error")}}class uB extends uM{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,i){return new uB(i)}}class uF extends uM{constructor(e){super("totp",e)}static _fromServerResponse(e,i){return new uF(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(e,i,n){var r;lz((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),lz(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),i.continueUrl=n.url,i.dynamicLinkDomain=n.dynamicLinkDomain,i.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(lz(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),i.iOSBundleId=n.iOS.bundleId),n.android&&(lz(n.android.packageName.length>0,e,"missing-android-pkg-name"),i.androidInstallApp=n.android.installApp,i.androidMinimumVersionCode=n.android.minimumVersion,i.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(e){let i=e6(e);i._getPasswordPolicyInternal()&&await i._updatePasswordPolicy()}async function uV(e,i,n){let r=e6(e),o={requestType:"PASSWORD_RESET",email:i,clientType:"CLIENT_TYPE_WEB"};n&&uU(r,o,n),await cW(r,o,"getOobCode",c5)}async function uH(e,i,n){await cJ(e6(e),{oobCode:i,newPassword:n}).catch(async i=>{throw"auth/password-does-not-meet-requirements"===i.code&&uj(e),i})}async function uz(e,i){await c0(e6(e),{oobCode:i})}async function uq(e,i){let n=e6(e),r=await cJ(n,{oobCode:i}),o=r.requestType;switch(lz(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":lz(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":lz(r.mfaInfo,n,"internal-error");default:lz(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=uM._fromServerResponse(e6(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:a},operation:o}}async function uK(e,i){let{data:n}=await uq(e6(e),i);return n.email}async function uW(e,i,n){if(tM(e.app))return Promise.reject(lj(e));let r=e6(e),o=cW(r,{returnSecureToken:!0,email:i,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uy),a=await o.catch(i=>{throw"auth/password-does-not-meet-requirements"===i.code&&uj(e),i}),l=await uw._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u$(e,i,n){let r=e6(e),o={requestType:"EMAIL_SIGNIN",email:i,clientType:"CLIENT_TYPE_WEB"};lz(n.handleCodeInApp,r,"argument-error"),n&&uU(r,o,n),await cW(r,o,"getOobCode",c6)}async function uG(e,i,n){if(tM(e.app))return Promise.reject(lj(e));let r=e6(e),o=uc.credentialWithLink(i,n||lK());return lz(o._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),uL(r,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uY(e,i){return l0(e,"POST","/v1/accounts:createAuthUri",lZ(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uX(e,i){let n=lW()?lK():"http://localhost",{signinMethods:r}=await uY(e6(e),{identifier:i,continueUri:n});return r||[]}async function uJ(e,i){let n=e6(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};i&&uU(n.auth,r,i);let{email:o}=await c4(n.auth,r);o!==e.email&&await e.reload()}async function uQ(e,i,n){let r=e6(e),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:i};n&&uU(r.auth,o,n);let{email:a}=await c3(r.auth,o);a!==e.email&&await e.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uZ(e,i){return l0(e,"POST","/v1/accounts:update",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(e,{displayName:i,photoURL:n}){if(void 0===i&&void 0===n)return;let r=e6(e),o=await r.getIdToken(),a=await cc(r,uZ(r.auth,{idToken:o,displayName:i,photoUrl:n,returnSecureToken:!0}));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;let l=r.providerData.find(({providerId:e})=>"password"===e);l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}async function u1(e,i,n){let{auth:r}=e,o={idToken:await e.getIdToken(),returnSecureToken:!0};i&&(o.email=i),n&&(o.password=n);let a=await cc(e,cQ(r,o));await e._updateTokensIfNecessary(a,!0)}class u2{constructor(e,i,n={}){this.isNewUser=e,this.providerId=i,this.profile=n}}class u4 extends u2{constructor(e,i,n,r){super(e,i,n),this.username=r}}class u5 extends u2{constructor(e,i){super(e,"facebook.com",i)}}class u6 extends u4{constructor(e,i){super(e,"github.com",i,"string"==typeof(null==i?void 0:i.login)?null==i?void 0:i.login:null)}}class u3 extends u2{constructor(e,i){super(e,"google.com",i)}}class u9 extends u4{constructor(e,i,n){super(e,"twitter.com",i,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,i,n){this.type=e,this.credential=i,this.user=n}static _fromIdtoken(e,i){return new u8("enroll",e,i)}static _fromMfaPendingCredential(e){return new u8("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var i,n;if(null==e?void 0:e.multiFactorSession){if(null===(i=e.multiFactorSession)||void 0===i?void 0:i.pendingCredential)return u8._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return u8._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,i,n){this.session=e,this.hints=i,this.signInResolver=n}static _fromError(e,i){let n=e6(e),r=i.customData._serverResponse,o=(r.mfaInfo||[]).map(e=>uM._fromServerResponse(n,e));lz(r.mfaPendingCredential,n,"internal-error");let a=u8._fromMfaPendingCredential(r.mfaPendingCredential);return new u7(a,o,async e=>{let o=await e._process(n,a);delete r.mfaInfo,delete r.mfaPendingCredential;let l=Object.assign(Object.assign({},r),{idToken:o.idToken,refreshToken:o.refreshToken});switch(i.operationType){case"signIn":let c=await uw._fromIdTokenResponse(n,i.operationType,l);return await n._updateCurrentUser(c.user),c;case"reauthenticate":return lz(i.user,n,"internal-error"),uw._forOperation(i.user,i.operationType,l);default:lB(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}class he{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(i=>{i.mfaInfo&&(this.enrolledFactors=i.mfaInfo.map(i=>uM._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new he(e)}async getSession(){return u8._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,i){let n=await this.getSession(),r=await cc(this.user,e._process(this.user.auth,n,i));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){let i="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{var r,o;let e=await cc(this.user,(r=this.user.auth,o={idToken:n,mfaEnrollmentId:i},l0(r,"POST","/v2/accounts/mfaEnrollment:withdraw",lZ(r,o))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==i),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}const ht=new WeakMap,hi="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(hi,"1"),this.storage.removeItem(hi),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){let i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class hr extends hn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=ej();return cC(e)||cN(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=cP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let n=this.storage.getItem(i),r=this.localCache[i];n!==r&&e(i,r,n)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((e,i,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!i)return}let r=()=>{let e=this.storage.getItem(n);(i||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);eK()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,i){this.localCache[e]=i;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(i?JSON.parse(i):i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){let i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}hr.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends hn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}ho.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(i=>i.isListeningto(e));if(i)return i;let n=new hs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:i,eventType:n,data:r}=e.data,o=this.handlersMap[n];if(!(null==o?void 0:o.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:n});let a=Array.from(o).map(async i=>i(e.origin,r)),l=await Promise.all(a.map(async e=>{try{let i=await e;return{fulfilled:!0,value:i}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:i,eventType:n,response:l})}_subscribe(e,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),i&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e="",i=10){let n="";for(let e=0;e<i;e++)n+=Math.floor(10*Math.random());return e+n}hs.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,n=50){let r,o;let a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw Error("connection_unavailable");return new Promise((l,c)=>{let u=ha("",20);a.port1.start();let h=setTimeout(()=>{c(Error("unsupported_event"))},n);o={messageChannel:a,onMessage(e){if(e.data.eventId===u)switch(e.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(e.data.response);break;default:clearTimeout(h),clearTimeout(r),c(Error("invalid_response"))}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:i},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(){return void 0!==hc().WorkerGlobalScope&&"function"==typeof hc().importScripts}async function hh(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="firebaseLocalStorageDb",hf="firebaseLocalStorage",hp="fbase_key";class hg{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function hm(e,i){return e.transaction([hf],i?"readwrite":"readonly").objectStore(hf)}function hv(){let e=indexedDB.open(hd,1);return new Promise((i,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let i=e.result;try{i.createObjectStore(hf,{keyPath:hp})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(hf)?i(n):(n.close(),await new hg(indexedDB.deleteDatabase(hd)).toPromise(),i(await hv()))})})}async function hb(e,i,n){return new hg(hm(e,!0).put({[hp]:i,value:n})).toPromise()}async function hy(e,i){let n=hm(e,!1).get(i),r=await new hg(n).toPromise();return void 0===r?null:r.value}function hw(e,i){return new hg(hm(e,!0).delete(i)).toPromise()}class hk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await hv()),this.db}async _withRetries(e){let i=0;for(;;)try{let i=await this._openDb();return await e(i)}catch(e){if(i++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hs._getInstance(hu()?self:null),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await hh(),!this.activeServiceWorker)return;this.sender=new hl(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(i=n[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var i;if(this.sender&&this.activeServiceWorker&&((null===(i=null==navigator?void 0:navigator.serviceWorker)||void 0===i?void 0:i.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await hv();return await hb(e,hi,"1"),await hw(e,hi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(n=>hb(n,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){let i=await this._withRetries(i=>hy(i,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>hw(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new hg(hm(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let i=[],n=new Set;if(0!==e.length)for(let{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),i.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),i.push(e));return i}notifyListeners(e,i){this.localCache[e]=i;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hk.type="LOCAL";class hE{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,i){let n=this.counter;return this._widgets.set(n,new hI(e,this.auth.name,i||{})),this.counter++,n}reset(e){var i;let n=e||1e12;null===(i=this._widgets.get(n))||void 0===i||i.delete(),this._widgets.delete(n)}getResponse(e){var i;return(null===(i=this._widgets.get(e||1e12))||void 0===i?void 0:i.getResponse())||""}async execute(e){var i;return null===(i=this._widgets.get(e||1e12))||void 0===i||i.execute(),""}}class hI{constructor(e,i,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r="string"==typeof e?document.getElementById(e):e;lz(r,"argument-error",{appName:i}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let i=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)i.push(n.charAt(Math.floor(Math.random()*n.length)));return i.join("")}(0);let{callback:e,"expired-callback":i}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,i)try{i()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=cz("rcb"),hS=new lG(3e4,6e4);class hT{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=hc().grecaptcha)||void 0===e?void 0:e.render)}load(e,i=""){return(lz(i.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(i),e,"argument-error"),this.shouldResolveImmediately(i)&&l3(hc().grecaptcha))?Promise.resolve(hc().grecaptcha):new Promise((n,r)=>{let o=hc().setTimeout(()=>{r(lF(e,"network-request-failed"))},hS.get());hc()[h_]=()=>{hc().clearTimeout(o),delete hc()[h_];let a=hc().grecaptcha;if(!a||!l3(a)){r(lF(e,"internal-error"));return}let l=a.render;a.render=(e,i)=>{let n=l(e,i);return this.counter++,n},this.hostLanguage=i,n(a)},cH(`${cV.recaptchaV2Script}?${eZ({onload:h_,render:"explicit",hl:i})}`).catch(()=>{clearTimeout(o),r(lF(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var i;return!!(null===(i=hc().grecaptcha)||void 0===i?void 0:i.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hC{async load(e){return new hE(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="recaptcha",hA={theme:"light",type:"image"};class hO{constructor(e,i,n=Object.assign({},hA)){this.parameters=n,this.type=hx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=e6(e),this.isInvisible="invisible"===this.parameters.size,lz("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");let r="string"==typeof i?document.getElementById(i):i;lz(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hC:new hT,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),i=this.getAssertedRecaptcha();return i.getResponse(e)||new Promise(n=>{let r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&i.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){lz(!this.parameters.sitekey,this.auth,"argument-error"),lz(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),lz("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return i=>{if(this.tokenChangeListeners.forEach(e=>e(i)),"function"==typeof e)e(i);else if("string"==typeof e){let n=hc()[e];"function"==typeof n&&n(i)}}}assertNotDestroyed(){lz(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let i=document.createElement("div");e.appendChild(i),e=i}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;lz(lW()&&!hu(),this.auth,"internal-error"),await (e=null,new Promise(i=>{if("complete"===document.readyState){i();return}e=()=>i(),window.addEventListener("load",e)}).catch(i=>{throw e&&window.removeEventListener("load",e),i})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let i=await l7(this.auth);lz(i,this.auth,"internal-error"),this.parameters.sitekey=i}getAssertedRecaptcha(){return lz(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,i){this.verificationId=e,this.onConfirmation=i}confirm(e){let i=ua._fromVerification(this.verificationId,e);return this.onConfirmation(i)}}async function hR(e,i,n){if(tM(e.app))return Promise.reject(lj(e));let r=e6(e);return new hL(await hD(r,i,e6(n)),e=>uL(r,e))}async function hN(e,i,n){let r=e6(e);return await ux(!1,r,"phone"),new hL(await hD(r.auth,i,e6(n)),e=>uR(r,e))}async function hP(e,i,n){let r=e6(e);return tM(r.auth.app)?Promise.reject(lj(r.auth)):new hL(await hD(r.auth,i,e6(n)),e=>uN(r,e))}async function hD(e,i,n){var r,o,a;let l=await n.verify();try{let c;if(lz("string"==typeof l,e,"argument-error"),lz(n.type===hx,e,"argument-error"),c="string"==typeof i?{phoneNumber:i}:i,"session"in c){let i=c.session;if("phoneNumber"in c)return lz("enroll"===i.type,e,"internal-error"),(await (o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:l}},l0(e,"POST","/v2/accounts/mfaEnrollment:start",lZ(e,o)))).phoneSessionInfo.sessionInfo;{lz("signin"===i.type,e,"internal-error");let n=(null===(r=c.multiFactorHint)||void 0===r?void 0:r.uid)||c.multiFactorUid;return lz(n,e,"missing-multi-factor-info"),(await (a={mfaPendingCredential:i.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:l}},l0(e,"POST","/v2/accounts/mfaSignIn:start",lZ(e,a)))).phoneResponseInfo.sessionInfo}}{let{sessionInfo:i}=await ui(e,{phoneNumber:c.phoneNumber,recaptchaToken:l});return i}}finally{n._reset()}}async function hM(e,i){let n=e6(e);if(tM(n.auth.app))return Promise.reject(lj(n.auth));await uC(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.providerId=hB.PROVIDER_ID,this.auth=e6(e)}verifyPhoneNumber(e,i){return hD(this.auth,e,e6(i))}static credential(e,i){return ua._fromVerification(e,i)}static credentialFromResult(e){return hB.credentialFromTaggedObject(e)}static credentialFromError(e){return hB.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:i,temporaryProof:n}=e;return i&&n?ua._fromTokenResponse(i,n):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(e,i){return i?ck(i):(lz(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hB.PROVIDER_ID="phone",hB.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU extends cX{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ue(e,this._buildIdpRequest())}_linkToIdToken(e,i){return ue(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return ue(e,this._buildIdpRequest())}_buildIdpRequest(e){let i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function hj(e){return uO(e.auth,new hU(e),e.bypassAuthState)}function hV(e){let{auth:i,user:n}=e;return lz(n,i,"internal-error"),uA(n,new hU(e),e.bypassAuthState)}async function hH(e){let{auth:i,user:n}=e;return lz(n,i,"internal-error"),uC(n,new hU(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,i,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:i,sessionId:n,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let c={auth:this.auth,requestUri:i,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hj;case"linkViaPopup":case"linkViaRedirect":return hH;case"reauthViaPopup":case"reauthViaRedirect":return hV;default:lB(this.auth,"internal-error")}}resolve(e){var i,n;i=this.pendingPromise,n="Pending promise was never set",i||lq(n),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var i,n;i=this.pendingPromise,n="Pending promise was never set",i||lq(n),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new lG(2e3,1e4);async function hK(e,i,n){if(tM(e.app))return Promise.reject(lF(e,"operation-not-supported-in-this-environment"));let r=e6(e);lV(e,i,uu);let o=hF(r,n);return new hG(r,"signInViaPopup",i,o).executeNotNull()}async function hW(e,i,n){let r=e6(e);if(tM(r.auth.app))return Promise.reject(lF(r.auth,"operation-not-supported-in-this-environment"));lV(r.auth,i,uu);let o=hF(r.auth,n);return new hG(r.auth,"reauthViaPopup",i,o,r).executeNotNull()}async function h$(e,i,n){let r=e6(e);lV(r.auth,i,uu);let o=hF(r.auth,n);return new hG(r.auth,"linkViaPopup",i,o,r).executeNotNull()}class hG extends hz{constructor(e,i,n,r,o){super(e,i,r,o),this.provider=n,this.authWindow=null,this.pollId=null,hG.currentPopupAction&&hG.currentPopupAction.cancel(),hG.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return lz(e,this.auth,"internal-error"),e}async onExecution(){var e,i;e=1===this.filter.length,i="Popup operations only handle one event",e||lq(i);let n=ha();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(lF(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(lF(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hG.currentPopupAction=null}pollUserCancellation(){let e=()=>{var i,n;if(null===(n=null===(i=this.authWindow)||void 0===i?void 0:i.window)||void 0===n?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lF(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hq.get())};e()}}hG.currentPopupAction=null;const hY=new Map;class hX extends hz{constructor(e,i,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,n),this.eventId=null}async execute(){let e=hY.get(this.auth._key());if(!e){try{let i=await hJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(i){e=()=>Promise.reject(i)}hY.set(this.auth._key(),e)}return this.bypassAuthState||hY.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hJ(e,i){let n=h1(i),r=h0(e);if(!await r._isAvailable())return!1;let o=await r._get(n)==="true";return await r._remove(n),o}async function hQ(e,i){return h0(e)._set(h1(i),"true")}function hZ(e,i){hY.set(e._key(),i)}function h0(e){return ck(e._redirectPersistence)}function h1(e){return cI("pendingRedirect",e.config.apiKey,e.name)}async function h2(e,i,n){if(tM(e.app))return Promise.reject(lj(e));let r=e6(e);lV(e,i,uu),await r._initializationPromise;let o=hF(r,n);return await hQ(o,r),o._openRedirect(r,i,"signInViaRedirect")}async function h4(e,i,n){let r=e6(e);if(lV(r.auth,i,uu),tM(r.auth.app))return Promise.reject(lj(r.auth));await r.auth._initializationPromise;let o=hF(r.auth,n);await hQ(o,r.auth);let a=await h9(r);return o._openRedirect(r.auth,i,"reauthViaRedirect",a)}async function h5(e,i,n){let r=e6(e);lV(r.auth,i,uu),await r.auth._initializationPromise;let o=hF(r.auth,n);await ux(!1,r,i.providerId),await hQ(o,r.auth);let a=await h9(r);return o._openRedirect(r.auth,i,"linkViaRedirect",a)}async function h6(e,i){return await e6(e)._initializationPromise,h3(e,i,!1)}async function h3(e,i,n=!1){if(tM(e.app))return Promise.reject(lj(e));let r=e6(e),o=hF(r,i),a=new hX(r,o,n),l=await a.execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,i)),l}async function h9(e){let i=ha(`${e.uid}:::`);return e._redirectEventId=i,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),i}class h8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(i=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return de(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var n;if(e.error&&!de(e)){let r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";i.onError(lF(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){let n=null===i.eventId||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(h7(e))}saveEventToCache(e){this.cachedEventUids.add(h7(e)),this.lastProcessedEventTime=Date.now()}}function h7(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function de({type:e,error:i}){return"unknown"===e&&(null==i?void 0:i.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dt(e,i={}){return l0(e,"GET","/v1/projects",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dn=/^https?/;async function dr(e){if(e.config.emulator)return;let{authorizedDomains:i}=await dt(e);for(let e of i)try{if(function(e){let i=lK(),{protocol:n,hostname:r}=new URL(i);if(e.startsWith("chrome-extension://")){let o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===i.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!dn.test(n))return!1;if(di.test(e))return r===e;let o=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}(e))return}catch(e){}lB(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new lG(3e4,6e4);function da(){let e=hc().___jsl;if(null==e?void 0:e.H){for(let i of Object.keys(e.H))if(e.H[i].r=e.H[i].r||[],e.H[i].L=e.H[i].L||[],e.H[i].r=[...e.H[i].L],e.CP)for(let i=0;i<e.CP.length;i++)e.CP[i]=null}}let dl=null;/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new lG(5e3,15e3),du={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function dd(e){let i=await (dl=dl||new Promise((i,n)=>{var r,o,a;function l(){da(),gapi.load("gapi.iframes",{callback:()=>{i(gapi.iframes.getContext())},ontimeout:()=>{da(),n(lF(e,"network-request-failed"))},timeout:ds.get()})}if(null===(o=null===(r=hc().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)i(gapi.iframes.getContext());else if(null===(a=hc().gapi)||void 0===a?void 0:a.load)l();else{let i=cz("iframefcb");return hc()[i]=()=>{gapi.load?l():n(lF(e,"network-request-failed"))},cH(`${cV.gapiScript}?onload=${i}`).catch(e=>n(e))}}).catch(e=>{throw dl=null,e})),n=hc().gapi;return lz(n,e,"internal-error"),i.open({where:document.body,url:function(e){let i=e.config;lz(i.authDomain,e,"auth-domain-config-required");let n=i.emulator?lY(i,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:i.apiKey,appName:e.name,v:tV},o=dh.get(e.config.apiHost);o&&(r.eid=o);let a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${eZ(r).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:du,dontclear:!0},i=>new Promise(async(n,r)=>{await i.restyle({setHideOnLeave:!1});let o=lF(e,"network-request-failed"),a=hc().setTimeout(()=>{r(o)},dc.get());function l(){hc().clearTimeout(a),n(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const dg=encodeURIComponent("fac");async function dm(e,i,n,r,o,a){lz(e.config.authDomain,e,"auth-domain-config-required"),lz(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tV,eventId:o};if(i instanceof uu)for(let[n,r]of(i.setDefaultLanguage(e.languageCode),l.providerId=i.providerId||"",!function(e){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0}(i.getCustomParameters())&&(l.customParameters=JSON.stringify(i.getCustomParameters())),Object.entries(a||{})))l[n]=r;if(i instanceof uh){let e=i.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}for(let i of(e.tenantId&&(l.tid=e.tenantId),Object.keys(l)))void 0===l[i]&&delete l[i];let c=await e._getAppCheckToken(),u=c?`#${dg}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?lY(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${eZ(l).slice(1)}${u}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="webStorageSupport",db=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ho,this._completeRedirectFn=h3,this._overrideRedirectResult=hZ}async _openPopup(e,i,n,r){var o,a,l;a=null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,l="_initialize() not called before _openPopup()",a||lq(l);let c=await dm(e,i,n,lK(),r);return function(e,i,n,r=500,o=600){let a=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},df),{width:r.toString(),height:o.toString(),top:a,left:l}),h=ej().toLowerCase();n&&(c=cx(h)?"_blank":n),cT(h)&&(i=i||"http://localhost",u.scrollbars="yes");let d=Object.entries(u).reduce((e,[i,n])=>`${e}${i}=${n},`,"");if(function(e=ej()){var i;return cN(e)&&!!(null===(i=window.navigator)||void 0===i?void 0:i.standalone)}(h)&&"_self"!==c)return function(e,i){let n=document.createElement("a");n.href=e,n.target=i;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(i||"",c),new dp(null);let f=window.open(i||"",c,d);lz(f,e,"popup-blocked");try{f.focus()}catch(e){}return new dp(f)}(e,c,ha())}async _openRedirect(e,i,n,r){var o;return await this._originValidation(e),o=await dm(e,i,n,lK(),r),hc().location.href=o,new Promise(()=>{})}_initialize(e){let i=e._key();if(this.eventManagers[i]){var n;let{manager:e,promise:r}=this.eventManagers[i];return e?Promise.resolve(e):(n="If manager is not set, promise should be",r||lq(n),r)}let r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){let i=await dd(e),n=new h8(e);return i.register("authEvent",i=>(lz(null==i?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=i,n}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(dv,{type:dv},n=>{var r;let o=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[dv];void 0!==o&&i(!!o),lB(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=dr(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return cP()||cC()||cN()}};class dy{constructor(e){this.factorId=e}_process(e,i,n){switch(i.type){case"enroll":return this._finalizeEnroll(e,i.credential,n);case"signin":return this._finalizeSignIn(e,i.credential);default:return lq("unexpected MultiFactorSessionType")}}}class dw extends dy{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new dw(e)}_finalizeEnroll(e,i,n){return l0(e,"POST","/v2/accounts/mfaEnrollment:finalize",lZ(e,{idToken:i,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,i){return l0(e,"POST","/v2/accounts/mfaSignIn:finalize",lZ(e,{mfaPendingCredential:i,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class dk{constructor(){}static assertion(e){return dw._fromCredential(e)}}dk.FACTOR_ID="phone";class dE extends dy{constructor(e,i,n){super("totp"),this.otp=e,this.enrollmentId=i,this.secret=n}static _fromSecret(e,i){return new dE(i,void 0,e)}static _fromEnrollmentId(e,i){return new dE(i,e)}async _finalizeEnroll(e,i,n){return lz(void 0!==this.secret,e,"argument-error"),l0(e,"POST","/v2/accounts/mfaEnrollment:finalize",lZ(e,{idToken:i,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,i){lz(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let n={verificationCode:this.otp};return l0(e,"POST","/v2/accounts/mfaSignIn:finalize",lZ(e,{mfaPendingCredential:i,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n}))}}class dI{constructor(e,i,n,r,o,a,l){this.sessionInfo=a,this.auth=l,this.secretKey=e,this.hashingAlgorithm=i,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=o}static _fromStartTotpMfaEnrollmentResponse(e,i){return new dI(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,i)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,i){var n;let r=!1;return(d_(e)||d_(i))&&(r=!0),r&&(d_(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),d_(i)&&(i=this.auth.name)),`otpauth://totp/${i}:${e}?secret=${this.secretKey}&issuer=${i}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function d_(e){return void 0===e||(null==e?void 0:e.length)===0}var dS="@firebase/auth",dT="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let i=this.auth.onIdTokenChanged(i=>{e((null==i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){lz(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const dx=eF("authIdTokenMaxAge")||300;let dA=null;const dO=e=>async i=>{let n=i&&await i.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dx)return;let o=null==n?void 0:n.token;dA!==o&&(dA=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};cV={loadJS:e=>new Promise((i,n)=>{var r,o;let a=document.createElement("script");a.setAttribute("src",e),a.onload=i,a.onerror=e=>{let i=lF("internal-error");i.customData=e,n(i)},a.type="text/javascript",a.charset="UTF-8",(null!==(o=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==o?o:document).appendChild(a)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},b="Browser",tR(new e3("auth",(e,{options:i})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;lz(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});let c=new cU(n,r,o,{apiKey:a,authDomain:l,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cD(b)});return function(e,i){let n=(null==i?void 0:i.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ck);(null==i?void 0:i.errorMap)&&e._updateErrorMap(i.errorMap),e._initializeWithPersistence(r,null==i?void 0:i.popupRedirectResolver)}(c,i),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,n)=>{e.getProvider("auth-internal").initialize()})),tR(new e3("auth-internal",e=>new dC(e6(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),t$(dS,dT,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(b)),t$(dS,dT,"esm2017");const dL=tH({apiKey:"AIzaSyB7W58eZyV93WtK_yjfP8ye2BQxCSk3yBc",authDomain:"sumupp-30327.firebaseapp.com",projectId:"sumupp-30327",storageBucket:"sumupp-30327.appspot.com",messagingSenderId:"698087444830",appId:"1:698087444830:web:2bf2ad3fb0a87a7e9c7fcf",measurementId:"G-ENJR4HFF43"}),dR=function(e=tq()){let i=tN(e,"auth");if(i.isInitialized())return i.getImmediate();let n=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,i){let n=tN(e,"auth");if(n.isInitialized()){let e=n.getImmediate();if(eJ(n.getOptions(),null!=i?i:{}))return e;lB(e,"already-initialized")}return n.initialize({options:i})}(e,{popupRedirectResolver:db,persistence:[hk,hr,ho]}),r=eF("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){var o,a;let i=dO(e.toString());o=()=>i(n.currentUser),e6(n).beforeAuthStateChanged(i,o),a=e=>i(e),e6(n).onIdTokenChanged(a,void 0,void 0)}}let l=eD("auth");return l&&c$(n,`http://${l}`),n}(dL),dN=function(e,i){let n=tN("object"==typeof e?e:tq(),"firestore").getImmediate({identifier:"string"==typeof e?e:"(default)"});if(!n._initialized){let e=eM("firestore");e&&function(e,i,n,r={}){var o;let a=(e=aU(e,aV))._getSettings(),l=`${i}:${n}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&iJ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let i,n;if("string"==typeof r.mockUserToken)i=r.mockUserToken,n=iK.MOCK_USER;else{i=/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,i){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=i||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ex(JSON.stringify({alg:"none",type:"JWT"})),ex(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);let a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new i1(i0.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new iK(a)}e._authCredentials=new i6(new i4(i,n))}}(n,...e)}return n}(dL);function dP(e){return e.docs?e.docs.map(e=>dD(e)):dD(e)}function dD(e){return{id:e.id,...e.data()}}async function dM(e,i){try{i.created=new le("serverTimestamp"),i.author=dR.currentUser.uid;let n=await function(e,i){var n;let r=aU(e.firestore,aG),o=aW(e),a=(n=e.converter)?n.toFirestore(i):i;return lA(r,[(function(e,i,n,r,o,a={}){let l,c;let u=e.Fu(a.merge||a.mergeFields?2:0,i,n,o);ls("Data must be an object, but it was:",u,r);let h=lr(r,u);if(a.merge)l=new nT(u.fieldMask),c=u.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let o=la(i,r,n);if(!u.contains(o))throw new i1(i0.INVALID_ARGUMENT,`Field '${o}' is specified in your field mask but missing from your input data.`);lh(e,o)||e.push(o)}l=new nT(e),c=u.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=u.fieldTransforms;return new a2(new nZ(h),l,c)})(a9(e.firestore),"addDoc",o._key,a,null!==e.converter,{}).toMutation(o._key,rY.exists(!1))]).then(()=>o)}(aK(dN,e),i);return console.log(`Document successfully added to ${e} :`,i),n}catch(i){throw console.error(`Error adding document to ${e}: `,i),Error("Failed to add new document!")}}async function dB(e,i){try{let n=await dV(e,i),r=await /**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){e=aU(e,az);let i=aU(e.firestore,aG);return(function(e,i,n={}){let r=new i2;return e.asyncQueue.enqueueAndForget(async()=>(function(e,i,n,r,o){let a=new aT({next:a=>{i.enqueueAndForget(()=>s1(e,l));let c=a.docs.has(n);!c&&a.fromCache?o.reject(new i1(i0.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?o.reject(new i1(i0.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(a)},error:e=>o.reject(e)}),l=new s6(new rf(n.path),a,{includeMetadataChanges:!0,ra:!0});return s0(e,l)})(await aR(e),e.asyncQueue,i,n,r)),r.promise})(aY(i),e._key).then(n=>(function(e,i,n){let r=n.docs.get(i._key),o=new lx(e);return new lS(e,o,i._key,r,new l_(n.hasPendingWrites,n.fromCache),i.converter)})(i,e,n))}(n);return dP(r)}catch(e){throw console.error("Error reading document: ",e),Error("Failed to read document!")}}async function dF(e,i,n){try{let r=function(e,i,...n){let r=[];for(let o of(i instanceof lg&&r.push(i),function(e){let i=e.filter(e=>e instanceof ly).length,n=e.filter(e=>e instanceof lv).length;if(i>1||i>0&&n>0)throw new i1(i0.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r=r.concat(n)),r))e=o._apply(e);return e}(aK(dN,e),i),o=await function(e){e=aU(e,aH);let i=aU(e.firestore,aG),n=aY(i),r=new lx(i);return(/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new i1(i0.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),(function(e,i,n={}){let r=new i2;return e.asyncQueue.enqueueAndForget(async()=>(function(e,i,n,r,o){let a=new s6(n,new aT({next:n=>{i.enqueueAndForget(()=>s1(e,a)),n.fromCache&&"server"===r.source?o.reject(new i1(i0.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(n)},error:e=>o.reject(e)}),{includeMetadataChanges:!0,ra:!0});return s0(e,a)})(await aR(e),e.asyncQueue,i,n,r)),r.promise})(n,e._query).then(n=>new lC(i,r,e,n)))}(r);if(n)return o.docs.map(e=>e.ref);return dP(o)}catch(e){throw console.error("Error reading documents: ",e),Error("Failed to read documents!")}}async function dU(e,i,n){try{let r=await dV(e,i);for(let e in n)if(/add|remove/.test(e)){let i=e.split("-")[1];e.includes("add")?n[i]=function(...e){return new lt("arrayUnion",e)}(n[e]):n[i]=function(...e){return new li("arrayRemove",e)}(n[e]),delete n[e]}await function(e,i,n,...r){e=aU(e,az);let o=aU(e.firestore,aG),a=a9(o);return lA(o,[("string"==typeof(i=e6(i))||i instanceof aQ?function(e,i,n,r,o,a){let l=e.Fu(1,i,n),c=[la(i,r,n)],u=[o];if(a.length%2!=0)throw new i1(i0.INVALID_ARGUMENT,`Function ${i}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)c.push(la(i,a[e])),u.push(a[e+1]);let h=[],d=nZ.empty();for(let e=c.length-1;e>=0;--e)if(!lh(h,c[e])){let i=c[e],n=u[e];n=e6(n);let r=l.Su(i);if(n instanceof a8)h.push(i);else{let e=ln(n,r);null!=e&&(h.push(i),d.set(i,e))}}return new a4(d,new nT(h),l.fieldTransforms)}(a,"updateDoc",e._key,i,void 0,r):function(e,i,n,r){let o=e.Fu(1,i,n);ls("Data must be an object, but it was:",o,r);let a=[],l=nZ.empty();return ny(r,(e,r)=>{let c=lc(i,e,n);r=e6(r);let u=o.Su(c);if(r instanceof a8)a.push(c);else{let e=ln(r,u);null!=e&&(a.push(c),l.set(c,e))}}),new a4(l,new nT(a),o.fieldTransforms)}(a,"updateDoc",e._key,i)).toMutation(e._key,rY.exists(!0))])}(r,n),console.log("Document successfully updated!")}catch(e){throw console.error("Error updating document: ",e),Error("Failed to update document!")}}async function dj(e,i){try{var n;await (n=aW(dN,e,i),lA(aU(n.firestore,aG),[new r3(n._key,rY.none())])),console.log("Document successfully deleted!")}catch(e){throw console.error("Error deleting document: ",e),Error("Failed to delete document!")}}async function dV(e,i){return"string"==typeof i?aW(dN,e,i):i}const dH="collections";async function dz({name:e,description:i}){let n={name:e,description:i,notes:[],users:[dR.currentUser.uid]};return await dM(dH,n)}async function dq(e){return await dB(dH,e)}async function dK(e){return await dF(dH,lb("users","array-contains",e))}async function dW(e,i){return await dU(dH,e,i)}async function d$(e){return await dj(dH,e)}const dG="sources";async function dY(e){return await dM(dG,{link:e})}async function dX(e){return await dB(dG,e)}async function dJ(){}async function dQ(e,i){return await dU(dG,e,i)}async function dZ(e){return(await dF(dG,lb("link","==",e),"ref"))[0]}const d0="notes";async function d1({data:e,source:i,collectionId:n}){let r;let o={data:e,source:r=await dZ(i)||await dY(i)},a=await dM(d0,o);await dQ(r,{"add-notes":a}),await dW(n,{"add-notes":a})}async function d2(e){return await dB(d0,e)}async function d4(){}async function d5(e,i){let n=await d3(e),r=await d2(e);await dW(i,{"remove-notes":n}),await dQ(r.source,{"remove-notes":n}),await dj(d0,r.id)}async function d6(e){try{let i=(await dq(e)).notes;if(0===i.length)return[];return await Promise.all(i.map(async e=>await dB(d0,e)))}catch(e){console.error("Error fetching collection notes: ",e)}}async function d3(e){return await dV(d0,e)}const d9="@firebase/installations",d8="0.6.7",d7=`w:${d8}`,fe="FIS_v2",ft=new eG("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fi(e){return e instanceof e$&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function fr(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function fo(e,i){let n=(await i.json()).error;return ft.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fs({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function fa(e){let i=await e();return i.status>=500&&i.status<600?e():i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl({appConfig:e,heartbeatServiceProvider:i},{fid:n}){let r=fn(e),o=fs(e),a=i.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}let l={method:"POST",headers:o,body:JSON.stringify({fid:n,authVersion:fe,appId:e.appId,sdkVersion:d7})},c=await fa(()=>fetch(r,l));if(c.ok){let e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:fr(e.authToken)}}throw await fo("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(e){return new Promise(i=>{setTimeout(i,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=/^[cdef][\w-]{21}$/;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map;function ff(e,i){let n=fh(e);fp(n,i),function(e,i){let n=(!fg&&"BroadcastChannel"in self&&((fg=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{fp(e.data.key,e.data.fid)}),fg);n&&n.postMessage({key:e,fid:i}),0===fd.size&&fg&&(fg.close(),fg=null)}(n,i)}function fp(e,i){let n=fd.get(e);if(n)for(let e of n)e(i)}let fg=null;const fm="firebase-installations-store";let fv=null;function fb(){return fv||(fv=tg("firebase-installations-database",1,{upgrade:(e,i)=>{0===i&&e.createObjectStore(fm)}})),fv}async function fy(e,i){let n=fh(e),r=(await fb()).transaction(fm,"readwrite"),o=r.objectStore(fm),a=await o.get(n);return await o.put(i,n),await r.done,a&&a.fid===i.fid||ff(e,i.fid),i}async function fw(e){let i=fh(e),n=(await fb()).transaction(fm,"readwrite");await n.objectStore(fm).delete(i),await n.done}async function fk(e,i){let n=fh(e),r=(await fb()).transaction(fm,"readwrite"),o=r.objectStore(fm),a=await o.get(n),l=i(a);return void 0===l?await o.delete(n):await o.put(l,n),await r.done,l&&(!a||a.fid!==l.fid)&&ff(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(e){let i;let n=await fk(e.appConfig,n=>{let r=function(e,i){if(0===i.registrationStatus){if(!navigator.onLine)return{installationEntry:i,registrationPromise:Promise.reject(ft.create("app-offline"))};let n={fid:i.fid,registrationStatus:1,registrationTime:Date.now()},r=fI(e,n);return{installationEntry:n,registrationPromise:r}}return 1===i.registrationStatus?{installationEntry:i,registrationPromise:f_(e)}:{installationEntry:i}}(e,fT(n||{fid:function(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let i=btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return fu.test(i)?i:""}catch(e){return""}}(),registrationStatus:0}));return i=r.registrationPromise,r.installationEntry});return""===n.fid?{installationEntry:await i}:{installationEntry:n,registrationPromise:i}}async function fI(e,i){try{let n=await fl(e,i);return fy(e.appConfig,n)}catch(n){throw fi(n)&&409===n.customData.serverCode?await fw(e.appConfig):await fy(e.appConfig,{fid:i.fid,registrationStatus:0}),n}}async function f_(e){let i=await fS(e.appConfig);for(;1===i.registrationStatus;)await fc(100),i=await fS(e.appConfig);if(0===i.registrationStatus){let{installationEntry:i,registrationPromise:n}=await fE(e);return n||i}return i}function fS(e){return fk(e,e=>{if(!e)throw ft.create("installation-not-found");return fT(e)})}function fT(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC({appConfig:e,heartbeatServiceProvider:i},n){let r=function(e,{fid:i}){return`${fn(e)}/${i}/authTokens:generate`}(e,n),o=function(e,{refreshToken:i}){let n=fs(e);return n.append("Authorization",`${fe} ${i}`),n}(e,n),a=i.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}let l={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:d7,appId:e.appId}})},c=await fa(()=>fetch(r,l));if(c.ok)return fr(await c.json());throw await fo("Generate Auth Token",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(e,i=!1){let n;let r=await fk(e.appConfig,r=>{var o;if(!fR(r))throw ft.create("not-registered");let a=r.authToken;if(!i&&2===(o=a).requestStatus&&!function(e){let i=Date.now();return i<e.creationTime||e.creationTime+e.expiresIn<i+36e5}(o))return r;if(1===a.requestStatus)return n=fA(e,i),r;{if(!navigator.onLine)throw ft.create("app-offline");let i=function(e){let i={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:i})}(r);return n=fL(e,i),i}});return n?await n:r.authToken}async function fA(e,i){let n=await fO(e.appConfig);for(;1===n.authToken.requestStatus;)await fc(100),n=await fO(e.appConfig);let r=n.authToken;return 0===r.requestStatus?fx(e,i):r}function fO(e){return fk(e,e=>{var i;if(!fR(e))throw ft.create("not-registered");return 1===(i=e.authToken).requestStatus&&i.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fL(e,i){try{let n=await fC(e,i),r=Object.assign(Object.assign({},i),{authToken:n});return await fy(e.appConfig,r),n}catch(n){if(fi(n)&&(401===n.customData.serverCode||404===n.customData.serverCode))await fw(e.appConfig);else{let n=Object.assign(Object.assign({},i),{authToken:{requestStatus:0}});await fy(e.appConfig,n)}throw n}}function fR(e){return void 0!==e&&2===e.registrationStatus}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(e){let{installationEntry:i,registrationPromise:n}=await fE(e);return n?n.catch(console.error):fx(e).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(e,i=!1){return await fD(e),(await fx(e,i)).token}async function fD(e){let{registrationPromise:i}=await fE(e);i&&await i}function fM(e){return ft.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="installations";tR(new e3(fB,e=>{let i=e.getProvider("app").getImmediate(),n=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw fM("App Configuration");if(!e.name)throw fM("App Name");for(let i of["projectId","apiKey","appId"])if(!e.options[i])throw fM(i);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(i),r=tN(i,"heartbeat");return{app:i,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},"PUBLIC")),tR(new e3("installations-internal",e=>{let i=tN(e.getProvider("app").getImmediate(),fB).getImmediate();return{getId:()=>fN(i),getToken:e=>fP(i,e)}},"PRIVATE")),t$(d9,d8),t$(d9,d8,"esm2017");const fF="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fU="google.c.a.c_id";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(y={})[y.DATA_MESSAGE=1]="DATA_MESSAGE",y[y.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(w=er={}).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="fcm_token_details_db",fH="fcm_token_object_Store";async function fz(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(e=>e.name).includes(fV))return null;let i=null;return(await tg(fV,5,{upgrade:async(n,r,o,a)=>{var l;if(r<2||!n.objectStoreNames.contains(fH))return;let c=a.objectStore(fH),u=await c.index("fcmSenderId").get(e);if(await c.clear(),u){if(2===r){if(!u.auth||!u.p256dh||!u.endpoint)return;i={token:u.fcmToken,createTime:null!==(l=u.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:"string"==typeof u.vapidKey?u.vapidKey:fj(u.vapidKey)}}}else 3===r?i={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:fj(u.auth),p256dh:fj(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:fj(u.vapidKey)}}:4===r&&(i={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:fj(u.auth),p256dh:fj(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:fj(u.vapidKey)}})}}})).close(),await tm(fV),await tm("fcm_vapid_details_db"),await tm("undefined"),!function(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:i}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof i.auth&&i.auth.length>0&&"string"==typeof i.p256dh&&i.p256dh.length>0&&"string"==typeof i.endpoint&&i.endpoint.length>0&&"string"==typeof i.swScope&&i.swScope.length>0&&"string"==typeof i.vapidKey&&i.vapidKey.length>0}(i)?null:i}const fq="firebase-messaging-store";let fK=null;function fW(){return fK||(fK=tg("firebase-messaging-database",1,{upgrade:(e,i)=>{0===i&&e.createObjectStore(fq)}})),fK}async function f$(e){let i=function({appConfig:e}){return e.appId}(e),n=await fW(),r=await n.transaction(fq).objectStore(fq).get(i);if(r)return r;{let i=await fz(e.appConfig.senderId);if(i)return await fG(e,i),i}}async function fG(e,i){let n=function({appConfig:e}){return e.appId}(e),r=(await fW()).transaction(fq,"readwrite");return await r.objectStore(fq).put(i,n),await r.done,i}const fY=new eG("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fX(e,i){let n;let r={method:"POST",headers:await f0(e),body:JSON.stringify(f1(i))};try{let i=await fetch(fZ(e.appConfig),r);n=await i.json()}catch(e){throw fY.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(n.error){let e=n.error.message;throw fY.create("token-subscribe-failed",{errorInfo:e})}if(!n.token)throw fY.create("token-subscribe-no-token");return n.token}async function fJ(e,i){let n;let r={method:"PATCH",headers:await f0(e),body:JSON.stringify(f1(i.subscriptionOptions))};try{let o=await fetch(`${fZ(e.appConfig)}/${i.token}`,r);n=await o.json()}catch(e){throw fY.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(n.error){let e=n.error.message;throw fY.create("token-update-failed",{errorInfo:e})}if(!n.token)throw fY.create("token-update-no-token");return n.token}async function fQ(e,i){let n=await f0(e);try{let r=await fetch(`${fZ(e.appConfig)}/${i}`,{method:"DELETE",headers:n}),o=await r.json();if(o.error){let e=o.error.message;throw fY.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw fY.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function fZ({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function f0({appConfig:e,installations:i}){let n=await i.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function f1({p256dh:e,auth:i,endpoint:n,vapidKey:r}){let o={web:{endpoint:n,auth:i,p256dh:e}};return r!==fF&&(o.web.applicationPubKey=r),o}async function f2(e){let i=await f6(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:i.endpoint,auth:fj(i.getKey("auth")),p256dh:fj(i.getKey("p256dh"))},r=await f$(e.firebaseDependencies);if(!r)return f5(e.firebaseDependencies,n);if(function(e,i){let n=i.vapidKey===e.vapidKey,r=i.endpoint===e.endpoint,o=i.auth===e.auth,a=i.p256dh===e.p256dh;return n&&r&&o&&a}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?f4(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await fQ(e.firebaseDependencies,r.token)}catch(e){console.warn(e)}return f5(e.firebaseDependencies,n)}async function f4(e,i){try{let n=await fJ(e.firebaseDependencies,i),r=Object.assign(Object.assign({},i),{token:n,createTime:Date.now()});return await fG(e.firebaseDependencies,r),n}catch(e){throw e}}async function f5(e,i){let n={token:await fX(e,i),createTime:Date.now(),subscriptionOptions:i};return await fG(e,n),n.token}async function f6(e,i){return await e.pushManager.getSubscription()||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let i="=".repeat((4-e.length%4)%4),n=atob((e+i).replace(/\-/g,"+").replace(/_/g,"/")),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r}(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(e){let i={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,i){if(!i.notification)return;e.notification={};let n=i.notification.title;n&&(e.notification.title=n);let r=i.notification.body;r&&(e.notification.body=r);let o=i.notification.image;o&&(e.notification.image=o);let a=i.notification.icon;a&&(e.notification.icon=a)}(i,e),e.data&&(i.data=e.data),function(e,i){var n,r,o,a,l;if(!i.fcmOptions&&!(null===(n=i.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};let c=null!==(o=null===(r=i.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(a=i.notification)||void 0===a?void 0:a.click_action;c&&(e.fcmOptions.link=c);let u=null===(l=i.fcmOptions)||void 0===l?void 0:l.analytics_label;u&&(e.fcmOptions.analyticsLabel=u)}(i,e),i}function f9(e,i){let n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<i.length&&n.push(i.charAt(r));return n.join("")}function f8(e){return fY.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */f9("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),f9("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,i,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw f8("App Configuration Object");if(!e.name)throw f8("App Name");let{options:i}=e;for(let e of["projectId","apiKey","appId","messagingSenderId"])if(!i[e])throw f8(e);return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:i,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pe(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(e){throw fY.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pt(e,i){if(i||e.swRegistration||await pe(e),i||!e.swRegistration){if(!(i instanceof ServiceWorkerRegistration))throw fY.create("invalid-sw-registration");e.swRegistration=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(e,i){i?e.vapidKey=i:e.vapidKey||(e.vapidKey=fF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pn(e,i){if(!navigator)throw fY.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw fY.create("permission-blocked");return await pi(e,null==i?void 0:i.vapidKey),await pt(e,null==i?void 0:i.serviceWorkerRegistration),f2(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pr(e,i,n){let r=function(e){switch(e){case er.NOTIFICATION_CLICKED:return"notification_open";case er.PUSH_RECEIVED:return"notification_foreground";default:throw Error()}}(i);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[fU],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(e,i){let n=i.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===er.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(f3(n)):e.onMessageHandler.next(f3(n)));let r=n.data;"object"==typeof r&&r&&fU in r&&"1"===r["google.c.a.e"]&&await pr(e,n.messageType,r)}const ps="@firebase/messaging",pa="0.12.9";tR(new e3("messaging",e=>{let i=new f7(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>po(i,e)),i},"PUBLIC")),tR(new e3("messaging-internal",e=>{let i=e.getProvider("messaging").getImmediate();return{getToken:e=>pn(i,e)}},"PRIVATE")),t$(ps,pa),t$(ps,pa,"esm2017");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,i){this._delegate=e,this.firebase=i,tO(e,new e3("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tW(this._delegate)))}_getService(e,i=tS){var n;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:i})}_removeServiceInstance(e,i=tS){this._delegate.container.getProvider(e).clearInstance(i)}_addComponent(e){tO(this._delegate,e)}_addOrOverwriteComponent(e){tL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pc=new eG("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pu=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){let i=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let i={},n={__esModule:!0,initializeApp:function(r,o={}){let a=tH(r,o);if(eX(i,a.name))return i[a.name];let l=new e(a,n);return i[a.name]=l,l},app:r,registerVersion:t$,setLogLevel:tY,onLog:tG,apps:null,SDK_VERSION:tV,INTERNAL:{registerComponent:function(i){let o=i.name,a=o.replace("-compat","");if(tR(i)&&"PUBLIC"===i.type){let l=(e=r())=>{if("function"!=typeof e[a])throw pc.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==i.serviceProps&&eO(l,i.serviceProps),n[a]=l,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,i.multipleInstances?e:[])}}return"PUBLIC"===i.type?n[a]:null},removeApp:function(e){delete i[e]},useAsService:function(e,i){return"serverAuth"===i?null:i},modularAPIs:eu}};function r(e){if(!eX(i,e=e||tS))throw pc.create("no-app",{appName:e});return i[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(i).map(e=>i[e])}}),r.App=e,n}(pl);return i.INTERNAL=Object.assign(Object.assign({},i.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){eO(i,e)},createSubscribe:e2,ErrorFactory:eG,deepExtend:eO}),i}(),ph=new to("@firebase/app-compat");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(eH()&&void 0!==self.firebase){ph.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ph.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return window}async function pf(e,i,n){var r,o,a;let{BuildInfo:l}=pd();o=i.sessionId,a="AuthEvent did not contain a session ID",o||lq(a);let c=await pm(i.sessionId),u={};return cN()?u.ibi=l.packageName:cO()?u.apn=l.packageName:lB(e,"operation-not-supported-in-this-environment"),l.displayName&&(u.appDisplayName=l.displayName),u.sessionId=c,dm(e,n,i.type,void 0,null!==(r=i.eventId)&&void 0!==r?r:void 0,u)}async function pp(e){let{BuildInfo:i}=pd(),n={};cN()?n.iosBundleId=i.packageName:cO()?n.androidPackageName=i.packageName:lB(e,"operation-not-supported-in-this-environment"),await dt(e,n)}async function pg(e,i,n){let{cordova:r}=pd(),o=()=>{};try{await new Promise((a,l)=>{let c=null;function u(){var e;a();let i=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof i&&i(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function h(){c||(c=window.setTimeout(()=>{l(lF(e,"redirect-cancelled-by-user"))},2e3))}function d(){(null==document?void 0:document.visibilityState)==="visible"&&h()}i.addPassiveListener(u),document.addEventListener("resume",h,!1),cO()&&document.addEventListener("visibilitychange",d,!1),o=()=>{i.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",d,!1),c&&window.clearTimeout(c)}})}finally{o()}}async function pm(e){let i=function(e){var i,n;if(i=/[0-9a-zA-Z]+/.test(e),n="Can only convert alpha-numeric strings",i||lq(n),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);let r=new Uint8Array(new ArrayBuffer(e.length));for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",i))).map(e=>e.toString(16).padStart(2,"0")).join("")}t$("@firebase/app-compat","0.2.35",void 0),pu.registerVersion("firebase","10.12.2","app-compat");class pv extends h8{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(i=>i(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function pb(e){let i=await ck(hr)._get(py(e));return i&&await ck(hr)._remove(py(e)),i}function py(e){return cI("authEvent",e.config.apiKey,e.name)}function pw(e){if(!(null==e?void 0:e.includes("?")))return{};let[i,...n]=e.split("?");return e0(n.join("?"))}const pk=class{constructor(){this._redirectPersistence=ho,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=h3,this._overrideRedirectResult=hZ}async _initialize(e){let i=e._key(),n=this.eventManagers.get(i);return n||(n=new pv(e),this.eventManagers.set(i,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){lB(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,i,n,r){!function(e){var i,n,r,o,a,l,c,u,h,d;let f=pd();lz("function"==typeof(null===(i=null==f?void 0:f.universalLinks)||void 0===i?void 0:i.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),lz(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),lz("function"==typeof(null===(a=null===(o=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===o?void 0:o.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lz("function"==typeof(null===(u=null===(c=null===(l=null==f?void 0:f.cordova)||void 0===l?void 0:l.plugins)||void 0===c?void 0:c.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lz("function"==typeof(null===(d=null===(h=null==f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);let o=await this._initialize(e);await o.initialized(),o.resetRedirect(),hY.clear(),await this._originValidation(e);let a=function(e,i,n=null){return{type:i,eventId:n,urlResponse:null,sessionId:function(){let e=[],i="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){let n=Math.floor(Math.random()*i.length);e.push(i.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:lF(e,"no-auth-event")}}(e,n,r);await ck(hr)._set(py(e),a);let l=await pf(e,a,i);return pg(e,o,await function(e){let{cordova:i}=pd();return new Promise(n=>{i.plugins.browsertab.isAvailable(r=>{let o=null;r?i.plugins.browsertab.openUrl(e):o=i.InAppBrowser.open(e,!function(e=ej()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_system":"_blank","location=yes"),n(o)})})}(l))}_isIframeWebStorageSupported(e,i){throw Error("Method not implemented.")}_originValidation(e){let i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=pp(e)),this.originValidationPromises[i]}attachCallbackListeners(e,i){let{universalLinks:n,handleOpenURL:r,BuildInfo:o}=pd(),a=setTimeout(async()=>{await pb(e),i.onEvent(pE())},500),l=async n=>{clearTimeout(a);let r=await pb(e),o=null;r&&(null==n?void 0:n.url)&&(o=function(e,i){var n,r;let o=function(e){let i=pw(e),n=i.link?decodeURIComponent(i.link):void 0,r=pw(n).link,o=i.deep_link_id?decodeURIComponent(i.deep_link_id):void 0;return pw(o).link||o||r||n||e}(i);if(o.includes("/__/auth/callback")){let i=pw(o),a=i.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(i.firebaseError)):null,l=null===(r=null===(n=null==a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=l?lF(l):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:o,postBody:null}}return null}(r,n.url)),i.onEvent(o||pE())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,l);let c=`${o.packageName.toLowerCase()}://`;pd().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&l({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}}}};function pE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lF("no-auth-event")}}function pI(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function p_(e=ej()){return!!(("file:"===pI()||"ionic:"===pI()||"capacitor:"===pI())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function pS(){try{let e=self.localStorage,i=ha();if(e){if(e.setItem(i,"1"),e.removeItem(i),function(e=ej()){return eK()&&(null==document?void 0:document.documentMode)===11||function(e=ej()){return/Edge\/\d+/.test(e)}(e)}())return eW();return!0}}catch(e){return pT()&&eW()}return!1}function pT(){return void 0!==eo&&"WorkerGlobalScope"in eo&&"importScripts"in eo}function pC(){return("http:"===pI()||"https:"===pI()||ez()||p_())&&!(eq()||eV())&&pS()&&!pT()}function px(){return p_()&&"undefined"!=typeof document}async function pA(){return!!px()&&new Promise(e=>{let i=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(i),e(!0)})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={LOCAL:"local",NONE:"none",SESSION:"session"},pL="persistence";async function pR(e){await e._initializationPromise;let i=pN(),n=cI(pL,e.config.apiKey,e.name);i&&i.setItem(n,e._getPersistence())}function pN(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}class pP{constructor(){this.browserResolver=ck(db),this.cordovaResolver=ck(pk),this.underlyingResolver=null,this._redirectPersistence=ho,this._completeRedirectFn=h3,this._overrideRedirectResult=hZ}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,i,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,i,n,r)}async _openRedirect(e,i,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,i,n,r)}_isIframeWebStorageSupported(e,i){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,i)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return px()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lz(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await pA();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function pD(e){let i;let{_tokenResponse:n}=e instanceof e$?e.customData:e;if(!n)return null;if(!(e instanceof e$)&&"temporaryProof"in n&&"phoneNumber"in n)return hB.credentialFromResult(e);let r=n.providerId;if(!r||r===lL.PASSWORD)return null;switch(r){case lL.GOOGLE:i=up;break;case lL.FACEBOOK:i=uf;break;case lL.GITHUB:i=ug;break;case lL.TWITTER:i=ub;break;default:let{oauthIdToken:o,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:c,nonce:u}=n;if(!a&&!l&&!o&&!c)return null;if(c){if(r.startsWith("saml."))return um._create(r,c);return ut._fromParams({providerId:r,signInMethod:r,pendingToken:c,idToken:o,accessToken:a})}return new ud(r).credential({idToken:o,accessToken:a,rawNonce:u})}return e instanceof e$?i.credentialFromError(e):i.credentialFromResult(e)}function pM(e,i){return i.catch(i=>{throw i instanceof e$&&function(e,i){var n;let r=null===(n=i.customData)||void 0===n?void 0:n._tokenResponse;if((null==i?void 0:i.code)==="auth/multi-factor-auth-required")i.resolver=new pF(e,function(e,i){var n;let r=e6(e);return lz(i.customData.operationType,r,"argument-error"),lz(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),u7._fromError(r,i)}(e,i));else if(r){let e=pD(i);e&&(i.credential=e,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}(e,i),i}).then(e=>{let i=e.operationType,n=e.user;return{operationType:i,credential:pD(e),additionalUserInfo:function(e){let{user:i,_tokenResponse:n}=e;return i.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var i,n;if(!e)return null;let{providerId:r}=e,o=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){let r=null===(n=null===(i=ca(e.idToken))||void 0===i?void 0:i.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new u2(a,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new u5(a,o);case"github.com":return new u6(a,o);case"google.com":return new u3(a,o);case"twitter.com":return new u9(a,o,e.screenName||null);case"custom":case"anonymous":return new u2(a,null);default:return new u2(a,r,o)}}(n)}(e),user:pU.getOrCreate(n)}})}async function pB(e,i){let n=await i;return{verificationId:n.verificationId,confirm:i=>pM(e,n.confirm(i))}}class pF{constructor(e,i){this.resolver=i,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return pM(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this._delegate=e,this.multiFactor=function(e){let i=e6(e);return ht.has(i)||ht.set(i,he._fromUser(i)),ht.get(i)}(e)}static getOrCreate(e){return pU.USER_MAP.has(e)||pU.USER_MAP.set(e,new pU(e)),pU.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return pM(this.auth,uR(this._delegate,e))}async linkWithPhoneNumber(e,i){return pB(this.auth,hN(this._delegate,e,i))}async linkWithPopup(e){return pM(this.auth,h$(this._delegate,e,pP))}async linkWithRedirect(e){return await pR(e6(this.auth)),h5(this._delegate,e,pP)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return pM(this.auth,uN(this._delegate,e))}reauthenticateWithPhoneNumber(e,i){return pB(this.auth,hP(this._delegate,e,i))}reauthenticateWithPopup(e){return pM(this.auth,hW(this._delegate,e,pP))}async reauthenticateWithRedirect(e){return await pR(e6(this.auth)),h4(this._delegate,e,pP)}sendEmailVerification(e){return uJ(this._delegate,e)}async unlink(e){return await uT(this._delegate,e),this}updateEmail(e){return function(e,i){let n=e6(e);return tM(n.auth.app)?Promise.reject(lj(n.auth)):u1(n,i,null)}(this._delegate,e)}updatePassword(e){return u1(e6(this._delegate),null,e)}updatePhoneNumber(e){return hM(this._delegate,e)}updateProfile(e){return u0(this._delegate,e)}verifyBeforeUpdateEmail(e,i){return uQ(this._delegate,e,i)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pU.USER_MAP=new WeakMap;class pj{constructor(e,i){if(this.app=e,i.isInitialized()){this._delegate=i.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:n}=e.options;lz(n,"invalid-api-key",{appName:e.name}),lz(n,"invalid-api-key",{appName:e.name});let r="undefined"!=typeof window?pP:void 0;this._delegate=i.initialize({options:{persistence:function(e,i){let n=function(e,i){let n=pN();if(!n)return[];let r=cI(pL,e,i);switch(n.getItem(r)){case pO.NONE:return[cE];case pO.LOCAL:return[hk,ho];case pO.SESSION:return[ho];default:return[]}}(e,i);if("undefined"==typeof self||n.includes(hk)||n.push(hk),"undefined"!=typeof window)for(let e of[hr,ho])n.includes(e)||n.push(e);return n.includes(cE)||n.push(cE),n}(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(lN),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pU.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,i){c$(this._delegate,e,i)}applyActionCode(e){return uz(this._delegate,e)}checkActionCode(e){return uq(this._delegate,e)}confirmPasswordReset(e,i){return uH(this._delegate,e,i)}async createUserWithEmailAndPassword(e,i){return pM(this._delegate,uW(this._delegate,e,i))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return uX(this._delegate,e)}isSignInWithEmailLink(e){return function(e,i){let n=ul.parseLink(i);return(null==n?void 0:n.operation)==="EMAIL_SIGNIN"}(this._delegate,e)}async getRedirectResult(){lz(pC(),this._delegate,"operation-not-supported-in-this-environment");let e=await h6(this._delegate,pP);return e?pM(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,i){e6(e)._logFramework(i)}(this._delegate,e)}onAuthStateChanged(e,i,n){let{next:r,error:o,complete:a}=pV(e,i,n);return this._delegate.onAuthStateChanged(r,o,a)}onIdTokenChanged(e,i,n){let{next:r,error:o,complete:a}=pV(e,i,n);return this._delegate.onIdTokenChanged(r,o,a)}sendSignInLinkToEmail(e,i){return u$(this._delegate,e,i)}sendPasswordResetEmail(e,i){return uV(this._delegate,e,i||void 0)}async setPersistence(e){let i;switch(!function(e,i){if(lz(Object.values(pO).includes(i),e,"invalid-persistence-type"),eq()){lz(i!==pO.SESSION,e,"unsupported-persistence-type");return}if(eV()){lz(i===pO.NONE,e,"unsupported-persistence-type");return}if(pT()){lz(i===pO.NONE||i===pO.LOCAL&&eW(),e,"unsupported-persistence-type");return}lz(i===pO.NONE||pS(),e,"unsupported-persistence-type")}(this._delegate,e),e){case pO.SESSION:i=ho;break;case pO.LOCAL:i=await ck(hk)._isAvailable()?hk:hr;break;case pO.NONE:i=cE;break;default:return lB("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(i)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return pM(this._delegate,uE(this._delegate))}signInWithCredential(e){return pM(this._delegate,uL(this._delegate,e))}signInWithCustomToken(e){return pM(this._delegate,uD(this._delegate,e))}signInWithEmailAndPassword(e,i){var n;return pM(this._delegate,tM((n=this._delegate).app)?Promise.reject(lj(n)):uL(e6(n),uc.credential(e,i)).catch(async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&uj(n),e}))}signInWithEmailLink(e,i){return pM(this._delegate,uG(this._delegate,e,i))}signInWithPhoneNumber(e,i){return pB(this._delegate,hR(this._delegate,e,i))}async signInWithPopup(e){return lz(pC(),this._delegate,"operation-not-supported-in-this-environment"),pM(this._delegate,hK(this._delegate,e,pP))}async signInWithRedirect(e){return lz(pC(),this._delegate,"operation-not-supported-in-this-environment"),await pR(this._delegate),h2(this._delegate,e,pP)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return uK(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function pV(e,i,n){let r=e;"function"!=typeof e&&({next:r,error:i,complete:n}=e);let o=r;return{next:e=>o(e&&pU.getOrCreate(e)),error:i,complete:n}}pj.Persistence=pO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.providerId="phone",this._delegate=new hB(pu.auth().unwrap())}static credential(e,i){return hB.credential(e,i)}verifyPhoneNumber(e,i){return this._delegate.verifyPhoneNumber(e,i)}unwrap(){return this._delegate}}pH.PHONE_SIGN_IN_METHOD=hB.PHONE_SIGN_IN_METHOD,pH.PROVIDER_ID=hB.PROVIDER_ID,pu.INTERNAL.registerComponent(new e3("auth-compat",e=>new pj(e.getProvider("app-compat").getImmediate(),e.getProvider("auth")),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:uc,FacebookAuthProvider:uf,GithubAuthProvider:ug,GoogleAuthProvider:up,OAuthProvider:ud,SAMLAuthProvider:uv,PhoneAuthProvider:pH,PhoneMultiFactorGenerator:dk,RecaptchaVerifier:class{constructor(e,i,n=pu.app()){var r;lz(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new hO(n.auth(),e,i),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:ub,Auth:pj,AuthCredential:cX,Error:e$}).setInstantiationMode("LAZY").setMultipleInstances(!1)),pu.registerVersion("@firebase/auth-compat","0.5.9");var pz={};!function(){var e=window.CustomEvent;function i(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function n(e){e&&e.blur&&e!==document.body&&e.blur()}function r(e){return!!(e&&e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function o(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]});else{var i,n=!1,r=(function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}).bind(this),o=function(o){if(o.target===e){var a="DOMNodeRemoved";n|=o.type.substr(0,a.length)===a,window.clearTimeout(i),i=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(i){e.addEventListener(i,o)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,i){i=i||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!i.bubbles,!!i.cancelable,i.detail||null),n}).prototype=window.Event.prototype),o.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),a.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var i=document.createElement("div");this.dialog_.insertBefore(i,this.dialog_.firstChild),i.tabIndex=-1,i.focus(),this.dialog_.removeChild(i)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var i=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});i.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(i.join(", "))}n(document.activeElement),e&&e.focus()},updateZIndex:function(e,i){if(e<i)throw Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=i},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!a.dm.pushDialog(this))throw Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var i=window.getComputedStyle(e),n=function(e,n){return!(void 0===i[e]||i[e]===n)};if(i.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===i.isolation||"fixed"===i.position||"touch"===i.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,a.needsCentering(this.dialog_)?(a.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(i){if(!this.dialog_.hasAttribute("open"))throw Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==i&&(this.dialog_.returnValue=i);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var a={};if(a.reposition=function(e){var i=document.body.scrollTop||document.documentElement.scrollTop,n=i+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(i,n)+"px"},a.isInlinePositionSetByStylesheet=function(e){for(var i=0;i<document.styleSheets.length;++i){var n=document.styleSheets[i],r=null;try{r=n.cssRules}catch(e){}if(r)for(var o=0;o<r.length;++o){var a=r[o],l=null;try{l=document.querySelectorAll(a.selectorText)}catch(e){}if(l&&function(e,i){for(var n=0;n<e.length;++n)if(e[n]===i)return!0;return!1}(l,e)){var c=a.style.getPropertyValue("top"),u=a.style.getPropertyValue("bottom");if(c&&"auto"!==c||u&&"auto"!==u)return!0}}}return!1},a.needsCentering=function(e){return"absolute"===window.getComputedStyle(e).position&&("auto"===e.style.top||""===e.style.top)&&("auto"===e.style.bottom||""===e.style.bottom)&&!a.isInlinePositionSetByStylesheet(e)},a.forceRegisterDialog=function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw Error("Failed to register dialog: The element is not a dialog.");new o(e)},a.registerDialog=function(e){e.showModal||a.forceRegisterDialog(e)},a.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(i){this.forwardTab_=void 0,i.stopPropagation(),e([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(i){var n=[];i.forEach(function(e){for(var i,r=0;i=e.removedNodes[r];++r)i instanceof Element&&("dialog"===i.localName&&n.push(i),n=n.concat(i.querySelectorAll("dialog")))}),n.length&&e(n)}))},a.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},a.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},a.DialogManager.prototype.updateStacking=function(){for(var e,i=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--i,--i),0===n&&(this.overlay.style.zIndex=--i);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},a.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=i(e);){for(var n,r=0;n=this.pendingDialogStack[r];++r)if(n.dialog===e)return 0===r;e=e.parentElement}return!1},a.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),n(e.target),void 0!==this.forwardTab_)){var i=this.pendingDialogStack[0];return i.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?i.focus_():document.documentElement.focus()),!1}},a.DialogManager.prototype.handleKey_=function(i){if(this.forwardTab_=void 0,27===i.keyCode){i.preventDefault(),i.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===i.keyCode&&(this.forwardTab_=!i.shiftKey)},a.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(i){-1!==e.indexOf(i.dialog)?i.downgradeModal():i.maybeHideModal()})},a.DialogManager.prototype.pushDialog=function(e){var i=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=i)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},a.DialogManager.prototype.removeDialog=function(e){var i=this.pendingDialogStack.indexOf(e);-1!==i&&(this.pendingDialogStack.splice(i,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},a.dm=new a.DialogManager,a.formSubmitter=null,a.useValue=null,void 0===window.HTMLDialogElement){var l=document.createElement("form");if(l.setAttribute("method","dialog"),"dialog"!==l.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var u=c.get;c.get=function(){return r(this)?"dialog":u.call(this)};var h=c.set;c.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):h.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",function(e){if(a.formSubmitter=null,a.useValue=null,!e.defaultPrevented){var n=e.target;if(n&&r(n.form)){if(!("submit"===n.type&&["button","input"].indexOf(n.localName)>-1)){if(!("input"===n.localName&&"image"===n.type))return;a.useValue=e.offsetX+","+e.offsetY}i(n)&&(a.formSubmitter=n)}}},!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!r(this))return d.call(this);var e=i(this);e&&e.close()},document.addEventListener("submit",function(e){var n=e.target;if(r(n)){e.preventDefault();var o=i(n);if(o){var l=a.formSubmitter;l&&l.form===n?o.close(a.useValue||l.value):o.close(),a.formSubmitter=null}}},!0)}a.forceRegisterDialog=a.forceRegisterDialog,a.registerDialog=a.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return a}):"object"==typeof pz?pz=a:window.dialogPolyfill=a}();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pq={upgradeDom:function(e,i){},upgradeElement:function(e,i){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,i){},register:function(e){},downgradeElements:function(e){}};(pq=function(){var e=[],i=[],n="mdlComponentConfigInternal_";function r(i,n){for(var r=0;r<e.length;r++)if(e[r].className===i)return void 0!==n&&(e[r]=n),e[r];return!1}function o(e){var i=e.getAttribute("data-upgraded");return null===i?[""]:i.split(",")}function a(e,i){return -1!==o(e).indexOf(i)}function l(e,i,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:i,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,i,n),r}function c(i,n){if(void 0===i&&void 0===n)for(var o=0;o<e.length;o++)c(e[o].className,e[o].cssClass);else{if(void 0===n){var a=r(i);a&&(n=a.cssClass)}for(var l=document.querySelectorAll("."+n),h=0;h<l.length;h++)u(l[h],i)}}function u(c,u){if(!("object"==typeof c&&c instanceof Element))throw Error("Invalid argument provided to upgrade MDL element.");var h=l("mdl-componentupgrading",!0,!0);if(c.dispatchEvent(h),!h.defaultPrevented){var d=o(c),f=[];if(u)a(c,u)||f.push(r(u));else{var p=c.classList;e.forEach(function(e){p.contains(e.cssClass)&&-1===f.indexOf(e)&&!a(c,e.className)&&f.push(e)})}for(var g,m=0,v=f.length;m<v;m++){if(g=f[m]){d.push(g.className),c.setAttribute("data-upgraded",d.join(","));var b=new g.classConstructor(c);b[n]=g,i.push(b);for(var y=0,w=g.callbacks.length;y<w;y++)g.callbacks[y](c);g.widget&&(c[g.className]=b)}else throw Error("Unable to find a registered component for the given class.");var k=l("mdl-componentupgraded",!0,!1);c.dispatchEvent(k)}}}function h(e){if(e){var r=i.indexOf(e);i.splice(r,1);var o=e.element_.getAttribute("data-upgraded").split(","),a=o.indexOf(e[n].classAsString);o.splice(a,1),e.element_.setAttribute("data-upgraded",o.join(","));var c=l("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(c)}}return{upgradeDom:c,upgradeElement:u,upgradeElements:function e(i){Array.isArray(i)||(i instanceof Element?i=[i]:i=Array.prototype.slice.call(i));for(var n,r=0,o=i.length;r<o;r++)(n=i[r])instanceof HTMLElement&&(u(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var i=0;i<e.length;i++)c(e[i].className)},registerUpgradedCallback:function(e,i){var n=r(e);n&&n.callbacks.push(i)},register:function(i){var o=void 0===i.widget&&void 0===i.widget,a=!0;o||(a=i.widget||i.widget);var l={classConstructor:i.constructor||i.constructor,className:i.classAsString||i.classAsString,cssClass:i.cssClass||i.cssClass,widget:a,callbacks:[]};if(e.forEach(function(e){if(e.cssClass===l.cssClass)throw Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===l.className)throw Error("The provided className has already been registered")}),i.constructor.prototype.hasOwnProperty(n))throw Error("MDL component classes must not have "+n+" defined as a property.");r(i.classAsString,l)||e.push(l)},downgradeElements:function(e){var n=function(e){i.filter(function(i){return i.element_===e}).forEach(h)};if(e instanceof Array||e instanceof NodeList)for(var r=0;r<e.length;r++)n(e[r]);else if(e instanceof Node)n(e);else throw Error("Invalid argument provided to downgrade MDL nodes.")}}}()).ComponentConfigPublic,pq.ComponentConfig,pq.Component,pq.upgradeDom=pq.upgradeDom,pq.upgradeElement=pq.upgradeElement,pq.upgradeElements=pq.upgradeElements,pq.upgradeAllRegistered=pq.upgradeAllRegistered,pq.registerUpgradedCallback=pq.registerUpgradedCallback,pq.register=pq.register,pq.downgradeElements=pq.downgradeElements,window.componentHandler=pq,window.componentHandler=pq,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),pq.upgradeAllRegistered()):(pq.upgradeElement=function(){},pq.register=function(){})}),k=function(e){this.element_=e,this.init()},window.MaterialButton=k,k.prototype.Constant_={},k.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},k.prototype.blurHandler_=function(e){e&&this.element_.blur()},k.prototype.disable=function(){this.element_.disabled=!0},k.prototype.disable=k.prototype.disable,k.prototype.enable=function(){this.element_.disabled=!1},k.prototype.enable=k.prototype.enable,k.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:k,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0}),E=function(e){this.element_=e,this.init()},window.MaterialProgress=E,E.prototype.Constant_={},E.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},E.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},E.prototype.setProgress=E.prototype.setProgress,E.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},E.prototype.setBuffer=E.prototype.setBuffer,E.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:E,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0}),I=function(e){this.element_=e,this.init()},window.MaterialSpinner=I,I.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},I.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},I.prototype.createLayer=function(e){var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),i.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),o.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[n,r,o],l=0;l<a.length;l++){var c=document.createElement("div");c.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[l].appendChild(c)}i.appendChild(n),i.appendChild(r),i.appendChild(o),this.element_.appendChild(i)},I.prototype.createLayer=I.prototype.createLayer,I.prototype.stop=function(){this.element_.classList.remove("is-active")},I.prototype.stop=I.prototype.stop,I.prototype.start=function(){this.element_.classList.add("is-active")},I.prototype.start=I.prototype.start,I.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:I,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0}),_=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=_,_.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},_.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},_.prototype.onKeyDown_=function(e){var i=e.target.value.split("\n").length;13===e.keyCode&&i>=this.maxRows&&e.preventDefault()},_.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},_.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_.prototype.onReset_=function(e){this.updateClasses_()},_.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},_.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},_.prototype.checkDisabled=_.prototype.checkDisabled,_.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_.prototype.checkFocus=_.prototype.checkFocus,_.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},_.prototype.checkValidity=_.prototype.checkValidity,_.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},_.prototype.checkDirty=_.prototype.checkDirty,_.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},_.prototype.disable=_.prototype.disable,_.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},_.prototype.enable=_.prototype.enable,_.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},_.prototype.change=_.prototype.change,_.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:_,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0}),(function(){(function(){var e,i,n="function"==typeof Object.create?Object.create:function(e){function i(){}return i.prototype=e,new i};if("function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{e:{var r={};try{r.__proto__={xb:!0},n3=r.xb;break e}catch(e){}n3=!1}i=n3?function(e,i){if(e.__proto__=i,e.__proto__!==i)throw TypeError(e+" is not extensible");return e}:null}var o=i;function a(e,i){if(e.prototype=n(i.prototype),e.prototype.constructor=e,o)o(e,i);else for(var r in i)if("prototype"!=r){if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(e,r,a)}else e[r]=i[r]}e.K=i.prototype}var l="function"==typeof Object.defineProperties?Object.defineProperty:function(e,i,n){e!=Array.prototype&&e!=Object.prototype&&(e[i]=n.value)},c="undefined"!=typeof window&&window===this?this:void 0!==eo&&null!=eo?eo:this;function u(e,i){if(i){var n=c;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}(i=i(r=n[e=e[e.length-1]]))!=r&&null!=i&&l(n,e,{configurable:!0,writable:!0,value:i})}}u("Object.is",function(e){return e||function(e,i){return e===i?0!==e||1/e==1/i:e!=e&&i!=i}}),u("Array.prototype.includes",function(e){return e||function(e,i){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(i=i||0)&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===e||Object.is(o,e))return!0}return!1}});var h=this;function d(e){return void 0!==e}function f(e){return"string"==typeof e}var p=/^[\w+/_-]+[=]{0,2}$/,g=null;function m(){}function v(e){e.W=void 0,e.Xa=function(){return e.W?e.W:e.W=new e}}function b(e){var i=typeof e;if("object"==i){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return i;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==i&&void 0===e.call)return"object";return i}function y(e){return"array"==b(e)}function w(e){var i=b(e);return"array"==i||"object"==i&&"number"==typeof e.length}function k(e){return"function"==b(e)}function E(e){var i=typeof e;return"object"==i&&null!=e||"function"==i}var I="closure_uid_"+(1e9*Math.random()>>>0),_=0;function S(e,i,n){return e.call.apply(e.bind,arguments)}function T(e,i,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(i,n)}}return function(){return e.apply(i,arguments)}}function C(e,i,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:T).apply(null,arguments)}function x(e,i){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function A(e,i){for(var n in i)e[n]=i[n]}var O=Date.now||function(){return+new Date};function L(e,i){e=e.split(".");var n,r=h;for((e[0]in r)||void 0===r.execScript||r.execScript("var "+e[0]);e.length&&(n=e.shift());)!e.length&&d(i)?r[n]=i:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function R(e,i){function n(){}n.prototype=i.prototype,e.K=i.prototype,e.prototype=new n,e.prototype.constructor=e,e.vc=function(e,n,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return i.prototype[n].apply(e,o)}}function N(e){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var i=Error().stack;i&&(this.stack=i)}e&&(this.message=String(e))}function P(e,i){e=e.split("%s");for(var n="",r=e.length-1,o=0;o<r;o++)n+=e[o]+(o<i.length?i[o]:"%s");N.call(this,n+e[r])}function D(e,i){throw new P("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}R(N,Error),N.prototype.name="CustomError",R(P,N),P.prototype.name="AssertionError";var M=Array.prototype.indexOf?function(e,i){return Array.prototype.indexOf.call(e,i,void 0)}:function(e,i){if(f(e))return f(i)&&1==i.length?e.indexOf(i,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===i)return n;return -1},B=Array.prototype.forEach?function(e,i,n){Array.prototype.forEach.call(e,i,n)}:function(e,i,n){for(var r=e.length,o=f(e)?e.split(""):e,a=0;a<r;a++)a in o&&i.call(n,o[a],a,e)},F=Array.prototype.filter?function(e,i){return Array.prototype.filter.call(e,i,void 0)}:function(e,i){for(var n=e.length,r=[],o=0,a=f(e)?e.split(""):e,l=0;l<n;l++)if(l in a){var c=a[l];i.call(void 0,c,l,e)&&(r[o++]=c)}return r},U=Array.prototype.map?function(e,i){return Array.prototype.map.call(e,i,void 0)}:function(e,i){for(var n=e.length,r=Array(n),o=f(e)?e.split(""):e,a=0;a<n;a++)a in o&&(r[a]=i.call(void 0,o[a],a,e));return r},j=Array.prototype.some?function(e,i){return Array.prototype.some.call(e,i,void 0)}:function(e,i){for(var n=e.length,r=f(e)?e.split(""):e,o=0;o<n;o++)if(o in r&&i.call(void 0,r[o],o,e))return!0;return!1};function V(e,i){return 0<=M(e,i)}function H(e,i){var n;return(n=0<=(i=M(e,i)))&&z(e,i),n}function z(e,i){return 1==Array.prototype.splice.call(e,i,1).length}function q(e){return Array.prototype.concat.apply([],arguments)}function K(e){var i=e.length;if(0<i){for(var n=Array(i),r=0;r<i;r++)n[r]=e[r];return n}return[]}var W=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},$=/&/g,G=/</g,Y=/>/g,X=/"/g,J=/'/g,Q=/\x00/g,Z=/[\x00&<>"']/;function ee(e,i){return e<i?-1:e>i?1:0}function et(e){return Z.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace($,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(G,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(Y,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(X,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(J,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(Q,"&#0;"))),e}function ei(e,i,n){for(var r in e)i.call(n,e[r],r,e)}function en(e){var i,n={};for(i in e)n[i]=e[i];return n}var er="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function es(e,i){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])e[n]=r[n];for(var a=0;a<er.length;a++)n=er[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var ea="StopIteration"in h?h.StopIteration:{message:"StopIteration",stack:""};function el(){}function ec(e){if(e instanceof el)return e;if("function"==typeof e.ha)return e.ha(!1);if(w(e)){var i=0,n=new el;return n.next=function(){for(;;){if(i>=e.length)throw ea;if(i in e)return e[i++];i++}},n}throw Error("Not implemented")}function eu(e,i){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){if(e instanceof eu)for(n=e.ja(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}}function eh(e){if(e.h!=e.a.length){for(var i=0,n=0;i<e.a.length;){var r=e.a[i];ed(e.g,r)&&(e.a[n++]=r),i++}e.a.length=n}if(e.h!=e.a.length){var o={};for(n=i=0;i<e.a.length;)ed(o,r=e.a[i])||(e.a[n++]=r,o[r]=1),i++;e.a.length=n}}function ed(e,i){return Object.prototype.hasOwnProperty.call(e,i)}el.prototype.next=function(){throw ea},el.prototype.ha=function(){return this},(e=eu.prototype).la=function(){eh(this);for(var e=[],i=0;i<this.a.length;i++)e.push(this.g[this.a[i]]);return e},e.ja=function(){return eh(this),this.a.concat()},e.clear=function(){this.g={},this.j=this.h=this.a.length=0},e.get=function(e,i){return ed(this.g,e)?this.g[e]:i},e.set=function(e,i){ed(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=i},e.forEach=function(e,i){for(var n=this.ja(),r=0;r<n.length;r++){var o=n[r],a=this.get(o);e.call(i,a,o,this)}},e.ha=function(e){eh(this);var i=0,n=this.j,r=this,o=new el;return o.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(i>=r.a.length)throw ea;var o=r.a[i++];return e?o:r.g[o]},o};var ef=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ep(e,i,n,r){for(var o=n.length;0<=(i=e.indexOf(n,i))&&i<r;){var a=e.charCodeAt(i-1);if((38==a||63==a)&&(!(a=e.charCodeAt(i+o))||61==a||38==a||35==a))return i;i+=o+1}return -1}var eg=/#|$/;function em(e,i){var n=e.search(eg),r=ep(e,0,i,n);if(0>r)return null;var o=e.indexOf("&",r);return(0>o||o>n)&&(o=n),r+=i.length+1,decodeURIComponent(e.substr(r,o-r).replace(/\+/g," "))}var ev=/[?&]($|#)/;function eb(e,i){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,e instanceof eb?(this.i=d(i)?i:e.i,ey(this,e.j),this.A=e.A,this.h=e.h,ew(this,e.C),this.g=e.g,ek(this,eD(e.a)),this.s=e.s):e&&(n=String(e).match(ef))?(this.i=!!i,ey(this,n[1]||"",!0),this.A=eI(n[2]||""),this.h=eI(n[3]||"",!0),ew(this,n[4]),this.g=eI(n[5]||"",!0),ek(this,n[6]||"",!0),this.s=eI(n[7]||"")):(this.i=!!i,this.a=new eL(null,this.i))}function ey(e,i,n){e.j=n?eI(i,!0):i,e.j&&(e.j=e.j.replace(/:$/,""))}function ew(e,i){if(i){if(isNaN(i=Number(i))||0>i)throw Error("Bad port number "+i);e.C=i}else e.C=null}function ek(e,i,n){var r,o;i instanceof eL?(e.a=i,r=e.a,(o=e.i)&&!r.j&&(eR(r),r.h=null,r.a.forEach(function(e,i){var n=i.toLowerCase();i!=n&&(eN(this,i),eN(this,n),0<e.length&&(this.h=null,this.a.set(eM(this,n),K(e)),this.g+=e.length))},r)),r.j=o):(n||(i=e_(i,eA)),e.a=new eL(i,e.i))}function eE(e){return e instanceof eb?new eb(e):new eb(e,void 0)}function eI(e,i){return e?i?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e_(e,i,n){return f(e)?(e=encodeURI(e).replace(i,eS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function eS(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eb.prototype.toString=function(){var e=[],i=this.j;i&&e.push(e_(i,eT,!0),":");var n=this.h;return(n||"file"==i)&&(e.push("//"),(i=this.A)&&e.push(e_(i,eT,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(e_(n,"/"==n.charAt(0)?ex:eC,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.s)&&e.push("#",e_(n,eO)),e.join("")};var eT=/[#\/\?@]/g,eC=/[#\?:]/g,ex=/[#\?]/g,eA=/[#\?@]/g,eO=/#/g;function eL(e,i){this.g=this.a=null,this.h=e||null,this.j=!!i}function eR(e){e.a||(e.a=new eu,e.g=0,e.h&&function(e,i){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var a=e[n].substring(0,r);o=e[n].substring(r+1)}else a=e[n];i(a,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.h,function(i,n){e.add(decodeURIComponent(i.replace(/\+/g," ")),n)}))}function eN(e,i){eR(e),i=eM(e,i),ed(e.a.g,i)&&(e.h=null,e.g-=e.a.get(i).length,ed((e=e.a).g,i)&&(delete e.g[i],e.h--,e.j++,e.a.length>2*e.h&&eh(e)))}function eP(e,i){return eR(e),i=eM(e,i),ed(e.a.g,i)}function eD(e){var i=new eL;return i.h=e.h,e.a&&(i.a=new eu(e.a),i.g=e.g),i}function eM(e,i){return i=String(i),e.j&&(i=i.toLowerCase()),i}function eB(e){this.a=eE(e)}function eF(e){return e.a.a.get(ej.Pa)||null}function eU(e,i){i?e.a.a.set(ej.PROVIDER_ID,i):eN(e.a.a,ej.PROVIDER_ID)}(e=eL.prototype).add=function(e,i){eR(this),this.h=null,e=eM(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(i),this.g+=1,this},e.clear=function(){this.a=this.h=null,this.g=0},e.forEach=function(e,i){eR(this),this.a.forEach(function(n,r){B(n,function(n){e.call(i,n,r,this)},this)},this)},e.ja=function(){eR(this);for(var e=this.a.la(),i=this.a.ja(),n=[],r=0;r<i.length;r++)for(var o=e[r],a=0;a<o.length;a++)n.push(i[r]);return n},e.la=function(e){eR(this);var i=[];if(f(e))eP(this,e)&&(i=q(i,this.a.get(eM(this,e))));else{e=this.a.la();for(var n=0;n<e.length;n++)i=q(i,e[n])}return i},e.set=function(e,i){return eR(this),this.h=null,eP(this,e=eM(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[i]),this.g+=1,this},e.get=function(e,i){return e&&0<(e=this.la(e)).length?String(e[0]):i},e.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],i=this.a.ja(),n=0;n<i.length;n++){var r=i[n],o=encodeURIComponent(String(r));r=this.la(r);for(var a=0;a<r.length;a++){var l=o;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),e.push(l)}}return this.h=e.join("&")},eB.prototype.toString=function(){return this.a.toString()};var ej={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var eV=h.navigator;if(eV){var eH=eV.userAgent;if(eH){n8=eH;break e}}n8=""}function ez(e){return -1!=n8.indexOf(e)}function eq(){return(ez("Chrome")||ez("CriOS"))&&!ez("Edge")}function eK(e){return eK[" "](e),e}eK[" "]=m;var eW=ez("Opera"),e$=ez("Trident")||ez("MSIE"),eG=ez("Edge"),eY=eG||e$,eX=ez("Gecko")&&!(-1!=n8.toLowerCase().indexOf("webkit")&&!ez("Edge"))&&!(ez("Trident")||ez("MSIE"))&&!ez("Edge"),eJ=-1!=n8.toLowerCase().indexOf("webkit")&&!ez("Edge"),eQ=eJ&&ez("Mobile"),eZ=ez("Macintosh");function e0(){var e=h.document;return e?e.documentMode:void 0}e:{var e1,e2="",e4=(e1=n8,eX?/rv:([^\);]+)(\)|;)/.exec(e1):eG?/Edge\/([\d\.]+)/.exec(e1):e$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e1):eJ?/WebKit\/(\S+)/.exec(e1):eW?/(?:Version)[ \/]?(\S+)/.exec(e1):void 0);if(e4&&(e2=e4?e4[1]:""),e$){var e5=e0();if(null!=e5&&e5>parseFloat(e2)){n7=String(e5);break e}}n7=e2}var e6={};function e3(e){var i;return i=function(){for(var i=0,n=W(String(n7)).split("."),r=W(String(e)).split("."),o=Math.max(n.length,r.length),a=0;0==i&&a<o;a++){var l=n[a]||"",c=r[a]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==l[0].length&&0==c[0].length)break;i=ee(0==l[1].length?0:parseInt(l[1],10),0==c[1].length?0:parseInt(c[1],10))||ee(0==l[2].length,0==c[2].length)||ee(l[2],c[2]),l=l[3],c=c[3]}while(0==i)}return 0<=i},Object.prototype.hasOwnProperty.call(e6,e)?e6[e]:e6[e]=i(e)}var e9=h.document;function e8(e,i){this.a=e===te&&i||"",this.g=e7}re=e9&&e$?e0()||("CSS1Compat"==e9.compatMode?parseInt(n7,10):5):void 0,e8.prototype.ma=!0,e8.prototype.ka=function(){return this.a},e8.prototype.toString=function(){return"Const{"+this.a+"}"};var e7={},te={};function tt(){this.a="",this.h=tn}function ti(e){return e instanceof tt&&e.constructor===tt&&e.h===tn?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+b(e)),"type_error:TrustedResourceUrl")}tt.prototype.ma=!0,tt.prototype.ka=function(){return this.a.toString()},tt.prototype.g=function(){return 1},tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var tn={};function tr(){this.a="",this.h=tc}function to(e){return e instanceof tr&&e.constructor===tr&&e.h===tc?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+b(e)),"type_error:SafeUrl")}tr.prototype.ma=!0,tr.prototype.ka=function(){return this.a.toString()},tr.prototype.g=function(){return 1},tr.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ts=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ta(e){return e instanceof tr?e:(e="object"==typeof e&&e.ma?e.ka():String(e),ts.test(e)||(e="about:invalid#zClosurez"),tu(e))}function tl(e){return e instanceof tr?e:(e="object"==typeof e&&e.ma?e.ka():String(e),ts.test(e)||(e="about:invalid#zClosurez"),tu(e))}var tc={};function tu(e){var i=new tr;return i.a=e,i}function th(){this.a="",this.g=td}tu("about:blank"),th.prototype.ma=!0;var td={};function tf(){this.a="",this.j=tg,this.h=null}function tp(e){return e instanceof tf&&e.constructor===tf&&e.j===tg?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+b(e)),"type_error:SafeHtml")}th.prototype.ka=function(){return this.a},th.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},tf.prototype.g=function(){return this.h},tf.prototype.ma=!0,tf.prototype.ka=function(){return this.a.toString()},tf.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var tg={};function tm(e,i){var n=new tf;return n.a=e,n.h=i,n}tm("<!DOCTYPE html>",0);var tv=tm("",0);tm("<br>",0);var tb=(n4=function(){if("undefined"==typeof document)return!1;var e=document.createElement("div"),i=document.createElement("div");return i.appendChild(document.createElement("div")),e.appendChild(i),!!e.firstChild&&(i=e.firstChild.firstChild,e.innerHTML=tp(tv),!i.parentElement)},n6=!1,function(){return n6||(n5=n4(),n6=!0),n5});function ty(e,i){i=i instanceof tr?i:tl(i),e.assign(to(i))}function tw(e,i){this.a=d(e)?e:0,this.g=d(i)?i:0}function tk(e,i){this.width=e,this.height=i}function tE(e){return e?new tR(tA(e)):n9||(n9=new tR)}function tI(e,i){var n=i||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):tS(document,e,i)}function t_(e,i){var n=i||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var r=i||n;e=r.querySelectorAll&&r.querySelector&&e?r.querySelector(e?"."+e:""):tS(n,e,i)[0]||null}return e||null}function tS(e,i,n){var r;if((e=n||e).querySelectorAll&&e.querySelector&&i)return e.querySelectorAll(i?"."+i:"");if(i&&e.getElementsByClassName){var o=e.getElementsByClassName(i);return o}if(o=e.getElementsByTagName("*"),i){var a={};for(n=r=0;e=o[n];n++){var l=e.className;"function"==typeof l.split&&V(l.split(/\s+/),i)&&(a[r++]=e)}return a.length=r,a}return o}tw.prototype.toString=function(){return"("+this.a+", "+this.g+")"},tw.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},tw.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},tw.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(e=tk.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},e.aspectRatio=function(){return this.width/this.height},e.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var tT={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function tC(e){return e.scrollingElement?e.scrollingElement:(eJ||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function tx(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function tA(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function tO(e,i){if("textContent"in e)e.textContent=i;else if(3==e.nodeType)e.data=String(i);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(i)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(tA(e).createTextNode(String(i)))}}function tL(e,i){return i?function(e,i){for(;e;){if(i(e))return e;e=e.parentNode}return null}(e,function(e){return!i||f(e.className)&&V(e.className.split(/\s+/),i)}):null}function tR(e){this.a=e||h.document||document}tR.prototype.N=function(){return f(void 0)?this.a.getElementById(void 0):void 0};var tN={Fc:!0},tP={Hc:!0},tD={},tM={Gc:!0};function tB(){throw Error("Do not instantiate directly")}function tF(e,i,n,r){if(e=e(i||tj,void 0,n),r=(r||tE()).a.createElement("DIV"),(e=function(e){if(!E(e))return et(String(e));if(e instanceof tB){if(e.fa===tN)return e.content;if(e.fa===tM)return et(e.content)}return D("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(tU),e=tm(e,null),tb())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=tp(e),1==r.childNodes.length&&1==(e=r.firstChild).nodeType&&(r=e),r}tB.prototype.va=null,tB.prototype.toString=function(){return this.content};var tU=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,tj={};function tV(){tB.call(this)}function tH(e){return null!=e&&e.fa===tN?e:e instanceof tf?tW(tp(e).toString(),e.g()):tW(et(String(String(e))),function(e){if(null!=e)switch(e.va){case 1:return 1;case -1:return -1;case 0:return 0}return null}(e))}function tz(){tB.call(this)}function tq(e,i){this.content=String(e),this.va=null!=i?i:null}function tK(e){return new tq(e,void 0)}R(tV,tB),tV.prototype.fa=tN,R(tz,tB),tz.prototype.fa=tP,tz.prototype.va=1,R(tq,tB),tq.prototype.fa=tM;var tW=function(e){function i(e){this.content=e}return i.prototype=e.prototype,function(e,n){return e=new i(String(e)),void 0!==n&&(e.va=n),e}}(tV),t$=function(e){function i(e){this.content=e}return i.prototype=e.prototype,function(e){return new i(String(e))}}(tz);function tG(e){return(e=String(e))?new tq(e,void 0):""}var tY=function(e){function i(e){this.content=e}return i.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new i(e),void 0!==n&&(e.va=n),e):""}}(tV);function tX(e){return null!=e&&e.fa===tN?String(String(e.content).replace(t9,"").replace(t8,"&lt;")).replace(t4,t0):et(String(e))}function tJ(e){return null!=e&&e.fa===tP?e=String(e).replace(t5,t2):e instanceof tr?e=String(to(e).toString()).replace(t5,t2):t3.test(e=String(e))?e=e.replace(t5,t2):(D("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz"),e}function tQ(e){return null!=e&&e.fa===tD?e=e.content:null==e?e="":e instanceof th?e instanceof th&&e.constructor===th&&e.g===td?e=e.a:(D("expected object of type SafeStyle, got '"+e+"' of type "+b(e)),e="type_error:SafeStyle"):t6.test(e=String(e))||(D("Bad value `%s` for |filterCssValue",[e]),e="zSoyz"),e}var tZ={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;","":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function t0(e){return tZ[e]}var t1={"\0":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85","":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","":"%EF%BC%81","":"%EF%BC%83","":"%EF%BC%84","":"%EF%BC%86","":"%EF%BC%87","":"%EF%BC%88","":"%EF%BC%89","":"%EF%BC%8A","":"%EF%BC%8B","":"%EF%BC%8C","":"%EF%BC%8F","":"%EF%BC%9A","":"%EF%BC%9B","":"%EF%BC%9D","":"%EF%BC%9F","":"%EF%BC%A0","":"%EF%BC%BB","":"%EF%BC%BD"};function t2(e){return t1[e]}var t4=/[\x00\x22\x27\x3c\x3e]/g,t5=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,t6=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,t3=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,t9=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,t8=/</g;function t7(){return tK("Enter a valid phone number")}function ie(){return tK("Unable to send password reset code to specified email")}function it(){return tK("Something went wrong. Please try again.")}function ii(){return tK("This email already exists without any means of sign-in. Please reset the password to recover.")}function ir(e){var i="";switch((e=e||{}).code){case"invalid-argument":i+="Client specified an invalid argument.";break;case"invalid-configuration":i+="Client specified an invalid project configuration.";break;case"failed-precondition":i+="Request can not be executed in the current system state.";break;case"out-of-range":i+="Client specified an invalid range.";break;case"unauthenticated":i+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":i+="Client does not have sufficient permission.";break;case"not-found":i+="Specified resource is not found.";break;case"aborted":i+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":i+="The resource that a client tried to create already exists.";break;case"resource-exhausted":i+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":i+="Request cancelled by the client.";break;case"data-loss":i+="Unrecoverable data loss or data corruption.";break;case"unknown":i+="Unknown server error.";break;case"internal":i+="Internal server error.";break;case"not-implemented":i+="API method not implemented by the server.";break;case"unavailable":i+="Service unavailable.";break;case"deadline-exceeded":i+="Request deadline exceeded.";break;case"auth/user-disabled":i+="The user account has been disabled by an administrator.";break;case"auth/timeout":i+="The operation has timed out.";break;case"auth/too-many-requests":i+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":i+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":i+="A network error has occurred. Try again later.";break;case"restart-process":i+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":i+="No sign-in provider is available for the given email, please try with a different email."}return tK(i)}function io(e,i,n){var r=Error.call(this);this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=is+e,(e=i)||((e="","firebaseui/merge-conflict"===this.code)?e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.":e+=it(),e=tK(e).toString()),this.message=e||"",this.credential=n||null}a(io,Error),io.prototype.toJSON=function(){return{code:this.code,message:this.message}};var is="firebaseui/";function ia(){0!=il&&(ic[this[I]||(this[I]=++_)]=this),this.T=this.T,this.C=this.C}var il=0,ic={};function iu(e,i){e.T?d(void 0)?i.call(void 0):i():(e.C||(e.C=[]),e.C.push(d(void 0)?C(i,void 0):i))}function ih(e){e&&"function"==typeof e.m&&e.m()}ia.prototype.T=!1,ia.prototype.m=function(){if(!this.T&&(this.T=!0,this.o(),0!=il)){var e=this[I]||(this[I]=++_);if(0!=il&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ic[e]}},ia.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var id=Object.freeze||function(e){return e},ip=!e$||9<=Number(re),ig=e$&&!e3("9"),im=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,i=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",m,i),h.removeEventListener("test",m,i)}catch(e){}return e}();function iv(e,i){this.type=e,this.g=this.target=i,this.h=!1,this.qb=!0}function ib(e,i){if(iv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=i,i=e.relatedTarget){if(eX){e:{try{eK(i.nodeName);var o=!0;break e}catch(e){}o=!1}o||(i=null)}}else"mouseover"==n?i=e.fromElement:"mouseout"==n&&(i=e.toElement);this.relatedTarget=i,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=f(e.pointerType)?e.pointerType:iy[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}iv.prototype.stopPropagation=function(){this.h=!0},iv.prototype.preventDefault=function(){this.qb=!1},R(ib,iv);var iy=id({2:"touch",3:"pen",4:"mouse"});ib.prototype.stopPropagation=function(){ib.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},ib.prototype.preventDefault=function(){ib.K.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ig)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var iw="closure_listenable_"+(1e6*Math.random()|0),ik=0;function iE(e,i,n,r,o){this.listener=e,this.proxy=null,this.src=i,this.type=n,this.capture=!!r,this.La=o,this.key=++ik,this.sa=this.Ia=!1}function iI(e){e.sa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function i_(e){this.src=e,this.a={},this.g=0}function iS(e,i){var n=i.type;n in e.a&&H(e.a[n],i)&&(iI(i),0==e.a[n].length&&(delete e.a[n],e.g--))}function iT(e,i,n,r){for(var o=0;o<e.length;++o){var a=e[o];if(!a.sa&&a.listener==i&&!!n==a.capture&&a.La==r)return o}return -1}i_.prototype.add=function(e,i,n,r,o){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.g++);var l=iT(e,i,r,o);return -1<l?(i=e[l],n||(i.Ia=!1)):((i=new iE(i,this.src,a,!!r,o)).Ia=n,e.push(i)),i};var iC="closure_lm_"+(1e6*Math.random()|0),ix={},iA=0;function iO(e,i,n,r,o){if(r&&r.once)return iR(e,i,n,r,o);if(y(i)){for(var a=0;a<i.length;a++)iO(e,i[a],n,r,o);return null}return n=iV(n),e&&e[iw]?e.J.add(String(i),n,!1,E(r)?!!r.capture:!!r,o):iL(e,i,n,!1,r,o)}function iL(e,i,n,r,o,a){if(!i)throw Error("Invalid event type");var l,c=E(o)?!!o.capture:!!o,u=iU(e);if(u||(e[iC]=u=new i_(e)),(n=u.add(i,n,r,c,a)).proxy)return n;if(r=l=ip?function(e){return iF.call(l.src,l.listener,e)}:function(e){if(!(e=iF.call(l.src,l.listener,e)))return e},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)im||(o=c),void 0===o&&(o=!1),e.addEventListener(i.toString(),r,o);else if(e.attachEvent)e.attachEvent(iD(i.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return iA++,n}function iR(e,i,n,r,o){if(y(i)){for(var a=0;a<i.length;a++)iR(e,i[a],n,r,o);return null}return n=iV(n),e&&e[iw]?e.J.add(String(i),n,!0,E(r)?!!r.capture:!!r,o):iL(e,i,n,!0,r,o)}function iN(e,i,n,r,o){if(y(i))for(var a=0;a<i.length;a++)iN(e,i[a],n,r,o);else(r=E(r)?!!r.capture:!!r,n=iV(n),e&&e[iw])?(e=e.J,(i=String(i).toString())in e.a&&-1<(n=iT(a=e.a[i],n,r,o))&&(iI(a[n]),z(a,n),0==a.length&&(delete e.a[i],e.g--))):e&&(e=iU(e))&&(i=e.a[i.toString()],e=-1,i&&(e=iT(i,n,r,o)),(n=-1<e?i[e]:null)&&iP(n))}function iP(e){if("number"!=typeof e&&e&&!e.sa){var i=e.src;if(i&&i[iw])iS(i.J,e);else{var n=e.type,r=e.proxy;i.removeEventListener?i.removeEventListener(n,r,e.capture):i.detachEvent?i.detachEvent(iD(n),r):i.addListener&&i.removeListener&&i.removeListener(r),iA--,(n=iU(i))?(iS(n,e),0==n.g&&(n.src=null,i[iC]=null)):iI(e)}}}function iD(e){return e in ix?ix[e]:ix[e]="on"+e}function iM(e,i,n,r){var o=!0;if((e=iU(e))&&(i=e.a[i.toString()]))for(i=i.concat(),e=0;e<i.length;e++){var a=i[e];a&&a.capture==n&&!a.sa&&(a=iB(a,r),o=o&&!1!==a)}return o}function iB(e,i){var n=e.listener,r=e.La||e.src;return e.Ia&&iP(e),n.call(r,i)}function iF(e,i){if(e.sa)return!0;if(!ip){if(!i)e:{i=["window","event"];for(var n=h,r=0;r<i.length;r++)if(null==(n=n[i[r]])){i=null;break e}i=n}if(i=new ib(r=i,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=i.g;o;o=o.parentNode)r.push(o);for(e=e.type,o=r.length-1;!i.h&&0<=o;o--){i.g=r[o];var a=iM(r[o],e,!0,i);n=n&&a}for(o=0;!i.h&&o<r.length;o++)i.g=r[o],a=iM(r[o],e,!1,i),n=n&&a}return n}return iB(e,new ib(i,this))}function iU(e){return(e=e[iC])instanceof i_?e:null}var ij="__closure_events_fn_"+(1e9*Math.random()>>>0);function iV(e){return k(e)?e:(e[ij]||(e[ij]=function(i){return e.handleEvent(i)}),e[ij])}function iH(){ia.call(this),this.J=new i_(this),this.wb=this,this.Ha=null}function iz(e,i){var n,r=e.Ha;if(r)for(n=[];r;r=r.Ha)n.push(r);if(e=e.wb,r=i.type||i,f(i))i=new iv(i,e);else if(i instanceof iv)i.target=i.target||e;else{var o=i;es(i=new iv(r,e),o)}if(o=!0,n)for(var a=n.length-1;!i.h&&0<=a;a--){var l=i.g=n[a];o=iq(l,r,!0,i)&&o}if(i.h||(o=iq(l=i.g=e,r,!0,i)&&o,i.h||(o=iq(l,r,!1,i)&&o)),n)for(a=0;!i.h&&a<n.length;a++)o=iq(l=i.g=n[a],r,!1,i)&&o;return o}function iq(e,i,n,r){if(!(i=e.J.a[String(i)]))return!0;i=i.concat();for(var o=!0,a=0;a<i.length;++a){var l=i[a];if(l&&!l.sa&&l.capture==n){var c=l.listener,u=l.La||l.src;l.Ia&&iS(e.J,l),o=!1!==c.call(u,r)&&o}}return o&&0!=r.qb}R(iH,ia),iH.prototype[iw]=!0,iH.prototype.Za=function(e){this.Ha=e},iH.prototype.removeEventListener=function(e,i,n,r){iN(this,e,i,n,r)},iH.prototype.o=function(){if(iH.K.o.call(this),this.J){var e,i=this.J;for(e in i.a){for(var n=i.a[e],r=0;r<n.length;r++)iI(n[r]);delete i.a[e],i.g--}}this.Ha=null};var iK={},iW=0;function i$(e,i){if(!e)throw Error("Event target element must be provided!");if(iK[e=iG(e)]&&iK[e].length)for(var n=0;n<iK[e].length;n++)iz(iK[e][n],i)}function iG(e){return void 0===e.a&&(e.a=iW,iW++),e.a}function iY(e){if(!e)throw Error("Event target element must be provided!");iH.call(this),this.a=e}function iX(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function iJ(e,i){this.h=e,this.j=i,this.g=0,this.a=null}function iQ(e,i){e.j(i),100>e.g&&(e.g++,i.next=e.a,e.a=i)}function iZ(){this.g=this.a=null}a(iY,iH),iY.prototype.N=function(){return this.a},iY.prototype.register=function(){var e=iG(this.N());iK[e]?V(iK[e],this)||iK[e].push(this):iK[e]=[this]},iJ.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var i0=new iJ(function(){return new i1},function(e){e.reset()});function i1(){this.next=this.g=this.a=null}function i2(e){h.setTimeout(function(){throw e},0)}function i4(e,i){ri||function(){if(h.Promise&&h.Promise.resolve){var e=h.Promise.resolve(void 0);ri=function(){e.then(i3)}}else ri=function(){!k(h.setImmediate)||h.Window&&h.Window.prototype&&!ez("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(rt||(rt=function(){var e=h.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ez("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var i=e.contentWindow;(e=i.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==i.location.protocol?"*":i.location.protocol+"//"+i.location.host;e=C(function(e){("*"==r||e.origin==r)&&e.data==n&&this.port1.onmessage()},this),i.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){i.postMessage(n,r)}}}),void 0!==e&&!ez("Trident")&&!ez("MSIE")){var i=new e,n={},r=n;return i.port1.onmessage=function(){if(d(n.next)){var e=(n=n.next).gb;n.gb=null,e()}},function(e){r.next={gb:e},r=r.next,i.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var i=document.createElement("SCRIPT");i.onreadystatechange=function(){i.onreadystatechange=null,i.parentNode.removeChild(i),i=null,e(),e=null},document.documentElement.appendChild(i)}:function(e){h.setTimeout(e,0)}}()),rt(i3)):h.setImmediate(i3)}}(),i5||(ri(),i5=!0),i6.add(e,i)}iZ.prototype.add=function(e,i){var n=i0.get();n.set(e,i),this.g?this.g.next=n:this.a=n,this.g=n},i1.prototype.set=function(e,i){this.a=e,this.g=i,this.next=null},i1.prototype.reset=function(){this.next=this.g=this.a=null};var i5=!1,i6=new iZ;function i3(){for(var e,i;e=null,i6.a&&(e=i6.a,i6.a=i6.a.next,i6.a||(i6.g=null),e.next=null),i=e;){try{i.a.call(i.g)}catch(e){i2(e)}iQ(i0,i)}i5=!1}function i9(e){if(this.a=i8,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,e!=m)try{var i=this;e.call(void 0,function(e){nl(i,i7,e)},function(e){if(!(e instanceof np))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}nl(i,ne,e)})}catch(e){nl(this,ne,e)}}var i8=0,i7=2,ne=3;function nt(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}nt.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var ni=new iJ(function(){return new nt},function(e){e.reset()});function nn(e,i,n){var r=ni.get();return r.s=e,r.g=i,r.j=n,r}function nr(e){if(e instanceof i9)return e;var i=new i9(m);return nl(i,i7,e),i}function no(e){return new i9(function(i,n){n(e)})}function ns(e,i){e.g||e.a!=i7&&e.a!=ne||nc(e),e.j?e.j.next=i:e.g=i,e.j=i}function na(e,i,n,r){var o=nn(null,null,null);return o.a=new i9(function(e,a){o.s=i?function(n){try{var o=i.call(r,n);e(o)}catch(e){a(e)}}:e,o.g=n?function(i){try{var o=n.call(r,i);!d(o)&&i instanceof np?a(i):e(o)}catch(e){a(e)}}:a}),o.a.h=e,ns(e,o),o.a}function nl(e,i,n){if(e.a==i8){e===n&&(i=ne,n=TypeError("Promise cannot resolve to itself")),e.a=1;e:{var r,o=n,a=e.hc,l=e.ic;if(o instanceof i9){ns(o,nn(a||m,l||null,e));var c=!0}else if(iX(o))o.then(a,l,e),c=!0;else{if(E(o))try{var u=o.then;if(k(u)){(function(e,i,n,r,o){function a(e){l||(l=!0,r.call(o,e))}var l=!1;try{i.call(e,function(e){l||(l=!0,n.call(o,e))},a)}catch(e){a(e)}})(o,u,a,l,e),c=!0;break e}}catch(i){l.call(e,i),c=!0;break e}c=!1}}c||(e.A=n,e.a=i,e.h=null,nc(e),i!=ne||n instanceof np||(r=n,e.s=!0,i4(function(){e.s&&nf.call(null,r)})))}}function nc(e){e.i||(e.i=!0,i4(e.Hb,e))}function nu(e){var i=null;return e.g&&(i=e.g,e.g=i.next,i.next=null),e.g||(e.j=null),i}function nh(e,i,n,r){if(n==ne&&i.g&&!i.h)for(;e&&e.s;e=e.h)e.s=!1;if(i.a)i.a.h=null,nd(i,n,r);else try{i.h?i.s.call(i.j):nd(i,n,r)}catch(e){nf.call(null,e)}iQ(ni,i)}function nd(e,i,n){i==i7?e.s.call(e.j,n):e.g&&e.g.call(e.j,n)}i9.prototype.then=function(e,i,n){return na(this,k(e)?e:null,k(i)?i:null,n)},i9.prototype.$goog_Thenable=!0,(e=i9.prototype).fc=function(e,i){return(e=nn(e,e,i)).h=!0,ns(this,e),this},e.Ca=function(e,i){return na(this,null,e,i)},e.cancel=function(e){this.a==i8&&i4(function(){(function e(i,n){if(i.a==i8){if(i.h){var r=i.h;if(r.g){for(var o=0,a=null,l=null,c=r.g;c&&(c.h||(o++,c.a==i&&(a=c),!(a&&1<o)));c=c.next)a||(l=c);a&&(r.a==i8&&1==o?e(r,n):(l?((o=l).next==r.j&&(r.j=o),o.next=o.next.next):nu(r),nh(r,a,ne,n)))}i.h=null}else nl(i,ne,n)}})(this,new np(e))},this)},e.hc=function(e){this.a=i8,nl(this,i7,e)},e.ic=function(e){this.a=i8,nl(this,ne,e)},e.Hb=function(){for(var e;e=nu(this);)nh(this,e,this.a,this.A);this.i=!1};var nf=i2;function np(e){N.call(this,e)}function ng(e,i,n){i||(i={}),n=n||window;var r=e instanceof tr?e:ta(void 0!==e.href?e.href:String(e));e=i.target||e.target;var o=[];for(a in i)switch(a){case"width":case"height":case"top":case"left":o.push(a+"="+i[a]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(a+"="+(i[a]?1:0))}var a=o.join(",");return(ez("iPhone")&&!ez("iPod")&&!ez("iPad")||ez("iPad")||ez("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(a=n.document.createElement("A"),r=r instanceof tr?r:tl(r),a.href=to(r),a.setAttribute("target",e),i.noreferrer&&a.setAttribute("rel","noreferrer"),(i=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),a.dispatchEvent(i),n={}):i.noreferrer?(n=n.open("",e,a),i=to(r).toString(),n&&(eY&&-1!=i.indexOf(";")&&(i="'"+i.replace(/'/g,"%27")+"'"),n.opener=null,i=tm('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+et(i)+'">',null),n.document.write(tp(i)),n.document.close())):(n=n.open(to(r).toString(),e,a))&&i.noopener&&(n.opener=null),n}function nm(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(e){}return!1}function nv(e){ng(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function nb(e,i){if(null==(e=E(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error(i||"Cannot find element.");return e}function ny(){return window.location.href}function nw(e){this.s=[],this.T=nO,this.O=e||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function nk(e,i,n){e.a=!0,e.h=n,e.j=!i,nS(e)}function nE(e){if(e.a){if(!e.J)throw new nT(e);e.J=!1}}function nI(e,i,n){e.s.push([i,n,void 0]),e.a&&nS(e)}function n_(e){return j(e.s,function(e){return k(e[1])})}function nS(e){if(e.i&&e.a&&n_(e)){var i=e.i,n=nA[i];n&&(h.clearTimeout(n.a),delete nA[i]),e.i=0}e.g&&(e.g.C--,delete e.g),i=e.h;for(var r=n=!1;e.s.length&&!e.A;){var o=e.s.shift(),a=o[0],l=o[1];if(o=o[2],a=e.j?l:a)try{var c=a.call(o||e.O,i);d(c)&&(e.j=e.j&&(c==i||c instanceof Error),e.h=i=c),(iX(i)||"function"==typeof h.Promise&&i instanceof h.Promise)&&(r=!0,e.A=!0)}catch(r){i=r,e.j=!0,n_(e)||(n=!0)}}e.h=i,r&&(c=C(e.L,e,!0),r=C(e.L,e,!1),i instanceof nw?(nI(i,c,r),i.l=!0):i.then(c,r)),n&&(nA[(i=new nx(i)).a]=i,e.i=i.a)}function nT(){N.call(this)}function nC(){N.call(this)}function nx(e){this.a=h.setTimeout(C(this.h,this),0),this.g=e}R(np,N),np.prototype.name="cancel",nw.prototype.cancel=function(e){if(this.a)this.h instanceof nw&&this.h.cancel();else{if(this.g){var i=this.g;delete this.g,e?i.cancel(e):(i.C--,0>=i.C&&i.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(e=new nC(this),nE(this),nk(this,!1,e))}},nw.prototype.L=function(e,i){this.A=!1,nk(this,e,i)},nw.prototype.callback=function(e){nE(this),nk(this,!0,e)},nw.prototype.then=function(e,i,n){var r,o,a=new i9(function(e,i){r=e,o=i});return nI(this,r,function(e){e instanceof nC?a.cancel():o(e)}),a.then(e,i,n)},nw.prototype.$goog_Thenable=!0,R(nT,N),nT.prototype.message="Deferred has already fired",nT.prototype.name="AlreadyCalledError",R(nC,N),nC.prototype.message="Deferred was canceled",nC.prototype.name="CanceledError",nx.prototype.h=function(){throw delete nA[this.a],this.g};var nA={};function nO(){if(this&&this.rb){var e=this.rb;e&&"SCRIPT"==e.tagName&&nL(e,!0,this.sb)}}function nL(e,i,n){null!=n&&h.clearTimeout(n),e.onload=m,e.onerror=m,e.onreadystatechange=m,i&&window.setTimeout(function(){tx(e)},0)}function nR(e,i){var n="Jsloader error (code #"+e+")";i&&(n+=": "+i),N.call(this,n),this.code=e}function nN(){return h.google&&h.google.accounts&&h.google.accounts.id||null}function nP(e){this.a=e||nN(),this.h=!1,this.g=null}R(nR,N),nP.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},v(nP);var nD=new e8(te,"https://accounts.google.com/gsi/client");function nM(){this.a=null}function nB(e,i){this.a=e,this.g=i||function(e){throw e}}function nF(e,i,n){this.reset(e,i,n,void 0,void 0)}nM.prototype.load=function(){var e,i,n,r=this;if(this.a)return this.a;var o=((e=nD)instanceof e8&&e.constructor===e8&&e.g===e7?e=e.a:(D("expected object of type Const, got '"+e+"'"),e="type_error:Const"),(i=new tt).a=e,i);return nN()?nr():this.a=(n=null,new i9(function(e){"complete"==h.document.readyState?e():iR(window,"load",n=function(){e()})}).Ca(function(e){throw iN(window,"load",n),e})).then(function(){if(!nN())return new i9(function(e,i){var n,a,l,c,u,d,f,m,v,b=setTimeout(function(){r.a=null,i(Error("Network error!"))},1e4);h.onGoogleLibraryLoad=function(){clearTimeout(b),e()},nr((l=(a={}).document||document,c=ti(o).toString(),f=new nw(d={rb:u=document.createElement("SCRIPT"),sb:void 0}),m=null,0<(v=null!=a.timeout?a.timeout:5e3)&&(m=window.setTimeout(function(){nL(u,!0);var e=new nR(1,"Timeout reached for loading script "+c);nE(f),nk(f,!1,e)},v),d.sb=m),u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(nL(u,a.xc||!1,m),f.callback(null))},u.onerror=function(){nL(u,!0,m);var e=new nR(0,"Error while loading script "+c);nE(f),nk(f,!1,e)},es(d=a.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ei(d,function(e,i){e&&"object"==typeof e&&e.ma&&(e=e.ka()),"style"==i?u.style.cssText=e:"class"==i?u.className=e:"for"==i?u.htmlFor=e:tT.hasOwnProperty(i)?u.setAttribute(tT[i],e):0==i.lastIndexOf("aria-",0)||0==i.lastIndexOf("data-",0)?u.setAttribute(i,e):u[i]=e}),function(e,i){if(e.src=ti(i),null===g)t:{if((i=(i=h.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&p.test(i)){g=i;break t}g=""}(i=g)&&e.setAttribute("nonce",i)}(u,o),((n=(l||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:l.documentElement).appendChild(u),f)).then(function(){nN()&&e()}).Ca(function(e){clearTimeout(b),r.a=null,i(e)})})})},v(nM),nB.prototype.confirm=function(e){return nr(this.a.confirm(e)).Ca(this.g)},nF.prototype.a=null;var nU=0;function nj(e){this.s=e,this.a=this.h=this.j=this.g=null}function nV(e,i){this.name=e,this.value=i}nF.prototype.reset=function(e,i,n,r,o){"number"==typeof o||nU++,this.h=r||O(),this.j=e,this.s=i,this.g=n,delete this.a},nV.prototype.toString=function(){return this.name};var nH=new nV("SEVERE",1e3),nz=new nV("WARNING",900),nq=new nV("CONFIG",700);nj.prototype.log=function(e,i,n){if(e.value>=function e(i){return i.j?i.j:i.g?e(i.g):(D("Root logger has no level set."),null)}(this).value)for(k(i)&&(i=i()),e=new nF(e,String(i),this.s),n&&(e.a=n),n=this;n;){var r=n,o=e;if(r.a)for(var a=0;i=r.a[a];a++)i(o);n=n.g}};var nK={},nW=null;function n$(){nW||(nW=new nj(""),nK[""]=nW,nW.j=nq)}function nG(){this.a=O()}var nY=null;function nX(e){this.j=e||"",nY||(nY=new nG),this.s=nY}function nJ(e){return 10>e?"0"+e:String(e)}function nQ(e){nX.call(this,e)}function nZ(){this.s=C(this.h,this),this.a=new nQ,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}nG.prototype.set=function(e){this.a=e},nG.prototype.reset=function(){this.set(O())},nG.prototype.get=function(){return this.a},nX.prototype.a=!0,nX.prototype.g=!0,nX.prototype.h=!1,R(nQ,nX),nZ.prototype.h=function(e){if(!this.j[e.g]){var i,n,r=function(e,i){var n=[];if(n.push(e.j," "),e.g){var r=new Date(i.h);n.push("[",nJ(r.getFullYear()-2e3)+nJ(r.getMonth()+1)+nJ(r.getDate())+" "+nJ(r.getHours())+":"+nJ(r.getMinutes())+":"+nJ(r.getSeconds())+"."+nJ(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(e,i){i=(e=(e.h-i)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)i=" "+i;return i}(i,e.s.get()),"s] "),n.push("[",i.g,"] "),n.push(i.s),e.h&&(i=i.a)&&n.push("\n",i instanceof Error?i.message:i.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);n0&&(i=function(e){if(e){if(e.value>=nH.value)return"error";if(e.value>=nz.value)return"warn";if(e.value>=nq.value)return"log"}return"debug"}(e.j),n=e.a,n0[i]?n0[i](r,n||""):n0.log(r,n||""))}};var n0=h.console;function n1(e,i){var n=rn;n&&n.log(nH,e,i)}rn=function e(i){if(n$(),!(n=nK[i])){n=new nj(i);var n,r=i.lastIndexOf("."),o=i.substr(r+1);(r=e(i.substr(0,r))).h||(r.h={}),r.h[o]=n,n.g=r,nK[i]=n}return n}("firebaseui");var n2=new nZ;if(1!=n2.g){n$(),rr=nW;var n4,n5,n6,n3,n9,n8,n7,re,rt,ri,rn,rr,ro=n2.s;rr.a||(rr.a=[]),rr.a.push(ro),n2.g=!0}function rs(e){var i=rn;i&&i.log(nz,e,void 0)}function ra(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function rl(e){e=(e.a.cookie||"").split(";");for(var i,n,r=[],o=[],a=0;a<e.length;a++)-1==(i=(n=W(e[a])).indexOf("="))?(r.push(""),o.push(n)):(r.push(n.substring(0,i)),o.push(n.substring(i+1)));return{keys:r,values:o}}(e=ra.prototype).set=function(e,i,n,r,o,a){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(i))throw Error('Invalid cookie value "'+i+'"');d(n)||(n=-1),o=o?";domain="+o:"",r=r?";path="+r:"",a=a?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(O()+1e3*n).toUTCString(),this.a.cookie=e+"="+i+o+r+n+a},e.get=function(e,i){for(var n,r=e+"=",o=(this.a.cookie||"").split(";"),a=0;a<o.length;a++){if(0==(n=W(o[a])).lastIndexOf(r,0))return n.substr(r.length);if(n==e)return""}return i},e.ja=function(){return rl(this).keys},e.la=function(){return rl(this).values},e.clear=function(){for(var e=rl(this).keys,i=e.length-1;0<=i;i--){var n=e[i];this.get(n),this.set(n,"",0,void 0,void 0)}};var rc=new ra;function ru(){}function rh(e,i,n,r){this.h=null!=e?e:-1,this.g=i||null,this.a=n||null,this.j=!!r}function rd(e,i){this.g=e,this.a=i||null}function rf(e){return{email:e.g,credential:e.a&&e.a.toJSON()}}function rp(e){if(e&&e.email){var i=e.credential&&pu.auth.AuthCredential.fromJSON(e.credential);return new rd(e.email,i)}return null}function rg(e){this.a=e||null}function rm(e){for(var i=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);255<o&&(i[n++]=255&o,o>>=8),i[n++]=o}return i}function rv(e){for(this.i=e,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(rb*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.i[4*e],this.i[4*e+1],this.i[4*e+2],this.i[4*e+3]];var i=[,,,,];for(e=this.g;e<rb*(this.j+1);e++){if(i[0]=this.a[e-1][0],i[1]=this.a[e-1][1],i[2]=this.a[e-1][2],i[3]=this.a[e-1][3],0==e%this.g){var n=i[0];i[0]=i[1],i[1]=i[2],i[2]=i[3],i[3]=n,rS(i),i[0]^=rx[e/this.g][0],i[1]^=rx[e/this.g][1],i[2]^=rx[e/this.g][2],i[3]^=rx[e/this.g][3]}else 6<this.g&&4==e%this.g&&rS(i);this.a[e]=[,,,,],this.a[e][0]=this.a[e-this.g][0]^i[0],this.a[e][1]=this.a[e-this.g][1]^i[1],this.a[e][2]=this.a[e-this.g][2]^i[2],this.a[e][3]=this.a[e-this.g][3]^i[3]}}a(rh,ru),rh.prototype.set=function(e,i){rc.set(e,i,this.h,this.g,this.a,this.j)},rh.prototype.get=function(e){return rc.get(e)||null},rh.prototype.ra=function(e){var i=this.g,n=this.a;rc.get(e),rc.set(e,"",0,i,n)},rv.prototype.A=16;var rb=rv.prototype.A/4;function ry(e,i){for(var n,r=0;r<rb;r++)for(var o=0;4>o;o++)n=i[n=4*o+r],e.h[r][o]=n}function rw(e){for(var i=[],n=0;n<rb;n++)for(var r=0;4>r;r++)i[4*r+n]=e.h[n][r];return i}function rk(e,i){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]^=e.a[4*i+r][n]}function rE(e,i){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]=i[e.h[n][r]]}function rI(e){for(var i=1;4>i;i++)for(var n=0;4>n;n++)e.s[i][n]=e.h[i][n];for(i=1;4>i;i++)for(n=0;4>n;n++)e.h[i][n]=e.s[i][(n+i)%rb]}function r_(e){for(var i=1;4>i;i++)for(var n=0;4>n;n++)e.s[i][(n+i)%rb]=e.h[i][n];for(i=1;4>i;i++)for(n=0;4>n;n++)e.h[i][n]=e.s[i][n]}function rS(e){e[0]=rT[e[0]],e[1]=rT[e[1]],e[2]=rT[e[2]],e[3]=rT[e[3]]}var rT=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rC=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],rx=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],rA=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],rO=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],rL=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],rR=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],rN=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],rP=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function rD(e,i){e=new rv(rB(e)),i=rm(i);for(var n,r=i.splice(0,16),o="";r.length;){n=16-r.length;for(var a=0;a<n;a++)r.push(0);for(ry(n=e,r),rk(n,0),r=1;r<n.j;++r){rE(n,rT),rI(n),a=n.h;for(var l=n.s[0],c=0;4>c;c++)l[0]=a[0][c],l[1]=a[1][c],l[2]=a[2][c],l[3]=a[3][c],a[0][c]=rA[l[0]]^rO[l[1]]^l[2]^l[3],a[1][c]=l[0]^rA[l[1]]^rO[l[2]]^l[3],a[2][c]=l[0]^l[1]^rA[l[2]]^rO[l[3]],a[3][c]=rO[l[0]]^l[1]^l[2]^rA[l[3]];rk(n,r)}rE(n,rT),rI(n),rk(n,n.j),o+=U(rw(n),function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join(""),r=i.splice(0,16)}return o}function rM(e,i){e=new rv(rB(e));for(var n=[],r=0;r<i.length;r+=2)n.push(parseInt(i.substring(r,r+2),16));var o=n.splice(0,16);for(i="";o.length;){for(ry(r=e,o),rk(r,r.j),o=1;o<r.j;++o){r_(r),rE(r,rC),rk(r,r.j-o);for(var a=r.h,l=r.s[0],c=0;4>c;c++)l[0]=a[0][c],l[1]=a[1][c],l[2]=a[2][c],l[3]=a[3][c],a[0][c]=rP[l[0]]^rR[l[1]]^rN[l[2]]^rL[l[3]],a[1][c]=rL[l[0]]^rP[l[1]]^rR[l[2]]^rN[l[3]],a[2][c]=rN[l[0]]^rL[l[1]]^rP[l[2]]^rR[l[3]],a[3][c]=rR[l[0]]^rN[l[1]]^rL[l[2]]^rP[l[3]]}if(r_(r),rE(r,rC),rk(r,0),8192>=(r=rw(r)).length)r=String.fromCharCode.apply(null,r);else{for(a=0,o="";a<r.length;a+=8192)o+=String.fromCharCode.apply(null,function(e,i,n){return 2>=arguments.length?Array.prototype.slice.call(e,i):Array.prototype.slice.call(e,i,n)}(r,a,a+8192));r=o}i+=r,o=n.splice(0,16)}return i.replace(/(\x00)+$/,"")}function rB(e){e=rm(e.substring(0,32));for(var i=32-e.length,n=0;n<i;n++)e.push(0);return e}function rF(e){var i=[];return function e(i,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(y(n)){var o=n;n=o.length,r.push("[");for(var a="",l=0;l<n;l++)r.push(a),e(i,o[l],r),a=",";r.push("]");return}if(n instanceof String||n instanceof Number||n instanceof Boolean)n=n.valueOf();else{for(o in r.push("{"),a="",n)Object.prototype.hasOwnProperty.call(n,o)&&"function"!=typeof(l=n[o])&&(r.push(a),rH(o,r),r.push(":"),e(i,l,r),a=",");r.push("}");return}}switch(typeof n){case"string":rH(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rU,e,i),i.join("")}function rU(){}var rj={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},rV=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function rH(e,i){i.push('"',e.replace(rV,function(e){var i=rj[e];return i||(i="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),rj[e]=i),i}),'"')}function rz(e){this.a=e}function rq(){}function rK(e){this.a=e}function rW(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(e){return!1}}function r$(){var e=null;try{e=window.localStorage||null}catch(e){}this.a=e}function rG(){var e=null;try{e=window.sessionStorage||null}catch(e){}this.a=e}function rY(e,i){this.g=e,this.a=i+"::"}rz.prototype.set=function(e,i){d(i)?this.a.set(e,rF(i)):this.a.ra(e)},rz.prototype.get=function(e){try{var i=this.a.get(e)}catch(e){return}if(null!==i)try{return JSON.parse(i)}catch(e){throw"Storage: Invalid value was encountered"}},R(rq,ru),rq.prototype.clear=function(){var e=function(e){if(w(e))return K(e);e=ec(e);var i=[];return function(e,i){if(w(e))try{B(e,i,void 0)}catch(e){if(e!==ea)throw e}else{e=ec(e);try{for(;;)i.call(void 0,e.next(),void 0,e)}catch(e){if(e!==ea)throw e}}}(e,function(e){i.push(e)}),i}(this.ha(!0)),i=this;B(e,function(e){i.ra(e)})},R(rK,rq),(e=rK.prototype).set=function(e,i){try{this.a.setItem(e,i)}catch(e){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},e.get=function(e){if(!f(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},e.ra=function(e){this.a.removeItem(e)},e.ha=function(e){var i=0,n=this.a,r=new el;return r.next=function(){if(i>=n.length)throw ea;var r=n.key(i++);if(e)return r;if(!f(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},e.clear=function(){this.a.clear()},e.key=function(e){return this.a.key(e)},R(r$,rK),R(rG,rK),R(rY,rq),rY.prototype.set=function(e,i){this.g.set(this.a+e,i)},rY.prototype.get=function(e){return this.g.get(this.a+e)},rY.prototype.ra=function(e){this.g.ra(this.a+e)},rY.prototype.ha=function(e){var i=this.g.ha(!0),n=this,r=new el;return r.next=function(){for(var r=i.next();r.substr(0,n.a.length)!=n.a;)r=i.next();return e?r.substr(n.a.length):n.g.get(r)},r},rW(new r$);var rX=new rG,rJ=new rz(rW(rX)?new rY(rX,"firebaseui"):null),rQ={name:"pendingEmailCredential",storage:rJ},rZ={name:"redirectStatus",storage:rJ},r0={name:"redirectUrl",storage:rJ},r1={name:"emailForSignIn",storage:new rz(new rh(3600,"/"))},r2={name:"pendingEncryptedCredential",storage:new rz(new rh(3600,"/"))};function r4(e,i){return e.storage.get(i?e.name+":"+i:e.name)}function r5(e,i){e.storage.a.ra(i?e.name+":"+i:e.name)}function r6(e,i,n){e.storage.set(n?e.name+":"+n:e.name,i)}function r3(e){return r4(r0,e)||null}function r9(e){return rp(e=r4(rQ,e)||null)}function r8(e){r5(rQ,e)}function r7(e){return(e=r4(rZ,e)||null)&&void 0!==e.tenantId?new rg(e.tenantId):null}function oe(){this.W={}}function ot(e,i,n){if(i.toLowerCase() in e.W)throw Error("Configuration "+i+" has already been defined.");e.W[i.toLowerCase()]=n}function oi(e,i,n){if(!(i.toLowerCase() in e.W))throw Error("Configuration "+i+" is not defined.");e.W[i.toLowerCase()]=n}function on(e,i){if(!(e=e.get(i)))throw Error("Configuration "+i+" is required.");return e}function or(){this.g=void 0,this.a={}}function oo(e,i,n,r){for(var o=0;o<i.length;o++){var a=i.charAt(o);e.a[a]||(e.a[a]=new or),e=e.a[a]}if(r&&void 0!==e.g)throw Error('The collection already contains the key "'+i+'"');e.g=n}function os(e){for(this.a=e,this.g=new or,e=0;e<this.a.length;e++){var i=this.g.get("+"+this.a[e].b);i?i.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function oa(e,i){e=e.g;var n={},r=0;for(void 0!==e.g&&(n[r]=e.g);r<i.length;r++){var o=i.charAt(r);if(!(o in e.a))break;void 0!==(e=e.a[o]).g&&(n[r]=e.g)}for(var a in n)if(n.hasOwnProperty(a))return n[a];return[]}function ol(e){for(var i=0;i<od.length;i++)if(od[i].c===e)return od[i];return null}function oc(e){e=e.toUpperCase();for(var i=[],n=0;n<od.length;n++)od[n].f===e&&i.push(od[n]);return i}function ou(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var i=[],n=0;n<od.length;n++)od[n].b==e&&i.push(od[n]);e=i}else e=oc(e);return e}function oh(e){e.sort(function(e,i){return e.name.localeCompare(i.name,"en")})}oe.prototype.get=function(e){if(!(e.toLowerCase() in this.W))throw Error("Configuration "+e+" is not defined.");return this.W[e.toLowerCase()]},(e=or.prototype).set=function(e,i){oo(this,e,i,!1)},e.add=function(e,i){oo(this,e,i,!0)},e.get=function(e){e:{for(var i=this,n=0;n<e.length;n++)if(!(i=i.a[e.charAt(n)])){e=void 0;break e}e=i}return e?e.g:void 0},e.la=function(){var e=[];return function e(i,n){for(var r in void 0!==i.g&&n.push(i.g),i.a)e(i.a[r],n)}(this,e),e},e.ja=function(){var e=[];return function e(i,n,r){for(var o in void 0!==i.g&&r.push(n),i.a)e(i.a[o],n+o,r)}(this,"",e),e},e.clear=function(){this.a={},this.g=void 0};var od=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Cte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Runion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthlemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"So Tom and Prncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];oh(od);var of=new os(od);function op(e,i){this.a=e,this.Aa=i}function og(e){var i=oa(of,e=W(e));return 0<i.length?new op("1"==i[0].b?"1-US-0":i[0].c,W(e.substr(i[0].b.length+1))):null}function om(e){var i=ol(e.a);if(!i)throw Error("Country ID "+e.a+" not found.");return"+"+i.b+e.Aa}function ov(e,i){for(var n=0;n<e.length;n++)if(!V(ob,e[n])&&(null!==oy&&e[n]in oy||V(i,e[n])))return e[n];return null}var ob=["emailLink","password","phone"],oy={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function ow(){this.a=new oe,ot(this.a,"autoUpgradeAnonymousUsers"),ot(this.a,"callbacks"),ot(this.a,"credentialHelper",oY),ot(this.a,"immediateFederatedRedirect",!1),ot(this.a,"popupMode",!1),ot(this.a,"privacyPolicyUrl"),ot(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),ot(this.a,"queryParameterForWidgetMode","mode"),ot(this.a,"signInFlow"),ot(this.a,"signInOptions"),ot(this.a,"signInSuccessUrl"),ot(this.a,"siteName"),ot(this.a,"tosUrl"),ot(this.a,"widgetUrl"),ot(this.a,"adminRestrictedOperation")}function ok(e){var i=!!e.a.get("autoUpgradeAnonymousUsers");return i&&!oH(e)&&n1('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),i}function oE(e){e=e.a.get("signInOptions")||[];for(var i=[],n=0;n<e.length;n++){var r=e[n];(r=E(r)?r:{provider:r}).provider&&i.push(r)}return i}function oI(e,i){e=oE(e);for(var n=0;n<e.length;n++)if(e[n].provider===i)return e[n];return null}function o_(e){return oE(e).map(function(e){return e.provider})}function oS(e,i){e=oT(e);for(var n=0;n<e.length;n++)if(e[n].providerId===i)return e[n];return null}function oT(e){return oE(e).map(function(e){if(oy[e.provider]||V(o0,e.provider)){for(var i in e={providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?to(ta(e.iconUrl)).toString():null})null===e[i]&&delete e[i];return e}return{providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?to(ta(e.iconUrl)).toString():null,Ob:e.loginHintKey||null}})}function oC(e){var i,n=oI(e,pu.auth.GoogleAuthProvider.PROVIDER_ID);if(i=n&&n.clientId){e:{if("http:"===(window.location&&window.location.protocol)||"https:"===(window.location&&window.location.protocol)){for(r in e=e.a.get("credentialHelper"),oX)if(oX[r]===e){var r=oX[r];break e}}r=oY}i=r===oG}return i&&n.clientId||null}function ox(e){return!!((e=oI(e,pu.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.status)}function oA(e){return!(!(e=e.a.get("adminRestrictedOperation")||null)||!e.status)}function oO(e,i){return Array.isArray(e=(e=oI(e,i))&&e.scopes)?e:[]}function oL(e,i){return E(e=(e=oI(e,i))&&e.customParameters)?(e=en(e),i===pu.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,i===pu.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function oR(e){if(!(e=oI(e,pu.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var i=e.whitelistedCountries,n=e.blacklistedCountries;if(void 0!==i&&(!Array.isArray(i)||0==i.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(i&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!i&&!n)return od;if(e=[],i){n={};for(var r=0;r<i.length;r++)for(var o=ou(i[r]),a=0;a<o.length;a++)n[o[a].c]=o[a];for(var l in n)n.hasOwnProperty(l)&&e.push(n[l])}else{for(i=0,l={};i<n.length;i++)for(o=ou(n[i]),r=0;r<o.length;r++)l[o[r].c]=o[r];for(o=0;o<od.length;o++)null!==l&&od[o].c in l||e.push(od[o])}return e}function oN(e){return on(e.a,"queryParameterForWidgetMode")}function oP(e){var i=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,i&&!e&&rs("Privacy Policy URL is missing, the link will not be displayed."),i&&e){if("function"==typeof i)return i;if("string"==typeof i)return function(){nv(i)}}return null}function oD(e){var i=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!i&&rs("Term of Service URL is missing, the link will not be displayed."),i&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){nv(n)}}return null}function oM(e){return!(e=oI(e,pu.auth.EmailAuthProvider.PROVIDER_ID))||void 0===e.requireDisplayName||!!e.requireDisplayName}function oB(e){return!(!(e=oI(e,pu.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==pu.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function oF(e){var i=!!e.a.get("immediateFederatedRedirect"),n=o_(e);return e=oU(e),i&&1==n.length&&!V(ob,n[0])&&e==oJ}function oU(e){for(var i in e=e.a.get("signInFlow"),oQ)if(oQ[i]==e)return oQ[i];return oJ}function oj(e){return oz(e).signInSuccess||null}function oV(e){return oz(e).signInSuccessWithAuthResult||null}function oH(e){return oz(e).signInFailure||null}function oz(e){return e.a.get("callbacks")||{}}var oq,oK,oW,o$,oG="googleyolo",oY="none",oX={nc:oG,NONE:oY},oJ="redirect",oQ={qc:"popup",rc:oJ},oZ={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},o0=["anonymous"],o1=["sitekey","tabindex","callback","expired-callback"],o2={};function o4(e,i,n,r){o2[e].apply(null,Array.prototype.slice.call(arguments,1))}function o5(e){return e.classList?e.classList:f(e=e.className)&&e.match(/\S+/g)||[]}function o6(e,i){return e.classList?e.classList.contains(i):V(o5(e),i)}function o3(e,i){e.classList?e.classList.add(i):o6(e,i)||(e.className+=0<e.className.length?" "+i:i)}function o9(e,i){e.classList?e.classList.remove(i):o6(e,i)&&(e.className=F(o5(e),function(e){return e!=i}).join(" "))}function o8(e){var i=e.type;switch(f(i)&&i.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(i=e.selectedIndex)?e.options[i].value:null;case"select-multiple":i=[];for(var n,r=0;n=e.options[r];r++)n.selected&&i.push(n.value);return i.length?i:null;default:return null!=e.value?e.value:null}}function o7(e,i){var n=e.type;switch(f(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=i;break;case"select-one":if(e.selectedIndex=-1,f(i)){for(var r=0;n=e.options[r];r++)if(n.value==i){n.selected=!0;break}}break;case"select-multiple":for(f(i)&&(i=[i]),r=0;n=e.options[r];r++)if(n.selected=!1,i)for(var o,a=0;o=i[a];a++)n.value==o&&(n.selected=!0);break;default:e.value=null!=i?i:""}}function se(e,i,n,r,o,a){if(eJ&&!e3("525"))return!0;if(eZ&&o)return st(e);if(o&&!r)return!1;if(!eX){"number"==typeof i&&(i=si(i));var l=17==i||18==i||eZ&&91==i;if((!n||eZ)&&l||eZ&&16==i&&(r||a))return!1}if((eJ||eG)&&r&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(e$&&r&&i==e)return!1;switch(e){case 13:return!eX||!a&&!o&&!(n&&r);case 27:return!(eJ||eG||eX)}return(!eX||!r&&!o&&!a)&&st(e)}function st(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(eJ||eG)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return eX;default:return!1}}function si(e){return eX?e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e):eZ&&eJ&&93===e&&(e=91),e}function sn(e){iH.call(this),this.a=e,iO(e,"keydown",this.g,!1,this),iO(e,"click",this.h,!1,this)}function sr(e,i){var n=new ss(i);if(iz(e,n)){n=new so(i);try{iz(e,n)}finally{i.stopPropagation()}}}function so(e){ib.call(this,e.a),this.type="action"}function ss(e){ib.call(this,e.a),this.type="beforeaction"}function sa(e){iH.call(this),this.a=e,e=e$?"focusout":"blur",this.g=iO(this.a,e$?"focusin":"focus",this,!e$),this.h=iO(this.a,e,this,!e$)}function sl(e,i){iH.call(this),this.g=e||1,this.a=i||h,this.h=C(this.gc,this),this.j=O()}function sc(e){e.Ka=!1,e.aa&&(e.a.clearTimeout(e.aa),e.aa=null)}function su(e){ia.call(this),this.g=e,this.a={}}R(sn,iH),sn.prototype.g=function(e){(13==e.keyCode||eJ&&3==e.keyCode)&&sr(this,e)},sn.prototype.h=function(e){sr(this,e)},sn.prototype.o=function(){sn.K.o.call(this),iN(this.a,"keydown",this.g,!1,this),iN(this.a,"click",this.h,!1,this),delete this.a},R(so,ib),R(ss,ib),R(sa,iH),sa.prototype.handleEvent=function(e){var i=new ib(e.a);i.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",iz(this,i)},sa.prototype.o=function(){sa.K.o.call(this),iP(this.g),iP(this.h),delete this.a},R(sl,iH),(e=sl.prototype).Ka=!1,e.aa=null,e.gc=function(){if(this.Ka){var e=O()-this.j;0<e&&e<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-e):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),iz(this,"tick"),this.Ka&&(sc(this),this.start()))}},e.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=O())},e.o=function(){sl.K.o.call(this),sc(this),delete this.a},R(su,ia);var sh=[];function sd(e,i,n,r){y(n)||(n&&(sh[0]=n.toString()),n=sh);for(var o=0;o<n.length;o++){var a=iO(i,n[o],r||e.handleEvent,!1,e.g||e);if(!a)break;e.a[a.key]=a}}function sf(e){ei(e.a,function(e,i){this.a.hasOwnProperty(i)&&iP(e)},e),e.a={}}function sp(e){iH.call(this),this.a=null,this.g=e,e=e$||eG||eJ&&!e3("531")&&"TEXTAREA"==e.tagName,this.h=new su(this),sd(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function sg(e){null!=e.a&&(h.clearTimeout(e.a),e.a=null)}function sm(e){return(e=new ib(e.a)).type="input",e}function sv(e,i){iH.call(this),e&&(this.Oa&&sE(this),this.qa=e,this.Na=iO(this.qa,"keypress",this,i),this.Ya=iO(this.qa,"keydown",this.Jb,i,this),this.Oa=iO(this.qa,"keyup",this.Kb,i,this))}su.prototype.o=function(){su.K.o.call(this),sf(this)},su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R(sp,iH),sp.prototype.handleEvent=function(e){if("input"==e.type)e$&&e3(10)&&0==e.keyCode&&0==e.j||(sg(this),iz(this,sm(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(st(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!eX;default:return 166>e.keyCode||183<e.keyCode}}(e)){var i="keydown"==e.type?this.g.value:null;e$&&229==e.keyCode&&(i=null);var n=sm(e);sg(this),this.a=function(e,i){if(k(e))i&&(e=C(e,i));else if(e&&"function"==typeof e.handleEvent)e=C(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(0)?-1:h.setTimeout(e,0)}(function(){this.a=null,this.g.value!=i&&iz(this,n)},this)}},sp.prototype.o=function(){sp.K.o.call(this),this.h.m(),sg(this),delete this.g},R(sv,iH),(e=sv.prototype).qa=null,e.Na=null,e.Ya=null,e.Oa=null,e.R=-1,e.X=-1,e.Ua=!1;var sb={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},sy={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},sw=!eJ||e3("525"),sk=eZ&&eX;function sE(e){e.Na&&(iP(e.Na),iP(e.Ya),iP(e.Oa),e.Na=null,e.Ya=null,e.Oa=null),e.qa=null,e.R=-1,e.X=-1}function sI(e,i,n,r){ib.call(this,r),this.type="key",this.keyCode=e,this.j=i,this.repeat=n}function s_(e,i,n,r){this.top=e,this.right=i,this.bottom=n,this.left=r}function sS(e,i){var n=tA(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[i]||e.getPropertyValue(i))||""}function sT(e){try{var i=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return e$&&e.ownerDocument.body&&(e=e.ownerDocument,i.left-=e.documentElement.clientLeft+e.body.clientLeft,i.top-=e.documentElement.clientTop+e.body.clientTop),i}function sC(e){var i=tA(e),n=new tw(0,0),r=i?tA(i):document;return e==(r=!e$||9<=Number(re)||"CSS1Compat"==tE(r).a.compatMode?r.documentElement:r.body)||(e=sT(e),i=tC(r=tE(i).a),r=r.parentWindow||r.defaultView,i=e$&&e3("10")&&r.pageYOffset!=i.scrollTop?new tw(i.scrollLeft,i.scrollTop):new tw(r.pageXOffset||i.scrollLeft,r.pageYOffset||i.scrollTop),n.a=e.left+i.a,n.g=e.top+i.g),n}(e=sv.prototype).Jb=function(e){(eJ||eG)&&(17==this.R&&!e.ctrlKey||18==this.R&&!e.altKey||eZ&&91==this.R&&!e.metaKey)&&(this.X=this.R=-1),-1==this.R&&(e.ctrlKey&&17!=e.keyCode?this.R=17:e.altKey&&18!=e.keyCode?this.R=18:e.metaKey&&91!=e.keyCode&&(this.R=91)),sw&&!se(e.keyCode,this.R,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.X=si(e.keyCode),sk&&(this.Ua=e.altKey))},e.Kb=function(e){this.X=this.R=-1,this.Ua=e.altKey},e.handleEvent=function(e){var i=e.a,n=i.altKey;if(e$&&"keypress"==e.type)var r=this.X,o=13!=r&&27!=r?i.keyCode:0;else(eJ||eG)&&"keypress"==e.type?(r=this.X,o=0<=i.charCode&&63232>i.charCode&&st(r)?i.charCode:0):eW&&!eJ?o=st(r=this.X)?i.keyCode:0:("keypress"==e.type?(sk&&(n=this.Ua),i.keyCode==i.charCode?32>i.keyCode?(r=i.keyCode,o=0):(r=this.X,o=i.charCode):(r=i.keyCode||this.X,o=i.charCode||0)):(r=i.keyCode||this.X,o=i.charCode||0),eZ&&63==o&&224==r&&(r=191));var a=r=si(r);r?63232<=r&&r in sb?a=sb[r]:25==r&&e.shiftKey&&(a=9):i.keyIdentifier&&i.keyIdentifier in sy&&(a=sy[i.keyIdentifier]),eX&&sw&&"keypress"==e.type&&!se(a,this.R,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=a==this.R,this.R=a,(i=new sI(a,o,e,i)).altKey=n,iz(this,i))},e.N=function(){return this.qa},e.o=function(){sv.K.o.call(this),sE(this)},R(sI,ib),s_.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},s_.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},s_.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},s_.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var sx={thin:2,medium:4,thick:6};function sA(e,i){if("none"==(e.currentStyle?e.currentStyle[i+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[i+"Width"]:null;if(n in sx)e=sx[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{i=e.style.left;var r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=i,e.runtimeStyle.left=r,e=+n}return e}function sO(){}function sL(e){iH.call(this),this.s=e||tE(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function sR(e,i){return e.g?t_(i,e.g||e.s.a):null}function sN(e){return e.L||(e.L=new su(e)),e.L}function sP(e,i){e.Ea&&B(e.Ea,i,void 0)}function sD(e,i){var n=tL(e,"firebaseui-textfield");i?(o9(e,"firebaseui-input-invalid"),o3(e,"firebaseui-input"),n&&o9(n,"firebaseui-textfield-invalid")):(o9(e,"firebaseui-input"),o3(e,"firebaseui-input-invalid"),n&&o3(n,"firebaseui-textfield-invalid"))}function sM(e,i,n){iu(e,x(ih,i=new sp(i))),sd(sN(e),i,"input",n)}function sB(e,i,n){iu(e,x(ih,i=new sv(i))),sd(sN(e),i,"key",function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))})}function sF(e,i,n){iu(e,x(ih,i=new sn(i))),sd(sN(e),i,"action",function(e){e.stopPropagation(),e.preventDefault(),n(e)})}function sU(e){o3(e,"firebaseui-hidden")}function sj(e,i){i&&tO(e,i),o9(e,"firebaseui-hidden")}function sV(e){return!o6(e,"firebaseui-hidden")&&"none"!=e.style.display}function sH(e){var i=(e=e||{}).email,n=e.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return tW(r=(e.wc?r+"Enter new email address":r+"Email")+('</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+tX(null!=i?i:"")+'"')+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>')}function sz(e){e=(e=e||{}).label;var i='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return tW((i=e?i+tH(e):i+"Next")+"</button>")}function sq(){return tW(""+sz({label:tG("Sign In")}))}function sK(){return tW(""+sz({label:tG("Save")}))}function sW(){return tW(""+sz({label:tG("Continue")}))}function s$(e){e=(e=e||{}).label;var i='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return tW((i=e?i+tH(e):i+"Choose password")+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function sG(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return tW((e=({}).current?e+"Current password":e+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function sY(){return tW('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function sX(e){e=(e=e||{}).label;var i='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return tW((i=e?i+tH(e):i+"Cancel")+"</button>")}function sJ(e){var i="";return e.F&&e.D&&(i+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),tW(i)}function sQ(e){var i="";return e.F&&e.D&&(i+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),tW(i)}function sZ(e){return tW(e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+tH(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>')}function s0(e){var i=e.content;return tW('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+((e=e.Ab)?" "+tX(e):"")+'">'+tH(i)+"</dialog>")}function s1(e){var i=e.message;return tW(s0({content:tY('<div class="firebaseui-dialog-icon-wrapper"><div class="'+tX(e.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+tH(i)+"</div>")}))}function s2(e){var i='<div class="firebaseui-list-box-actions">';e=e.items;for(var n=e.length,r=0;r<n;r++){var o=e[r];i+='<button type="button" data-listboxid="'+tX(o.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(o.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+tX(o.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+tH(o.label)+"</div></button>"}return tW(i=""+s0({Ab:tG("firebaseui-list-box-dialog"),content:tY(i+"</div>")}))}function s4(e){return tW((e=e||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function s5(e,i){return tK((e=(e=e||{}).ga).S?e.S:i.hb[e.providerId]?""+i.hb[e.providerId]:e.providerId&&0==e.providerId.indexOf("saml.")?e.providerId.substring(5):e.providerId&&0==e.providerId.indexOf("oidc.")?e.providerId.substring(5):""+e.providerId)}function s6(e){s8(e,"upgradeElement")}function s3(e){s8(e,"downgradeElements")}v(sO),sO.prototype.a=0,R(sL,iH),(e=sL.prototype).Lb=sO.Xa(),e.N=function(){return this.g},e.Za=function(e){if(this.Y&&this.Y!=e)throw Error("Method not supported");sL.K.Za.call(this,e)},e.kb=function(){this.g=this.s.a.createElement("DIV")},e.render=function(e){if(this.na)throw Error("Component already rendered");this.g||this.kb(),e?e.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},e.v=function(){this.na=!0,sP(this,function(e){!e.na&&e.N()&&e.v()})},e.ya=function(){sP(this,function(e){e.na&&e.ya()}),this.L&&sf(this.L),this.na=!1},e.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),sP(this,function(e){e.m()}),this.g&&tx(this.g),this.Y=this.g=this.oa=this.Ea=null,sL.K.o.call(this)},e.removeChild=function(e,i){if(e){var n=f(e)?e:e.cb||(e.cb=":"+(e.Lb.a++).toString(36));if(e=this.oa&&n&&(null!==(e=this.oa)&&n in e?e[n]:void 0)||null,n&&e){var r=this.oa;if(n in r&&delete r[n],H(this.Ea,e),i&&(e.ya(),e.g&&tx(e.g)),null==(i=e))throw Error("Unable to set parent component");i.Y=null,sL.K.Za.call(i,null)}}if(!e)throw Error("Child is not in parent component");return e},sZ.a="firebaseui.auth.soy2.element.infoBar",s1.a="firebaseui.auth.soy2.element.progressDialog",s2.a="firebaseui.auth.soy2.element.listBoxDialog",s4.a="firebaseui.auth.soy2.element.busyIndicator";var s9=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function s8(e,i){e&&window.componentHandler&&window.componentHandler[i]&&s9.forEach(function(n){o6(e,n)&&window.componentHandler[i](e),B(tI(n,e),function(e){window.componentHandler[i](e)})})}function s7(e,i,n){if(ae.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),s6(e),i&&sF(this,e,function(i){var n=e.getBoundingClientRect();(i.clientX<n.left||n.left+n.width<i.clientX||i.clientY<n.top||n.top+n.height<i.clientY)&&ae.call(this)}),!n){var r=this.N().parentElement||this.N().parentNode;if(r){var o=this;this.da=function(){if(e.open){var i=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,a=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,l=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,c=e.getBoundingClientRect().width,u=r.getBoundingClientRect().width;e.style.top=(a+(n-i)/2).toString()+"px",i=l+(u-c)/2,e.style.left=i.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-i-c).toString()+"px"}else window.removeEventListener("resize",o.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function ae(){var e=at.call(this);e&&(s3(e),e.open&&e.close(),tx(e),this.da&&window.removeEventListener("resize",this.da))}function at(){return t_("firebaseui-id-dialog")}function ai(){tx(an.call(this))}function an(){return sR(this,"firebaseui-id-info-bar")}function ar(){return sR(this,"firebaseui-id-dismiss-info-bar")}var ao={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function as(e,i,n){for(var r in iv.call(this,e,i),n)this[r]=n[r]}function aa(e,i,n,r,o){sL.call(this,n),this.fb=e,this.eb=i,this.Fa=!1,this.Ga=r||null,this.A=this.ca=null,this.Z=en(ao),es(this.Z,o||{})}function al(e){return e.N().parentElement||e.N().parentNode}function ac(e,i,n){sB(e,i,function(){n.focus()})}function au(e,i,n){sB(e,i,function(){n()})}function ah(e,i,n){i=(e=e||{}).Va;var r=e.ia;return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+sH(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(i?sX(null):"")+sz(null)+'</div></div><div class="firebaseui-card-footer">'+(r?sQ(n):sJ(n))+"</div></form></div>")}function ad(e,i,n){return i=(e=e||{}).ia,tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+sH(e)+sG()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+sY()+'</div><div class="firebaseui-form-actions">'+sq()+'</div></div><div class="firebaseui-card-footer">'+(i?sQ(n):sJ(n))+"</div></form></div>")}function af(e,i,n){var r=(e=e||{}).Tb;i=e.Ta;var o=e.ia;return n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+sH(e)+(e=r?tW(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+tX(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>'):"")+s$(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(i?sX(null):"")+sK()+'</div></div><div class="firebaseui-card-footer">'+(o?sQ(n):sJ(n))+"</div></form></div>",tW(n)}function ap(e,i,n){return i=(e=e||{}).Ta,tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+sH(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(i?sX(null):"")+sz({label:tG("Send")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function ag(e,i,n){i=e.G;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+tH(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',i&&(r+='<div class="firebaseui-form-actions">'+sz({label:tG("Done")})+"</div>"),tW(r+='</div><div class="firebaseui-card-footer">'+sJ(n)+"</div></div>")}function am(e,i,n){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+s4(null,null,n)+"</div></div>")}function av(e,i,n){return tW('<div class="firebaseui-container firebaseui-id-page-spinner">'+s4({tb:!0},null,n)+"</div>")}function ab(){return tW('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function ay(e,i,n){return i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+tH(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+tW('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+sX({label:tG("Back")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>",tW(i)}function aw(e,i,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+tW('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+sX({label:tG("Back")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>",tW(e)}function ak(e,i,n){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+sH(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX(null)+sz(null)+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aE(){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX({label:tG("Dismiss")})+"</div></div></div>")}function aI(){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX({label:tG("Dismiss")})+"</div></div></div>")}function a_(e,i,n){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="Youve already used <strong>"+tH(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+sG()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+sY()+'</div><div class="firebaseui-form-actions">'+sq()+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aS(e,i,n){var r=e.email;return i="",e=tG(e=""+s5(e,n)),tW(i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="Youve already used <strong>"+(tH(r)+("</strong>. You can connect your <strong>"+tH(e)))+"</strong> account with <strong>"+tH(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+tH(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sq()+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aT(e,i,n){i="";var r=""+s5(e,n);return tW(i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+tH(r=tG(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+tH(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sW()+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aC(e,i,n){var r=e.email;return i="",e=tG(e=""+s5(e,n)),tW(i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="Youve already used <strong>"+tH(r)+"</strong>. Sign in with "+tH(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sz({label:tG("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function ax(e,i,n){var r=(e=e||{}).kc;i=e.yb,e=e.Eb;var o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return r?o+=r="<strong>"+tH(r)+"</strong> is not authorized to view the requested page.":o+="User is not authorized to view the requested page.",o+="</p>",i&&(o+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(i="Please contact <strong>"+tH(i)+"</strong> for authorization.")+"</p>"),o+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',e&&(o+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),tW(o+='</div><div class="firebaseui-form-actions">'+sX({label:tG("Back")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aA(e,i,n){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+tH(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX(null)+sz({label:tG("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aO(e){var i="";return tW(i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">for <strong>'+tH(e.email)+"</strong></p>"+s$(function(e){function i(){}var n={label:tG("New password")};for(var r in i.prototype=e,e=new i,n)e[r]=n[r];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sK()+"</div></div></form></div>")}function aL(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aR(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aN(e){var i=e.G,n="";return tW(n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+tH(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didnt ask to change your sign-in email, its possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(i?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></form></div>")}function aP(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still cant reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aD(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aM(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aB(e){var i=e.G,n="";return tW(n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="You can now sign in with your new email <strong>"+tH(e.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(i?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aF(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aU(e){var i=e.factorId,n=e.phoneNumber;e=e.G;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return"phone"===i?r+=i="The <strong>"+tH(i)+" "+tH(n)+"</strong> was removed as a second authentication step.":r+="The device or app was removed as a second authentication step.",tW(r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></form></div>")}function aj(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+sW()+"</div>":"")+"</div></div>")}function aV(e){var i=e.zb;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+tH(e.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',i&&(e+=sz({label:tG("Retry")})),tW(e+"</div></div></div>")}function aH(e){return tW(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+tH(e.errorMessage)+"</p></div></div>")}function az(e,i,n){var r=e.Qb;return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+tH(e.jc)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+tH(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX(null)+sz({label:tG("Continue")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form></div>")}function aq(e,i,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';i=(e=e.Sb).length;for(var o=0;o<i;o++){var a={ga:e[o]},l=(a=a||{}).ga,c=a,u="";switch((c=c||{}).ga.providerId){case"google.com":u+="firebaseui-idp-google";break;case"github.com":u+="firebaseui-idp-github";break;case"facebook.com":u+="firebaseui-idp-facebook";break;case"twitter.com":u+="firebaseui-idp-twitter";break;case"phone":u+="firebaseui-idp-phone";break;case"anonymous":u+="firebaseui-idp-anonymous";break;case"password":u+="firebaseui-idp-password";break;default:u+="firebaseui-idp-generic"}c=(c='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+tX(tK(u))+' firebaseui-id-idp-button" data-provider-id="'+tX(l.providerId)+'" style="background-color:')+tX(tQ(tK((u=(u=(u=a)||{}).ga).ta?u.ta:n.wa[u.providerId]?""+n.wa[u.providerId]:0==u.providerId.indexOf("saml.")?""+n.wa.saml:0==u.providerId.indexOf("oidc.")?""+n.wa.oidc:""+n.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var h=a;u=n,u=t$((h=(h=h||{}).ga).za?tJ(h.za):u.xa[h.providerId]?tJ(u.xa[h.providerId]):0==h.providerId.indexOf("saml.")?tJ(u.xa.saml):0==h.providerId.indexOf("oidc.")?tJ(u.xa.oidc):tJ(u.xa.password)),c=c+tX(tJ(u))+'"></span>',"password"==l.providerId?(c+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',l.V?c+=tH(l.V):l.S?c+=a="Sign in with "+tH(s5(a,n)):c+="Sign in with email",c+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',c=(l.S?c+tH(l.S):c+"Email")+"</span>"):"phone"==l.providerId?(c+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',l.V?c+=tH(l.V):l.S?c+=a="Sign in with "+tH(s5(a,n)):c+="Sign in with phone",c+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',c=(l.S?c+tH(l.S):c+"Phone")+"</span>"):"anonymous"==l.providerId?(c+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',l.V?c+=tH(l.V):l.S?c+=a="Sign in with "+tH(s5(a,n)):c+="Continue as guest",c+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',c=(l.S?c+tH(l.S):c+"Guest")+"</span>"):(c+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',l.V?c+=tH(l.V):c+=u="Sign in with "+tH(s5(a,n)),c+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(l.S?tH(l.S):tH(s5(a,n)))+"</span>"),r+='<li class="firebaseui-list-item">'+(l=tW(c+"</button>"))+"</li>"}return tW(r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+sQ(n)+"</div></div>")}function aK(e,i,n){var r,o=(e=e||{}).Gb,a=e.Va;return i=e.ia,r=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+tW(e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+tX(null!=(e=(e=e||{}).Aa)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>'))+(r=o?tW('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?sX(null):"")+sz({label:tG("Verify")})+'</div></div><div class="firebaseui-card-footer">',i?(i='<p class="firebaseui-tos firebaseui-phone-tos">',n=tW((i=n.F&&n.D?i+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':i+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.")+"</p>")):n=tW('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+sJ(n),tW(r+n+"</div></form></div>")}function aW(e,i,n){i=(e=e||{}).phoneNumber;var r="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+tH(i)+"</a>",tH(i),i=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(r=tW('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sX(null)+sz({label:tG("Continue")})+'</div></div><div class="firebaseui-card-footer">'+sJ(n)+"</div></form>",e=tW('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),tW(i+(n+e+"</div>"))}function a$(){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function aG(e,i,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';i=(e=e.ec).length;for(var o=0;o<i;o++){var a=e[o],l="",c=tH(a.displayName),u=a.tenantId?a.tenantId:"top-level-project";l+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+tX(u=tG(u))+' firebaseui-id-tenant-selection-button"'+(a.tenantId?'data-tenant-id="'+tX(a.tenantId)+'"':"")+'style="background-color:'+tX(tQ(a.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+tX(tJ(a.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?l+=tH(a.V):l+=a="Sign in to "+tH(a.displayName),r+='<li class="firebaseui-list-item">'+(l=tW(l+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+c+"</span></button>"))+"</li>"}return tW(r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+sQ(n)+"</div></div>")}function aY(e,i,n){return tW('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+sH(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sz(null)+'</div></div><div class="firebaseui-card-footer">'+sQ(n)+"</div></form></div>")}function aX(){return sR(this,"firebaseui-id-submit")}function aJ(){return sR(this,"firebaseui-id-secondary-link")}function aQ(e,i){sF(this,aX.call(this),function(i){e(i)});var n=aJ.call(this);n&&i&&sF(this,n,function(e){i(e)})}function aZ(){return sR(this,"firebaseui-id-password")}function a0(){return sR(this,"firebaseui-id-password-error")}function a1(){var e=aZ.call(this),i=a0.call(this);sM(this,e,function(){sV(i)&&(sD(e,!0),sU(i))})}function a2(){var e=aZ.call(this),i=a0.call(this);return o8(e)?(sD(e,!0),sU(i),i=!0):(sD(e,!1),sj(i,tK("Enter your password").toString()),i=!1),i?o8(e):null}function a4(e,i,n,r,o,a){aa.call(this,a_,{email:e},a,"passwordLinking",{F:r,D:o}),this.w=i,this.H=n}R(as,iv),R(aa,sL),(e=aa.prototype).kb=function(){var e=tF(this.fb,this.eb,this.Z,this.s);s6(e),this.g=e},e.v=function(){if(aa.K.v.call(this),i$(al(this),new as("pageEnter",al(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var e=this.Z.F;sF(this,this.bb(),function(){e()})}if(this.ab()&&this.Z.D){var i=this.Z.D;sF(this,this.ab(),function(){i()})}},e.ya=function(){i$(al(this),new as("pageExit",al(this),{pageId:this.Ga})),aa.K.ya.call(this)},e.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,s3(this.N()),aa.K.o.call(this)},e.I=function(e,i,n,r){function o(){if(l.T)return null;l.Fa=!1,window.clearTimeout(l.ca),l.ca=null,l.A&&(s3(l.A),tx(l.A),l.A=null)}var a,l=this;return l.Fa?null:(l.Fa=!0,a=o6(l.N(),"firebaseui-use-spinner"),l.ca=window.setTimeout(function(){l.N()&&null===l.A&&(l.A=tF(s4,{tb:a},null,l.s),l.N().appendChild(l.A),s6(l.A))},500),e.apply(null,i).then(n,r).then(o,o))},A(aa.prototype,{a:function(e){ai.call(this);var i=tF(sZ,{message:e},null,this.s);this.N().appendChild(i),sF(this,ar.call(this),function(){tx(i)})},yc:ai,Ac:an,zc:ar,$:function(e,i){e=tF(s1,{Ma:e,message:i},null,this.s),s7.call(this,e)},h:ae,Cb:at,Cc:function(){return sR(this,"firebaseui-tos")},bb:function(){return sR(this,"firebaseui-tos-link")},ab:function(){return sR(this,"firebaseui-pp-link")},Dc:function(){return sR(this,"firebaseui-tos-list")}}),ah.a="firebaseui.auth.soy2.page.signIn",ad.a="firebaseui.auth.soy2.page.passwordSignIn",af.a="firebaseui.auth.soy2.page.passwordSignUp",ap.a="firebaseui.auth.soy2.page.passwordRecovery",ag.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",am.a="firebaseui.auth.soy2.page.callback",av.a="firebaseui.auth.soy2.page.spinner",ab.a="firebaseui.auth.soy2.page.blank",ay.a="firebaseui.auth.soy2.page.emailLinkSignInSent",aw.a="firebaseui.auth.soy2.page.emailNotReceived",ak.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",aE.a="firebaseui.auth.soy2.page.differentDeviceError",aI.a="firebaseui.auth.soy2.page.anonymousUserMismatch",a_.a="firebaseui.auth.soy2.page.passwordLinking",aS.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",aT.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",aC.a="firebaseui.auth.soy2.page.federatedLinking",ax.a="firebaseui.auth.soy2.page.unauthorizedUser",aA.a="firebaseui.auth.soy2.page.unsupportedProvider",aO.a="firebaseui.auth.soy2.page.passwordReset",aL.a="firebaseui.auth.soy2.page.passwordResetSuccess",aR.a="firebaseui.auth.soy2.page.passwordResetFailure",aN.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",aP.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",aD.a="firebaseui.auth.soy2.page.emailVerificationSuccess",aM.a="firebaseui.auth.soy2.page.emailVerificationFailure",aB.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",aF.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",aU.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",aj.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",aV.a="firebaseui.auth.soy2.page.recoverableError",aH.a="firebaseui.auth.soy2.page.unrecoverableError",az.a="firebaseui.auth.soy2.page.emailMismatch",aq.a="firebaseui.auth.soy2.page.providerSignIn",aK.a="firebaseui.auth.soy2.page.phoneSignInStart",aW.a="firebaseui.auth.soy2.page.phoneSignInFinish",a$.a="firebaseui.auth.soy2.page.signOut",aG.a="firebaseui.auth.soy2.page.selectTenant",aY.a="firebaseui.auth.soy2.page.providerMatchByEmail",a(a4,aa),a4.prototype.v=function(){this.P(),this.M(this.w,this.H),au(this,this.i(),this.w),this.i().focus(),aa.prototype.v.call(this)},a4.prototype.o=function(){this.w=null,aa.prototype.o.call(this)},a4.prototype.j=function(){return o8(sR(this,"firebaseui-id-email"))},A(a4.prototype,{i:aZ,B:a0,P:a1,u:a2,ea:aX,ba:aJ,M:aQ});var a5=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function a6(){return sR(this,"firebaseui-id-email")}function a3(){return sR(this,"firebaseui-id-email-error")}function a9(e){var i=a6.call(this),n=a3.call(this);sM(this,i,function(){sV(n)&&(sD(i,!0),sU(n))}),e&&sB(this,i,function(){e()})}function a8(){return W(o8(a6.call(this))||"")}function a7(){var e=a6.call(this),i=a3.call(this),n=o8(e)||"";return n?a5.test(n)?(sD(e,!0),sU(i),i=!0):(sD(e,!1),sj(i,tK("That email address isn't correct").toString()),i=!1):(sD(e,!1),sj(i,tK("Enter your email address to continue").toString()),i=!1),i?W(o8(e)):null}function le(e,i,n,r,o,a,l){aa.call(this,ad,{email:n,ia:!!a},l,"passwordSignIn",{F:r,D:o}),this.w=e,this.H=i}function lt(e,i,n,r,o,a){aa.call(this,e,i,r,o||"notice",a),this.i=n||null}function li(e,i,n,r,o){lt.call(this,ag,{email:e,G:!!i},i,o,"passwordRecoveryEmailSent",{F:n,D:r})}function ln(e,i){lt.call(this,aD,{G:!!e},e,i,"emailVerificationSuccess")}function lr(e,i){lt.call(this,aM,{G:!!e},e,i,"emailVerificationFailure")}function lo(e,i,n){lt.call(this,aB,{email:e,G:!!i},i,n,"verifyAndChangeEmailSuccess")}function ls(e,i){lt.call(this,aF,{G:!!e},e,i,"verifyAndChangeEmailFailure")}function la(e,i){lt.call(this,aj,{G:!!e},e,i,"revertSecondFactorAdditionFailure")}function ll(e){lt.call(this,a$,void 0,void 0,e,"signOut")}function lc(e,i){lt.call(this,aL,{G:!!e},e,i,"passwordResetSuccess")}function lu(e,i){lt.call(this,aR,{G:!!e},e,i,"passwordResetFailure")}function lh(e,i){lt.call(this,aP,{G:!!e},e,i,"emailChangeRevokeFailure")}function ld(e,i,n){lt.call(this,aV,{errorMessage:e,zb:!!i},i,n,"recoverableError")}function lf(e,i){lt.call(this,aH,{errorMessage:e},void 0,i,"unrecoverableError")}function lp(e){if("auth/invalid-credential"===e.code&&e.message&&-1!==e.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(e.message&&-1!==e.message.indexOf("HTTP Cloud Function returned an error:")){var i=JSON.parse(e.message.substring(e.message.indexOf("{"),e.message.lastIndexOf("}")+1));return{code:e.code,message:i&&i.error&&i.error.message||e.message}}return e}function lg(e,i,n,r){function o(n){if(!n.name||"cancel"!=n.name){e:{var r=n.message;try{var o=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(o&&o.length){var a=!0;break e}}catch(e){}a=!1}if(a)n=al(i),i.m(),lE(e,n,void 0,tK("Your sign-in session has expired. Please try again.").toString());else{if(a=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;a=lb(n)}i.a(a)}}}if(cM(e),r)return lm(e,n),nr();if(!n.credential)throw Error("No credential found!");if(!cT(e).currentUser&&!n.user)throw Error("User not logged in.");try{var a,l=(a=n,cU(e),cN(e,function(i){if(e.j&&!e.j.isAnonymous&&ok(cF(e))&&!cT(e).currentUser)return cV(e).then(function(){return"password"==a.credential.providerId&&(a.credential=null),a});if(i)return cV(e).then(function(){return i.linkWithCredential(a.credential)}).then(function(e){return a.user=e.user,a.credential=e.credential,a.operationType=e.operationType,a.additionalUserInfo=e.additionalUserInfo,a},function(i){if(i&&"auth/email-already-in-use"==i.code&&i.email&&i.credential)throw i;return cH(e,i,a.credential)});if(!a.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return cV(e).then(function(){return cC(e).updateCurrentUser(a.user)}).then(function(){return a.user=cC(e).currentUser,a.operationType="signIn",a.credential&&a.credential.providerId&&"password"==a.credential.providerId&&(a.credential=null),a})}))}catch(e){return n1(e.code||e.message,e),i.a(e.code||e.message),nr()}return n=l.then(function(i){lm(e,i)},o).then(void 0,o),cD(e,l),nr(n)}function lm(e,i){if(!i.user)throw Error("No user found");var n=oV(cF(e));if(oj(cF(e))&&n&&rs("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=oV(cF(e));var r=r3(cx(e))||void 0;r5(r0,cx(e));var o=!1;nm()?((!n||n(i,r))&&(o=!0,ty(window.opener.location,lv(e,r))),n||window.close()):(!n||n(i,r))&&(o=!0,ty(window.location,lv(e,r))),o||e.reset()}else{n=i.user,i=i.credential,r=oj(cF(e)),o=r3(cx(e))||void 0,r5(r0,cx(e));var a=!1;nm()?((!r||r(n,i,o))&&(a=!0,ty(window.opener.location,lv(e,o))),r||window.close()):(!r||r(n,i,o))&&(a=!0,ty(window.location,lv(e,o))),a||e.reset()}}function lv(e,i){if(!(e=i||cF(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function lb(e){var i={code:e.code},n="";switch((i=i||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":case"auth/user-token-expired":n+=tK("Please login again to perform this operation");break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=t7();break;case"auth/invalid-verification-code":n+=tK("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(i=tK(n).toString())return i;try{return JSON.parse(e.message),n1("Internal error: "+e.message,void 0),it().toString()}catch(i){return e.message}}function ly(e,i,n,r){function o(){var n,r;n=new rg(e.h.tenantId||null),r=cx(e),r6(rZ,{tenantId:n.a},r),cD(e,i.I(C(e.dc,e),[u],function(){if("file:"===(window.location&&window.location.protocol))return cD(e,cI(e).then(function(n){i.m(),r5(rZ,cx(e)),o4("callback",e,c,nr(n))},a))},l))}function a(r){if(r5(rZ,cx(e)),!r.name||"cancel"!=r.name)switch((r=lp(r)).code){case"auth/popup-blocked":o();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":i.a(lb(r));break;case"auth/admin-restricted-operation":i.m(),oA(cF(e))?o4("handleUnauthorizedUser",e,c,null,n):o4("callback",e,c,no(r));break;default:i.m(),o4("callback",e,c,no(r))}}function l(n){r5(rZ,cx(e)),n.name&&"cancel"==n.name||(n1("signInWithRedirect: "+n.code,void 0),n=lb(n),"blank"==i.Ga&&oF(cF(e))?(i.m(),o4("providerSignIn",e,c,n)):i.a(n))}var c=al(i),u=function(e,i,n){var r=oy[i]&&pu.auth[oy[i]]?new pu.auth[oy[i]]:0==i.indexOf("saml.")?new pu.auth.SAMLAuthProvider(i):new pu.auth.OAuthProvider(i);if(!r)throw Error("Invalid Firebase Auth provider!");var o=oO(cF(e),i);if(r.addScope)for(var a=0;a<o.length;a++)r.addScope(o[a]);return o=oL(cF(e),i)||{},n&&(e=i==pu.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":i==pu.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=oS(cF(e),i))&&e.Ob)&&(o[e]=n),r.setCustomParameters&&r.setCustomParameters(o),r}(e,n,r);oU(cF(e))==oJ?o():cD(e,(cU(e),cN(e,function(i){return i&&!r9(cx(e))?i.linkWithPopup(u).then(function(e){return e},function(i){if(i&&"auth/email-already-in-use"==i.code&&i.email&&i.credential)throw i;return cH(e,i)}):cT(e).signInWithPopup(u)})).then(function(n){i.m(),o4("callback",e,c,nr(n))},a))}function lw(e){return 1==(e=o_(cF(e))).length&&e[0]==pu.auth.EmailAuthProvider.PROVIDER_ID}function lk(e){return 1==(e=o_(cF(e))).length&&e[0]==pu.auth.PhoneAuthProvider.PROVIDER_ID}function lE(e,i,n,r){lw(e)?r?o4("signIn",e,i,n,r):lT(e,i,n):e&&lk(e)&&!r?o4("phoneSignInStart",e,i):e&&oF(cF(e))&&!r?o4("federatedRedirect",e,i,n):o4("providerSignIn",e,i,r,n)}function lI(e,i,n,r){var o=al(i);cD(e,i.I(C(cT(e).fetchSignInMethodsForEmail,cT(e)),[n],function(a){i.m(),l_(e,o,a,n,r)},function(e){e=lb(e),i.a(e)}))}function l_(e,i,n,r,o,a){var l,c;n.length||oB(cF(e))&&!oB(cF(e))?V(n,pu.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?o4("passwordSignIn",e,i,r,a):1==n.length&&n[0]===pu.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?oB(cF(e))?o4("sendEmailLinkForSignIn",e,i,r,function(){o4("signIn",e,i)}):o4("unsupportedProvider",e,i,r):(n=ov(n,o_(cF(e))))?(l=new rd(r),c=cx(e),r6(rQ,rf(l),c),o4("federatedSignIn",e,i,r,n,o)):o4("unsupportedProvider",e,i,r):ox(cF(e))?o4("handleUnauthorizedUser",e,i,r,pu.auth.EmailAuthProvider.PROVIDER_ID):oB(cF(e))?o4("sendEmailLinkForSignIn",e,i,r,function(){o4("signIn",e,i)}):o4("passwordSignUp",e,i,r,void 0,void 0,a)}function lS(e,i,n,r,o,a){var l=al(i);cD(e,i.I(C(e.Ib,e),[n,a],function(){i.m(),o4("emailLinkSignInSent",e,l,n,r,a)},o))}function lT(e,i,n){n?o4("prefilledEmailSignIn",e,i,n):o4("signIn",e,i)}function lC(){return em(ny(),"oobCode")}function lx(){var e=em(ny(),"continueUrl");return e?function(){ty(window.location,e)}:null}function lA(e,i){aa.call(this,aI,void 0,i,"anonymousUserMismatch"),this.i=e}function lO(e){aa.call(this,am,void 0,e,"callback")}function lL(e,i,n){if(n.user){var r,o,a={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},l=r9(cx(e)),c=l&&l.g;if(c&&!function(e,i){if(i==e.email)return!0;if(e.providerData){for(var n=0;n<e.providerData.length;n++)if(i==e.providerData[n].email)return!0}return!1}(n.user,c))r=a,o=al(i),cD(e,cV(e).then(function(){i.m(),o4("emailMismatch",e,o,r)},function(e){e.name&&"cancel"==e.name||(e=lb(e.code),i.a(e))}));else{var u=l&&l.a;u?cD(e,n.user.linkWithCredential(u).then(function(n){lR(e,i,a={user:n.user,credential:u,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})},function(n){lN(e,i,n)})):lR(e,i,a)}}else n=al(i),i.m(),r8(cx(e)),lE(e,n)}function lR(e,i,n){r8(cx(e)),lg(e,i,n)}function lN(e,i,n){var r=al(i);r8(cx(e)),n=lb(n),i.m(),lE(e,r,void 0,n)}function lP(e,i,n,r){var o=al(i);cD(e,cT(e).fetchSignInMethodsForEmail(n).then(function(a){i.m(),a.length?V(a,pu.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?o4("passwordLinking",e,o,n):1==a.length&&a[0]===pu.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?o4("emailLinkSignInLinking",e,o,n):(a=ov(a,o_(cF(e))))?o4("federatedLinking",e,o,n,a,r):(r8(cx(e)),o4("unsupportedProvider",e,o,n)):(r8(cx(e)),o4("passwordRecovery",e,o,n,!1,ii().toString()))},function(n){lN(e,i,n)}))}function lD(e,i){aa.call(this,aE,void 0,i,"differentDeviceError"),this.i=e}function lM(e,i,n,r){aa.call(this,aN,{email:e,G:!!n},r,"emailChangeRevoke"),this.l=i,this.i=n||null}function lB(){return sR(this,"firebaseui-id-new-password")}function lF(){return sR(this,"firebaseui-id-password-toggle")}function lU(){this.Ra=!this.Ra;var e=lF.call(this),i=lB.call(this);this.Ra?(i.type="text",o3(e,"firebaseui-input-toggle-off"),o9(e,"firebaseui-input-toggle-on")):(i.type="password",o3(e,"firebaseui-input-toggle-on"),o9(e,"firebaseui-input-toggle-off")),i.focus()}function lj(){return sR(this,"firebaseui-id-new-password-error")}function lV(){this.Ra=!1;var e,i,n,r,o=lB.call(this);o.type="password";var a=lj.call(this);sM(this,o,function(){sV(a)&&(sD(o,!0),sU(a))});var l=lF.call(this);o3(l,"firebaseui-input-toggle-on"),o9(l,"firebaseui-input-toggle-off"),e=o,i=function(){o3(l,"firebaseui-input-toggle-focus"),o9(l,"firebaseui-input-toggle-blur")},iu(this,x(ih,e=new sa(e))),sd(sN(this),e,"focusin",i),n=o,r=function(){o3(l,"firebaseui-input-toggle-blur"),o9(l,"firebaseui-input-toggle-focus")},iu(this,x(ih,n=new sa(n))),sd(sN(this),n,"focusout",r),sF(this,l,C(lU,this))}function lH(){var e=lB.call(this),i=lj.call(this);return o8(e)?(sD(e,!0),sU(i),i=!0):(sD(e,!1),sj(i,tK("Enter your password").toString()),i=!1),i?o8(e):null}function lz(e,i,n){aa.call(this,aO,{email:e},n,"passwordReset"),this.l=i}function lq(e,i,n,r,o){aa.call(this,aU,{factorId:e,phoneNumber:n||null,G:!!r},o,"revertSecondFactorAdditionSuccess"),this.l=i,this.i=r||null}function lK(e,i,n,r){"auth/weak-password"==(r&&r.code)?(e=lb(r),sD(n.i(),!1),sj(n.w(),e),n.i().focus()):(n&&n.m(),(n=new lu).render(i),c_(e,n))}function lW(e,i){try{var n="number"==typeof e.selectionStart}catch(e){n=!1}n?(e.selectionStart=i,e.selectionEnd=i):e$&&!e3("9")&&("textarea"==e.type&&(i=e.value.substring(0,i).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",i),e.select())}function l$(e,i,n,r,o,a){aa.call(this,ak,{email:n},a,"emailLinkSignInConfirmation",{F:r,D:o}),this.l=e,this.u=i}function lG(e,i,n,r,o){aa.call(this,aT,{ga:e},o,"emailLinkSignInLinkingDifferentDevice",{F:n,D:r}),this.i=i}function lY(e){aa.call(this,ab,void 0,e,"blank")}function lX(e,i,n,r,o){var a=new lY,l=new eB(n),c=l.a.a.get(ej.$a)||"",u=l.a.a.get(ej.Sa)||"",h="1"===l.a.a.get(ej.Qa),d=eF(l),f=l.a.a.get(ej.PROVIDER_ID)||null;cB(e,l=l.a.a.get(ej.vb)||null);var p=!r4(r1,cx(e)),g=r||function(e,i){i=r4(r1,i);var n=null;if(i)try{var r=rM(e,i),o=JSON.parse(r);n=o&&o.email||null}catch(e){}return n}(u,cx(e)),m=(r=function(e,i){i=r4(r2,i);var n=null;if(i)try{var r=rM(e,i);n=JSON.parse(r)}catch(e){}return rp(n||null)}(u,cx(e)))&&r.a;f&&m&&m.providerId!==f&&(m=null),a.render(i),c_(e,a),cD(e,a.I(function(){var i,r,a=nr(null);a=d&&p||p&&h?no(Error("anonymous-user-not-found")):((r=eF(new eB(i=n)))?(i=new i9(function(i,n){var o=cC(e).onAuthStateChanged(function(e){o(),e&&e.isAnonymous&&e.uid===r?i(e):e&&e.isAnonymous&&e.uid!==r?n(Error("anonymous-user-mismatch")):n(Error("anonymous-user-not-found"))});cD(e,o)}),cD(e,i),i):nr(null)).then(function(e){if(f&&!m)throw Error("pending-credential-not-found");return e});var l=null;return a.then(function(i){return l=i,o?null:cT(e).checkActionCode(c)}).then(function(){return l})},[],function(r){g?function(e,i,n,r,o,a){var l,c,u,h,d,f,p,g,m=al(i);i.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",tK("Signing in...").toString());var v=null;o=(a?(l=n,c=o,cU(e),u=c||null,h=pu.auth.EmailAuthProvider.credentialWithLink(l,r),l=u?cT(e).signInWithEmailLink(l,r).then(function(e){return e.user.linkWithCredential(u)}).then(function(){return cV(e)}).then(function(){return cH(e,{code:"auth/email-already-in-use"},u)}):cT(e).fetchSignInMethodsForEmail(l).then(function(i){return i.length?cH(e,{code:"auth/email-already-in-use"},h):a.linkWithCredential(h)}),cD(e,l),l):(d=n,f=o,cU(e),g=f||null,d=cT(e).signInWithEmailLink(d,r).then(function(e){if(p={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},g)return e.user.linkWithCredential(g).then(function(e){p={user:e.user,credential:g,operationType:p.operationType,additionalUserInfo:e.additionalUserInfo}})}).then(function(){cV(e)}).then(function(){return cC(e).updateCurrentUser(p.user)}).then(function(){return p.user=cC(e).currentUser,p}),cD(e,d),d)).then(function(n){r5(r2,cx(e)),r5(r1,cx(e)),i.h(),i.$("firebaseui-icon-done",tK("Signed in!").toString()),v=setTimeout(function(){i.h(),lg(e,i,n,!0)},1e3),cD(e,function(){i&&(i.h(),i.m()),clearTimeout(v)})},function(o){if(i.h(),i.m(),!o.name||"cancel"!=o.name){var a=lb(o=lp(o));"auth/email-already-in-use"==o.code||"auth/credential-already-in-use"==o.code?(r5(r2,cx(e)),r5(r1,cx(e))):"auth/invalid-email"==o.code?o4("emailLinkConfirmation",e,m,r,lJ,null,a=tK("The email provided does not match the current sign-in session.").toString()):lE(e,m,n,a)}}),cD(e,o)}(e,a,g,n,m,r):h?(a.m(),o4("differentDeviceError",e,i)):(a.m(),o4("emailLinkConfirmation",e,i,n,lJ))},function(r){var o=void 0;if(!r||!r.name||"cancel"!=r.name)switch(a.m(),r&&r.message){case"anonymous-user-not-found":o4("differentDeviceError",e,i);break;case"anonymous-user-mismatch":o4("anonymousUserMismatch",e,i);break;case"pending-credential-not-found":o4("emailLinkNewDeviceLinking",e,i,n,lQ);break;default:r&&(o=lb(r)),lE(e,i,void 0,o)}}))}function lJ(e,i,n,r){lX(e,i,r,n,!0)}function lQ(e,i,n){lX(e,i,n)}function lZ(e,i,n,r,o,a){aa.call(this,aS,{email:e,ga:i},a,"emailLinkSignInLinking",{F:r,D:o}),this.i=n}function l0(e,i,n,r,o,a){aa.call(this,ay,{email:e},a,"emailLinkSignInSent",{F:r,D:o}),this.u=i,this.i=n}function l1(e,i,n,r,o,a,l){aa.call(this,az,{jc:e,Qb:i},l,"emailMismatch",{F:o,D:a}),this.l=n,this.i=r}function l2(e,i,n,r,o){aa.call(this,aw,void 0,o,"emailNotReceived",{F:n,D:r}),this.l=e,this.i=i}function l4(e,i,n,r,o,a){aa.call(this,aC,{email:e,ga:i},a,"federatedLinking",{F:r,D:o}),this.i=n}function l5(e,i,n,r,o,a){aa.call(this,ap,{email:n,Ta:!!i},a,"passwordRecovery",{F:r,D:o}),this.l=e,this.u=i}function l6(){return sR(this,"firebaseui-id-name")}function l3(){return sR(this,"firebaseui-id-name-error")}function l9(e,i,n,r,o,a,l,c,u){aa.call(this,af,{email:r,Tb:e,name:o,Ta:!!n,ia:!!c},u,"passwordSignUp",{F:a,D:l}),this.w=i,this.H=n,this.B=e}function l8(){return sR(this,"firebaseui-id-phone-confirmation-code")}function l7(){return sR(this,"firebaseui-id-phone-confirmation-code-error")}function ce(){return sR(this,"firebaseui-id-resend-countdown")}function ct(e,i,n,r,o,a,l,c,u){aa.call(this,aW,{phoneNumber:o},u,"phoneSignInFinish",{F:l,D:c}),this.jb=a,this.i=new sl(1e3),this.B=a,this.P=e,this.l=i,this.H=n,this.M=r}a(le,aa),le.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),ac(this,this.l(),this.i()),au(this,this.i(),this.w),o8(this.l())?this.i().focus():this.l().focus(),aa.prototype.v.call(this)},le.prototype.o=function(){this.H=this.w=null,aa.prototype.o.call(this)},A(le.prototype,{l:a6,U:a3,P:a9,M:a8,j:a7,i:aZ,B:a0,ea:a1,u:a2,ua:aX,pa:aJ,ba:aQ}),R(lt,aa),lt.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),lt.K.v.call(this)},lt.prototype.o=function(){this.i=null,lt.K.o.call(this)},A(lt.prototype,{l:aX,w:aJ,u:aQ}),R(li,lt),R(ln,lt),R(lr,lt),R(lo,lt),R(ls,lt),R(la,lt),R(ll,lt),R(lc,lt),R(lu,lt),R(lh,lt),R(ld,lt),R(lf,lt),a(lA,aa),lA.prototype.v=function(){var e=this;sF(this,this.l(),function(){e.i()}),this.l().focus(),aa.prototype.v.call(this)},lA.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(lA.prototype,{l:aJ}),o2.anonymousUserMismatch=function(e,i){var n=new lA(function(){n.m(),lE(e,i)});n.render(i),c_(e,n)},a(lO,aa),lO.prototype.I=function(e,i,n,r){return e.apply(null,i).then(n,r)},o2.callback=function(e,i,n){var r=new lO;r.render(i),c_(e,r),n=n||cI(e),cD(e,n.then(function(i){lL(e,r,i)},function(n){if((n=lp(n))&&("auth/account-exists-with-different-credential"==n.code||"auth/email-already-in-use"==n.code)&&n.email&&n.credential){var o,a;o=new rd(n.email,n.credential),a=cx(e),r6(rQ,rf(o),a),lP(e,r,n.email)}else if(n&&"auth/user-cancelled"==n.code){var l=r9(cx(e)),c=lb(n);l&&l.a?lP(e,r,l.g,c):l?lI(e,r,l.g,c):lN(e,r,n)}else n&&"auth/credential-already-in-use"==n.code||(n&&"auth/operation-not-supported-in-this-environment"==n.code&&lw(e)?lL(e,r,{user:null,credential:null}):n&&"auth/admin-restricted-operation"==n.code&&oA(cF(e))?(r.m(),r8(cx(e)),o4("handleUnauthorizedUser",e,i,null,null)):lN(e,r,n))}))},a(lD,aa),lD.prototype.v=function(){var e=this;sF(this,this.l(),function(){e.i()}),this.l().focus(),aa.prototype.v.call(this)},lD.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(lD.prototype,{l:aJ}),o2.differentDeviceError=function(e,i){var n=new lD(function(){n.m(),lE(e,i)});n.render(i),c_(e,n)},a(lM,aa),lM.prototype.v=function(){var e=this;sF(this,sR(this,"firebaseui-id-reset-password-link"),function(){e.l()}),this.i&&(this.w(this.i),this.u().focus()),aa.prototype.v.call(this)},lM.prototype.o=function(){this.l=this.i=null,aa.prototype.o.call(this)},A(lM.prototype,{u:aX,B:aJ,w:aQ}),a(lz,aa),lz.prototype.v=function(){this.H(),this.B(this.l),au(this,this.i(),this.l),this.i().focus(),aa.prototype.v.call(this)},lz.prototype.o=function(){this.l=null,aa.prototype.o.call(this)},A(lz.prototype,{i:lB,w:lj,M:lF,H:lV,u:lH,U:aX,P:aJ,B:aQ}),a(lq,aa),lq.prototype.v=function(){var e=this;sF(this,sR(this,"firebaseui-id-reset-password-link"),function(){e.l()}),this.i&&(this.w(this.i),this.u().focus()),aa.prototype.v.call(this)},lq.prototype.o=function(){this.l=this.i=null,aa.prototype.o.call(this)},A(lq.prototype,{u:aX,B:aJ,w:aQ}),o2.passwordReset=function(e,i,n,r){cD(e,cT(e).verifyPasswordResetCode(n).then(function(o){var a=new lz(o,function(){var o;(o=a.u())&&cD(e,a.I(C(cT(e).confirmPasswordReset,cT(e)),[n,o],function(){a.m();var n=new lc(r);n.render(i),c_(e,n)},function(n){lK(e,i,a,n)}))});a.render(i),c_(e,a)},function(){lK(e,i)}))},o2.emailChangeRevocation=function(e,i,n){var r=null;cD(e,cT(e).checkActionCode(n).then(function(i){return r=i.data.email,cT(e).applyActionCode(n)}).then(function(){var n,o;(o=new lM(n=r,function(){cD(e,o.I(C(cT(e).sendPasswordResetEmail,cT(e)),[n],function(){o.m(),(o=new li(n,void 0,oP(cF(e)),oD(cF(e)))).render(i),c_(e,o)},function(){o.a(ie().toString())}))})).render(i),c_(e,o)},function(){var n=new lh;n.render(i),c_(e,n)}))},o2.emailVerification=function(e,i,n,r){cD(e,cT(e).applyActionCode(n).then(function(){var n=new ln(r);n.render(i),c_(e,n)},function(){var n=new lr;n.render(i),c_(e,n)}))},o2.revertSecondFactorAddition=function(e,i,n){var r=null,o=null;cD(e,cT(e).checkActionCode(n).then(function(i){return r=i.data.email,o=i.data.multiFactorInfo,cT(e).applyActionCode(n)}).then(function(){var n,a,l;n=r,(l=new lq((a=o).factorId,function(){l.I(C(cT(e).sendPasswordResetEmail,cT(e)),[n],function(){l.m(),(l=new li(n,void 0,oP(cF(e)),oD(cF(e)))).render(i),c_(e,l)},function(){l.a(ie().toString())})},a.phoneNumber)).render(i),c_(e,l)},function(){var n=new la;n.render(i),c_(e,n)}))},o2.verifyAndChangeEmail=function(e,i,n,r){var o=null;cD(e,cT(e).checkActionCode(n).then(function(i){return o=i.data.email,cT(e).applyActionCode(n)}).then(function(){var n=new lo(o,r);n.render(i),c_(e,n)},function(){var n=new ls;n.render(i),c_(e,n)}))},a(l$,aa),l$.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),lW(this.i(),(this.i().value||"").length),aa.prototype.v.call(this)},l$.prototype.o=function(){this.u=this.l=null,aa.prototype.o.call(this)},A(l$.prototype,{i:a6,M:a3,w:a9,H:a8,j:a7,U:aX,P:aJ,B:aQ}),o2.emailLinkConfirmation=function(e,i,n,r,o,a){var l=new l$(function(){var o=l.j();o?(l.m(),r(e,i,o,n)):l.i().focus()},function(){l.m(),lE(e,i,o||void 0)},o||void 0,oP(cF(e)),oD(cF(e)));l.render(i),c_(e,l),a&&l.a(a)},a(lG,aa),lG.prototype.v=function(){this.u(this.i),this.l().focus(),aa.prototype.v.call(this)},lG.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(lG.prototype,{l:aX,u:aQ}),o2.emailLinkNewDeviceLinking=function(e,i,n,r){var o=new eB(n);if(n=o.a.a.get(ej.PROVIDER_ID)||null,eU(o,null),n){var a=new lG(oS(cF(e),n),function(){a.m(),r(e,i,o.toString())},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a)}else lE(e,i)},a(lY,aa),o2.emailLinkSignInCallback=lX,a(lZ,aa),lZ.prototype.v=function(){this.u(this.i),this.l().focus(),aa.prototype.v.call(this)},lZ.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(lZ.prototype,{l:aX,u:aQ}),o2.emailLinkSignInLinking=function(e,i,n){var r=r9(cx(e));if(r8(cx(e)),r){var o=r.a.providerId,a=new lZ(n,oS(cF(e),o),function(){var i;i=al(a),lS(e,a,n,function(){lE(e,i,n)},function(r){if(!r.name||"cancel"!=r.name){var o=lb(r);r&&"auth/network-request-failed"==r.code?a.a(o):(a.m(),lE(e,i,n,o))}},r)},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a)}else lE(e,i)},a(l0,aa),l0.prototype.v=function(){var e=this;sF(this,this.l(),function(){e.i()}),sF(this,sR(this,"firebaseui-id-trouble-getting-email-link"),function(){e.u()}),this.l().focus(),aa.prototype.v.call(this)},l0.prototype.o=function(){this.i=this.u=null,aa.prototype.o.call(this)},A(l0.prototype,{l:aJ}),o2.emailLinkSignInSent=function(e,i,n,r,o){var a=new l0(n,function(){a.m(),o4("emailNotReceived",e,i,n,r,o)},function(){a.m(),r()},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a)},a(l1,aa),l1.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),aa.prototype.v.call(this)},l1.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(l1.prototype,{u:aX,B:aJ,w:aQ}),o2.emailMismatch=function(e,i,n){var r=r9(cx(e));if(r){var o=new l1(n.user.email,r.g,function(){r8(cx(e)),lg(e,o,n)},function(){var i=n.credential.providerId,a=al(o);o.m(),r.a?o4("federatedLinking",e,a,r.g,i):o4("federatedSignIn",e,a,r.g,i)},oP(cF(e)),oD(cF(e)));o.render(i),c_(e,o)}else lE(e,i)},a(l2,aa),l2.prototype.v=function(){var e=this;sF(this,this.u(),function(){e.i()}),sF(this,this.Da(),function(){e.l()}),this.u().focus(),aa.prototype.v.call(this)},l2.prototype.Da=function(){return sR(this,"firebaseui-id-resend-email-link")},l2.prototype.o=function(){this.i=this.l=null,aa.prototype.o.call(this)},A(l2.prototype,{u:aJ}),o2.emailNotReceived=function(e,i,n,r,o){var a=new l2(function(){lS(e,a,n,r,function(e){e=lb(e),a.a(e)},o)},function(){a.m(),lE(e,i,n)},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a)},a(l4,aa),l4.prototype.v=function(){this.u(this.i),this.l().focus(),aa.prototype.v.call(this)},l4.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(l4.prototype,{l:aX,u:aQ}),o2.federatedLinking=function(e,i,n,r,o){var a=r9(cx(e));if(a&&a.a){var l=new l4(n,oS(cF(e),r),function(){ly(e,l,r,n)},oP(cF(e)),oD(cF(e)));l.render(i),c_(e,l),o&&l.a(o)}else lE(e,i)},o2.federatedRedirect=function(e,i,n){var r=new lY;r.render(i),c_(e,r),i=o_(cF(e))[0],ly(e,r,i,n)},o2.federatedSignIn=function(e,i,n,r,o){var a=new l4(n,oS(cF(e),r),function(){ly(e,a,r,n)},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a),o&&a.a(o)},o2.passwordLinking=function(e,i,n){var r=r9(cx(e));r8(cx(e));var o=r&&r.a;if(o){var a=new a4(n,function(){var i;(i=a.u())?cD(e,a.I(C(e.Xb,e),[n,i],function(i){return i=i.user.linkWithCredential(o).then(function(i){return lg(e,a,{user:i.user,credential:o,operationType:i.operationType,additionalUserInfo:i.additionalUserInfo})}),cD(e,i),i},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":sD(a.i(),!1),sj(a.B(),lb(e));break;case"auth/too-many-requests":a.a(lb(e));break;default:n1("signInWithEmailAndPassword: "+e.message,void 0),a.a(lb(e))}})):a.i().focus()},function(){a.m(),o4("passwordRecovery",e,i,n)},oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a)}else lE(e,i)},a(l5,aa),l5.prototype.v=function(){this.B(),this.H(this.l,this.u),o8(this.i())||this.i().focus(),au(this,this.i(),this.l),aa.prototype.v.call(this)},l5.prototype.o=function(){this.u=this.l=null,aa.prototype.o.call(this)},A(l5.prototype,{i:a6,w:a3,B:a9,M:a8,j:a7,U:aX,P:aJ,H:aQ}),o2.passwordRecovery=function(e,i,n,r,o){var a=new l5(function(){!function(e,i){var n=i.j();if(n){var r=al(i);cD(e,i.I(C(cT(e).sendPasswordResetEmail,cT(e)),[n],function(){i.m();var o=new li(n,function(){o.m(),lE(e,r)},oP(cF(e)),oD(cF(e)));o.render(r),c_(e,o)},function(e){sD(i.i(),!1),sj(i.w(),lb(e))}))}else i.i().focus()}(e,a)},r?void 0:function(){a.m(),lE(e,i)},n,oP(cF(e)),oD(cF(e)));a.render(i),c_(e,a),o&&a.a(o)},o2.passwordSignIn=function(e,i,n,r){var o=new le(function(){!function(e,i){var n=i.j(),r=i.u();if(n){if(r){var o=pu.auth.EmailAuthProvider.credential(n,r);cD(e,i.I(C(e.bc,e),[n,r],function(n){return lg(e,i,{user:n.user,credential:o,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":sD(i.l(),!1),sj(i.U(),lb(e));break;case"auth/too-many-requests":case"auth/wrong-password":sD(i.i(),!1),sj(i.B(),lb(e));break;default:n1("verifyPassword: "+e.message,void 0),i.a(lb(e))}}))}else i.i().focus()}else i.l().focus()}(e,o)},function(){var n=o.M();o.m(),o4("passwordRecovery",e,i,n)},n,oP(cF(e)),oD(cF(e)),r);o.render(i),c_(e,o)},a(l9,aa),l9.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(ac(this,this.i(),this.u()),ac(this,this.u(),this.l())):ac(this,this.i(),this.l()),this.w&&au(this,this.l(),this.w),o8(this.i())?this.B&&!o8(this.u())?this.u().focus():this.l().focus():this.i().focus(),aa.prototype.v.call(this)},l9.prototype.o=function(){this.H=this.w=null,aa.prototype.o.call(this)},A(l9.prototype,{i:a6,U:a3,ea:a9,jb:a8,j:a7,u:l6,Bc:l3,Ja:function(){var e=l6.call(this),i=l3.call(this);sM(this,e,function(){sV(i)&&(sD(e,!0),sU(i))})},M:function(){var e=l6.call(this),i=l3.call(this),n=o8(e);return sD(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(sU(i),i=!0):(sj(i,tK("Enter your account name").toString()),i=!1),i?W(o8(e)):null},l:lB,ba:lj,lb:lF,ua:lV,P:lH,Nb:aX,Mb:aJ,pa:aQ}),o2.passwordSignUp=function(e,i,n,r,o,a){var l=new l9(oM(cF(e)),function(){!function(e,i){var n=oM(cF(e)),r=i.j(),o=null;n&&(o=i.M());var a=i.P();if(r){if(n){if(o)o=et(o);else{i.u().focus();return}}if(a){var l=pu.auth.EmailAuthProvider.credential(r,a);cD(e,i.I(C(e.Yb,e),[r,a],function(r){var a={user:r.user,credential:l,operationType:r.operationType,additionalUserInfo:r.additionalUserInfo};return n?(r=r.user.updateProfile({displayName:o}).then(function(){return lg(e,i,a)}),cD(e,r),r):lg(e,i,a)},function(n){if(!n.name||"cancel"!=n.name){var o=lp(n);switch(n=lb(o),o.code){case"auth/email-already-in-use":return function(e,i,n,r){function o(){var e=lb(r);sD(i.i(),!1),sj(i.U(),e),i.i().focus()}var a=cT(e).fetchSignInMethodsForEmail(n).then(function(r){r.length?o():(r=al(i),i.m(),o4("passwordRecovery",e,r,n,!1,ii().toString()))},function(){o()});return cD(e,a),a}(e,i,r,o);case"auth/too-many-requests":n=tK("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":sD(i.l(),!1),sj(i.ba(),n);break;case"auth/admin-restricted-operation":oA(cF(e))?(n=al(i),i.m(),o4("handleUnauthorizedUser",e,n,r,pu.auth.EmailAuthProvider.PROVIDER_ID)):i.a(n);break;default:n1(o="setAccountInfo: "+rF(o),void 0),i.a(n)}}}))}else i.l().focus()}else i.i().focus()}(e,l)},o?void 0:function(){l.m(),lE(e,i)},n,r,oP(cF(e)),oD(cF(e)),a);l.render(i),c_(e,l)},a(ct,aa),ct.prototype.v=function(){var e=this;this.U(this.jb),iO(this.i,"tick",this.w,!1,this),this.i.start(),sF(this,sR(this,"firebaseui-id-change-phone-number-link"),function(){e.P()}),sF(this,this.Da(),function(){e.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),aa.prototype.v.call(this)},ct.prototype.o=function(){this.M=this.H=this.l=this.P=null,sc(this.i),iN(this.i,"tick",this.w),this.i=null,aa.prototype.o.call(this)},ct.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(sc(this.i),iN(this.i,"tick",this.w),this.ua(),this.lb())},A(ct.prototype,{u:l8,pa:l7,Ja:function(e){var i=l8.call(this),n=l7.call(this);sM(this,i,function(){sV(n)&&(sD(i,!0),sU(n))}),e&&sB(this,i,function(){e()})},ba:function(){var e=W(o8(l8.call(this))||"");return/^\d{6}$/.test(e)?e:null},Fb:ce,U:function(e){tO(ce.call(this),tK("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ua:function(){sU(this.Fb())},Da:function(){return sR(this,"firebaseui-id-resend-link")},lb:function(){sj(this.Da())},Nb:aX,Mb:aJ,ea:aQ}),o2.phoneSignInFinish=function(e,i,n,r,o,a){var l=new ct(function(){l.m(),o4("phoneSignInStart",e,i,n)},function(){!function(e,i,n,r){function o(e){i.u().focus(),sD(i.u(),!1),sj(i.pa(),e)}var a=i.ba();a?(i.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",tK("Verifying...").toString()),cD(e,i.I(C(r.confirm,r),[a],function(n){i.h(),i.$("firebaseui-icon-done",tK("Verified!").toString());var r=setTimeout(function(){i.h(),i.m();var r={user:cC(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};lg(e,i,r,!0)},1e3);cD(e,function(){i&&i.h(),clearTimeout(r)})},function(r){if(r.name&&"cancel"==r.name)i.h();else{var a=lp(r);switch(r=lb(a),a.code){case"auth/credential-already-in-use":i.h();break;case"auth/code-expired":a=al(i),i.h(),i.m(),o4("phoneSignInStart",e,a,n,r);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":i.h(),o(r);break;default:i.h(),i.a(r)}}}))):o(tK("Wrong code. Try again.").toString())}(e,l,n,o)},function(){l.m(),lE(e,i)},function(){l.m(),o4("phoneSignInStart",e,i,n)},om(n),r,oP(cF(e)),oD(cF(e)));l.render(i),c_(e,l),a&&l.a(a)};var ci=!e$&&!(ez("Safari")&&!(eq()||ez("Coast")||ez("Opera")||ez("Edge")||ez("Firefox")||ez("FxiOS")||ez("Silk")||ez("Android")));function cn(e,i){return/-[a-z]/.test(i)?null:ci&&e.dataset?!ez("Android")||eq()||ez("Firefox")||ez("FxiOS")||ez("Opera")||ez("Silk")||i in e.dataset?void 0===(e=e.dataset[i])?null:e:null:e.getAttribute("data-"+String(i).replace(/([A-Z])/g,"-$1").toLowerCase())}function cr(e,i,n){var r=this;e=tF(s2,{items:e},null,this.s),s7.call(this,e,!0,!0),n&&(n=function(e,i){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(cn(e[n],"listboxid")===i)return e[n];return null}(e,n))&&(n.focus(),function(e,i){var n=(i=i||tC(document))||tC(document),r=sC(e),o=sC(n);if(!e$||9<=Number(re)){l=sS(n,"borderLeftWidth");var a=sS(n,"borderRightWidth");c=sS(n,"borderTopWidth"),u=sS(n,"borderBottomWidth"),a=new s_(parseFloat(c),parseFloat(a),parseFloat(u),parseFloat(l))}else{var l=sA(n,"borderLeft");a=sA(n,"borderRight");var c=sA(n,"borderTop"),u=sA(n,"borderBottom");a=new s_(c,a,u,l)}n==tC(document)?(l=r.a-n.scrollLeft,r=r.g-n.scrollTop,!e$||10<=Number(re)||(l+=a.left,r+=a.top)):(l=r.a-o.a-a.left,r=r.g-o.g-a.top),o=e.offsetWidth,a=e.offsetHeight,c=eJ&&!o&&!a,e=(!d(o)||c)&&e.getBoundingClientRect?new tk((e=sT(e)).right-e.left,e.bottom-e.top):new tk(o,a),o=n.clientHeight-e.height,a=n.scrollLeft,c=n.scrollTop,a+=Math.min(l,Math.max(l-(n.clientWidth-e.width),0)),c+=Math.min(r,Math.max(r-o,0)),n=new tw(a,c),i.scrollLeft=n.a,i.scrollTop=n.g}(n,e)),sF(this,e,function(e){(e=(e=tL(e.target,"firebaseui-id-list-box-dialog-button"))&&cn(e,"listboxid"))&&(ae.call(r),i(e))})}function co(){return sR(this,"firebaseui-id-phone-number")}function cs(){return sR(this,"firebaseui-id-country-selector")}function ca(){return sR(this,"firebaseui-id-phone-number-error")}function cl(e,i){var n=e.a,r=cc("1-US-0",n),o=null;if(!(o=i&&cc(i,n)?i:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");cd.call(this,o,e)}function cc(e,i){return!(!(e=ol(e))||!V(i,e))}function cu(e){return"firebaseui-flag-"+e.f}function ch(e){var i=this;cr.call(this,e.a.map(function(e){return{id:e.c,Ma:"firebaseui-flag "+cu(e),label:e.name+" +"+e.b}}),function(n){cd.call(i,n,e,!0),i.O().focus()},this.Ba)}function cd(e,i,n){var r=ol(e);r&&(n&&(i=oa(i,n=W(o8(co.call(this))||""))).length&&i[0].b!=r.b&&(n="+"+r.b+n.substr(i[0].b.length+1),o7(co.call(this),n)),i=ol(this.Ba),this.Ba=e,e=sR(this,"firebaseui-id-country-selector-flag"),i&&o9(e,cu(i)),o3(e,cu(r)),tO(sR(this,"firebaseui-id-country-selector-code"),"+"+r.b))}function cf(e,i,n,r,o,a,l,c,u,h){aa.call(this,aK,{Gb:i,Aa:u||null,Va:!!n,ia:!!a},h,"phoneSignInStart",{F:r,D:o}),this.H=c||null,this.M=i,this.l=e,this.w=n||null,this.pa=l||null}function cp(e,i,n,r){try{var o=i.U(oW)}catch(e){return}o?oq?(i.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",tK("Verifying...").toString()),cD(e,i.I(C(e.cc,e),[om(o),n],function(n){var r=al(i);i.$("firebaseui-icon-done",tK("Code sent!").toString());var a=setTimeout(function(){i.h(),i.m(),o4("phoneSignInFinish",e,r,o,15,n)},1e3);cD(e,function(){i&&i.h(),clearTimeout(a)})},function(n){if(i.h(),!n.name||"cancel"!=n.name){grecaptcha.reset(o$),oq=null;var r=n&&n.message||"";if(n.code)switch(n.code){case"auth/too-many-requests":r=tK("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":i.O().focus(),sj(i.B(),t7().toString());return;case"auth/admin-restricted-operation":if(oA(cF(e))){n=al(i),i.m(),o4("handleUnauthorizedUser",e,n,om(o),pu.auth.PhoneAuthProvider.PROVIDER_ID);return}r=lb(n);break;default:r=lb(n)}i.a(r)}}))):oK?sj(i.u(),tK("Solve the reCAPTCHA").toString()):!oK&&r&&i.i().click():(i.O().focus(),sj(i.B(),t7().toString()))}function cg(e,i,n,r,o){aa.call(this,aq,{Sb:i},o,"providerSignIn",{F:n,D:r}),this.i=e}function cm(e,i,n,r,o,a,l){aa.call(this,ah,{email:n,Va:!!i,ia:!!a},l,"signIn",{F:r,D:o}),this.i=e,this.u=i}function cv(e,i,n,r,o,a,l){aa.call(this,ax,{kc:e,yb:n,Eb:!!r},l,"unauthorizedUser",{F:o,D:a}),this.l=i,this.i=r}function cb(e,i,n,r,o,a){aa.call(this,aA,{email:e},a,"unsupportedProvider",{F:r,D:o}),this.l=i,this.i=n}function cy(e,i){this.$=!1;var n=cE(i);if(ck[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');ck[n]=this,this.a=e,this.u=null,this.Y=!1,cw(this.a),this.h=pu.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),(e=e.emulatorConfig)&&(n=e.port,this.h.useEmulator(e.protocol+"://"+e.host+(null===n?"":":"+n),e.options)),cw(this.h),this.h.setPersistence&&this.h.setPersistence(pu.auth.Auth.Persistence.SESSION),this.oa=i,this.ca=new ow,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=nP.Xa(),this.j=this.C=null,this.da=this.A=!1}function cw(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}a(cf,aa),cf.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||ac(this,this.O(),this.i()),au(this,this.i(),this.l),this.O().focus(),lW(this.O(),(this.O().value||"").length),aa.prototype.v.call(this)},cf.prototype.o=function(){this.w=this.l=null,aa.prototype.o.call(this)},A(cf.prototype,{Cb:at,O:co,B:ca,ea:function(e,i,n){var r=this,o=co.call(this),a=cs.call(this),l=ca.call(this),c=e||of,u=c.a;if(0==u.length)throw Error("No available countries provided.");cl.call(r,c,i),sF(this,a,function(){ch.call(r,c)}),sM(this,o,function(){sV(l)&&(sD(o,!0),sU(l));var e=W(o8(o)||""),i=ol(this.Ba),n=oa(c,e);e=cc("1-US-0",u),n.length&&n[0].b!=i.b&&(i=n[0],cd.call(r,"1"==i.b&&e?"1-US-0":i.c,c))}),n&&sB(this,o,function(){n()})},U:function(e){var i=W(o8(co.call(this))||""),n=(e=e||of).a,r=oa(of,i);if(r.length&&!V(n,r[0]))throw o7(co.call(this)),co.call(this).focus(),sj(ca.call(this),tK("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=ol(this.Ba),r.length&&r[0].b!=n.b&&cd.call(this,r[0].c,e),r.length&&(i=i.substr(r[0].b.length+1)),i?new op(this.Ba,i):null},Ja:cs,ba:function(){return sR(this,"firebaseui-recaptcha-container")},u:function(){return sR(this,"firebaseui-id-recaptcha-error")},i:aX,ua:aJ,P:aQ}),o2.phoneSignInStart=function(e,i,n,r){var o,a,l,c,u,h=function(e){var i=null;if(oE(e).forEach(function(e){e.provider==pu.auth.PhoneAuthProvider.PROVIDER_ID&&E(e.recaptchaParameters)&&!Array.isArray(e.recaptchaParameters)&&(i=en(e.recaptchaParameters))}),i){var n=[];o1.forEach(function(e){void 0!==i[e]&&(n.push(e),delete i[e])}),n.length&&rs('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return i}(cF(e))||{};oq=null,oK=!(h&&"invisible"===h.size);var d=lk(e),f=(a=(a=(o=oI(o=cF(e),pu.auth.PhoneAuthProvider.PROVIDER_ID))&&o.defaultCountry||null)&&oc(a),l=null,o&&"string"==typeof o.loginHint&&(l=og(o.loginHint)),a&&a[0]||l&&ol(l.a)||null),p=d?(c=oI(c=cF(e),pu.auth.PhoneAuthProvider.PROVIDER_ID),u=null,c&&"string"==typeof c.loginHint&&(u=og(c.loginHint)),c&&c.defaultNationalNumber||u&&u.Aa||null):null;f=n&&n.a||f&&f.c||null,n=n&&n.Aa||p,(p=oR(cF(e)))&&oh(p),oW=p?new os(oR(cF(e))):of;var g=new cf(function(i){cp(e,g,m,!(!i||!i.keyCode))},oK,d?null:function(){m.clear(),g.m(),lE(e,i)},oP(cF(e)),oD(cF(e)),d,oW,f,n);g.render(i),c_(e,g),r&&g.a(r),h.callback=function(i){g.u()&&sU(g.u()),oq=i,oK||cp(e,g,m)},h["expired-callback"]=function(){oq=null};var m=new pu.auth.RecaptchaVerifier(oK?g.ba():g.i(),h,cC(e).app);cD(e,g.I(C(m.render,m),[],function(e){o$=e},function(n){n.name&&"cancel"==n.name||(n=lb(n),g.m(),lE(e,i,void 0,n))}))},o2.prefilledEmailSignIn=function(e,i,n){var r=new lY;r.render(i),c_(e,r),cD(e,r.I(C(cT(e).fetchSignInMethodsForEmail,cT(e)),[n],function(o){r.m();var a=!(!lw(e)||!cA(e));l_(e,i,o,n,void 0,a)},function(o){o=lb(o),r.m(),o4("signIn",e,i,n,o)}))},a(cg,aa),cg.prototype.v=function(){this.l(this.i),aa.prototype.v.call(this)},cg.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(cg.prototype,{l:function(e){function i(i){e(i)}for(var n=this.g?tI("firebaseui-id-idp-button",this.g||this.s.a):[],r=0;r<n.length;r++){var o=n[r],a=cn(o,"providerId");sF(this,o,x(i,a))}}}),o2.providerSignIn=function(e,i,n,r){var o=new cg(function(n){n==pu.auth.EmailAuthProvider.PROVIDER_ID?(o.m(),lT(e,i,r)):n==pu.auth.PhoneAuthProvider.PROVIDER_ID?(o.m(),o4("phoneSignInStart",e,i)):"anonymous"==n?cD(e,o.I(C(e.$b,e),[],function(i){return o.m(),lg(e,o,i,!0)},function(e){e.name&&"cancel"==e.name||(n1("ContinueAsGuest: "+e.code,void 0),e=lb(e),o.a(e))})):ly(e,o,n,r),cU(e),e.l.cancel()},oT(cF(e)),oP(cF(e)),oD(cF(e)));o.render(i),c_(e,o),n&&o.a(n),function(e){cU(e);try{var i,n;(function e(i,n,r){return i.a&&n?(i.h=!0,new i9(function(e){i.g=e,i.a.initialize({client_id:n,callback:e,auto_select:!r}),i.a.prompt()})):n?nr(nM.Xa().load().then(function(){return i.a=nN(),e(i,n,r)}).Ca(function(){return null})):nr(null)})(e.l,oC(cF(e)),(i=e,cU(i),(n=i.Z)||(n=!(!(i=oL(i=cF(i),pu.auth.GoogleAuthProvider.PROVIDER_ID))||"select_account"!==i.prompt)),n)).then(function(i){return!!e.g&&function(e,i,n){if(n&&n.credential&&n.clientId===oC(cF(e))){if(oO(cF(e),pu.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var r,o,a=JSON.parse(atob(n.credential.split(".")[1])).email}catch(e){}return ly(e,i,pu.auth.GoogleAuthProvider.PROVIDER_ID,a),nr(!0)}return r=pu.auth.GoogleAuthProvider.credential(n.credential),o=!1,r=i.I(C(e.ac,e),[r],function(n){var r=al(i);i.m(),o4("callback",e,r,nr(n)),o=!0},function(n){if((!n.name||"cancel"!=n.name)&&(!n||"auth/credential-already-in-use"!=n.code)){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var r=al(i);i.m(),o4("callback",e,r,no(n))}else n&&"auth/admin-restricted-operation"==n.code&&oA(cF(e))?(n=al(i),i.m(),o4("handleUnauthorizedUser",e,n,null,pu.auth.GoogleAuthProvider.PROVIDER_ID)):(n=lb(n),i.a(n))}}),cD(e,r),r.then(function(){return o},function(){return!1})}return n&&i.a(tK("The selected credential for the authentication provider is not supported!").toString()),nr(!1)}(e,e.g,i)})}catch(e){}}(e)},o2.sendEmailLinkForSignIn=function(e,i,n,r){var o=new lO;o.render(i),c_(e,o),lS(e,o,n,r,function(r){o.m(),r&&"auth/admin-restricted-operation"==r.code&&oA(cF(e))?o4("handleUnauthorizedUser",e,i,n,pu.auth.EmailAuthProvider.PROVIDER_ID):o4("signIn",e,i,n,r=lb(r))})},a(cm,aa),cm.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),lW(this.l(),(this.l().value||"").length),aa.prototype.v.call(this)},cm.prototype.o=function(){this.u=this.i=null,aa.prototype.o.call(this)},A(cm.prototype,{l:a6,M:a3,w:a9,H:a8,j:a7,U:aX,P:aJ,B:aQ}),o2.signIn=function(e,i,n,r){var o=lw(e),a=new cm(function(){var i=a.j()||"";i&&lI(e,a,i)},o?null:function(){a.m(),lE(e,i,n)},n,oP(cF(e)),oD(cF(e)),o);a.render(i),c_(e,a),r&&a.a(r)},a(cv,aa),cv.prototype.v=function(){var e=this,i=sR(this,"firebaseui-id-unauthorized-user-help-link");this.i&&i&&sF(this,i,function(){e.i()}),sF(this,this.u(),function(){e.l()}),this.u().focus(),aa.prototype.v.call(this)},cv.prototype.o=function(){this.i=this.l=null,aa.prototype.o.call(this)},A(cv.prototype,{u:aJ}),o2.handleUnauthorizedUser=function(e,i,n,r){function o(){lE(e,i)}r===pu.auth.EmailAuthProvider.PROVIDER_ID?o=function(){lT(e,i)}:r===pu.auth.PhoneAuthProvider.PROVIDER_ID&&(o=function(){o4("phoneSignInStart",e,i)});var a,l,c=null,u=null;r===pu.auth.EmailAuthProvider.PROVIDER_ID&&ox(cF(e))?(c=(a=oI(a=cF(e),pu.auth.EmailAuthProvider.PROVIDER_ID))&&a.disableSignUp&&a.disableSignUp.adminEmail||null,u=function(e){if((e=oI(e,pu.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp){var i=e.disableSignUp.helpLink||null;if(i&&"string"==typeof i)return function(){nv(i)}}return null}(cF(e))):oA(cF(e))&&(c=(l=(l=cF(e)).a.get("adminRestrictedOperation"))&&l.adminEmail?l.adminEmail:null,u=function(e){if(e=e.a.get("adminRestrictedOperation")||null){var i=e.helpLink||null;if(i&&"string"==typeof i)return function(){nv(i)}}return null}(cF(e)));var h=new cv(n,function(){h.m(),o()},c,u,oP(cF(e)),oD(cF(e)));h.render(i),c_(e,h)},a(cb,aa),cb.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),aa.prototype.v.call(this)},cb.prototype.o=function(){this.i=this.l=null,aa.prototype.o.call(this)},A(cb.prototype,{u:aX,B:aJ,w:aQ}),o2.unsupportedProvider=function(e,i,n){var r=new cb(n,function(){r.m(),o4("passwordRecovery",e,i,n)},function(){r.m(),lE(e,i,n)},oP(cF(e)),oD(cF(e)));r.render(i),c_(e,r)};var ck={};function cE(e){return e||"[DEFAULT]"}function cI(e){return cU(e),e.i||(e.i=cN(e,function(i){return i&&!r9(cx(e))?nr(cC(e).getRedirectResult().then(function(e){return e},function(i){if(i&&"auth/email-already-in-use"==i.code&&i.email&&i.credential)throw i;return cH(e,i)})):nr(cT(e).getRedirectResult().then(function(i){return ok(cF(e))&&!i.user&&e.j&&!e.j.isAnonymous?cC(e).getRedirectResult():i}))})),e.i}function c_(e,i){cU(e),e.g=i}var cS=null;function cT(e){return cU(e),e.h}function cC(e){return cU(e),e.a}function cx(e){return cU(e),e.oa}function cA(e){return cU(e),e.O?e.O.emailHint:void 0}function cO(e){return"signIn"===((e=new eB(e)).a.a.get(ej.ub)||null)&&!!e.a.a.get(ej.$a)}function cL(e,i,n,r){cU(e),void 0!==e.a.languageCode&&(e.u=e.a.languageCode);var o="en".replace(/_/g,"-");e.a.languageCode=o,e.h.languageCode=o,e.Y=!0,void 0!==e.a.tenantId&&(e.h.tenantId=e.a.tenantId),e.ib(n),e.O=r||null;var a=h.document;e.C?e.C.then(function(){"complete"==a.readyState?cR(e,i):iR(window,"load",function(){cR(e,i)})}):"complete"==a.readyState?cR(e,i):iR(window,"load",function(){cR(e,i)})}function cR(e,i){var n,r=nb(i,"Could not find the FirebaseUI widget element on the page.");if(r.setAttribute("lang","en".replace(/_/g,"-")),cS){var o=cS;cU(o),r9(cx(o))&&rs("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),cS.reset()}if(cS=e,e.T=r,n=r,e.L=null,e.J=new iY(n),e.J.register(),iO(e.J,"pageEnter",function(i){if(i=i&&i.pageId,e.L!=i){var n=cF(e);(n=oz(n).uiChanged||null)&&n(e.L,i),e.L=i}}),rW(new r$)&&rW(new rG)){i=nb(i,"Could not find the FirebaseUI widget element on the page."),r=(r=em(r=ny(),o=on(cF(e).a,"queryParameterForSignInSuccessUrl")))?to(ta(r)).toString():null;e:{for(a in o=em(o=ny(),oN(cF(e)))||"",oZ)if(oZ[a].toLowerCase()==o.toLowerCase()){var a=oZ[a];break e}a="callback"}switch(a){case"callback":r&&r6(r0,r,a=cx(e)),e.nb()?o4("callback",e,i):lE(e,i,cA(e));break;case"resetPassword":o4("passwordReset",e,i,lC(),lx());break;case"recoverEmail":o4("emailChangeRevocation",e,i,lC());break;case"revertSecondFactorAddition":o4("revertSecondFactorAddition",e,i,lC());break;case"verifyEmail":o4("emailVerification",e,i,lC(),lx());break;case"verifyAndChangeEmail":o4("verifyAndChangeEmail",e,i,lC(),lx());break;case"signIn":o4("emailLinkSignInCallback",e,i,ny()),cj();break;case"select":r&&r6(r0,r,a=cx(e)),lE(e,i);break;default:throw Error("Unhandled widget operation.")}(i=oz(i=cF(e)).uiShown||null)&&i()}else i=nb(i,"Could not find the FirebaseUI widget element on the page."),(a=new lf(tK("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(i),c_(e,a);i=e.g&&"blank"==e.g.Ga&&oF(cF(e)),r7(cx(e))&&!i&&(i=r7(cx(e)),cB(e,i.a),r5(rZ,cx(e)))}function cN(e,i){if(e.A)return i(cP(e));if(cD(e,function(){e.A=!1}),ok(cF(e))){var n=new i9(function(n){cD(e,e.a.onAuthStateChanged(function(r){e.j=r,e.A||(e.A=!0,n(i(cP(e))))}))});return cD(e,n),n}return e.A=!0,i(null)}function cP(e){return cU(e),ok(cF(e))&&e.j&&e.j.isAnonymous?e.j:null}function cD(e,i){if(cU(e),i){e.s.push(i);var n=function(){var n,r,o;n=e.s,r=function(e){return e==i},o=0,function(e,i){for(var n=f(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&i.call(void 0,n[r],r,e)}(n,function(e,i){r.call(void 0,e,i,n)&&z(n,i)&&o++})};"function"!=typeof i&&i.then(n,n)}}function cM(e){void 0!==e.a.languageCode&&e.Y&&(e.Y=!1,e.a.languageCode=e.u)}function cB(e,i){e.a.tenantId=i,e.h.tenantId=i}function cF(e){return cU(e),e.ca}function cU(e){if(e.$)throw Error("AuthUI instance is deleted!")}function cj(){var e=ny();if(cO(e)){for(var i in e=new eB(e),ej)ej.hasOwnProperty(i)&&eN(e.a.a,ej[i]);i={state:"signIn",mode:"emailLink",operation:"clear"};var n=h.document.title;h.history&&h.history.replaceState&&h.history.replaceState(i,n,e.toString())}}function cV(e){return cU(e),cT(e).signOut()}function cH(e,i,n){if(cU(e),i&&i.code&&("auth/email-already-in-use"==i.code||"auth/credential-already-in-use"==i.code)){var r=oH(cF(e));return nr().then(function(){return r(new io("anonymous-upgrade-merge-conflict",null,n||i.credential))}).then(function(){throw e.g&&(e.g.m(),e.g=null),i})}return no(i)}function cz(e,i,n,r){aa.call(this,aY,void 0,r,"providerMatchByEmail",{F:i,D:n}),this.i=e}function cq(e,i,n,r,o){aa.call(this,aG,{ec:i},o,"selectTenant",{F:n,D:r}),this.i=e}function cK(e){aa.call(this,av,void 0,e,"spinner")}function cW(e){for(var i in this.a=new oe,ot(this.a,"authDomain"),ot(this.a,"displayMode",cZ),ot(this.a,"tenants"),ot(this.a,"callbacks"),ot(this.a,"tosUrl"),ot(this.a,"privacyPolicyUrl"),e)if(e.hasOwnProperty(i))try{oi(this.a,i,e[i])}catch(e){n1('Invalid config: "'+i+'"',void 0)}}function c$(e){return e.a.get("callbacks")||{}}function cG(e){var i=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,i&&!e&&rs("Privacy Policy URL is missing, the link will not be displayed."),i&&e){if("function"==typeof i)return i;if("string"==typeof i)return function(){nv(i)}}return null}function cY(e){var i=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!i&&rs("Terms of Service URL is missing, the link will not be displayed."),i&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){nv(n)}}return null}function cX(e,i){if(!(e=e.a.get("tenants"))||!e.hasOwnProperty(i)&&!e.hasOwnProperty(c1))throw Error("Invalid tenant configuration!")}function cJ(e,i,n){if(!(e=e.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(e=e[i]||e[c1]))return n1("Invalid tenant configuration: "+i+" is not configured!",void 0),r;if(!(i=e.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return i.forEach(function(e){if("string"==typeof e)r.push(e);else if("string"==typeof e.provider){var i=e.hd;i&&n?(i instanceof RegExp?i:RegExp("@"+i.replace(".","\\.")+"$")).test(n)&&r.push(e.provider):r.push(e.provider)}else n1(e="Invalid tenant configuration: signInOption "+JSON.stringify(e)+" is invalid!",void 0)}),r}(e=cy.prototype).nb=function(){return cU(this),!!r7(cx(this))||cO(ny())},e.start=function(e,i){cL(this,e,i)},e.Db=function(){cU(this),this.Z=!0},e.reset=function(){cU(this);var e,i,n=this;this.T&&this.T.removeAttribute("lang"),this.J&&iK[i=iG((e=this.J).N())]&&iK[i].length&&(function(e,i){e:{for(var n=e.length,r=f(e)?e.split(""):e,o=0;o<n;o++)if(o in r&&i.call(void 0,r[o],o,e)){i=o;break e}i=-1}0<=i&&z(e,i)}(iK[i],function(i){return i==e}),iK[i].length||delete iK[i]),cM(this),this.O=null,cj(),r5(rZ,cx(this)),cU(this),this.l.cancel(),this.i=nr({user:null,credential:null}),cS==this&&(cS=null),this.T=null;for(var r=0;r<this.s.length;r++)"function"==typeof this.s[r]?this.s[r]():this.s[r].cancel&&this.s[r].cancel();this.s=[],r8(cx(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=cV(this).then(function(){n.C=null},function(){n.C=null}))},e.ib=function(e){cU(this);var i,n=this.ca;for(i in e)try{oi(n.a,i,e[i])}catch(e){n1('Invalid config: "'+i+'"',void 0)}eQ&&oi(n.a,"popupMode",!1),oR(n),!this.da&&oj(cF(this))&&(rs("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},e.Wb=function(){cU(this);var e=cF(this),i=on(e.a,"widgetUrl");e=oN(e);for(var n,r=i.search(eg),o=0,a=[];0<=(n=ep(i,o,e,r));)a.push(i.substring(o,n)),o=Math.min(i.indexOf("&",n)+1||r,r);a.push(i.substr(o)),i=a.join("").replace(ev,"$1"),(e+=r="="+encodeURIComponent("select"))?(0>(r=i.indexOf("#"))&&(r=i.length),0>(o=i.indexOf("?"))||o>r?(o=r,n=""):n=i.substring(o+1,r),r=(i=[i.substr(0,o),n,i.substr(r)])[1],i[1]=e?r?r+"&"+e:e:r,r=i[0]+(i[1]?"?"+i[1]:"")+i[2]):r=i,cF(this).a.get("popupMode")?(e=(window.screen.availHeight-600)/2,i=(window.screen.availWidth-500)/2,r=r||"about:blank",(e={width:500,height:600,top:0<e?e:0,left:0<i?i:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||r.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=ng(r,e))&&e.focus()):ty(window.location,r)},e.Wa=function(){var e=this;return cU(this),this.h.app.delete().then(function(){var i=cE(cx(e));delete ck[i],e.reset(),e.$=!0})},e.Ib=function(e,i){cU(this);var n,r,o,a=this,l=function(){for(var e=32,i=[];0<e;)i.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return i.join("")}();if(!oB(cF(this)))return no(Error("Email link sign-in should be enabled to trigger email sending."));var c=function(e){if(oB(e)){var i={url:ny(),handleCodeInApp:!0};(e=oI(e,pu.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof e.emailLinkSignIn&&es(i,e.emailLinkSignIn()),e=i.url;var n=ny();n instanceof eb||(n=eE(n)),e instanceof eb||(e=eE(e));var r=n;n=new eb(r);var o=!!e.j;o?ey(n,e.j):o=!!e.A,o?n.A=e.A:o=!!e.h,o?n.h=e.h:o=null!=e.C;var a=e.g;if(o)ew(n,e.C);else if(o=!!e.g){if("/"!=a.charAt(0)&&(r.h&&!r.g?a="/"+a:-1!=(r=n.g.lastIndexOf("/"))&&(a=n.g.substr(0,r+1)+a)),".."==a||"."==a)a="";else if(-1!=a.indexOf("./")||-1!=a.indexOf("/.")){r=0==a.lastIndexOf("/",0),a=a.split("/");for(var l=[],c=0;c<a.length;){var u=a[c++];"."==u?r&&c==a.length&&l.push(""):".."==u?((1<l.length||1==l.length&&""!=l[0])&&l.pop(),r&&c==a.length&&l.push("")):(l.push(u),r=!0)}a=l.join("/")}}return o?n.g=a:o=""!==e.a.toString(),o?ek(n,eD(e.a)):o=!!e.s,o&&(n.s=e.s),i.url=n.toString(),i}return null}(cF(this)),u=new eB(c.url);return l?u.a.a.set(ej.Sa,l):eN(u.a.a,ej.Sa),i&&i.a&&(n=cx(this),r6(r2,rD(l,JSON.stringify(rf(i))),n),eU(u,i.a.providerId)),o=!(!(r=oI(r=cF(this),pu.auth.EmailAuthProvider.PROVIDER_ID))||!r.forceSameDevice),u.a.a.set(ej.Qa,o?"1":"0"),cN(this,function(i){return i&&((i=i.uid)?u.a.a.set(ej.Pa,i):eN(u.a.a,ej.Pa)),c.url=u.toString(),cT(a).sendSignInLinkToEmail(e,c)}).then(function(){var i=cx(a),n={};n.email=e,r6(r1,rD(l,JSON.stringify(n)),i)},function(e){throw r5(r2,cx(a)),r5(r1,cx(a)),e})},e.bc=function(e,i){cU(this);var n=this;return cT(this).signInWithEmailAndPassword(e,i).then(function(r){return cN(n,function(o){return o?cV(n).then(function(){return cH(n,{code:"auth/email-already-in-use"},pu.auth.EmailAuthProvider.credential(e,i))}):r})})},e.Yb=function(e,i){cU(this);var n=this;return cN(this,function(r){if(r){var o=pu.auth.EmailAuthProvider.credential(e,i);return r.linkWithCredential(o)}return cT(n).createUserWithEmailAndPassword(e,i)})},e.ac=function(e){cU(this);var i=this;return cN(this,function(n){return n?n.linkWithCredential(e).then(function(e){return e},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return cH(i,n,e)}):cT(i).signInWithCredential(e)})},e.dc=function(e){cU(this);var i=this,n=this.i;return this.i=null,cN(this,function(n){return n&&!r9(cx(i))?n.linkWithRedirect(e):cT(i).signInWithRedirect(e)}).then(function(){},function(e){throw i.i=n,e})},e.cc=function(e,i){cU(this);var n=this;return cN(this,function(r){return r?r.linkWithPhoneNumber(e,i).then(function(e){return new nB(e,function(e){if("auth/credential-already-in-use"==e.code)return cH(n,e);throw e})}):cC(n).signInWithPhoneNumber(e,i).then(function(e){return new nB(e)})})},e.$b=function(){return cU(this),cC(this).signInAnonymously()},e.Xb=function(e,i){return cU(this),cT(this).signInWithEmailAndPassword(e,i)},a(cz,aa),cz.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),lW(this.l(),(this.l().value||"").length),aa.prototype.v.call(this)},cz.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},A(cz.prototype,{l:a6,H:a3,u:a9,B:a8,j:a7,M:aX,w:aQ}),a(cq,aa),cq.prototype.v=function(){(function(e,i){function n(e){i(e)}for(var r=e.g?tI("firebaseui-id-tenant-selection-button",e.g||e.s.a):[],o=0;o<r.length;o++){var a=r[o],l=cn(a,"tenantId");sF(e,a,x(n,l))}})(this,this.i),aa.prototype.v.call(this)},cq.prototype.o=function(){this.i=null,aa.prototype.o.call(this)},a(cK,aa);var cQ=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],cZ="optionFirst",c0={pc:cZ,oc:"identifierFirst"},c1="*";function c2(e,i){var n=this;this.s=nb(e),this.a={},Object.keys(i).forEach(function(e){n.a[e]=new cW(i[e])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(e){this.ob=e||null},enumerable:!1})}function c4(e){e.j&&e.j.reset(),e.mb(),e.g&&e.g.m()}(e=c2.prototype).Ub=function(e,i){var n=this;c4(this);var r=e.apiKey;return new i9(function(e,o){if(n.a.hasOwnProperty(r)){var a=c$(n.a[r]).selectTenantUiHidden||null;if(function(e){for(var i in e=e.a.get("displayMode"),c0)if(c0[i]===e)return c0[i];return cZ}(n.a[r])===cZ){var l=[];i.forEach(function(e){e=e||"_";var i=n.a[r].a.get("tenants");if(!i)throw Error("Invalid tenant configuration!");(i=i[e]||i[c1])?e={tenantId:"_"!==e?e:null,V:i.fullLabel||null,displayName:i.displayName,za:i.iconUrl,ta:i.buttonColor}:(n1("Invalid tenant configuration: "+e+" is not configured!",void 0),e=null),e&&l.push(e)});var c=function(i){e(i={tenantId:i,providerIds:cJ(n.a[r],i||"_")})};if(1===l.length){c(l[0].tenantId);return}n.g=new cq(function(e){c4(n),a&&a(),c(e)},l,cG(n.a[r]),cY(n.a[r]))}else n.g=new cz(function(){var o=n.g.j();if(o){for(var l=0;l<i.length;l++){var c=cJ(n.a[r],i[l]||"_",o);if(0!==c.length){o={tenantId:i[l],providerIds:c,email:o},c4(n),a&&a(),e(o);return}}n.g.a(ir({code:"no-matching-tenant-for-email"}).toString())}},cG(n.a[r]),cY(n.a[r]));n.g.render(n.s),(o=c$(n.a[r]).selectTenantUiShown||null)&&o()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.pb(u),o(u)}})},e.Pb=function(e,i){if(!this.a.hasOwnProperty(e))throw Error("Invalid project configuration: API key is invalid!");var n=i||void 0;cX(this.a[e],i||"_");try{this.i=pu.app(n).auth()}catch(o){var r=this.a[e].a.get("authDomain");if(!r)throw Error("Invalid project configuration: authDomain is required!");(e=pu.initializeApp({apiKey:e,authDomain:r},n)).auth().tenantId=i,this.i=e.auth()}return this.i},e.Zb=function(e,i){var n=this;return new i9(function(r,o){function a(i,r){n.j=new cy(e),cL(n.j,n.s,i,r)}var l,c,u,h,d,f,p,g,m,v=e.app.options.apiKey;n.a.hasOwnProperty(v)||o(Error("Invalid project configuration: API key is invalid!"));var b=(f=n.a[v],p=e.tenantId||"_",g=i&&i.providerIds,(p=(d=void 0===d?{}:d,cX(l=f,c=p),u=(l=l.a.get("tenants"))[c]||l[c1],h=void 0===(h=d)?{}:h,f=Object.keys(u).filter(function(e){return cQ.includes(e)}).reduce(function(e,i){return e[i]=u[i],e},h)).signInOptions)&&g&&(p=p.filter(function(e){return"string"==typeof e?g.includes(e):g.includes(e.provider)}),f.signInOptions=p),f);c4(n),o={signInSuccessWithAuthResult:function(e){return r(e),!1}};var y=c$(n.a[v]).signInUiShown||null,w=!1;o.uiChanged=function(i,r){null===i&&"callback"===r?((i=t_("firebaseui-id-page-callback",n.s))&&sU(i),n.h=new cK,n.h.render(n.s)):w||null===i&&"spinner"===r||"blank"===r||(n.h&&(n.h.m(),n.h=null),w=!0,y&&y(e.tenantId))},b.callbacks=o,b.credentialHelper="none",i&&i.email&&(m={emailHint:i.email}),n.j?n.j.Wa().then(function(){a(b,m)}):a(b,m)})},e.reset=function(){var e=this;return nr().then(function(){e.j&&e.j.Wa()}).then(function(){e.j=null,c4(e)})},e.Vb=function(){var e=this;this.h||this.A||(this.A=window.setTimeout(function(){c4(e),e.h=new cK,e.g=e.h,e.h.render(e.s),e.A=null},500))},e.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},e.Bb=function(){return c4(this),this.g=new ll,this.g.render(this.s),nr()},e.pb=function(e){var i,n=this,r=ir({code:e.code}).toString()||e.message;c4(this),e.retry&&"function"==typeof e.retry&&(i=function(){n.reset(),e.retry()}),this.g=new ld(r,i),this.g.render(this.s)},e.Rb=function(e){var i=this;return nr().then(function(){var n=i.i&&i.i.app.options.apiKey;if(!i.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(cX(i.a[n],e.tenantId||"_"),!i.i.currentUser||i.i.currentUser.uid!==e.uid)throw Error("The user being processed does not match the signed in user!");return(n=c$(i.a[n]).beforeSignInSuccess||null)?n(e):e}).then(function(i){if(i.uid!==e.uid)throw Error("User with mismatching UID returned.");return i})},L("firebaseui.auth.FirebaseUiHandler",c2),L("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",c2.prototype.Ub),L("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",c2.prototype.Pb),L("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",c2.prototype.Zb),L("firebaseui.auth.FirebaseUiHandler.prototype.reset",c2.prototype.reset),L("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",c2.prototype.Vb),L("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",c2.prototype.mb),L("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",c2.prototype.Bb),L("firebaseui.auth.FirebaseUiHandler.prototype.handleError",c2.prototype.pb),L("firebaseui.auth.FirebaseUiHandler.prototype.processUser",c2.prototype.Rb),L("firebaseui.auth.AuthUI",cy),L("firebaseui.auth.AuthUI.getInstance",function(e){return ck[e=cE(e)]?ck[e]:null}),L("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",cy.prototype.Db),L("firebaseui.auth.AuthUI.prototype.start",cy.prototype.start),L("firebaseui.auth.AuthUI.prototype.setConfig",cy.prototype.ib),L("firebaseui.auth.AuthUI.prototype.signIn",cy.prototype.Wb),L("firebaseui.auth.AuthUI.prototype.reset",cy.prototype.reset),L("firebaseui.auth.AuthUI.prototype.delete",cy.prototype.Wa),L("firebaseui.auth.AuthUI.prototype.isPendingRedirect",cy.prototype.nb),L("firebaseui.auth.AuthUIError",io),L("firebaseui.auth.AuthUIError.prototype.toJSON",io.prototype.toJSON),L("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",oG),L("firebaseui.auth.CredentialHelper.NONE",oY),L("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),i9.prototype.catch=i9.prototype.Ca,i9.prototype.finally=i9.prototype.fc}).apply(void 0!==eo?eo:"undefined"!=typeof self?self:window)}).apply(void 0!==eo?eo:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=g(pz));var pK=firebaseui.auth;async function pW(e){var i={signInSuccessUrl:"/",signInOptions:[up.PROVIDER_ID,uc.PROVIDER_ID],tosUrl:"<your-tos-url>",privacyPolicyUrl:function(){window.location.assign("<your-privacy-policy-url>")},callbacks:{signInFailure:function(e){console.error("Sign-in error:",e),"auth/email-already-in-use"===e.code&&alert("This email is already associated with an account.")}}};new pK.AuthUI(dR).start("#"+e.id,i)}async function p$(){dR.signOut(),window.location.reload()}dR.onAuthStateChanged(e=>!!e&&e),dR.user={},dR.user.signIn=pW,dR.user.signOut=p$;var pG={routes:{notes:{create:d1,read:d2,readAll:d6,update:d4,delete:d5,getRef:d3},collections:{create:dz,read:dq,readAll:dK,update:dW,delete:d$},sources:{create:dY,read:dX,update:dQ,delete:dJ}},auth:dR};class pY{constructor(e,i,n){return this.icon,this.button=document.createElement("button"),this.button.classList.add(e+"-button","button"),this.button.textContent=i,"icon"==e||"icon-solo"==e?(this._makeIcon(this.button),this.button.textContent=n,this.button.ariaLabel=i):"text-icon"==e&&(this.icon=this._createIcon(n),this.button.append(this.icon)),this.button}_makeIcon(e){e.classList.add("material-symbols-outlined")}_createIcon(e){let i=document.createElement("i");return this._makeIcon(i),i.textContent=e,i}}class pX{constructor(e){return this.collection=e,this.createCard()}createCard(){let e=document.createElement("article");e.classList.add("collection-card"),e.id=this.collection.id,e.innerHTML=`
        <h2>${this.collection.name}</h2>
        <p class="description">${this.collection.description}</p>
        <footer>
          <p class="label ideas-amount">
            <span>${this.collection.notes.length}</span> ideas
          </p>
        </footer>
    `;let i=new pY("icon-solo","more","more_horiz");return i.classList.add("collection-actions"),e.querySelector("footer").append(i),e}}var pJ={};S=window,T=function(e,i){var n=e.create("masonry");n.compatOptions.fitWidth="isFitWidth";var r=n.prototype;return r._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},r.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&i(n).outerWidth||this.containerWidth}var r=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,a=o/r,l=r-o%r;a=Math[l&&l<1?"round":"floor"](a),this.cols=Math.max(a,1)},r.getContainerWidth=function(){var e=i(this._getOption("fitWidth")?this.element.parentNode:this.element);this.containerWidth=e&&e.innerWidth},r._getItemLayoutPosition=function(e){e.getSize();var i=e.size.outerWidth%this.columnWidth,n=Math[i&&i<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,e),o={x:this.columnWidth*r.col,y:r.y},a=r.y+e.size.outerHeight,l=n+r.col,c=r.col;c<l;c++)this.colYs[c]=a;return o},r._getTopColPosition=function(e){var i=this._getTopColGroup(e),n=Math.min.apply(Math,i);return{col:i.indexOf(n),y:n}},r._getTopColGroup=function(e){if(e<2)return this.colYs;for(var i=[],n=this.cols+1-e,r=0;r<n;r++)i[r]=this._getColGroupY(r,e);return i},r._getColGroupY=function(e,i){if(i<2)return this.colYs[e];var n=this.colYs.slice(e,e+i);return Math.max.apply(Math,n)},r._getHorizontalColPosition=function(e,i){var n=this.horizontalColIndex%this.cols;n=e>1&&n+e>this.cols?0:n;var r=i.size.outerWidth&&i.size.outerHeight;return this.horizontalColIndex=r?n+e:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,e)}},r._manageStamp=function(e){var n=i(e),r=this._getElementOffset(e),o=this._getOption("originLeft")?r.left:r.right,a=o+n.outerWidth,l=Math.floor(o/this.columnWidth);l=Math.max(0,l);var c=Math.floor(a/this.columnWidth);c-=a%this.columnWidth?0:1,c=Math.min(this.cols-1,c);for(var u=(this._getOption("originTop")?r.top:r.bottom)+n.outerHeight,h=l;h<=c;h++)this.colYs[h]=Math.max(u,this.colYs[h])},r._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},r._getContainerFitWidth=function(){for(var e=0,i=this.cols;--i&&0===this.colYs[i];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},n},"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],T):pJ?pJ=T(el("ad2td"),el("g64Da")):S.Masonry=T(S.Outlayer,S.getSize);class pQ{constructor({gridType:e,items:i,itemType:n,clickablePath:r}){let o=document.createElement("ul");if(o.classList.add(e+"-grid","grid"),0==i.length){document.createElement("p");let i=document.createElement("span");i.textContent=`No ${e}s yet...`,o.append(i)}else{i.forEach(e=>{let i=new n(e),r=document.createElement("li");r.classList.add("grid-item"),r.append(i),o.append(r)}),r&&window.addEventListener("click",e=>{let i=e.target.closest(".grid-item").querySelector("article");i&&window.location.assign(r+i.id)});let e=new(g(pJ))(o,{itemSelector:".grid-item",percentPosition:!0,gutter:16,transitionDuration:"0.1s"});setTimeout(()=>{e.layout()},200)}return o}}function pZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function p0(){}"u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof eo||"u">typeof self&&self,Object.assign(p0,{default:p0,register:p0,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){let i=(this.document||this.ownerDocument).querySelectorAll(e),n=i.length;for(;--n>=0&&i.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(e))return i;i=i.parentElement||i.parentNode}while(null!==i)return null}),Element.prototype.prepend||(Element.prototype.prepend=function(e){let i=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach(e=>{let n=e instanceof Node;i.appendChild(n?e:document.createTextNode(e))}),this.insertBefore(i,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0==arguments.length||!!e;let i=this.parentNode,n=window.getComputedStyle(i,null),r=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),a=this.offsetTop-i.offsetTop<i.scrollTop,l=this.offsetTop-i.offsetTop+this.clientHeight-r>i.scrollTop+i.clientHeight,c=this.offsetLeft-i.offsetLeft<i.scrollLeft,u=this.offsetLeft-i.offsetLeft+this.clientWidth-o>i.scrollLeft+i.clientWidth;(a||l)&&e&&(i.scrollTop=this.offsetTop-i.offsetTop-i.clientHeight/2-r+this.clientHeight/2),(c||u)&&e&&(i.scrollLeft=this.offsetLeft-i.offsetLeft-i.clientWidth/2-o+this.clientWidth/2),(a||l||c||u)&&!e&&this.scrollIntoView(a&&!l)}),window.requestIdleCallback=window.requestIdleCallback||function(e){let i=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-i))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};let p1=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,i)=>((i&=63)<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i>62?e+="-":e+="_",e),"");var p2=((n=p2||{}).VERBOSE="VERBOSE",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR",n);const p4={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46};function p5(e,i,n="log",r,o="color: inherit"){if(!("console"in window)||!window.console[n])return;let a=["info","log","warn","error"].includes(n),l=[];switch(p5.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!a||e)return}r&&l.push(r);let c="Editor.js 2.29.1",u=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;e&&(a?(l.unshift(u,o),i=`%c${c}%c ${i}`):i=`( ${c} )${i}`);try{a?r?console[n](`${i} %o`,...l):console[n](i,...l):console[n](i)}catch{}}p5.logLevel="VERBOSE";const p6=p5.bind(window,!1),p3=p5.bind(window,!0);function p9(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function p8(e){return"function"===p9(e)||"asyncfunction"===p9(e)}function p7(e){return"object"===p9(e)}function ge(e){return"string"===p9(e)}function gt(e){return"number"===p9(e)}function gi(e){return"undefined"===p9(e)}function gn(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function gr(e){return e>47&&e<58||32===e||13===e||229===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}async function go(e,i=()=>{},n=()=>{}){async function r(e,i,n){try{await e.function(e.data),await i(gi(e.data)?{}:e.data)}catch{n(gi(e.data)?{}:e.data)}}return e.reduce(async(e,o)=>(await e,r(o,i,n)),Promise.resolve())}function gs(e){return Array.prototype.slice.call(e)}function ga(e,i){return function(){let n=this,r=arguments;window.setTimeout(()=>e.apply(n,r),i)}}function gl(e,i,n){let r;return(...o)=>{let a=this,l=n&&!r;window.clearTimeout(r),r=window.setTimeout(()=>{r=null,n||e.apply(a,o)},i),l&&e.apply(a,o)}}function gc(e,i,n){let r,o,a,l=null,c=0;n={};let u=function(){c=!1===n.leading?0:Date.now(),l=null,a=e.apply(r,o),l||(r=o=null)};return function(){let h=Date.now();c||!1!==n.leading||(c=h);let d=i-(h-c);return r=this,o=arguments,d<=0||d>i?(l&&(clearTimeout(l),l=null),c=h,a=e.apply(r,o),l||(r=o=null)):l||!1===n.trailing||(l=setTimeout(u,d)),a}}function gu(e){return e[0].toUpperCase()+e.slice(1)}function gh(e){let i=function(){let e={win:!1,mac:!1,x11:!1,linux:!1},i=Object.keys(e).find(e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e));return i&&(e[i]=!0),e}();return e=e.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e=i.mac?e.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function gd(e,i,n){let r=`\xab${i}\xbb is deprecated and will be removed in the next major release. Please use the \xab${n}\xbb instead.`;e&&p3(r,"warn")}function gf(e,i,n){let r=n.value?"value":"get",o=n[r],a=`#${i}Cache`;if(n[r]=function(...e){return void 0===this[a]&&(this[a]=o.apply(this,...e)),this[a]},"get"===r&&n.set){let i=n.set;n.set=function(n){delete e[a],i.apply(this,n)}}return n}function gp(){return window.matchMedia("(max-width: 650px)").matches}const gg="u">typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class gm{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,i=null,n={}){let r=document.createElement(e);for(let e in Array.isArray(i)?r.classList.add(...i):i&&r.classList.add(i),n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e]);return r}static text(e){return document.createTextNode(e)}static append(e,i){Array.isArray(i)?i.forEach(i=>e.appendChild(i)):e.appendChild(i)}static prepend(e,i){Array.isArray(i)?(i=i.reverse()).forEach(i=>e.prepend(i)):e.prepend(i)}static swap(e,i){let n=document.createElement("div"),r=e.parentNode;r.insertBefore(n,e),r.insertBefore(e,i),r.insertBefore(i,n),r.removeChild(n)}static find(e=document,i){return e.querySelector(i)}static get(e){return document.getElementById(e)}static findAll(e=document,i){return e.querySelectorAll(i)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return gs(e.querySelectorAll(gm.allInputsSelector)).reduce((e,i)=>gm.isNativeInput(i)||gm.containsOnlyInlineElements(i)?[...e,i]:[...e,...gm.getDeepestBlockElements(i)],[])}static getDeepestNode(e,i=!1){let n=i?"lastChild":"firstChild",r=i?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let o=e[n];if(gm.isSingleTag(o)&&!gm.isNativeInput(o)&&!gm.isLineBreakTag(o)){if(o[r])o=o[r];else{if(!o.parentNode[r])return o.parentNode;o=o.parentNode[r]}}return this.getDeepestNode(o,i)}return e}static isElement(e){return!gt(e)&&e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return!gt(e)&&e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return"true"===e.contentEditable}static isNativeInput(e){return!!e&&!!e.tagName&&["INPUT","TEXTAREA"].includes(e.tagName)}static canSetCaret(e){let i=!0;if(gm.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":i=!1}else i=gm.isContentEditable(e);return i}static isNodeEmpty(e,i){let n;return(!this.isSingleTag(e)||!!this.isLineBreakTag(e))&&(n=this.isElement(e)&&this.isNativeInput(e)?e.value:e.textContent.replace("",""),i&&(n=n.replace(RegExp(i,"g"),"")),0===n.trim().length)}static isLeaf(e){return!!e&&0===e.childNodes.length}static isEmpty(e,i){e.normalize();let n=[e];for(;n.length>0;)if(e=n.shift()){if(this.isLeaf(e)&&!this.isNodeEmpty(e,i))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){let i=gm.make("div");return i.innerHTML=e,i.childElementCount>0}static getContentLength(e){return gm.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let i;ge(e)?(i=document.createElement("div")).innerHTML=e:i=e;let n=e=>!gm.blockElements.includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n);return Array.from(i.children).every(n)}static getDeepestBlockElements(e){return gm.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((e,i)=>[...e,...gm.getDeepestBlockElements(i)],[])}static getHolder(e){return ge(e)?document.getElementById(e):e}static isAnchor(e){return"a"===e.tagName.toLowerCase()}static offset(e){let i=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=i.top+r,a=i.left+n;return{top:o,left:a,bottom:o+i.height,right:a+i.width}}}const gv={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},gb=class{static ui(e,i){return gb._t(e,i)}static t(e,i){return gb._t(e,i)}static setDictionary(e){gb.currentDictionary=e}static _t(e,i){let n=gb.getNamespace(e);return n&&n[i]?n[i]:i}static getNamespace(e){return e.split(".").reduce((e,i)=>e&&Object.keys(e).length?e[i]:{},gb.currentDictionary)}};gb.currentDictionary=gv;class gy extends Error{}class gw{constructor(){this.subscribers={}}on(e,i){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(i)}once(e,i){e in this.subscribers||(this.subscribers[e]=[]);let n=r=>{let o=i(r),a=this.subscribers[e].indexOf(n);return -1!==a&&this.subscribers[e].splice(a,1),o};this.subscribers[e].push(n)}emit(e,i){gn(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((e,i)=>{let n=i(e);return void 0!==n?n:e},i)}off(e,i){if(void 0===this.subscribers[e]){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===i){delete this.subscribers[e][n];break}}destroy(){this.subscribers={}}}function gk(e){Object.setPrototypeOf(this,{get id(){return e.id},get name(){return e.name},get config(){return e.config},get holder(){return e.holder},get isEmpty(){return e.isEmpty},get selected(){return e.selected},set stretched(t){e.stretched=t},get stretched(){return e.stretched},get focusable(){return e.focusable},call:(i,n)=>e.call(i,n),save:()=>e.save(),validate:i=>e.validate(i),dispatchChange(){e.dispatchChange()}})}class gE{constructor(){this.allListeners=[]}on(e,i,n,r=!1){let o=function(e=""){return`${e}${Math.floor(1e8*Math.random()).toString(16)}`}("l");if(!this.findOne(e,i,n))return this.allListeners.push({id:o,element:e,eventType:i,handler:n,options:r}),e.addEventListener(i,n,r),o}off(e,i,n,r){let o=this.findAll(e,i,n);o.forEach((e,i)=>{let n=this.allListeners.indexOf(o[i]);n>-1&&(this.allListeners.splice(n,1),e.element.removeEventListener(e.eventType,e.handler,e.options))})}offById(e){let i=this.findById(e);i&&i.element.removeEventListener(i.eventType,i.handler,i.options)}findOne(e,i,n){let r=this.findAll(e,i,n);return r.length>0?r[0]:null}findAll(e,i,n){let r=e?this.findByEventTarget(e):[];return e&&i&&n?r.filter(e=>e.eventType===i&&e.handler===n):e&&i?r.filter(e=>e.eventType===i):r}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(i=>{if(i.element===e)return i})}findByType(e){return this.allListeners.filter(i=>{if(i.eventType===e)return i})}findByHandler(e){return this.allListeners.filter(i=>{if(i.handler===e)return i})}findById(e){return this.allListeners.find(i=>i.id===e)}}class gI{constructor({config:e,eventsDispatcher:i}){if(this.nodes={},this.listeners=new gE,this.readOnlyMutableListeners={on:(e,i,n,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(e,i,n,r))},clearAll:()=>{for(let e of this.mutableListenerIds)this.listeners.offById(e);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===gI)throw TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=i}set state(e){this.Editor=e}removeAllNodes(){for(let e in this.nodes){let i=this.nodes[e];i instanceof HTMLElement&&i.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class g_{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){let e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){let e=window.getSelection();if(!e)return null;let i=e.anchorNode;return i?gm.isElement(i)?i:i.parentElement:null}static get anchorOffset(){let e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){let e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(g_.get())}static isSelectionAtEditor(e){if(!e)return!1;let i=e.anchorNode||e.focusNode;i&&i.nodeType===Node.TEXT_NODE&&(i=i.parentNode);let n=null;return i&&i instanceof Element&&(n=i.closest(`.${g_.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(e){if(!e)return;let i=e.startContainer;i&&i.nodeType===Node.TEXT_NODE&&(i=i.parentNode);let n=null;return i&&i instanceof Element&&(n=i.closest(`.${g_.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!g_.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,i,n={x:0,y:0,width:0,height:0};if(e&&"Control"!==e.type)return i=e.createRange(),n.x=i.boundingLeft,n.y=i.boundingTop,n.width=i.boundingWidth,n.height=i.boundingHeight,n;if(!window.getSelection)return p6("Method window.getSelection is not supported","warn"),n;if(null===(e=window.getSelection()).rangeCount||isNaN(e.rangeCount))return p6("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===e.rangeCount)return n;if((i=e.getRangeAt(0).cloneRange()).getBoundingClientRect&&(n=i.getBoundingClientRect()),0===n.x&&0===n.y){let e=document.createElement("span");if(e.getBoundingClientRect){e.appendChild(document.createTextNode("")),i.insertNode(e),n=e.getBoundingClientRect();let r=e.parentNode;r.removeChild(e),r.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,i=0){let n=document.createRange(),r=window.getSelection();return gm.isNativeInput(e)?gm.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=i,e.getBoundingClientRect()):void 0:(n.setStart(e,i),n.setEnd(e,i),r.removeAllRanges(),r.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){let i=g_.range;return null!==i&&e.contains(i.startContainer)}static addFakeCursor(){let e=g_.range;if(null===e)return;let i=gm.make("span","codex-editor__fake-cursor");i.dataset.mutationFree="true",e.collapse(),e.insertNode(i)}static isFakeCursorInsideContainer(e){return null!==gm.find(e,".codex-editor__fake-cursor")}static removeFakeCursor(e=document.body){let i=gm.find(e,".codex-editor__fake-cursor");i&&i.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=g_.range}restore(){if(!this.savedSelectionRange)return;let e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){let e=window.getSelection(),i=document.createRange();i.selectNodeContents(e.focusNode),i.collapse(!1),e.removeAllRanges(),e.addRange(i)}findParentTag(e,i,n=10){let r=window.getSelection(),o=null;return r&&r.anchorNode&&r.focusNode?([r.anchorNode,r.focusNode].forEach(r=>{let a=n;for(;a>0&&r.parentNode&&!(r.tagName===e&&(o=r,i&&r.classList&&!r.classList.contains(i)&&(o=null),o));)r=r.parentNode,a--}),o):null}expandToTag(e){let i=window.getSelection();i.removeAllRanges();let n=document.createRange();n.selectNodeContents(e),i.addRange(n)}}const gS="redactor dom changed",gT="block changed",gC="fake cursor is about to be toggled",gx="fake cursor have been set";function gA(e,i){return e.mergeable&&e.name===i.name}var gO=((r=gO||{}).APPEND_CALLBACK="appendCallback",r.RENDERED="rendered",r.MOVED="moved",r.UPDATED="updated",r.REMOVED="removed",r.ON_PASTE="onPaste",r);class gL extends gw{constructor({id:e=p1(10),data:i,tool:n,api:r,readOnly:o,tunesData:a},l){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=e=>{let i=void 0===e,n=e instanceof InputEvent;i||n||this.detectToolRootChange(e),!i&&!n&&e.length>0&&e.every(e=>{let{addedNodes:i,removedNodes:n,target:r}=e;return[...Array.from(i),...Array.from(n),r].some(e=>(gm.isElement(e)||(e=e.parentElement),e&&null!==e.closest('[data-mutation-free="true"]')))})||(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.api=r,this.editorEventBus=l||null,this.blockAPI=new gk(this),this.tool=n,this.toolInstance=n.create(i,this.blockAPI,o),this.tunes=n.tunes,this.composeTunes(a),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(0!==this.cachedInputs.length)return this.cachedInputs;let e=gm.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){let i=this.inputs.findIndex(i=>i===e||i.contains(e));-1!==i&&(this.inputIndex=i)}get firstInput(){return this.inputs[0]}get lastInput(){let e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!gn(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return p8(this.toolInstance.merge)}get focusable(){return 0!==this.inputs.length}get isEmpty(){let e=gm.isEmpty(this.pluginsContent,"/"),i=!this.hasMedia;return e&&i}get hasMedia(){return!!this.holder.querySelector("img,iframe,video,audio,source,input,textarea,twitterwidget")}set selected(e){var i,n;this.holder.classList.toggle(gL.CSS.selected,e);let r=!0===e&&g_.isRangeInsideContainer(this.holder),o=!1===e&&g_.isFakeCursorInsideContainer(this.holder);(r||o)&&(null==(i=this.editorEventBus)||i.emit(gC,{state:e}),r?g_.addFakeCursor():g_.removeFakeCursor(this.holder),null==(n=this.editorEventBus)||n.emit(gx,{state:e}))}get selected(){return this.holder.classList.contains(gL.CSS.selected)}set stretched(e){this.holder.classList.toggle(gL.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(gL.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(gL.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,i){if(p8(this.toolInstance[e])){"appendCallback"===e&&p6("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,i)}catch(i){p6(`Error during '${e}' call: ${i.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){let e;let i=await this.toolInstance.save(this.pluginsContent),n=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([e,i])=>{if(p8(i.save))try{n[e]=i.save()}catch(e){p6(`Tune ${i.constructor.name} save method throws an Error %o`,"warn",e)}});let r=window.performance.now();return Promise.resolve(i).then(i=>(e=window.performance.now(),{id:this.id,tool:this.name,data:i,tunes:n,time:e-r})).catch(e=>{p6(`Saving process for ${this.name} tool failed due to the ${e}`,"log","red")})}async validate(e){let i=!0;return this.toolInstance.validate instanceof Function&&(i=await this.toolInstance.validate(e)),i}getTunes(){let e=document.createElement("div"),i=[];return["function"==typeof this.toolInstance.renderSettings?this.toolInstance.renderSettings():[],[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(e=>e.render())].flat().forEach(n=>{gm.isElement(n)?e.appendChild(n):Array.isArray(n)?i.push(...n):i.push(n)}),[i,e]}updateCurrentInput(){this.currentInput=gm.isNativeInput(document.activeElement)||!g_.anchorNode?document.activeElement:g_.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),p8(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){let e=this.tool.toolbox;if(1===e.length)return Promise.resolve(this.tool.toolbox[0]);let i=await this.data;return e.find(e=>Object.entries(e.data).some(([e,n])=>i[e]&&function(e,i){let n=Array.isArray(e)||p7(e),r=Array.isArray(i)||p7(i);return n||r?JSON.stringify(e)===JSON.stringify(i):e===i}(i[e],n)))}async exportDataAsString(){return function(e,i){let n=null==i?void 0:i.export;return p8(n)?n(e):ge(n)?e[n]:(void 0!==n&&p6("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}(await this.data,this.tool.conversionConfig)}compose(){let e=gm.make("div",gL.CSS.wrapper),i=gm.make("div",gL.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,i.appendChild(this.toolRenderedElement);let r=i;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(e=>{if(p8(e.wrap))try{r=e.wrap(r)}catch(i){p6(`Tune ${e.constructor.name} wrap method throws an Error %o`,"warn",i)}}),e.appendChild(r),e}composeTunes(e){Array.from(this.tunes.values()).forEach(i=>{(i.isInternal?this.defaultTunesInstances:this.tunesInstances).set(i.name,i.create(e[i.name],this.blockAPI))}),Object.entries(e).forEach(([e,i])=>{this.tunesInstances.has(e)||(this.unavailableTunesData[e]=i)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),gm.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),gm.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=e=>{let{mutations:i}=e;i.some(e=>(function(e,i){let{type:n,target:r,addedNodes:o,removedNodes:a}=e;if(r===i)return!0;if(["characterData","attributes"].includes(n)){let e=r.nodeType===Node.TEXT_NODE?r.parentNode:r;return i.contains(e)}let l=Array.from(o).some(e=>i.contains(e)),c=Array.from(a).some(e=>i.contains(e));return l||c})(e,this.toolRenderedElement))&&this.didMutated(i)},null==(e=this.editorEventBus)||e.on(gS,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;null==(e=this.editorEventBus)||e.off(gS,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(e=>{if(Array.from(e.removedNodes).includes(this.toolRenderedElement)){let i=e.addedNodes[e.addedNodes.length-1];this.toolRenderedElement=i}})}dropInputsCache(){this.cachedInputs=[]}}class gR extends gI{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{p3("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:i=>gb.t(gR.getNamespace(e),i)})}}var gN={};C={get exports(){return gN},set exports(s){gN=s}},window,x=function(){return function(e){var i={};function n(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=i,n.d=function(e,i,r){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},n.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i||4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)n.d(r,o,(function(i){return e[i]}).bind(null,o));return r},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="/",n(n.s=0)}([function(e,i,n){var r,o;n(1),/*!
       * Codex JavaScript Notification module
       * https://github.com/codex-team/js-notifier
       */e.exports=(r=n(6),o=null,{show:function(e){if(e.message){o||(o=r.getWrapper(),document.body.appendChild(o));var i=null,n=e.time||8e3;switch(e.type){case"confirm":i=r.confirm(e);break;case"prompt":i=r.prompt(e);break;default:i=r.alert(e),window.setTimeout(function(){i.remove()},n)}o.appendChild(i),i.classList.add("cdx-notify--bounce-in")}}})},function(e,i,n){var r=n(2);"string"==typeof r&&(r=[[e.i,r,""]]),n(4)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,i,n){(e.exports=n(3)(!1)).push([e.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(e,i){e.exports=function(e){var i=[];return i.toString=function(){return this.map(function(i){var n=function(e,i){var n=e[1]||"",r=e[3];if(!r)return n;if(i&&"function"==typeof btoa){var o="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */";return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([o]).join(`
`)}return[n].join(`
`)}(i,e);return i[2]?"@media "+i[2]+"{"+n+"}":n}).join("")},i.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var l=e[o];"number"==typeof l[0]&&r[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="("+l[2]+") and ("+n+")"),i.push(l))}},i}},function(e,i,n){var r,o,a,l={},c=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=o.apply(this,arguments)),a}),u=(r={},function(e){if("function"==typeof e)return e();if(void 0===r[e]){var i=(function(e){return document.querySelector(e)}).call(this,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch{i=null}r[e]=i}return r[e]}),h=null,d=0,f=[],p=n(5);function g(e,i){for(var n=0;n<e.length;n++){var r=e[n],o=l[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(k(r.parts[a],i))}else{var c=[];for(a=0;a<r.parts.length;a++)c.push(k(r.parts[a],i));l[r.id]={id:r.id,refs:1,parts:c}}}}function m(e,i){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],l=i.base?a[0]+i.base:a[0],c={css:a[1],media:a[2],sourceMap:a[3]};r[l]?r[l].parts.push(c):n.push(r[l]={id:l,parts:[c]})}return n}function v(e,i){var n=u(e.insertInto);if(!n)throw Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(i,r.nextSibling):n.appendChild(i):n.insertBefore(i,n.firstChild),f.push(i);else if("bottom"===e.insertAt)n.appendChild(i);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o=u(e.insertInto+" "+e.insertAt.before);n.insertBefore(i,o)}}function b(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var i=f.indexOf(e);i>=0&&f.splice(i,1)}function y(e){var i=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),w(i,e.attrs),v(e,i),i}function w(e,i){Object.keys(i).forEach(function(n){e.setAttribute(n,i[n])})}function k(e,i){if(i.transform&&e.css){if(!(a=i.transform(e.css)))return function(){};e.css=a}if(i.singleton){var n,r,o,a,l,c=d++;r=_.bind(null,n=h||(h=y(i)),c,!1),o=_.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(l=document.createElement("link"),void 0===i.attrs.type&&(i.attrs.type="text/css"),i.attrs.rel="stylesheet",w(l,i.attrs),v(i,l),r=(function(e,i,n){var r=n.css,o=n.sourceMap,a=void 0===i.convertToAbsoluteUrls&&o;(i.convertToAbsoluteUrls||a)&&(r=p(r)),o&&(r+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var l=new Blob([r],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(l),c&&URL.revokeObjectURL(c)}).bind(null,n=l,i),o=function(){b(n),n.href&&URL.revokeObjectURL(n.href)}):(r=(function(e,i){var n=i.css,r=i.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}).bind(null,n=y(i)),o=function(){b(n)});return r(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&r(e=i):o()}}e.exports=function(e,i){if("u">typeof DEBUG&&DEBUG&&"object"!=typeof document)throw Error("The style-loader cannot be used in a non-browser environment");(i=i||{}).attrs="object"==typeof i.attrs?i.attrs:{},i.singleton||"boolean"==typeof i.singleton||(i.singleton=c()),i.insertInto||(i.insertInto="head"),i.insertAt||(i.insertAt="bottom");var n=m(e,i);return g(n,i),function(e){for(var r,o=[],a=0;a<n.length;a++){var c=n[a];(r=l[c.id]).refs--,o.push(r)}for(e&&g(m(e,i),i),a=0;a<o.length;a++)if(0===(r=o[a]).refs){for(var u=0;u<r.parts.length;u++)r.parts[u]();delete l[r.id]}}};var E,I=(E=[],function(e,i){return E[e]=i,E.filter(Boolean).join(`
`)});function _(e,i,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=I(i,o);else{var a=document.createTextNode(o),l=e.childNodes;l[i]&&e.removeChild(l[i]),l.length?e.insertBefore(a,l[i]):e.appendChild(a)}}},function(e,i){e.exports=function(e){var i="u">typeof window&&window.location;if(!i)throw Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=i.protocol+"//"+i.host,r=n+i.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,i){var o=i.trim().replace(/^"(.*)"$/,function(e,i){return i}).replace(/^'(.*)'$/,function(e,i){return i});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:"url("+JSON.stringify(0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""))+")"})}},function(e,i,n){var r,o,a,l,c,u,h,d,f;e.exports=(r="cdx-notifies",o="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",u="cdx-notify__input",h="cdx-notify__button",d="cdx-notify__btns-wrapper",{alert:f=function(e){var i=document.createElement("DIV"),n=document.createElement("DIV"),r=e.message,l=e.style;return i.classList.add(o),l&&i.classList.add(o+"--"+l),i.innerHTML=r,n.classList.add(a),n.addEventListener("click",i.remove.bind(i)),i.appendChild(n),i},confirm:function(e){var i=f(e),n=document.createElement("div"),r=document.createElement("button"),o=document.createElement("button"),u=i.querySelector("."+a),p=e.cancelHandler,g=e.okHandler;return n.classList.add(d),r.innerHTML=e.okText||"Confirm",o.innerHTML=e.cancelText||"Cancel",r.classList.add(h),o.classList.add(h),r.classList.add(l),o.classList.add(c),p&&"function"==typeof p&&(o.addEventListener("click",p),u.addEventListener("click",p)),g&&"function"==typeof g&&r.addEventListener("click",g),r.addEventListener("click",i.remove.bind(i)),o.addEventListener("click",i.remove.bind(i)),n.appendChild(r),n.appendChild(o),i.appendChild(n),i},prompt:function(e){var i=f(e),n=document.createElement("div"),r=document.createElement("button"),o=document.createElement("input"),c=i.querySelector("."+a),p=e.cancelHandler,g=e.okHandler;return n.classList.add(d),r.innerHTML=e.okText||"Ok",r.classList.add(h),r.classList.add(l),o.classList.add(u),e.placeholder&&o.setAttribute("placeholder",e.placeholder),e.default&&(o.value=e.default),e.inputType&&(o.type=e.inputType),p&&"function"==typeof p&&c.addEventListener("click",p),g&&"function"==typeof g&&r.addEventListener("click",function(){g(o.value)}),r.addEventListener("click",i.remove.bind(i)),n.appendChild(o),n.appendChild(r),i.appendChild(n),i},getWrapper:function(){var e=document.createElement("DIV");return e.classList.add(r),e}})}])},C.exports=x();const gP=pZ(gN);class gD{show(e){gP.show(e)}}var gM={};A={get exports(){return gM},set exports(s){gM=s}},O=function(){function e(e){var i=e.tags;if(!Object.keys(i).map(function(e){return typeof i[e]}).every(function(e){return"object"===e||"boolean"===e||"function"===e}))throw Error("The configuration was invalid");this.config=e}var i=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(e){return -1!==i.indexOf(e.nodeName)}var r=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){let i=document.implementation.createHTMLDocument(),n=i.createElement("div");return n.innerHTML=e,this._sanitize(i,n),n.innerHTML},e.prototype._sanitize=function(e,i){var o=e.createTreeWalker(i,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1),a=o.firstChild();if(a)do{if(a.nodeType===Node.TEXT_NODE){if(!(""===a.data.trim()&&(a.previousElementSibling&&n(a.previousElementSibling)||a.nextElementSibling&&n(a.nextElementSibling))))continue;i.removeChild(a),this._sanitize(e,i);break}if(a.nodeType===Node.COMMENT_NODE){i.removeChild(a),this._sanitize(e,i);break}var l,c,u,h,d=(u=a,-1!==r.indexOf(u.nodeName));d&&(h=Array.prototype.some.call(a.childNodes,n));var f=!!i.parentNode,p=n(i)&&n(a)&&f,g=a.nodeName.toLowerCase(),m=(l=this.config,c=a,"function"==typeof l.tags[g]?l.tags[g](c):l.tags[g]);if(d&&h||typeof m>"u"||"boolean"==typeof m&&!m||!this.config.keepNestedBlockElements&&p){if(!("SCRIPT"===a.nodeName||"STYLE"===a.nodeName))for(;a.childNodes.length>0;)i.insertBefore(a.childNodes[0],a);i.removeChild(a),this._sanitize(e,i);break}for(var v=0;v<a.attributes.length;v+=1){var b=a.attributes[v];(function(e,i,n){var r=e.name.toLowerCase();return!0!==i&&("function"==typeof i[r]?!i[r](e.value,n):typeof i[r]>"u"||!1===i[r]||"string"==typeof i[r]&&i[r]!==e.value)})(b,m,a)&&(a.removeAttribute(b.name),v-=1)}this._sanitize(e,a)}while(a=o.nextSibling())},e},A.exports=O();const gB=gM;function gF(e,i){return e.map(e=>{let n=p8(i)?i(e.tool):i;return gn(n)||(e.data=function e(i,n){return Array.isArray(i)?i.map(i=>e(i,n)):p7(i)?function(i,n){let r={};for(let a in i){var o;if(!Object.prototype.hasOwnProperty.call(i,a))continue;let l=i[a],c=p7(o=n[a])||"boolean"===p9(o)||p8(o)?n[a]:n;r[a]=e(l,c)}return r}(i,n):ge(i)?p7(n)?gU(i,n):!1===n?gU(i,{}):i:i}(e.data,n)),e})}function gU(e,i={}){return new gB({tags:i}).clean(e)}var gj={};L={get exports(){return gj},set exports(s){gj=s}},window,R=function(){return function(e){var i={};function n(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=i,n.d=function(e,i,r){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},n.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i||4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)n.d(r,o,(function(i){return e[i]}).bind(null,o));return r},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="",n(n.s=0)}([function(e,i,n){e.exports=n(1)},function(e,i,n){n.r(i),n.d(i,"default",function(){return r});class r{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(e,i,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);let r=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(r.hidingDelay&&(this.hidingDelay=r.hidingDelay),this.nodes.content.innerHTML="","string"==typeof i)this.nodes.content.appendChild(document.createTextNode(i));else{if(!(i instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof i+" given.");this.nodes.content.appendChild(i)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),r.placement){case"top":this.placeTop(e,r);break;case"left":this.placeLeft(e,r);break;case"right":this.placeRight(e,r);break;default:this.placeBottom(e,r)}r&&r.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},r.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(e=!1){if(this.hidingDelay&&!e)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(e,i,n){e.addEventListener("mouseenter",()=>{this.show(e,i,n)}),e.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){let e="codex-tooltips-style";if(document.getElementById(e))return;let i=n(2),r=this.make("style",null,{textContent:i.toString(),id:e});this.prepend(document.head,r)}placeBottom(e,i){let n=e.getBoundingClientRect(),r=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,o=n.bottom+window.pageYOffset+this.offsetTop+i.marginTop;this.applyPlacement("bottom",r,o)}placeTop(e,i){let n=e.getBoundingClientRect(),r=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,o=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",r,o)}placeLeft(e,i){let n=e.getBoundingClientRect(),r=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-i.marginLeft,o=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",r,o)}placeRight(e,i){let n=e.getBoundingClientRect(),r=n.right+this.offsetRight+i.marginRight,o=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",r,o)}applyPlacement(e,i,n){this.nodes.wrapper.classList.add(this.CSS.placement[e]),this.nodes.wrapper.style.left=i+"px",this.nodes.wrapper.style.top=n+"px"}make(e,i=null,n={}){let r=document.createElement(e);for(let e in Array.isArray(i)?r.classList.add(...i):i&&r.classList.add(i),n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r}append(e,i){Array.isArray(i)?i.forEach(i=>e.appendChild(i)):e.appendChild(i)}prepend(e,i){Array.isArray(i)?(i=i.reverse()).forEach(i=>e.prepend(i)):e.prepend(i)}}},function(e,i){e.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default},L.exports=R();const gV=pZ(gj);let gH=null;function gz(){gH||(gH=new gV)}function gq(e=!1){gz(),null==gH||gH.hide(e)}function gK(e,i,n){gz(),null==gH||gH.onHover(e,i,n)}const gW=function e(i,n){let r={};return Object.entries(i).forEach(([i,o])=>{if(p7(o)){let a=n?`${n}.${i}`:i;Object.values(o).every(e=>ge(e))?r[i]=a:r[i]=e(o,a);return}r[i]=o}),r}(gv),g$='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',gG='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>';class gY{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(gY.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(gY.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(gY.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return this.nodes.root.classList.contains(gY.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(gY.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(gY.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){let i=gm.make("div",gY.CSS.container);return e.name&&(i.dataset.itemName=e.name),this.nodes.icon=gm.make("div",gY.CSS.icon,{innerHTML:e.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),i.appendChild(this.nodes.icon),i.appendChild(gm.make("div",gY.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&i.appendChild(gm.make("div",gY.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&i.classList.add(gY.CSS.active),e.isDisabled&&i.classList.add(gY.CSS.disabled),i}enableConfirmationMode(e){let i={...this.params,...e,confirmation:e.confirmation},n=this.make(i);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(gY.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){let e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(gY.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(gY.CSS.noHover),this.nodes.root.classList.add(gY.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(void 0===e.confirmation)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(gY.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(gY.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const gX=class{constructor(e,i){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=i}get currentItem(){return -1===this.cursor?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(gX.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(gX.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(0===this.items.length)return this.cursor;let i=this.cursor;return -1===i?i=e===gX.directions.RIGHT?-1:0:this.items[i].classList.remove(this.focusedCssClass),i=e===gX.directions.RIGHT?(i+1)%this.items.length:(this.items.length+i-1)%this.items.length,gm.canSetCaret(this.items[i])&&ga(()=>g_.setCursor(this.items[i]),50)(),this.items[i].classList.add(this.focusedCssClass),i}};gX.directions={RIGHT:"right",LEFT:"left"};class gJ{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(gJ.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case p4.TAB:this.handleTabPress(e);break;case p4.LEFT:case p4.UP:this.flipLeft();break;case p4.RIGHT:case p4.DOWN:this.flipRight();break;case p4.ENTER:this.handleEnterPress(e)}},this.iterator=new gX(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||gJ.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[p4.TAB,p4.LEFT,p4.RIGHT,p4.ENTER,p4.UP,p4.DOWN]}activate(e,i){this.activated=!0,e&&this.iterator.setItems(e),void 0!==i&&this.iterator.setCursor(i),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(i=>i!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?gX.directions.LEFT:gX.directions.RIGHT){case gX.directions.RIGHT:this.flipRight();break;case gX.directions.LEFT:this.flipLeft()}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),p8(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}class gQ{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:i,placeholder:n}){this.listeners=new gE,this.items=e,this.onSearch=i,this.render(n)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=gm.make("div",gQ.CSS.wrapper);let i=gm.make("div",gQ.CSS.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=gm.make("input",gQ.CSS.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(i),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var i;let n=(null==(i=e.title)?void 0:i.toLowerCase())||"",r=this.searchQuery.toLowerCase();return n.includes(r)}}const gZ=class{lock(){gg?this.lockHard():document.body.classList.add(gZ.CSS.scrollLocked)}unlock(){gg?this.unlockHard():document.body.classList.remove(gZ.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(gZ.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(gZ.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};gZ.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var g0=Object.defineProperty,g1=Object.getOwnPropertyDescriptor,g2=((o=g2||{}).Close="close",o);const g4=class extends gw{constructor(e){super(),this.scopeElement=document.body,this.listeners=new gE,this.scrollLocker=new gZ,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(e=>e.isFocused).onFocus()},this.items=e.items.map(e=>new gY(e)),void 0!==e.scopeElement&&(this.scopeElement=e.scopeElement),e.messages&&(this.messages={...this.messages,...e.messages}),e.customContentFlippableItems&&(this.customContentFlippableItems=e.customContentFlippableItems),this.make(),e.customContent&&this.addCustomContent(e.customContent),e.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(g4.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(g4.CSS.overlayHidden),this.nodes.popover.classList.add(g4.CSS.popoverOpened),this.flipper.activate(this.flippableElements),void 0!==this.search&&requestAnimationFrame(()=>{var e;null==(e=this.search)||e.focus()}),gp()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(g4.CSS.popoverOpened),this.nodes.popover.classList.remove(g4.CSS.popoverOpenTop),this.nodes.overlay.classList.add(g4.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(e=>e.reset()),void 0!==this.search&&this.search.clear(),gp()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),gp()&&this.scrollLocker.unlock()}make(){this.nodes.popover=gm.make("div",[g4.CSS.popover]),this.nodes.nothingFoundMessage=gm.make("div",[g4.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=gm.make("div",[g4.CSS.items]),this.items.forEach(e=>{this.nodes.items.appendChild(e.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",e=>{let i=this.getTargetItem(e);void 0!==i&&this.handleItemClick(i)}),this.nodes.wrapper=gm.make("div"),this.nodes.overlay=gm.make("div",[g4.CSS.overlay,g4.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new gQ({items:this.items,placeholder:this.messages.search,onSearch:(e,i)=>{this.items.forEach(e=>{let n=!i.includes(e);e.toggleHidden(n)}),this.toggleNothingFoundMessage(0===i.length),this.toggleCustomContent(""!==e);let n=""===e?this.flippableElements:i.map(e=>e.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(n))}});let e=this.search.getElement();e.classList.add(g4.CSS.search),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}addCustomContent(e){this.nodes.customContent=e,this.nodes.customContent.classList.add(g4.CSS.customContent),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}getTargetItem(e){return this.items.find(i=>e.composedPath().includes(i.getElement()))}handleItemClick(e){e.isDisabled||(this.items.filter(i=>i!==e).forEach(e=>e.reset()),e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new gJ({items:this.flippableElements,focusedItemClass:gY.CSS.focused,allowedKeys:[p4.TAB,p4.UP,p4.DOWN,p4.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){let e=this.items.map(e=>e.getElement());return(this.customContentFlippableItems||[]).concat(e)}get height(){let e=0;if(null===this.nodes.popover)return e;let i=this.nodes.popover.cloneNode(!0);return i.style.visibility="hidden",i.style.position="absolute",i.style.top="-1000px",i.classList.add(g4.CSS.popoverOpened),document.body.appendChild(i),e=i.offsetHeight,i.remove(),e}get shouldOpenBottom(){let e=this.nodes.popover.getBoundingClientRect(),i=this.scopeElement.getBoundingClientRect(),n=this.height,r=e.top+n,o=e.top-n,a=Math.min(window.innerHeight,i.bottom);return o<i.top||r<=a}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(g4.CSS.nothingFoundMessageDisplayed,e)}toggleCustomContent(e){var i;null==(i=this.nodes.customContent)||i.classList.toggle(g4.CSS.customContentHidden,e)}toggleItemActivenessIfNeeded(e){if(!0===e.toggle&&e.toggleActive(),"string"==typeof e.toggle){let i=this.items.filter(i=>i.toggle===e.toggle);if(1===i.length){e.toggleActive();return}i.forEach(i=>{i.toggleActive(i===e)})}}};((e,i,n,r)=>{for(var o,a=r>1?void 0:r?g1(i,n):i,l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r?o(i,n,a):o(a))||a);return r&&a&&g0(i,n,a)})([gf],g4.prototype,"height",1);class g5 extends gI{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=gm.make("div",[g5.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=gm.make("div",g5.CSS.conversionToolbarTools);let e=gm.make("div",g5.CSS.conversionToolbarLabel,{textContent:gb.ui(gW.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),gm.append(this.nodes.wrapper,e),gm.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),p8(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(g5.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(g5.CSS.conversionToolHidden))),this.flipper.focusFirst(),p8(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(g5.CSS.conversionToolbarShowed),p8(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return 1!==this.tools.length||this.tools[0].name!==this.config.defaultBlock}async replaceWithBlock(e,i){let{BlockManager:n,BlockSelection:r,InlineToolbar:o,Caret:a}=this.Editor;n.convert(this.Editor.BlockManager.currentBlock,e,i),r.clearSelection(),this.close(),o.close(),window.requestAnimationFrame(()=>{a.setToBlock(this.Editor.BlockManager.currentBlock,a.positions.END)})}addTools(){Array.from(this.Editor.Tools.blockTools.entries()).forEach(([e,i])=>{var n;let r=i.conversionConfig;r&&r.import&&null!=(n=i.toolbox)&&n.forEach(i=>this.addToolIfValid(e,i))})}addToolIfValid(e,i){gn(i)||!i.icon||this.addTool(e,i)}addTool(e,i){var n;let r=gm.make("div",[g5.CSS.conversionTool]),o=gm.make("div",[g5.CSS.conversionToolIcon]);r.dataset.tool=e,o.innerHTML=i.icon,gm.append(r,o),gm.append(r,gm.text(gb.t(gW.toolNames,i.title||gu(e))));let a=null==(n=this.Editor.Tools.blockTools.get(e))?void 0:n.shortcut;if(a){let e=gm.make("span",g5.CSS.conversionToolSecondaryLabel,{innerText:gh(a)});gm.append(r,e)}gm.append(this.nodes.tools,r),this.tools.push({name:e,button:r,toolboxItem:i}),this.listeners.on(r,"click",async()=>{await this.replaceWithBlock(e,i.data)})}async filterTools(){let{currentBlock:e}=this.Editor.BlockManager,i=await e.getActiveToolboxEntry();this.tools.forEach(n=>{let r=!1;if(i){var o;let a=(o=n.toolboxItem,i.icon===o.icon&&i.title===o.title);r=n.button.dataset.tool===e.name&&a}n.button.hidden=r,n.button.classList.toggle(g5.CSS.conversionToolHidden,r)})}enableFlipper(){this.flipper=new gJ({focusedItemClass:g5.CSS.conversionToolFocused})}}var g6={};N={get exports(){return g6},set exports(s){g6=s}},window,P=function(){return function(e){var i={};function n(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=i,n.d=function(e,i,r){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},n.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i||4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)n.d(r,o,(function(i){return e[i]}).bind(null,o));return r},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="",n(n.s=0)}([function(e,i,n){function r(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,i,n){return i&&r(e.prototype,i),n&&r(e,n),e}n.r(i);var a=function(){function e(i){var n=this;(function(e,i){if(!(e instanceof i))throw TypeError("Cannot call a class as a function")})(this,e),this.commands={},this.keys={},this.name=i.name,this.parseShortcutName(i.name),this.element=i.on,this.callback=i.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return o(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),o(e,[{key:"parseShortcutName",value:function(i){i=i.split("+");for(var n=0;n<i.length;n++){i[n]=i[n].toUpperCase();var r=!1;for(var o in e.supportedCommands)if(e.supportedCommands[o].includes(i[n])){r=this.commands[o]=!0;break}r||(this.keys[i[n]]=!0)}for(var a in e.supportedCommands)this.commands[a]||(this.commands[a]=!1)}},{key:"execute",value:function(i){var n,r={CMD:i.ctrlKey||i.metaKey,SHIFT:i.shiftKey,ALT:i.altKey},o=!0;for(n in this.commands)this.commands[n]!==r[n]&&(o=!1);var a,l=!0;for(a in this.keys)l=l&&i.keyCode===e.keyCodes[a];o&&l&&this.callback(i)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}();i.default=a}]).default},N.exports=P();const g3=pZ(g6),g9=new class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);let i=new g3({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,i])}remove(e,i){let n=this.findShortcut(e,i);if(!n)return;n.remove();let r=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,r.filter(e=>e!==n))}findShortcut(e,i){return(this.registeredShortcuts.get(e)||[]).find(({name:e})=>e===i)}};var g8=Object.defineProperty,g7=Object.getOwnPropertyDescriptor,me=(e,i,n,r)=>{for(var o,a=r>1?void 0:r?g7(i,n):i,l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r?o(i,n,a):o(a))||a);return r&&a&&g8(i,n,a),a},mt=((a=mt||{}).Opened="toolbox-opened",a.Closed="toolbox-closed",a.BlockAdded="toolbox-block-added",a);const mi=class extends gw{constructor({api:e,tools:i,i18nLabels:n}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=i,this.i18nLabels=n}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new g4({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(g2.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(mi.CSS.toolbox),this.nodes.toolbox}hasFocus(){var e;return null==(e=this.popover)?void 0:e.hasFocus()}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),null==(e=this.popover)||e.off(g2.Close,this.onPopoverClose)}toolButtonActivated(e,i){this.insertNewBlock(e,i)}open(){var e;this.isEmpty||(null==(e=this.popover)||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;null==(e=this.popover)||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){let e=[];return this.tools.forEach(i=>{i.toolbox&&e.push(i)}),e}get toolboxItemsToBeDisplayed(){let e=(e,i)=>({icon:e.icon,title:gb.t(gW.toolNames,e.title||gu(i.name)),name:i.name,onActivate:()=>{this.toolButtonActivated(i.name,e.data)},secondaryLabel:i.shortcut?gh(i.shortcut):""});return this.toolsToBeDisplayed.reduce((i,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach(r=>{i.push(e(r,n))}):void 0!==n.toolbox&&i.push(e(n.toolbox,n)),i),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{let i=e.shortcut;i&&this.enableShortcutForTool(e.name,i)})}enableShortcutForTool(e,i){g9.add({name:i,on:this.api.ui.nodes.redactor,handler:i=>{i.preventDefault();let n=this.api.blocks.getCurrentBlockIndex(),r=this.api.blocks.getBlockByIndex(n);if(r)try{this.api.blocks.convert(r.id,e),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(n,"end")});return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{let i=e.shortcut;i&&g9.remove(this.api.ui.nodes.redactor,i)})}async insertNewBlock(e,i){let n;let r=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(r);if(!o)return;let a=o.isEmpty?r:r+1;i&&(n=Object.assign(await this.api.blocks.composeBlockData(e),i));let l=this.api.blocks.insert(e,n,void 0,a,void 0,o.isEmpty);l.call(gO.APPEND_CALLBACK),this.api.caret.setToBlock(a),this.emit("toolbox-block-added",{block:l}),this.api.toolbar.close()}};me([gf],mi.prototype,"toolsToBeDisplayed",1),me([gf],mi.prototype,"toolboxItemsToBeDisplayed",1);const mn="block hovered";async function mr(e,i){let n=navigator.keyboard;return n&&(await n.getLayoutMap()).get(e)||i}var mo=((l=mo||{})[l.Block=0]="Block",l[l.Inline=1]="Inline",l[l.Tune=2]="Tune",l),ms=((c=ms||{}).Shortcut="shortcut",c.Toolbox="toolbox",c.EnabledInlineTools="inlineToolbar",c.EnabledBlockTunes="tunes",c.Config="config",c),ma=((u=ma||{}).Shortcut="shortcut",u.SanitizeConfig="sanitize",u),ml=((h=ml||{}).IsEnabledLineBreaks="enableLineBreaks",h.Toolbox="toolbox",h.ConversionConfig="conversionConfig",h.IsReadOnlySupported="isReadOnlySupported",h.PasteConfig="pasteConfig",h),mc=((d=mc||{}).IsInline="isInline",d.Title="title",d),mu=((f=mu||{}).IsTune="isTune",f);class mh{constructor({name:e,constructable:i,config:n,api:r,isDefault:o,isInternal:a=!1,defaultPlaceholder:l}){this.api=r,this.name=e,this.constructable=i,this.config=n,this.isDefault=o,this.isInternal=a,this.defaultPlaceholder=l}get settings(){let e=this.config.config||{};return!this.isDefault||"placeholder"in e||!this.defaultPlaceholder||(e.placeholder=this.defaultPlaceholder),e}reset(){if(p8(this.constructable.reset))return this.constructable.reset()}prepare(){if(p8(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){let e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return 1===this.type}isBlock(){return 0===this.type}isTune(){return 2===this.type}}class md{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return gs(this.workingArea.children)}static set(e,i,n){return isNaN(Number(i))?Reflect.set(e,i,n):e.insert(+i,n),!0}static get(e,i){return isNaN(Number(i))?Reflect.get(e,i):e.get(+i)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,i){let n=this.blocks[i];gm.swap(this.blocks[e].holder,n.holder),this.blocks[i]=this.blocks[e],this.blocks[e]=n}move(e,i){let n=this.blocks.splice(i,1)[0],r=Math.max(0,e-1),o=this.blocks[r];e>0?this.insertToDOM(n,"afterend",o):this.insertToDOM(n,"beforebegin",o),this.blocks.splice(e,0,n);let a=this.composeBlockEvent("move",{fromIndex:i,toIndex:e});n.call(gO.MOVED,a)}insert(e,i,n=!1){if(!this.length){this.push(i);return}if(e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(gO.REMOVED)),this.blocks.splice(e,n?1:0,i),e>0){let n=this.blocks[e-1];this.insertToDOM(i,"afterend",n)}else{let n=this.blocks[e+1];n?this.insertToDOM(i,"beforebegin",n):this.insertToDOM(i)}}replace(e,i){if(void 0===this.blocks[e])throw Error("Incorrect index");this.blocks[e].holder.replaceWith(i.holder),this.blocks[e]=i}insertMany(e,i){let n=new DocumentFragment;for(let i of e)n.appendChild(i.holder);if(this.length>0){if(i>0){let e=Math.min(i-1,this.length-1);this.blocks[e].holder.after(n)}else 0===i&&this.workingArea.prepend(n);this.blocks.splice(i,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach(e=>e.call(gO.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(gO.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(gO.REMOVED)),this.blocks.length=0}insertAfter(e,i){let n=this.blocks.indexOf(e);this.insert(n+1,i)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,i,n){i?n.holder.insertAdjacentElement(i,e.holder):this.workingArea.appendChild(e.holder),e.call(gO.RENDERED)}composeBlockEvent(e,i){return new CustomEvent(e,{detail:i})}}const mf="block-removed",mp="block-added",mg="block-changed";class mm{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((i,n)=>{this.completed=this.completed.then(e).then(i).catch(n)})}}class mv extends gI{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){let{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;let i=g_.get(),n=gm.getDeepestNode(e.currentInput),r=i.focusNode;if(gm.isNativeInput(n))return 0===n.selectionEnd;if(!i.anchorNode)return!1;let o=r.textContent.search(/\S/);-1===o&&(o=0);let a=i.focusOffset;return r.nodeType!==Node.TEXT_NODE&&r.childNodes.length&&(r.childNodes[a]?(r=r.childNodes[a],a=0):a=(r=r.childNodes[a-1]).textContent.length),!!((gm.isLineBreakTag(n)||gm.isEmpty(n))&&this.getHigherLevelSiblings(r,"left").every(e=>{let i=gm.isLineBreakTag(e),n=1===e.children.length&&gm.isLineBreakTag(e.children[0]);return gm.isEmpty(e)&&!(i||n)}))&&a===o||null===n||r===n&&a<=o}get isAtEnd(){let{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;let i=g_.get(),n=i.focusNode,r=gm.getDeepestNode(e.currentInput,!0);if(gm.isNativeInput(r))return r.selectionEnd===r.value.length;if(!i.focusNode)return!1;let o=i.focusOffset;if(n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[o-1]?o=(n=n.childNodes[o-1]).textContent.length:(n=n.childNodes[0],o=0)),gm.isLineBreakTag(r)||gm.isEmpty(r)){let e=this.getHigherLevelSiblings(n,"right");if(e.every((i,n)=>n===e.length-1&&gm.isLineBreakTag(i)||gm.isEmpty(i)&&!gm.isLineBreakTag(i))&&o===n.textContent.length)return!0}let a=r.textContent.replace(/\s+$/,"");return n===r&&o>=a.length}setToBlock(e,i=this.positions.DEFAULT,n=0){var r;let o;let{BlockManager:a,BlockSelection:l}=this.Editor;if(l.clearSelection(),!e.focusable){null==(r=window.getSelection())||r.removeAllRanges(),l.selectBlock(e),a.currentBlock=e;return}switch(i){case this.positions.START:o=e.firstInput;break;case this.positions.END:o=e.lastInput;break;default:o=e.currentInput}if(!o)return;let c=gm.getDeepestNode(o,i===this.positions.END),u=gm.getContentLength(c);switch(!0){case i===this.positions.START:n=0;break;case i===this.positions.END:case n>u:n=u}this.set(c,n),a.setCurrentBlockByChildNode(e.holder),a.currentBlock.currentInput=o}setToInput(e,i=this.positions.DEFAULT,n=0){let{currentBlock:r}=this.Editor.BlockManager,o=gm.getDeepestNode(e);switch(i){case this.positions.START:this.set(o,0);break;case this.positions.END:this.set(o,gm.getContentLength(o));break;default:n&&this.set(o,n)}r.currentInput=e}set(e,i=0){let{top:n,bottom:r}=g_.setCursor(e,i),{innerHeight:o}=window;n<0?window.scrollBy(0,n-30):r>o&&window.scrollBy(0,r-o+30)}setToTheLastBlock(){let e=this.Editor.BlockManager.lastBlock;if(e){if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{let e=this.Editor.BlockManager.insertAtEnd();this.setToBlock(e)}}}extractFragmentFromCaretPosition(){let e=g_.get();if(e.rangeCount){let i=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(i.deleteContents(),n){if(gm.isNativeInput(n)){let e=document.createDocumentFragment(),i=n.value.substring(0,n.selectionStart),r=n.value.substring(n.selectionStart);return e.textContent=r,n.value=i,e}{let e=i.cloneRange();return e.selectNodeContents(n),e.setStart(i.endContainer,i.endOffset),e.extractContents()}}}}navigateNext(e=!1){let{BlockManager:i}=this.Editor,{currentBlock:n,nextBlock:r}=i,{nextInput:o}=n,a=this.isAtEnd,l=r,c=e||a;if(o&&c)return this.setToInput(o,this.positions.START),!0;if(null===l){if(n.tool.isDefault||!c)return!1;l=i.insertAtEnd()}return!!c&&(this.setToBlock(l,this.positions.START),!0)}navigatePrevious(e=!1){let{currentBlock:i,previousBlock:n}=this.Editor.BlockManager;if(!i)return!1;let{previousInput:r}=i,o=e||this.isAtStart;return r&&o?(this.setToInput(r,this.positions.END),!0):null!==n&&!!o&&(this.setToBlock(n,this.positions.END),!0)}createShadow(e){let i=document.createElement("span");i.classList.add(mv.CSS.shadowCaret),e.insertAdjacentElement("beforeend",i)}restoreCaret(e){let i=e.querySelector(`.${mv.CSS.shadowCaret}`);if(!i)return;new g_().expandToTag(i);let n=document.createRange();n.selectNode(i),n.extractContents()}insertContentAtCaretPosition(e){let i=document.createDocumentFragment(),n=document.createElement("div"),r=g_.get(),o=g_.range;n.innerHTML=e,Array.from(n.childNodes).forEach(e=>i.appendChild(e)),0===i.childNodes.length&&i.appendChild(new Text);let a=i.lastChild;o.deleteContents(),o.insertNode(i);let l=document.createRange(),c=a.nodeType===Node.TEXT_NODE?a:a.firstChild;null!==c&&null!==c.textContent&&l.setStart(c,c.textContent.length),r.removeAllRanges(),r.addRange(l)}getHigherLevelSiblings(e,i){let n=e,r=[];for(;n.parentNode&&"true"!==n.parentNode.contentEditable;)n=n.parentNode;let o="left"===i?"previousSibling":"nextSibling";for(;n[o];)r.push(n=n[o]);return r}}const mb=class extends gI{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{let i=e.create({},{},!1);if(!1===e.pasteConfig){this.exceptionList.push(e.name);return}if(!p8(i.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(i){p6(`Paste handling for \xab${e.name}\xbb Tool hasn't been set up because of the error`,"warn",i)}},this.handlePasteEvent=async e=>{let{BlockManager:i,Toolbar:n}=this.Editor,r=i.setCurrentBlockByChildNode(e.target);!r||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||r&&this.exceptionList.includes(r.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,i=!1){let{Tools:n}=this.Editor,r=e.types;if((r.includes?r.includes("Files"):r.contains("Files"))&&!gn(this.toolsFiles)){await this.processFiles(e.files);return}let o=e.getData(this.MIME_TYPE),a=e.getData("text/plain"),l=e.getData("text/html");if(o)try{this.insertEditorJSData(JSON.parse(o));return}catch{}i&&a.trim()&&l.trim()&&(l="<p>"+(l.trim()?l:a)+"</p>");let c=gU(l,Object.assign({},Object.keys(this.toolsTags).reduce((e,i)=>(e[i.toLowerCase()]=this.toolsTags[i].sanitizationConfig??{},e),{}),n.getAllInlineToolsSanitizeConfig(),{br:{}}));c.trim()&&c.trim()!==a&&gm.isHTMLString(c)?await this.processText(c,!0):await this.processText(a)}async processText(e,i=!1){let{Caret:n,BlockManager:r}=this.Editor,o=i?this.processHTML(e):this.processPlain(e);if(!o.length)return;if(1===o.length){o[0].isBlock?this.processSingleBlock(o.pop()):this.processInlinePaste(o.pop());return}let a=r.currentBlock&&r.currentBlock.tool.isDefault&&r.currentBlock.isEmpty;o.map(async(e,i)=>this.insertBlock(e,0===i&&a)),r.currentBlock&&n.setToBlock(r.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){Array.from(this.Editor.Tools.blockTools.values()).forEach(this.processTool)}collectTagNames(e){return ge(e)?[e]:p7(e)?Object.keys(e):[]}getTagsConfig(e){if(!1===e.pasteConfig)return;let i=e.pasteConfig.tags||[],n=[];i.forEach(i=>{let r=this.collectTagNames(i);n.push(...r),r.forEach(n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n)){p6(`Paste handler for \xab${e.name}\xbb Tool on \xab${n}\xbb tag is skipped because it is already used by \xab${this.toolsTags[n].tool.name}\xbb Tool.`,"warn");return}let r=p7(i)?i[n]:null;this.toolsTags[n.toUpperCase()]={tool:e,sanitizationConfig:r}})}),this.tagsByTool[e.name]=n.map(e=>e.toUpperCase())}getFilesConfig(e){if(!1===e.pasteConfig)return;let{files:i={}}=e.pasteConfig,{extensions:n,mimeTypes:r}=i;(n||r)&&(n&&!Array.isArray(n)&&(p6(`\xabextensions\xbb property of the onDrop config for \xab${e.name}\xbb Tool should be an array`),n=[]),r&&!Array.isArray(r)&&(p6(`\xabmimeTypes\xbb property of the onDrop config for \xab${e.name}\xbb Tool should be an array`),r=[]),r&&(r=r.filter(i=>!!/^[-\w]+\/([-+\w]+|\*)$/.test(i)||(p6(`MIME type value \xab${i}\xbb for the \xab${e.name}\xbb Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:r||[]})}getPatternsConfig(e){!1===e.pasteConfig||!e.pasteConfig.patterns||gn(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([i,n])=>{n instanceof RegExp||p6(`Pattern ${n} for \xab${e.name}\xbb Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:i,pattern:n,tool:e})})}isNativeBehaviour(e){return gm.isNativeInput(e)}async processFiles(e){let i;let{BlockManager:n}=this.Editor;i=(i=await Promise.all(Array.from(e).map(e=>this.processFile(e)))).filter(e=>!!e);let r=n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty;i.forEach((e,i)=>{n.paste(e.type,e.event,0===i&&r)})}async processFile(e){let i=e.name.split(".").pop(),n=Object.entries(this.toolsFiles).find(([n,{mimeTypes:r,extensions:o}])=>{let[a,l]=e.type.split("/"),c=o.find(e=>e.toLowerCase()===i.toLowerCase()),u=r.find(e=>{let[i,n]=e.split("/");return i===a&&(n===l||"*"===n)});return!!c||!!u});if(!n)return;let[r]=n;return{event:this.composePasteEvent("file",{file:e}),type:r}}processHTML(e){let{Tools:i}=this.Editor,n=gm.make("DIV");return n.innerHTML=e,this.getNodes(n).map(e=>{let n,r=i.defaultTool,o=!1;switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:(n=gm.make("div")).appendChild(e);break;case Node.ELEMENT_NODE:n=e,o=!0,this.toolsTags[n.tagName]&&(r=this.toolsTags[n.tagName].tool)}let{tags:a}=r.pasteConfig||{tags:[]},l=Object.assign({},a.reduce((e,i)=>(this.collectTagNames(i).forEach(n=>{let r=p7(i)?i[n]:null;e[n.toLowerCase()]=r||{}}),e),{}),r.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){let e=gU(n.outerHTML,l);n=gm.make("div",void 0,{innerHTML:e}).firstChild}else n.innerHTML=gU(n.innerHTML,l);let c=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:o,tool:r.name,event:c}}).filter(e=>{let i=gm.isEmpty(e.content),n=gm.isSingleTag(e.content);return!i||n})}processPlain(e){let{defaultBlock:i}=this.config;return e?e.split(/\r?\n/).filter(e=>e.trim()).map(e=>{let n=gm.make("div");n.textContent=e;let r=this.composePasteEvent("tag",{data:n});return{content:n,tool:i,isBlock:!1,event:r}}):[]}async processSingleBlock(e){let{Caret:i,BlockManager:n}=this.Editor,{currentBlock:r}=n;if(!r||e.tool!==r.name||!gm.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,(null==r?void 0:r.tool.isDefault)&&r.isEmpty);return}i.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){let{BlockManager:i,Caret:n}=this.Editor,{content:r}=e;if(i.currentBlock&&i.currentBlock.tool.isDefault&&r.textContent.length<mb.PATTERN_PROCESSING_MAX_LENGTH){let e=await this.processPattern(r.textContent);if(e){let r=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty,o=i.paste(e.tool,e.event,r);n.setToBlock(o,n.positions.END);return}}if(i.currentBlock&&i.currentBlock.currentInput){let e=i.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,gU(r.innerHTML,e))}else this.insertBlock(e)}async processPattern(e){let i=this.toolsPatterns.find(i=>{let n=i.pattern.exec(e);return!!n&&e===n.shift()});return i?{event:this.composePasteEvent("pattern",{key:i.key,data:e}),tool:i.tool.name}:void 0}insertBlock(e,i=!1){let n;let{BlockManager:r,Caret:o}=this.Editor,{currentBlock:a}=r;if(i&&a&&a.isEmpty){n=r.paste(e.tool,e.event,!0),o.setToBlock(n,o.positions.END);return}n=r.paste(e.tool,e.event),o.setToBlock(n,o.positions.END)}insertEditorJSData(e){let{BlockManager:i,Caret:n,Tools:r}=this.Editor;gF(e,e=>r.blockTools.get(e).sanitizeConfig).forEach(({tool:e,data:r},o)=>{let a=!1;0===o&&(a=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty);let l=i.insert({tool:e,data:r,replace:a});n.setToBlock(l,n.positions.END)})}processElementNode(e,i,n){let r=Object.keys(this.toolsTags),{tool:o}=this.toolsTags[e.tagName]||{},a=this.tagsByTool[null==o?void 0:o.name]||[],l=r.includes(e.tagName),c=gm.blockElements.includes(e.tagName.toLowerCase()),u=Array.from(e.children).some(({tagName:e})=>r.includes(e)&&!a.includes(e)),h=Array.from(e.children).some(({tagName:e})=>gm.blockElements.includes(e.toLowerCase()));return c||l||u?(!l||u)&&(!c||h||u)?void 0:[...i,n,e]:(n.appendChild(e),[...i,n])}getNodes(e){let i;let n=Array.from(e.childNodes),r=(e,n)=>{if(gm.isEmpty(n)&&!gm.isSingleTag(n))return e;let o=e[e.length-1],a=new DocumentFragment;switch(o&&gm.isFragment(o)&&(a=e.pop()),n.nodeType){case Node.ELEMENT_NODE:if(i=this.processElementNode(n,e,a))return i;break;case Node.TEXT_NODE:return a.appendChild(n),[...e,a];default:return[...e,a]}return[...e,...Array.from(n.childNodes).reduce(r,[])]};return n.reduce(r,[])}composePasteEvent(e,i){return new CustomEvent(e,{detail:i})}};mb.PATTERN_PROCESSING_MAX_LENGTH=450;class my extends gI{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,i){let n=document.elementFromPoint(e-window.pageXOffset,i-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);let r=[`.${gL.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],o=n.closest("."+this.Editor.UI.CSS.editorWrapper),a=r.some(e=>!!n.closest(e));!o||a||(this.mousedown=!0,this.startX=e,this.startY=i)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){let{container:e}=this.genHTML();this.listeners.on(e,"mousedown",e=>{this.processMouseDown(e)},!1),this.listeners.on(document.body,"mousemove",gc(e=>{this.processMouseMove(e)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",gc(e=>{this.processScroll(e)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(null!==e.target.closest(gm.allInputsSelector)||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){let{UI:e}=this.Editor,i=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=gm.make("div",my.CSS.overlay,{}),r=gm.make("div",my.CSS.overlayContainer,{}),o=gm.make("div",my.CSS.rect,{});return r.appendChild(o),n.appendChild(r),i.appendChild(n),this.overlayRectangle=o,{container:i,overlay:n}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;let i=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-i,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;void 0!==e.pageY&&(this.mouseX=e.pageX,this.mouseY=e.pageY);let{rightPos:i,leftPos:n,index:r}=this.genInfoForMouseSelection(),o=this.startX>i&&this.mouseX>i,a=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(o||a),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),void 0!==r&&(this.trySelectNextBlock(r),this.inverseSelection(),g_.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){let e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(let e of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(e);if(!this.rectCrossesBlocks&&e)for(let e of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(e)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){let e;let i=document.body.offsetWidth/2,n=this.mouseY-window.pageYOffset,r=document.elementFromPoint(i,n),o=this.Editor.BlockManager.getBlockByChildNode(r);void 0!==o&&(e=this.Editor.BlockManager.blocks.findIndex(e=>e.holder===o.holder));let a=this.Editor.BlockManager.lastBlock.holder.querySelector("."+gL.CSS.content),l=Number.parseInt(window.getComputedStyle(a).width,10)/2;return{index:e,leftPos:i-l,rightPos:i+l}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){let i=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length;if(i)return;let r=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0,o=0;n>1&&(o=r?1:-1);let a=e>this.stackOfSelected[n-1]&&1===o,l=e<this.stackOfSelected[n-1]&&-1===o,c=!(a||l||0===o);if(!c&&(e>this.stackOfSelected[n-1]||void 0===this.stackOfSelected[n-1])){let i=this.stackOfSelected[n-1]+1||e;for(;i<=e;i++)this.addBlockInSelection(i);return}if(!c&&e<this.stackOfSelected[n-1]){for(let i=this.stackOfSelected[n-1]-1;i>=e;i--)this.addBlockInSelection(i);return}if(!c)return;let u=n-1,h;for(h=e>this.stackOfSelected[n-1]?()=>e>this.stackOfSelected[u]:()=>e<this.stackOfSelected[u];h();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[u]),this.stackOfSelected.pop(),u--}}!function(){try{if("u">typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class mw{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:i,api:n,readOnly:r}){this.api=n,this.readOnly=r,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=i.placeholder?i.placeholder:mw.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=void 0!==i.preserveBlank&&i.preserveBlank,this.data=e}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code)return;let{textContent:i}=this._element;""===i&&(this._element.innerHTML="")}drawView(){let e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable=!1,e.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable=!0,e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){let i={text:this.data.text+e.text};this.data=i}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){let i={text:e.detail.data.innerHTML};this.data=i}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(null!==this._element){let e=this._element.innerHTML;this._data.text=e}return this._data}set data(e){this._data=e||{},null!==this._element&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class mk{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){let e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}mk.isInline=!0,mk.title="Bold";class mE{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){let e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}mE.isInline=!0,mE.title="Italic";class mI{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new g_}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=gG,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());let e=this.selection.findParentTag("A");if(e){this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){let e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();let i=e.getAttribute("href");this.nodes.input.value="null"!==i?i:"",this.selection.save()}else this.nodes.button.innerHTML=gG,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){let e=new g_;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let i=this.nodes.input.value||"";if(!i.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(i)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),p6("Incorrect Link pasted","warn",i);return}i=this.prepareLink(i),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(i),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e)}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;let i=/^\/[^/\s]/.test(e),n="#"===e.substring(0,1),r=/^\/\/[^/\s]/.test(e);return i||n||r||(e="http://"+e),e}insertLink(e){let i=this.selection.findParentTag("A");i&&this.selection.expandToTag(i),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}mI.isInline=!0,mI.title="Link";class m_{constructor({data:e,api:i}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=i,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){let e=gm.make("div",this.CSS.wrapper),i=gm.make("div",this.CSS.info),n=gm.make("div",this.CSS.title,{textContent:this.title}),r=gm.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',i.appendChild(n),i.appendChild(r),e.appendChild(i),e}}m_.isReadOnlySupported=!0;class mS extends mh{constructor(){super(...arguments),this.type=mo.Inline}get title(){return this.constructable[mc.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class mT extends mh{constructor(){super(...arguments),this.type=mo.Tune}create(e,i){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:i,data:e})}}class mC extends Map{get blockTools(){return new mC(Array.from(this.entries()).filter(([,e])=>e.isBlock()))}get inlineTools(){return new mC(Array.from(this.entries()).filter(([,e])=>e.isInline()))}get blockTunes(){return new mC(Array.from(this.entries()).filter(([,e])=>e.isTune()))}get internalTools(){return new mC(Array.from(this.entries()).filter(([,e])=>e.isInternal))}get externalTools(){return new mC(Array.from(this.entries()).filter(([,e])=>!e.isInternal))}}var mx=Object.defineProperty,mA=Object.getOwnPropertyDescriptor,mO=(e,i,n,r)=>{for(var o,a=r>1?void 0:r?mA(i,n):i,l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r?o(i,n,a):o(a))||a);return r&&a&&mx(i,n,a),a};class mL extends mh{constructor(){super(...arguments),this.type=mo.Block,this.inlineTools=new mC,this.tunes=new mC}create(e,i,n){return new this.constructable({data:e,block:i,readOnly:n,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[ml.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[ml.IsEnabledLineBreaks]}get toolbox(){let e=this.constructable[ml.Toolbox],i=this.config[ms.Toolbox];if(!gn(e)&&!1!==i)return i?Array.isArray(e)?Array.isArray(i)?i.map((i,n)=>{let r=e[n];return r?{...r,...i}:i}):[i]:Array.isArray(i)?i:[{...e,...i}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[ml.ConversionConfig]}get enabledInlineTools(){return this.config[ms.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[ms.EnabledBlockTunes]}get pasteConfig(){return this.constructable[ml.PasteConfig]??{}}get sanitizeConfig(){let e=super.sanitizeConfig,i=this.baseSanitizeConfig;if(gn(e))return i;let n={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let o=e[r];p7(o)?n[r]=Object.assign({},i,o):n[r]=o}return n}get baseSanitizeConfig(){let e={};return Array.from(this.inlineTools.values()).forEach(i=>Object.assign(e,i.sanitizeConfig)),Array.from(this.tunes.values()).forEach(i=>Object.assign(e,i.sanitizeConfig)),e}}mO([gf],mL.prototype,"sanitizeConfig",1),mO([gf],mL.prototype,"baseSanitizeConfig",1);class mR{constructor(e,i,n){this.api=n,this.config=e,this.editorConfig=i}get(e){let{class:i,isInternal:n=!1,...r}=this.config[e];return new(this.getConstructor(i))({name:e,constructable:i,config:r,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[mc.IsInline]:return mS;case e[mu.IsTune]:return mT;default:return mL}}}class mN{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:g$,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){let e=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(e+1);if(!i)throw Error("Unable to move Block down since it is already the last");let n=i.holder,r=n.getBoundingClientRect(),o=Math.abs(window.innerHeight-n.offsetHeight);r.top<window.innerHeight&&(o=window.scrollY+n.offsetHeight),window.scrollTo(0,o),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}mN.isTune=!0;class mP{constructor({api:e}){this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}mP.isTune=!0;class mD{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){let e;let i=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(i),r=this.api.blocks.getBlockByIndex(i-1);if(0===i||!n||!r)throw Error("Unable to move Block up since it is already the first");let o=n.holder,a=r.holder,l=o.getBoundingClientRect(),c=a.getBoundingClientRect();e=c.top>0?Math.abs(l.top)-Math.abs(c.top):Math.abs(l.top)+c.height,window.scrollBy(0,-1*e),this.api.blocks.move(i-1),this.api.toolbar.toggleBlockSettings(!0)}}mD.isTune=!0;var mM=Object.defineProperty,mB=Object.getOwnPropertyDescriptor;class mF extends gI{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new mC,this.toolsUnavailable=new mC}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=function e(i,...n){if(!n.length)return i;let r=n.shift();if(p7(i)&&p7(r))for(let n in r)p7(r[n])?(i[n]||Object.assign(i,{[n]:{}}),e(i[n],r[n])):Object.assign(i,{[n]:r[n]});return e(i,...n)}({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");let e=this.prepareConfig();this.factory=new mR(e,this.config,this.Editor.API);let i=this.getListOfPrepareFunctions(e);if(0===i.length)return Promise.resolve();await go(i,e=>{this.toolPrepareMethodSuccess(e)},e=>{this.toolPrepareMethodFallback(e)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){let e={};return Array.from(this.inlineTools.values()).forEach(i=>{Object.assign(e,i.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{p8(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:mk,isInternal:!0},italic:{class:mE,isInternal:!0},link:{class:mI,isInternal:!0},paragraph:{class:mw,inlineToolbar:!0,isInternal:!0},stub:{class:m_,isInternal:!0},moveUp:{class:mD,isInternal:!0},delete:{class:mP,isInternal:!0},moveDown:{class:mN,isInternal:!0}}}toolPrepareMethodSuccess(e){let i=this.factory.get(e.toolName);if(i.isInline()){let e=["render","surround","checkState"].filter(e=>!i.create()[e]);if(e.length){p6(`Incorrect Inline Tool: ${i.name}. Some of required methods is not implemented %o`,"warn",e),this.toolsUnavailable.set(i.name,i);return}}this.toolsAvailable.set(i.name,i)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){let i=[];return Object.entries(e).forEach(([e,n])=>{i.push({function:p8(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:e,config:n.config}})}),i}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(!1!==this.config.inlineToolbar){if(!0===e.enabledInlineTools){e.inlineTools=new mC(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(e=>[e,this.inlineTools.get(e)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new mC(e.enabledInlineTools.map(e=>[e,this.inlineTools.get(e)])))}}assignBlockTunesToBlockTool(e){if(!1!==e.enabledBlockTunes){if(Array.isArray(e.enabledBlockTunes)){let i=new mC(e.enabledBlockTunes.map(e=>[e,this.blockTunes.get(e)]));e.tunes=new mC([...i,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){let i=new mC(this.config.tunes.map(e=>[e,this.blockTunes.get(e)]));e.tunes=new mC([...i,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(let e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;let i=this.config.tools[e];if(!p8(i)&&!p8(i.class))throw Error(`Tool \xab${e}\xbb must be a constructor function or an object with function in the \xabclass\xbb property`)}}prepareConfig(){let e={};for(let i in this.config.tools)p7(this.config.tools[i])?e[i]=this.config.tools[i]:e[i]={class:this.config.tools[i]};return e}}((e,i,n,r)=>{for(var o,a=r>1?void 0:r?mB(i,n):i,l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r?o(i,n,a):o(a))||a);return r&&a&&mM(i,n,a)})([gf],mF.prototype,"getAllInlineToolsSanitizeConfig",1);const mU=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`,mj={BlocksAPI:class extends gI{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,i={},n={},r,o,a,l)=>new gk(this.Editor.BlockManager.insert({id:l,tool:e,data:i,index:r,needToFocus:o,replace:a})),this.composeBlockData=async e=>new gL({tool:this.Editor.Tools.blockTools.get(e),api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data,this.update=async(e,i)=>{let{BlockManager:n}=this.Editor,r=n.getBlockById(e);if(void 0===r)throw Error(`Block with id "${e}" not found`);return new gk(await n.update(r,i))},this.convert=(e,i,n)=>{var r,o;let{BlockManager:a,Tools:l}=this.Editor,c=a.getBlockById(e);if(!c)throw Error(`Block with id "${e}" not found`);let u=l.blockTools.get(c.name),h=l.blockTools.get(i);if(!h)throw Error(`Block Tool with type "${i}" not found`);let d=(null==(r=null==u?void 0:u.conversionConfig)?void 0:r.export)!==void 0,f=(null==(o=h.conversionConfig)?void 0:o.import)!==void 0;if(d&&f)a.convert(c,i,n);else{let e=[!d&&gu(c.name),!f&&gu(i)].filter(Boolean).join(" and ");throw Error(`Conversion from "${c.name}" to "${i}" is not possible. ${e} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,i=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(i);let n=e.map(({id:e,type:i,data:n})=>this.Editor.BlockManager.composeBlock({id:e,tool:i||this.config.defaultBlock,data:n}));return this.Editor.BlockManager.insertMany(n,i),n.map(e=>new gk(e))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,i)=>this.swap(e,i),move:(e,i)=>this.move(e,i),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,i=!0)=>this.stretchBlock(e,i),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){let i=this.Editor.BlockManager.getBlockById(e);if(!i){p3("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(i)}getBlockByIndex(e){let i=this.Editor.BlockManager.getBlockByIndex(e);if(void 0===i){p3("There is no block at index `"+e+"`","warn");return}return new gk(i)}getById(e){let i=this.Editor.BlockManager.getBlockById(e);return void 0===i?(p3("There is no block with id `"+e+"`","warn"),null):new gk(i)}swap(e,i){p6("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,i)}move(e,i){this.Editor.BlockManager.move(e,i)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{let i=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(i)}catch(e){p3(e,"warn");return}0===this.Editor.BlockManager.blocks.length&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(void 0===e||void 0===e.blocks)throw Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,i=!0){gd(!0,"blocks.stretchBlock()","BlockAPI");let n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=i)}insertNewBlock(){p6("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if("number"!=typeof e)throw Error("Index should be a number");if(e<0||null===e)throw Error("Index should be greater than or equal to 0")}},CaretAPI:class extends gI{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,i=0)=>!!this.Editor.BlockManager.firstBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,i),!0),this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,i=0)=>!!this.Editor.BlockManager.lastBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,i),!0),this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,i=0)=>!!this.Editor.BlockManager.previousBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,i),!0),this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,i=0)=>!!this.Editor.BlockManager.nextBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,i),!0),this.setToBlock=(e,i=this.Editor.Caret.positions.DEFAULT,n=0)=>!!this.Editor.BlockManager.blocks[e]&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],i,n),!0),this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}},EventsAPI:class extends gI{get methods(){return{emit:(e,i)=>this.emit(e,i),off:(e,i)=>this.off(e,i),on:(e,i)=>this.on(e,i)}}on(e,i){this.eventsDispatcher.on(e,i)}emit(e,i){this.eventsDispatcher.emit(e,i)}off(e,i){this.eventsDispatcher.off(e,i)}},I18nAPI:gR,API:class extends gI{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}},InlineToolbarAPI:class extends gI{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}},ListenersAPI:class extends gI{get methods(){return{on:(e,i,n,r)=>this.on(e,i,n,r),off:(e,i,n,r)=>this.off(e,i,n,r),offById:e=>this.offById(e)}}on(e,i,n,r){return this.listeners.on(e,i,n,r)}off(e,i,n,r){this.listeners.off(e,i,n,r)}offById(e){this.listeners.offById(e)}},NotifierAPI:class extends gI{constructor({config:e,eventsDispatcher:i}){super({config:e,eventsDispatcher:i}),this.notifier=new gD}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}},ReadOnlyAPI:class extends gI{get methods(){let e=()=>this.isEnabled;return{toggle:e=>this.toggle(e),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}},SanitizerAPI:class extends gI{get methods(){return{clean:(e,i)=>this.clean(e,i)}}clean(e,i){return gU(e,i)}},SaverAPI:class extends gI{get methods(){return{save:()=>this.save()}}save(){let e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(p3(e,"warn"),Promise.reject(Error(e))):this.Editor.Saver.save()}},SelectionAPI:class extends gI{get methods(){return{findParentTag:(e,i)=>this.findParentTag(e,i),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,i){return new g_().findParentTag(e,i)}expandToTag(e){new g_().expandToTag(e)}},StylesAPI:class extends gI{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}},ToolbarAPI:class extends gI{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(-1===this.Editor.BlockManager.currentBlockIndex){p3("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(-1===this.Editor.BlockManager.currentBlockIndex){p3("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}},TooltipAPI:class extends gI{constructor({config:e,eventsDispatcher:i}){super({config:e,eventsDispatcher:i})}get methods(){return{show:(e,i,n)=>this.show(e,i,n),hide:()=>this.hide(),onHover:(e,i,n)=>this.onHover(e,i,n)}}show(e,i,n){gz(),null==gH||gH.show(e,i,n)}hide(){gq()}onHover(e,i,n){gK(e,i,n)}},UiAPI:class extends gI{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}},BlockSettings:class extends gI{constructor(){super(...arguments),this.opened=!1,this.selection=new g_,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return null==(e=this.popover)?void 0:e.flipper}make(){this.nodes.wrapper=gm.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();let[i,n]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new g4({searchable:!0,items:i.map(e=>this.resolveTuneAliases(e)),customContent:n,customContentFlippableItems:this.getControls(n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:gb.ui(gW.ui.popover,"Nothing found"),search:gb.ui(gW.ui.popover,"Filter")}}),this.popover.on(g2.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,g_.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(g2.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(e){let{StylesAPI:i}=this.Editor;return Array.from(e.querySelectorAll(`.${i.classes.settingsButton}, ${gm.allInputsSelector}`))}resolveTuneAliases(e){let i=function(e,i){let n={};return Object.keys(e).forEach(r=>{let o=i[r];void 0!==o?n[o]=e[r]:n[r]=e[r]}),n}(e,{label:"title"});return e.confirmation&&(i.confirmation=this.resolveTuneAliases(e.confirmation)),i}},ConversionToolbar:g5,Toolbar:class extends gI{constructor({config:e,eventsDispatcher:i}){super({config:e,eventsDispatcher:i}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:null==(e=this.toolboxInstance)?void 0:e.opened,close:()=>{var e;null==(e=this.toolboxInstance)||e.close()},open:()=>{if(null===this.toolboxInstance){p6("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(null===this.toolboxInstance){p6("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var e;return null==(e=this.toolboxInstance)?void 0:e.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){let i;if(null===this.toolboxInstance){p6("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;let n=e.holder,{isMobile:r}=this.Editor.UI,o=e.pluginsContent,a=parseInt(window.getComputedStyle(o).paddingTop,10),l=n.offsetHeight;i=r?n.offsetTop+l:n.offsetTop+a,this.nodes.wrapper.style.top=`${Math.floor(i)}px`,1===this.Editor.BlockManager.blocks.length&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,i;this.Editor.ReadOnly.isEnabled||(null==(e=this.nodes.wrapper)||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),null==(i=this.toolboxInstance)||i.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=gm.make("div",this.CSS.toolbar),["content","actions"].forEach(e=>{this.nodes[e]=gm.make("div",this.CSS[e])}),gm.append(this.nodes.wrapper,this.nodes.content),gm.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=gm.make("div",this.CSS.plusButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>'}),gm.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{gq(!0),this.plusButtonClicked()},!1);let e=gm.make("div");e.appendChild(document.createTextNode(gb.ui(gW.ui.toolbar.toolbox,"Add"))),e.appendChild(gm.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),gK(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=gm.make("span",this.CSS.settingsToggler,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>'}),gm.append(this.nodes.actions,this.nodes.settingsToggler);let i=gm.make("div"),n=gm.text(gb.ui(gW.ui.blockTunes.toggler,"Click to tune")),r=await mr("Slash","/");i.appendChild(n),i.appendChild(gm.make("div",this.CSS.plusButtonShortcut,{textContent:gh(`CMD + ${r}`)})),gK(this.nodes.settingsToggler,i,{hidingDelay:400}),gm.append(this.nodes.actions,this.makeToolbox()),gm.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),gm.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new mi({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:gb.ui(gW.ui.popover,"Filter"),nothingFound:gb.ui(gW.ui.popover,"Nothing found")}}),this.toolboxInstance.on(mt.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(mt.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(mt.BlockAdded,({block:e})=>{let{BlockManager:i,Caret:n}=this.Editor,r=i.getBlockById(e.id);0===r.inputs.length&&(r===i.lastBlock?(i.insertAtEnd(),n.setToBlock(i.lastBlock)):n.setToBlock(i.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,null==(e=this.toolboxInstance)||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var i;e.stopPropagation(),this.settingsTogglerClicked(),null!=(i=this.toolboxInstance)&&i.opened&&this.toolboxInstance.close(),gq(!0)},!0),gp()||this.eventsDispatcher.on(mn,e=>{var i;this.Editor.BlockSettings.opened||null!=(i=this.toolboxInstance)&&i.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}},InlineToolbar:class extends gI{constructor({config:e,eventsDispatcher:i}){super({config:e,eventsDispatcher:i}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=gp()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1,i=!0){e&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(i),this.move(),this.open(i),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,i])=>{let n=this.getToolShortcut(e);n&&g9.remove(this.Editor.UI.nodes.redactor,n),p8(i.clear)&&i.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(e){return void 0!==this.nodes.wrapper&&this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=gm.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=gm.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=gm.make("div",this.CSS.buttonsWrapper),this.nodes.actions=gm.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),gm.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),gm.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),gm.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let e=Array.from(this.buttonsList);e.unshift(this.nodes.conversionToggler),e=e.filter(e=>!e.hidden),this.flipper.activate(e)}move(){let e=g_.rect,i=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),n={x:e.x-i.x,y:e.y+e.height-i.top+this.toolbarVerticalMargin};n.x+this.width+i.x>this.Editor.UI.contentRect.right&&(n.x=this.Editor.UI.contentRect.right-this.width-i.x),this.nodes.wrapper.style.left=Math.floor(n.x)+"px",this.nodes.wrapper.style.top=Math.floor(n.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){let e=g_.get(),i=g_.text;if(!e||!e.anchorNode||e.isCollapsed||i.length<1)return!1;let n=gm.isElement(e.anchorNode)?e.anchorNode:e.anchorNode.parentElement;if(e&&["IMG","INPUT"].includes(n.tagName)||null===n.closest('[contenteditable="true"]'))return!1;let r=this.Editor.BlockManager.getBlock(e.anchorNode);return!!r&&0!==r.tool.inlineTools.size}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=gm.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=gm.make("div",this.CSS.conversionTogglerContent);let e=gm.make("div",this.CSS.conversionTogglerArrow,{innerHTML:g$});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(e=>{!e&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),!1===gp()&&gK(this.nodes.conversionToggler,gb.ui(gW.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){let{BlockManager:e}=this.Editor,{currentBlock:i}=e,n=i.name,r=i.tool.conversionConfig,o=r&&r.export;this.nodes.conversionToggler.hidden=!o,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!o);let a=await i.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=a.icon||a.title||gu(n)}prepareConversionToolbar(){let e=this.Editor.ConversionToolbar.make();gm.append(this.nodes.wrapper,e)}async addToolsFiltered(e=!0){let i=g_.get(),n=this.Editor.BlockManager.getBlock(i.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(n.tool.inlineTools.values()).forEach(e=>{this.addTool(e)}),e&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(e){let i=e.create(),n=i.render();if(!n){p6("Render method must return an instance of Node","warn",e.name);return}if(n.dataset.tool=e.name,this.nodes.buttons.appendChild(n),this.toolsInstances.set(e.name,i),p8(i.renderActions)){let e=i.renderActions();this.nodes.actions.appendChild(e)}this.listeners.on(n,"click",e=>{this.toolClicked(i),e.preventDefault()});let r=this.getToolShortcut(e.name);if(r)try{this.enableShortcuts(i,r)}catch{}let o=gm.make("div"),a=gb.t(gW.toolNames,e.title||gu(e.name));o.appendChild(gm.text(a)),r&&o.appendChild(gm.make("div",this.CSS.inlineToolbarShortcut,{textContent:gh(r)})),!1===gp()&&gK(n,o,{placement:"top",hidingDelay:100}),i.checkState(g_.get())}getToolShortcut(e){let{Tools:i}=this.Editor,n=i.inlineTools.get(e);return Array.from(i.internal.inlineTools.keys()).includes(e)?this.inlineTools[e][ma.Shortcut]:n.shortcut}enableShortcuts(e,i){g9.add({name:i,handler:i=>{let{currentBlock:n}=this.Editor.BlockManager;n&&n.tool.enabledInlineTools&&(i.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){let i=g_.range;e.surround(i),this.checkToolsState(),void 0!==e.renderActions&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(g_.get())})}get inlineTools(){let e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([i,n])=>{e[i]=n.create()}),e}enableFlipper(){this.flipper=new gJ({focusedItemClass:this.CSS.focusedButton,allowedKeys:[p4.ENTER,p4.TAB]})}},BlockEvents:class extends gI{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case p4.BACKSPACE:this.backspace(e);break;case p4.DELETE:this.delete(e);break;case p4.ENTER:this.enter(e);break;case p4.DOWN:case p4.RIGHT:this.arrowRightAndDown(e);break;case p4.UP:case p4.LEFT:this.arrowLeftAndUp(e);break;case p4.TAB:this.tabPressed(e)}"/"!==e.key||e.ctrlKey||e.metaKey||this.slashPressed(),"Slash"===e.code&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&gr(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!0}dragLeave(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!1}handleCommandC(e){let{BlockSelection:i}=this.Editor;i.anyBlockSelected&&i.copySelectedBlocks(e)}handleCommandX(e){let{BlockSelection:i,BlockManager:n,Caret:r}=this.Editor;i.anyBlockSelected&&i.copySelectedBlocks(e).then(()=>{let o=n.removeSelectedBlocks(),a=n.insertDefaultBlockAtIndex(o,!0);r.setToBlock(a,r.positions.START),i.clearSelection(e)})}tabPressed(e){let{InlineToolbar:i,ConversionToolbar:n,Caret:r}=this.Editor;!n.opened&&!i.opened&&(e.shiftKey?r.navigatePrevious(!0):r.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(e){let{BlockManager:i,UI:n}=this.Editor;if(i.currentBlock.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey)return;let r=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):r=this.Editor.Caret.isAtEnd?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(r),this.Editor.Toolbar.moveAndOpen(r),e.preventDefault()}backspace(e){let{BlockManager:i,Caret:n}=this.Editor,{currentBlock:r,previousBlock:o}=i;if(g_.isCollapsed&&n.isAtStart){if(e.preventDefault(),this.Editor.Toolbar.close(),r.currentInput!==r.firstInput){n.navigatePrevious();return}if(null!==o){if(o.isEmpty){i.removeBlock(o);return}if(r.isEmpty){i.removeBlock(r);let e=i.currentBlock;n.setToBlock(e,n.positions.END);return}gA(r,o)?this.mergeBlocks(o,r):n.setToBlock(o,n.positions.END)}}}delete(e){let{BlockManager:i,Caret:n}=this.Editor,{currentBlock:r,nextBlock:o}=i;if(g_.isCollapsed&&n.isAtEnd){if(e.preventDefault(),this.Editor.Toolbar.close(),r.currentInput!==r.lastInput){n.navigateNext();return}if(null!==o){if(o.isEmpty){i.removeBlock(o);return}if(r.isEmpty){i.removeBlock(r),n.setToBlock(o,n.positions.START);return}gA(r,o)?this.mergeBlocks(r,o):n.setToBlock(o,n.positions.START)}}}mergeBlocks(e,i){let{BlockManager:n,Caret:r,Toolbar:o}=this.Editor;r.createShadow(e.pluginsContent),n.mergeBlocks(e,i).then(()=>{window.requestAnimationFrame(()=>{r.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),o.close()})})}arrowRightAndDown(e){let i=gJ.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===p4.TAB);if(this.Editor.UI.someToolbarOpened&&i)return;this.Editor.Toolbar.close();let n=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===p4.DOWN&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode!==p4.DOWN&&(e.keyCode!==p4.RIGHT||this.isRtl)?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}ga(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(gJ.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===p4.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();let i=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===p4.UP&&i){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode!==p4.UP&&(e.keyCode!==p4.LEFT||this.isRtl)?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}ga(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){let i=e.keyCode===p4.ENTER&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===p4.ENTER&&this.Editor.BlockSettings.opened,r=e.keyCode===p4.ENTER&&this.Editor.InlineToolbar.opened,o=e.keyCode===p4.ENTER&&this.Editor.ConversionToolbar.opened,a=e.keyCode===p4.TAB;return!(e.shiftKey||a||i||n||r||o)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}},BlockManager:class extends gI{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return 0===this.currentBlockIndex?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){let e=new md(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:md.set,get:md.get}),this.listeners.on(document,"copy",e=>this.Editor.BlockEvents.handleCommandC(e))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:i={},id:n,tunes:r={}}){let o=this.Editor.ReadOnly.isEnabled,a=new gL({id:n,data:i,tool:this.Editor.Tools.blockTools.get(e),api:this.Editor.API,readOnly:o,tunesData:r},this.eventsDispatcher);return o||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e,tool:i=this.config.defaultBlock,data:n={},index:r,needToFocus:o=!0,replace:a=!1,tunes:l={}}={}){let c=r;void 0===c&&(c=this.currentBlockIndex+(a?0:1));let u=this.composeBlock({id:e,tool:i,data:n,tunes:l});return a&&this.blockDidMutated(mf,this.getBlockByIndex(c),{index:c}),this._blocks.insert(c,u,a),this.blockDidMutated(mp,u,{index:c}),o?this.currentBlockIndex=c:c<=this.currentBlockIndex&&this.currentBlockIndex++,u}insertMany(e,i=0){this._blocks.insertMany(e,i)}async update(e,i){let n=await e.data,r=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},n,i),tunes:e.tunes}),o=this.getBlockIndex(e);return this._blocks.replace(o,r),this.blockDidMutated(mg,r,{index:o}),r}replace(e,i,n){let r=this.getBlockIndex(e);this.insert({tool:i,data:n,index:r,replace:!0})}paste(e,i,n=!1){let r=this.insert({tool:e,replace:n});try{window.requestIdleCallback(()=>{r.call(gO.ON_PASTE,i)})}catch(i){p6(`${e}: onPaste callback call is failed`,"error",i)}return r}insertDefaultBlockAtIndex(e,i=!1){let n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(mp,n,{index:e}),i?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,i){let n=await i.data;gn(n)||await e.mergeWith(n),this.removeBlock(i),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,i=!0){return new Promise(n=>{let r=this._blocks.indexOf(e);if(!this.validateIndex(r))throw Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(r),this.blockDidMutated(mf,e,{index:r}),this.currentBlockIndex>=r&&this.currentBlockIndex--,this.blocks.length?0===r&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,i&&this.insert()),n()})}removeSelectedBlocks(){let e;for(let i=this.blocks.length-1;i>=0;i--)this.blocks[i].selected&&(this.removeBlock(this.blocks[i]),e=i);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){let e=this.Editor.Caret.extractFragmentFromCaretPosition(),i=gm.make("div");i.appendChild(e);let n={text:gm.isEmpty(i)?"":i.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return -1===e&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(i=>i.id===e)}getBlock(e){gm.isElement(e)||(e=e.parentNode);let i=this._blocks.nodes,n=e.closest(`.${gL.CSS.wrapper}`),r=i.indexOf(n);if(r>=0)return this._blocks[r]}setCurrentBlockByChildNode(e){gm.isElement(e)||(e=e.parentNode);let i=e.closest(`.${gL.CSS.wrapper}`);if(!i)return;let n=i.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(null!=n&&n.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(i),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;gm.isElement(e)||(e=e.parentNode);let i=e.closest(`.${gL.CSS.wrapper}`);return this.blocks.find(e=>e.holder===i)}swap(e,i){this._blocks.swap(e,i),this.currentBlockIndex=i}move(e,i=this.currentBlockIndex){if(isNaN(e)||isNaN(i)){p6("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(i)){p6("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,i),this.currentBlockIndex=e,this.blockDidMutated("block-moved",this.currentBlock,{fromIndex:i,toIndex:e})}async convert(e,i,n){if(!await e.save())throw Error("Could not convert Block. Failed to extract original Block data.");let r=this.Editor.Tools.blockTools.get(i);if(!r)throw Error(`Could not convert Block. Tool \xab${i}\xbb not found.`);let o=function(e,i){let n=null==i?void 0:i.import;return p8(n)?n(e):ge(n)?{[n]:e}:(void 0!==n&&p6("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}(gU(await e.exportDataAsString(),r.sanitizeConfig),r.conversionConfig);n&&(o=Object.assign(o,n)),this.replace(e,r.name,o)}dropPointer(){this.currentBlockIndex=-1}async clear(e=!1){let i=new mm;this.blocks.forEach(e=>{i.add(async()=>{await this.removeBlock(e,!1)})}),await i.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){let{BlockEvents:i}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",e=>{i.keydown(e)}),this.readOnlyMutableListeners.on(e.holder,"keyup",e=>{i.keyup(e)}),this.readOnlyMutableListeners.on(e.holder,"dragover",e=>{i.dragOver(e)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",e=>{i.dragLeave(e)}),e.on("didMutated",e=>this.blockDidMutated(mg,e,{index:this.getBlockIndex(e)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,i,n){let r=new CustomEvent(e,{detail:{target:new gk(i),...n}});return this.eventsDispatcher.emit(gT,{event:r}),i}},BlockSelection:class extends gI{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){let{BlockManager:e}=this.Editor;return e.blocks.every(e=>!0===e.selected)}set allBlocksSelected(e){let{BlockManager:i}=this.Editor;i.blocks.forEach(i=>{i.selected=e}),this.clearCache()}get anyBlockSelected(){let{BlockManager:e}=this.Editor;return null===this.anyBlockSelectedCache&&(this.anyBlockSelectedCache=e.blocks.some(e=>!0===e.selected)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new g_,g9.add({name:"CMD+A",handler:e=>{let{BlockManager:i,ReadOnly:n}=this.Editor;if(n.isEnabled){e.preventDefault(),this.selectAllBlocks();return}i.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){g_.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){let{BlockManager:i}=this.Editor;(isNaN(e)?i.currentBlock:i.getBlockByIndex(e)).selected=!1,this.clearCache()}clearSelection(e,i=!1){let{BlockManager:n,Caret:r,RectangleSelection:o}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;let a=e&&e instanceof KeyboardEvent,l=a&&gr(e.keyCode);if(this.anyBlockSelected&&a&&l&&!g_.isSelectionExists){let i=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(i,!0),r.setToBlock(n.currentBlock),ga(()=>{let i=e.key;r.insertContentAtCaretPosition(i.length>1?"":i)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||o.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}i&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();let i=gm.make("div");this.selectedBlocks.forEach(e=>{let n=gU(e.holder.innerHTML,this.sanitizerConfig),r=gm.make("p");r.innerHTML=n,i.appendChild(r)});let n=Array.from(i.childNodes).map(e=>e.textContent).join(`

`),r=i.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",r),Promise.all(this.selectedBlocks.map(e=>e.save())).then(i=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(i))}catch{}})}selectBlockByIndex(e){let{BlockManager:i}=this.Editor,n=i.getBlockByIndex(e);void 0!==n&&this.selectBlock(n)}selectBlock(e){this.selection.save(),g_.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){g9.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),gm.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}let i=this.Editor.BlockManager.getBlock(e.target),n=i.inputs;if(n.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(1===n.length&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(i),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),g_.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},Caret:mv,CrossBlockSelection:class extends gI{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{let{BlockManager:i,BlockSelection:n}=this.Editor;if(null===e.relatedTarget&&null===e.target)return;let r=i.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,o=i.getBlockByChildNode(e.target);if(!(!r||!o)&&o!==r){if(r===this.firstSelectedBlock){g_.get().removeAllRanges(),r.selected=!0,o.selected=!0,n.clearCache();return}if(o===this.firstSelectedBlock){r.selected=!1,o.selected=!1,n.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(r,o),this.lastSelectedBlock=o}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(0!==e.button)return;let{BlockManager:i}=this.Editor;this.firstSelectedBlock=i.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){let{BlockManager:i,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=i.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),g_.get().removeAllRanges());let r=i.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),o=i.blocks[r];o&&(this.lastSelectedBlock.selected!==o.selected?o.selected=!0:this.lastSelectedBlock.selected=!1,n.clearCache(),this.lastSelectedBlock=o,this.Editor.InlineToolbar.close(),o.holder.scrollIntoView({block:"nearest"}))}clear(e){let{BlockManager:i,BlockSelection:n,Caret:r}=this.Editor,o=i.blocks.indexOf(this.firstSelectedBlock),a=i.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&o>-1&&a>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case p4.DOWN:case p4.RIGHT:r.setToBlock(i.blocks[Math.max(o,a)],r.positions.END);break;case p4.UP:case p4.LEFT:r.setToBlock(i.blocks[Math.min(o,a)],r.positions.START);break;default:r.setToBlock(i.blocks[Math.max(o,a)],r.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){let{UI:i}=this.Editor;g_.isCollapsed||this.Editor.BlockSelection.clearSelection(e),i.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,i){let{BlockManager:n,BlockSelection:r}=this.Editor,o=n.blocks.indexOf(e),a=n.blocks.indexOf(i),l=e.selected!==i.selected;for(let c=Math.min(o,a);c<=Math.max(o,a);c++){let o=n.blocks[c];o!==this.firstSelectedBlock&&o!==(l?e:i)&&(n.blocks[c].selected=!n.blocks[c].selected,r.clearCache())}}},DragNDrop:class extends gI{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){let{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async e=>{await this.processDrop(e)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",e=>{this.processDragOver(e)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){let{BlockManager:i,Caret:n,Paste:r}=this.Editor;e.preventDefault(),i.blocks.forEach(e=>{e.dropTarget=!1}),g_.isAtEditor&&!g_.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;let o=i.setCurrentBlockByChildNode(e.target);if(o)this.Editor.Caret.setToBlock(o,n.positions.END);else{let e=i.setCurrentBlockByChildNode(i.lastBlock.holder);this.Editor.Caret.setToBlock(e,n.positions.END)}await r.processDataTransfer(e.dataTransfer,!0)}processDragStart(){g_.isAtEditor&&!g_.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}},ModificationsObserver:class extends gI{constructor({config:e,eventsDispatcher:i}){super({config:e,eventsDispatcher:i}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(e=>{this.redactorChanged(e)}),this.eventsDispatcher.on(gT,e=>{this.particularBlockChanged(e.event)}),this.eventsDispatcher.on(gC,()=>{this.disable()}),this.eventsDispatcher.on(gx,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!p8(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let e;e=1===this.batchingOnChangeQueue.size?this.batchingOnChangeQueue.values().next().value:Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,e),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(gS,{mutations:e})}},Paste:mb,ReadOnly:class extends gI{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){let{Tools:e}=this.Editor,{blockTools:i}=e,n=[];Array.from(i.entries()).forEach(([e,i])=>{i.isReadOnlySupported||n.push(e)}),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();let i=this.readOnlyEnabled;for(let i in this.readOnlyEnabled=e,this.Editor)this.Editor[i].toggleReadOnly&&this.Editor[i].toggleReadOnly(e);if(i===e)return this.readOnlyEnabled;let n=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(n.blocks),this.readOnlyEnabled}throwCriticalError(){throw new gy(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}},RectangleSelection:my,Renderer:class extends gI{async render(e){return new Promise(i=>{let{Tools:n,BlockManager:r}=this.Editor;if(0===e.length)r.insert();else{let i=e.map(({type:e,data:i,tunes:o,id:a})=>{let l;!1===n.available.has(e)&&(p3(`Tool \xab${e}\xbb is not found. Check 'tools' property at the Editor.js config.`,"warn"),i=this.composeStubDataForTool(e,i,a),e=n.stubTool);try{l=r.composeBlock({id:a,tool:e,data:i,tunes:o})}catch(c){p6(`Block \xab${e}\xbb skipped because of plugins error`,"error",{data:i,error:c}),i=this.composeStubDataForTool(e,i,a),e=n.stubTool,l=r.composeBlock({id:a,tool:e,data:i,tunes:o})}return l});r.insertMany(i)}window.requestIdleCallback(()=>{i()},{timeout:2e3})})}composeStubDataForTool(e,i,n){let{Tools:r}=this.Editor,o=e;if(r.unavailable.has(e)){let i=r.unavailable.get(e).toolbox;void 0!==i&&void 0!==i[0].title&&(o=i[0].title)}return{savedData:{id:n,type:e,data:i},title:o}}},Saver:class extends gI{async save(){let{BlockManager:e,Tools:i}=this.Editor,n=e.blocks,r=[];try{n.forEach(e=>{r.push(this.getSavedData(e))});let e=await Promise.all(r),o=await gF(e,e=>i.blockTools.get(e).sanitizeConfig);return this.makeOutput(o)}catch(e){p3("Saving failed due to the Error %o","error",e)}}async getSavedData(e){let i=await e.save(),n=i&&await e.validate(i.data);return{...i,isValid:n}}makeOutput(e){let i=[];return e.forEach(({id:e,tool:n,data:r,tunes:o,isValid:a})=>{if(!a){p6(`Block \xab${n}\xbb skipped because saved data is invalid`);return}if(n===this.Editor.Tools.stubTool){i.push(r);return}let l={id:e,type:n,data:r,...!gn(o)&&{tunes:o}};i.push(l)}),{time:+new Date,blocks:i,version:"2.29.1"}}},Tools:mF,UI:class extends gI{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=gl(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;let e=this.nodes.wrapper.querySelector(`.${gL.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){let{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){let{Toolbar:e,BlockSettings:i,InlineToolbar:n,ConversionToolbar:r}=this.Editor;return i.opened||n.opened||r.opened||e.toolbox.opened}get someFlipperButtonFocused(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter(([e,i])=>i.flipper instanceof gJ).some(([e,i])=>i.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){let{Toolbar:e,BlockSettings:i,InlineToolbar:n,ConversionToolbar:r}=this.Editor;i.close(),n.close(),r.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<650}make(){this.nodes.holder=gm.getHolder(this.config.holder),this.nodes.wrapper=gm.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=gm.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){let e="editor-js-styles";if(gm.get(e))return;let i=gm.make("style",null,{id:e,textContent:mU.toString()});this.config.style&&!gn(this.config.style)&&this.config.style.nonce&&i.setAttribute("nonce",this.config.style.nonce),gm.prepend(document.head,i)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",e=>{this.documentTouched(e)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",e=>{this.documentTouched(e)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0);let e=gl(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",gc(i=>{let n=i.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(mn,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case p4.ENTER:this.enterPressed(e);break;case p4.BACKSPACE:case p4.DELETE:this.backspacePressed(e);break;case p4.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e)}}defaultBehaviour(e){let{currentBlock:i}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(void 0!==i&&null===n){this.Editor.BlockEvents.keydown(e);return}n||i&&r||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){let{BlockManager:i,BlockSelection:n,Caret:r}=this.Editor;if(n.anyBlockSelected&&!g_.isSelectionExists){let o=i.removeSelectedBlocks(),a=i.insertDefaultBlockAtIndex(o,!0);r.setToBlock(a,r.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){let{BlockManager:i,BlockSelection:n}=this.Editor,r=i.currentBlockIndex>=0;if(n.anyBlockSelected&&!g_.isSelectionExists){n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&r&&"BODY"===e.target.tagName){let e=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(e),this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var i,n;if(!e.isTrusted)return;let r=e.target;this.nodes.holder.contains(r)||g_.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());let o=null==(i=this.Editor.BlockSettings.nodes.wrapper)?void 0:i.contains(r),a=null==(n=this.Editor.Toolbar.nodes.settingsToggler)?void 0:n.contains(r);if(this.Editor.BlockSettings.opened&&!(o||a)){this.Editor.BlockSettings.close();let e=this.Editor.BlockManager.getBlockByChildNode(r);this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let i=e.target;if(i===this.nodes.redactor){let n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,r=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;i=document.elementFromPoint(n,r)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(i)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!g_.isCollapsed)return;let i=e.target,n=e.metaKey||e.ctrlKey;if(gm.isAnchor(i)&&n){var r;e.stopImmediatePropagation(),e.stopPropagation(),r=function(e){try{return new URL(e).href}catch{}return"//"===e.substring(0,2)?window.location.protocol+e:window.location.origin+e}(i.getAttribute("href")),window.open(r,"_blank");return}this.processBottomZoneClick(e)}processBottomZoneClick(e){let i=this.Editor.BlockManager.getBlockByIndex(-1),n=gm.offset(i.holder).bottom,r=e.pageY,{BlockSelection:o}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&n<r){e.stopImmediatePropagation(),e.stopPropagation();let{BlockManager:i,Caret:n,Toolbar:r}=this.Editor;i.lastBlock.tool.isDefault&&i.lastBlock.isEmpty||i.insertAtEnd(),n.setToTheLastBlock(),r.moveAndOpen(i.lastBlock)}}selectionChanged(){let{CrossBlockSelection:e,BlockSelection:i}=this.Editor,n=g_.anchorElement;if(e.isCrossBlockSelectionStarted&&i.anyBlockSelected&&g_.get().removeAllRanges(),!n){g_.range||this.Editor.InlineToolbar.close();return}let r=null===n.closest(`.${gL.CSS.content}`);r&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),"true"!==n.dataset.inlineToolbar)||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n),this.Editor.InlineToolbar.tryToShow(!0,!0!==r))}}};class mV{constructor(e){let i,n;this.moduleInstances={},this.eventsDispatcher=new gw,this.isReady=new Promise((e,r)=>{i=e,n=r}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();let{BlockManager:n,Caret:r,UI:o,ModificationsObserver:a}=this.moduleInstances;o.checkEmptiness(),a.enable(),this.configuration.autofocus&&r.setToBlock(n.blocks[0],r.positions.START),i()}).catch(e=>{p6(`Editor.js is not ready because of ${e}`,"error"),n(e)})}set configuration(e){var i,n,r;p7(e)?this.config={...e}:this.config={holder:e},gd(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),null==this.config.holder&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=p2.VERBOSE),r=this.config.logLevel,p5.logLevel=r,gd(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=void 0!==this.config.minHeight?this.config.minHeight:300;let o={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=void 0===this.config.inlineToolbar||this.config.inlineToolbar,(gn(this.config.data)||!this.config.data.blocks||0===this.config.data.blocks.length)&&(this.config.data={blocks:[o]}),this.config.readOnly=this.config.readOnly||!1,null!=(i=this.config.i18n)&&i.messages&&gb.setDictionary(this.config.i18n.messages),this.config.i18n.direction=(null==(n=this.config.i18n)?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){let{holderId:e,holder:i}=this.config;if(e&&i)throw Error("holderId and holder param can't assign at the same time.");if(ge(i)&&!gm.get(i))throw Error(`element with ID \xab${i}\xbb is missing. Pass correct holder's ID.`);if(i&&p7(i)&&!gm.isElement(i))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await ["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,i)=>e.then(async()=>{try{await this.moduleInstances[i].prepare()}catch(e){if(e instanceof gy)throw Error(e.message);p6(`Module ${i} was skipped because of %o`,"warn",e)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(mj).forEach(([e,i])=>{try{this.moduleInstances[e]=new i({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(i){p6("[constructModules]",`Module ${e} skipped because`,"error",i)}})}configureModules(){for(let e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){let i={};for(let n in this.moduleInstances)n!==e&&(i[n]=this.moduleInstances[n]);return i}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class mH{static get version(){return"2.29.1"}constructor(e){let i=()=>{};p7(e)&&p8(e.onReady)&&(i=e.onReady);let n=new mV(e);this.isReady=n.isReady.then(()=>{this.exportAPI(n),i()})}exportAPI(e){["configuration"].forEach(i=>{this[i]=e[i]}),this.destroy=()=>{for(let i in Object.values(e.moduleInstances).forEach(e=>{p8(e.destroy)&&e.destroy(),e.listeners.removeAll()}),null==gH||gH.destroy(),gH=null,e=null,this)Object.prototype.hasOwnProperty.call(this,i)&&delete this[i];Object.setPrototypeOf(this,null)},Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([i,n])=>{Object.entries(n).forEach(([n,r])=>{this[r]=e.moduleInstances.API.methods[i][n]})})}}!function(){try{if("u">typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;display:none;cursor:text}.ce-header[contentEditable=true][data-placeholder]:empty:before{display:block}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{display:none}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */class mz{constructor({data:e,config:i,api:n,readOnly:r}){this.api=n,this.readOnly=r,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=i,this._data=this.normalizeData(e),this._element=this.getTag()}normalizeData(e){let i={};return"object"!=typeof e&&(e={}),i.text=e.text||"",i.level=parseInt(e.level)||this.defaultLevel.number,i}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){let i={text:this.data.text+e.text,level:this.data.level};this.data=i}validate(e){return""!==e.text.trim()}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),void 0!==e.level&&this._element.parentNode){let e=this.getTag();e.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(e,this._element),this._element=e}void 0!==e.text&&(this._element.innerHTML=this._data.text||"")}getTag(){let e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(e=>e.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){let e=this.levels.find(e=>e.number===this._settings.defaultLevel);if(e)return e;console.warn("('-') Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){let e=[{number:1,tag:"H1",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>'},{number:2,tag:"H2",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>'},{number:3,tag:"H3",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>'},{number:4,tag:"H4",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>'},{number:5,tag:"H5",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>'},{number:6,tag:"H6",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>'}];return this._settings.levels?e.filter(e=>this._settings.levels.includes(e.number)):e}onPaste(e){let i=e.detail.data,n=this.defaultLevel.number;switch(i.tagName){case"H1":n=1;break;case"H2":n=2;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6}this._settings.levels&&(n=this._settings.levels.reduce((e,i)=>Math.abs(i-n)<Math.abs(e-n)?i:e)),this.data={level:n,text:i.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>',title:"Heading"}}}class mq{constructor(e,i,n,r){this.editor,this.currentSection,this.form;let o=document.createElement("form");this.form=o,this.currentSection=this.form,e.forEach(e=>{let i=this._createFormEl(e);this.currentSection.append(i),"section"==e.type&&(this.currentSection=i)});let a=new pY("text",i);return o.append(a),o.addEventListener("submit",async e=>{e.preventDefault();let i=Object.fromEntries(new FormData(e.target).entries());this.editor&&(i.data=await this.editor.save()),n(i).then(e=>{r?console.log("wants to redirect to:",r):window.location.reload()})}),o}_createFormEl(e){if("editor"==e.type)return this._createEditor();if("section"!=e.type)return this._createLabelInputWrapper(e);{let i=document.createElement("fieldset"),n=document.createElement("legend");return n.textContent=e.text,i.append(n),i}}_createLabelInputWrapper({type:e,text:i,id:n,name:r,required:o,value:a}){if(n=n||i,r=r||i,"input/hidden"==e)return this._createInput(e,n,r,o,a);let l=document.createElement("div");return l.classList.add("input-wrapper"),l.append(this._createLabel(i,n),this._createInput(e,n,r,o,a)),l}_createLabel(e,i){let n=document.createElement("label");return n.textContent=e,n.htmlFor=i,n}_createInput(e,i,n,r,o){let a;if("textarea"==e)a=document.createElement(e);else{let i=e.split("/");(a=document.createElement("input")).type=i[1]}return a.id=i,a.name=n,a.required=r,a.value=o||"",a}_createEditor(){this.editor=new mH({minHeight:50,tools:{header:{class:mz,config:{levels:[1,2],defaultLevel:1}}}});let e=document.createElement("div");return e.id="editorjs",e}}class mK{constructor(e){this.modal,this.card;let i=document.createElement("div");this.modal=i,i.classList.add("modal"),document.body.append(i);let n=document.createElement("div");this.card=n,n.classList.add("modal-card"),i.append(n);let r=document.createElement("h2");r.textContent=e;let o=new pY("icon","close modal","close");return o.id="close",n.append(r,o),o.addEventListener("click",()=>{i.remove()}),{modal:i,card:n}}}class mW extends mK{constructor(e,i,n,r){super(e);let o=new mq(i,n,r);return this.card.append(o),this.modal}}class m${constructor(){let e=new mW("Add Collection",[{type:"input/text",text:"name",required:!0},{type:"textarea",text:"description"}],"create",pG.routes.collections.create);document.body.append(e)}}function mG(e,i,n){let r=document.getElementById("page-header"),o=document.createElement("h1");if(o.textContent=e,r.append(o),i){let e=function(){let e=new pY("icon","back","arrow_back");return e.id="back-nav",e}();r.prepend(e),e.addEventListener("click",()=>{window.location.assign(i)})}if(n){let e=document.createElement("span");e.id="page-actions",r.append(e),n.forEach(i=>{e.append(i)})}}class mY{constructor(e){mG("My collections",null,this.pageActions());let i=document.getElementById("page-content");pG.routes.collections.readAll(e.uid).then(e=>{let n=new pQ({gridType:"collection",itemType:pX,items:e,clickablePath:"/collection/"});i.append(n)})}pageActions(){let e=new pY("text-icon","add collection","add");return e.addEventListener("click",()=>{new m$}),[e]}}class mX{constructor(){let e=document.createElement("div");e.id="firebaseui-auth-container",mG("Welcome to Sumupp"),document.getElementById("page-content").append(e),pG.auth.user.signIn(e)}}class mJ{constructor(e){return this.note=e,this.createCard()}createCard(){let e=document.createElement("article");return e.classList.add("note-card"),e.id=this.note.id,this.note.data.blocks.forEach(i=>{let n=function(e,i){switch(e){case"paragraph":return"p";case"header":return"h"+i}}(i.type,i.data.level),r=document.createElement(n);r.textContent=i.data.text,e.append(r)}),e}}class mQ{constructor(e){this.id=e,this.collection=null,this.notes=[],this.renderShell(),this.populateShell()}renderShell(){document.getElementById("page-content").innerHTML=`
      <p class="description"></p>
      <hr>
    `}async populateShell(){pG.routes.collections.read(this.id).then(e=>{this.collection=e,mG(this.collection.name,"/",this.pageActions()),this.collection.description&&(document.querySelector(".description").textContent=this.collection.description)}),pG.routes.notes.readAll(this.id).then(e=>{this.notes=e;let i=new pQ({gridType:"note",items:e,itemType:mJ,clickablePath:"/collection/"+this.id+"/note/"});document.getElementById("page-content").append(i)})}pageActions(){let e=new pY("text-icon","add new note","add");return e.addEventListener("click",()=>{window.location.assign(window.location.pathname+"/add")}),[e]}}class mZ{constructor(e){this.id=e,mG("Add Note","/collection/"+e);let i=new mq([{type:"editor"},{type:"section",text:"source"},{type:"input/text",text:"source"},{type:"input/hidden",text:"collectionId",value:this.id}],"Add Note",pG.routes.notes.create,"/collection/"+this.id);document.getElementById("page-content").append(i)}}var m0={};"undefined"!=typeof self&&self,m0=function(){var e={407:function(e,i,n){n.d(i,{default:function(){return D}});var r=/([:*])(\w+)/g,o=/\*/g,a=/\/\?/g;function l(e){return void 0===e&&(e="/"),v()?location.pathname+location.search+location.hash:e}function c(e){return e.replace(/\/+$/,"").replace(/^\/+/,"")}function u(e){return"string"==typeof e}function h(e){return e&&e.indexOf("#")>=0&&e.split("#").pop()||""}function d(e){var i=c(e).split(/\?(.*)?$/);return[c(i[0]),i.slice(1).join("")]}function f(e){for(var i={},n=e.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(""!==o[0]){var a=decodeURIComponent(o[0]);i[a]?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(decodeURIComponent(o[1]||""))):i[a]=decodeURIComponent(o[1]||"")}}return i}function p(e,i){var n,l=d(c(e.currentLocationPath)),p=l[0],g=l[1],m=""===g?null:f(g),v=[];if(u(i.path)){if(n="(?:/^|^)"+c(i.path).replace(r,function(e,i,n){return v.push(n),"([^/]+)"}).replace(o,"?(?:.*)").replace(a,"/?([^/]+|)")+"$",""===c(i.path)&&""===c(p))return{url:p,queryString:g,hashString:h(e.to),route:i,data:null,params:m}}else n=i.path;var b=RegExp(n,""),y=p.match(b);if(y){var w=u(i.path)?0===v.length?null:y?y.slice(1,y.length).reduce(function(e,i,n){return null===e&&(e={}),e[v[n]]=decodeURIComponent(i),e},null):null:y.groups?y.groups:y.slice(1);return{url:c(p.replace(RegExp("^"+e.instance.root),"")),queryString:g,hashString:h(e.to),route:i,data:w,params:m}}return!1}function g(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function m(e,i){return void 0===e[i]||!0===e[i]}function v(){return"undefined"!=typeof window}function b(e,i,n){var r=i||{},o=0;!function i(){e[o]?Array.isArray(e[o])?(e.splice.apply(e,[o,1].concat(e[o][0](r)?e[o][1]:e[o][2])),i()):e[o](r,function(e){void 0===e||!0===e?(o+=1,i()):n&&n(r)}):n&&n(r)}()}function y(e,i){void 0===e.currentLocationPath&&(e.currentLocationPath=e.to=l(e.instance.root)),e.currentLocationPath=e.instance._checkForAHash(e.currentLocationPath),i()}function w(e,i){for(var n=0;n<e.instance.routes.length;n++){var r=p(e,e.instance.routes[n]);if(r&&(e.matches||(e.matches=[]),e.matches.push(r),"ONE"===e.resolveOptions.strategy))return void i()}i()}function k(e,i){e.navigateOptions&&(void 0!==e.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==e.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),i()}function E(e,i){!0===e.navigateOptions.force?(e.instance._setCurrent([e.instance._pathToMatchObject(e.to)]),i(!1)):i()}b.if=function(e,i,n){return Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]),[e,i,n]};var I=v(),_=g();function S(e,i){if(m(e.navigateOptions,"updateBrowserURL")){var n=("/"+e.to).replace(/\/\//g,"/"),r=I&&e.resolveOptions&&!0===e.resolveOptions.hash;_?(history[e.navigateOptions.historyAPIMethod||"pushState"](e.navigateOptions.stateObj||{},e.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(e.instance.__freezeListening=!0,setTimeout(function(){if(!r){var i=location.hash;location.hash="",location.hash=i}e.instance.__freezeListening=!1},1))):I&&(window.location.href=e.to)}i()}function T(e,i){var n=e.instance;n.lastResolved()?b(n.lastResolved().map(function(i){return function(n,r){if(i.route.hooks&&i.route.hooks.leave){var o=!1,a=e.instance.matchLocation(i.route.path,e.currentLocationPath,!1);o="*"!==i.route.path?!a:!(e.matches&&e.matches.find(function(e){return i.route.path===e.route.path})),m(e.navigateOptions,"callHooks")&&o?b(i.route.hooks.leave.map(function(i){return function(n,r){return i(function(i){!1===i?e.instance.__markAsClean(e):r()},e.matches&&e.matches.length>0?1===e.matches.length?e.matches[0]:e.matches:void 0)}}).concat([function(){return r()}])):r()}else r()}}),{},function(){return i()}):i()}function C(e,i){m(e.navigateOptions,"updateState")&&e.instance._setCurrent(e.matches),i()}var x=[function(e,i){var n=e.instance.lastResolved();if(n&&n[0]&&n[0].route===e.match.route&&n[0].url===e.match.url&&n[0].queryString===e.match.queryString)return n.forEach(function(i){i.route.hooks&&i.route.hooks.already&&m(e.navigateOptions,"callHooks")&&i.route.hooks.already.forEach(function(i){return i(e.match)})}),void i(!1);i()},function(e,i){e.match.route.hooks&&e.match.route.hooks.before&&m(e.navigateOptions,"callHooks")?b(e.match.route.hooks.before.map(function(i){return function(n,r){return i(function(i){!1===i?e.instance.__markAsClean(e):r()},e.match)}}).concat([function(){return i()}])):i()},function(e,i){m(e.navigateOptions,"callHandler")&&e.match.route.handler(e.match),e.instance.updatePageLinks(),i()},function(e,i){e.match.route.hooks&&e.match.route.hooks.after&&m(e.navigateOptions,"callHooks")&&e.match.route.hooks.after.forEach(function(i){return i(e.match)}),i()}],A=[T,function(e,i){var n=e.instance._notFoundRoute;if(n){e.notFoundHandled=!0;var r=d(e.currentLocationPath),o=r[0],a=r[1],l=h(e.to);n.path=c(o);var u={url:n.path,queryString:a,hashString:l,data:null,route:n,params:""!==a?f(a):null};e.matches=[u],e.match=u}i()},b.if(function(e){return e.notFoundHandled},x.concat([C]),[function(e,i){e.resolveOptions&&!1!==e.resolveOptions.noMatchWarning&&void 0!==e.resolveOptions.noMatchWarning||console.warn('Navigo: "'+e.currentLocationPath+"\" didn't match any of the registered routes."),i()},function(e,i){e.instance._setCurrent(null),i()}])];function O(){return(O=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,i){var n=0;T(e,function r(){n!==e.matches.length?b(x,O({},e,{match:e.matches[n]}),function(){n+=1,r()}):C(e,i)})}function R(e){e.instance.__markAsClean(e)}function N(){return(N=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P="[data-navigo]";function D(e,i){var n,r=i||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:P},o=this,a="/",m=null,I=[],_=!1,T=g(),C=v();function x(e){return e.indexOf("#")>=0&&(e=!0===r.hash?e.split("#")[1]||"/":e.split("#")[0]),e}function O(e){return c(a+"/"+c(e))}function D(e,i,n,r){var o,a;return e=u(e)?O(e):e,{name:r||c(String(e)),path:e,handler:i,hooks:(void 0===(o=n)&&(o=[]),void 0===a&&(a={}),o.filter(function(e){return e}).forEach(function(e){["before","after","already","leave"].forEach(function(i){e[i]&&(a[i]||(a[i]=[]),a[i].push(e[i]))})}),a)}}function M(e,i){if(!o.__dirty){o.__dirty=!0;var n={instance:o,to:e=e?c(a)+"/"+c(e):void 0,currentLocationPath:e,navigateOptions:{},resolveOptions:N({},r,i)};return b([y,w,b.if(function(e){var i=e.matches;return i&&i.length>0},L,A)],n,R),!!n.matches&&n.matches}o.__waiting.push(function(){return o.resolve(e,i)})}function B(e,i){if(o.__dirty)o.__waiting.push(function(){return o.navigate(e,i)});else{o.__dirty=!0;var n={instance:o,to:e=c(a)+"/"+c(e),navigateOptions:i||{},resolveOptions:i&&i.resolveOptions?i.resolveOptions:r,currentLocationPath:x(e)};b([k,E,w,b.if(function(e){var i=e.matches;return i&&i.length>0},L,A),S,R],n,R)}}function F(){if(C)return(C?[].slice.call(document.querySelectorAll(r.linksSelector||P)):[]).forEach(function(e){"false"!==e.getAttribute("data-navigo")&&"_blank"!==e.getAttribute("target")?e.hasListenerAttached||(e.hasListenerAttached=!0,e.navigoHandler=function(i){if((i.ctrlKey||i.metaKey)&&"a"===i.target.tagName.toLowerCase())return!1;var n=e.getAttribute("href");if(null==n)return!1;if(n.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var r=new URL(n);n=r.pathname+r.search}catch(e){}var a=function(e){if(!e)return{};var i,n=e.split(","),r={};return n.forEach(function(e){var n=e.split(":").map(function(e){return e.replace(/(^ +| +$)/g,"")});switch(n[0]){case"historyAPIMethod":r.historyAPIMethod=n[1];break;case"resolveOptionsStrategy":i||(i={}),i.strategy=n[1];break;case"resolveOptionsHash":i||(i={}),i.hash="true"===n[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[n[0]]="true"===n[1]}}),i&&(r.resolveOptions=i),r}(e.getAttribute("data-navigo-options"));_||(i.preventDefault(),i.stopPropagation(),o.navigate(c(n),a))},e.addEventListener("click",e.navigoHandler)):e.hasListenerAttached&&e.removeEventListener("click",e.navigoHandler)}),o}function U(e,i,n){var r=I.find(function(i){return i.name===e}),o=null;if(r){if(o=r.path,i)for(var l in i)o=o.replace(":"+l,i[l]);o=o.match(/^\//)?o:"/"+o}return o&&n&&!n.includeRoot&&(o=o.replace(RegExp("^/"+a),"")),o}function j(e){var i=d(c(e)),r=i[0],o=i[1],a=""===o?null:f(o);return{url:r,queryString:o,hashString:h(e),route:D(r,function(){},[n],r),data:null,params:a}}function V(e,i,n){return"string"==typeof i&&(i=H(i)),i?(i.hooks[e]||(i.hooks[e]=[]),i.hooks[e].push(n),function(){i.hooks[e]=i.hooks[e].filter(function(e){return e!==n})}):(console.warn("Route doesn't exists: "+i),function(){})}function H(e){return"string"==typeof e?I.find(function(i){return i.name===O(e)}):I.find(function(i){return i.handler===e})}e?a=c(e):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=a,this.routes=I,this.destroyed=_,this.current=m,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=function(e){e.instance.__dirty=!1,e.instance.__waiting.length>0&&e.instance.__waiting.shift()()},this.on=function(e,i,r){var o=this;return"object"!=typeof e||e instanceof RegExp?("function"==typeof e&&(r=i,i=e,e=a),I.push(D(e,i,[n,r]))):Object.keys(e).forEach(function(i){if("function"==typeof e[i])o.on(i,e[i]);else{var r=e[i],a=r.uses,l=r.as,c=r.hooks;I.push(D(i,a,[n,c],l))}}),this},this.off=function(e){return this.routes=I=I.filter(function(i){return u(e)?c(i.path)!==c(e):"function"==typeof e?e!==i.handler:String(i.path)!==String(e)}),this},this.resolve=M,this.navigate=B,this.navigateByName=function(e,i,n){var r=U(e,i);return null!==r&&(B(r.replace(RegExp("^/?"+a),""),n),!0)},this.destroy=function(){this.routes=I=[],T&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=_=!0},this.notFound=function(e,i){return o._notFoundRoute=D("*",e,[n,i],"__NOT_FOUND__"),this},this.updatePageLinks=F,this.link=function(e){return"/"+a+"/"+c(e)},this.hooks=function(e){return n=e,this},this.extractGETParameters=function(e){return d(x(e))},this.lastResolved=function(){return m},this.generate=U,this.getLinkPath=function(e){return e.getAttribute("href")},this.match=function(e){var i={instance:o,currentLocationPath:e,to:e,navigateOptions:{},resolveOptions:r};return w(i,function(){}),!!i.matches&&i.matches},this.matchLocation=function(e,i,n){void 0!==i&&(void 0===n||n)&&(i=O(i));var r={instance:o,to:i,currentLocationPath:i};return y(r,function(){}),"string"==typeof e&&(e=void 0===n||n?O(e):e),p(r,{name:String(e),path:e,handler:function(){},hooks:{}})||!1},this.getCurrentLocation=function(){return j(c(l(a)).replace(RegExp("^"+a),""))},this.addBeforeHook=V.bind(this,"before"),this.addAfterHook=V.bind(this,"after"),this.addAlreadyHook=V.bind(this,"already"),this.addLeaveHook=V.bind(this,"leave"),this.getRoute=H,this._pathToMatchObject=j,this._clean=c,this._checkForAHash=x,this._setCurrent=function(e){return m=o.current=e},(function(){T&&(this.__popstateListener=function(){o.__freezeListening||M()},window.addEventListener("popstate",this.__popstateListener))}).call(this),F.call(this)}}},i={};function n(r){if(i[r])return i[r].exports;var o=i[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=function(e,i){for(var r in i)n.o(i,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n(407)}().default;class m1{constructor(e){this.source=e;let i=document.createElement("div");if(i.classList.add("source"),this.source.name){let e=document.createElement("p");e.textContent=this.source.name,i.append(e)}if(this.source.link){let e=document.createElement("a");e.textContent="view source",e.href=this.source.link,i.append(e)}return i}}class m2{constructor(e,i){this.noteId=e,this.collectionId=i,this.note=null,this.source=null,this.renderShell(),mG("Note","/collection/"+this.collectionId,this.pageActions()),this.populateShell()}renderShell(){document.getElementById("page-content").innerHTML=`
      <div class="note-page-container"></div>
    `}async populateShell(){let e=document.querySelector(".note-page-container");this.note=await pG.routes.notes.read(this.noteId);let i=new mJ(this.note);e.append(i),this.source=await pG.routes.sources.read(this.note.source);let n=new m1(this.source);e.append(n)}pageActions(){let e=new pY("icon","delete note","delete");return e.addEventListener("click",async()=>{confirm("Are you sure you want to delete this note? This action cannot be undone.")&&(await pG.routes.notes.delete(this.note.id,this.collectionId),window.location.replace("/collection/"+this.collectionId))}),[e]}}const m4=new(g(m0))("/");pG.auth.onAuthStateChanged(e=>{!function(){if(pG.auth.currentUser){document.getElementById("user-actions").innerHTML=`
    <p>Signed in as: ${pG.auth.currentUser.displayName}</p>
    `;let e=new pY("text","sign out");document.getElementById("user-actions").append(e),e.addEventListener("click",()=>{signOut()})}}(),m4.on("/",()=>{e?new mY(e):m4.navigate("/welcome")}).on("/welcome",()=>{e?m4.navigate("/"):new mX}).on("/collection/:id",async({data:e})=>{new mQ(e.id)}).on("/collection/:id/add",async({data:e})=>{new mZ(e.id)}).on("/collection/:collectionId/note/:noteId",async({data:e})=>{new m2(e.noteId,e.collectionId)}).resolve()});
//# sourceMappingURL=index.85301e12.js.map
